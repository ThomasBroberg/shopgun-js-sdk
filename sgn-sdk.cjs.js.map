{"version":3,"file":"sgn-sdk.cjs.js","sources":["../rollupPluginBabelHelpers","../lib/coffeescript/util.coffee","../lib/coffeescript/config.coffee","../lib/coffeescript/translations.coffee","../lib/coffeescript/core.coffee","../lib/coffeescript/sgn.coffee","../lib/coffeescript/storage/client-local.coffee","../lib/coffeescript/storage/client-session.coffee","../lib/coffeescript/storage/client-cookie.coffee","../vendor/xmlhttprequest.js","../lib/coffeescript/request/index.coffee","../lib/coffeescript/kits/assets/file-upload.coffee","../lib/coffeescript/kits/assets/index.coffee","../lib/coffeescript/kits/events/tracker.coffee","../lib/coffeescript/kits/events/pulse.coffee","../lib/coffeescript/kits/events/index.coffee","../lib/coffeescript/kits/graph/request.coffee","../lib/coffeescript/kits/graph/index.coffee","../lib/coffeescript/kits/core/request.coffee","../lib/coffeescript/kits/core/session.coffee","../lib/coffeescript/kits/core/index.coffee","../lib/coffeescript/kits/paged-publication/page-spread.coffee","../lib/coffeescript/kits/paged-publication/page-spreads.coffee","../lib/coffeescript/kits/paged-publication/core.coffee","../lib/coffeescript/kits/paged-publication/hotspots.coffee","../lib/coffeescript/key-codes.coffee","../lib/coffeescript/kits/paged-publication/controls.coffee","../lib/coffeescript/kits/paged-publication/event-tracking.coffee","../lib/coffeescript/kits/paged-publication/viewer.coffee","../lib/coffeescript/kits/paged-publication/bootstrapper.coffee","../lib/coffeescript/kits/paged-publication/index.coffee","../lib/coffeescript/kits/incito-publication/viewer.coffee","../lib/coffeescript/kits/incito-publication/controls.coffee","../lib/coffeescript/kits/incito-publication/bootstrapper.coffee","../lib/coffeescript/kits/incito-publication/index.coffee","../vendor/gator.js","../lib/coffeescript/kits/core-ui/offer-details.coffee","../lib/coffeescript/kits/core-ui/popover.coffee","../lib/coffeescript/kits/core-ui/single-choice-popover.coffee","../lib/coffeescript/kits/core-ui/index.coffee","../lib/coffeescript/index.coffee"],"sourcesContent":["export { _typeof as typeof, _jsx as jsx, _asyncIterator as asyncIterator, _AwaitValue as AwaitValue, _AsyncGenerator as AsyncGenerator, _wrapAsyncGenerator as wrapAsyncGenerator, _awaitAsyncGenerator as awaitAsyncGenerator, _asyncGeneratorDelegate as asyncGeneratorDelegate, _asyncToGenerator as asyncToGenerator, _classCallCheck as classCallCheck, _createClass as createClass, _defineEnumerableProperties as defineEnumerableProperties, _defaults as defaults, _defineProperty as defineProperty, _extends as extends, _objectSpread as objectSpread, _get as get, _inherits as inherits, _inheritsLoose as inheritsLoose, _wrapNativeSuper as wrapNativeSuper, _instanceof as instanceof, _interopRequireDefault as interopRequireDefault, _interopRequireWildcard as interopRequireWildcard, _newArrowCheck as newArrowCheck, _objectDestructuringEmpty as objectDestructuringEmpty, _objectWithoutProperties as objectWithoutProperties, _assertThisInitialized as assertThisInitialized, _possibleConstructorReturn as possibleConstructorReturn, _set as set, _taggedTemplateLiteral as taggedTemplateLiteral, _taggedTemplateLiteralLoose as taggedTemplateLiteralLoose, _temporalRef as temporalRef, _readOnlyError as readOnlyError, _classNameTDZError as classNameTDZError, _temporalUndefined as temporalUndefined, _slicedToArray as slicedToArray, _slicedToArrayLoose as slicedToArrayLoose, _toArray as toArray, _toConsumableArray as toConsumableArray, _arrayWithoutHoles as arrayWithoutHoles, _arrayWithHoles as arrayWithHoles, _iterableToArray as iterableToArray, _iterableToArrayLimit as iterableToArrayLimit, _iterableToArrayLimitLoose as iterableToArrayLimitLoose, _nonIterableSpread as nonIterableSpread, _nonIterableRest as nonIterableRest, _skipFirstGeneratorNext as skipFirstGeneratorNext, _toPropertyKey as toPropertyKey, _initializerWarningHelper as initializerWarningHelper, _initializerDefineProperty as initializerDefineProperty, _applyDecoratedDescriptor as applyDecoratedDescriptor };\n\nfunction _typeof(obj) {\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function (obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function (obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nvar REACT_ELEMENT_TYPE;\n\nfunction _jsx(type, props, key, children) {\n  if (!REACT_ELEMENT_TYPE) {\n    REACT_ELEMENT_TYPE = typeof Symbol === \"function\" && Symbol.for && Symbol.for(\"react.element\") || 0xeac7;\n  }\n\n  var defaultProps = type && type.defaultProps;\n  var childrenLength = arguments.length - 3;\n\n  if (!props && childrenLength !== 0) {\n    props = {\n      children: void 0\n    };\n  }\n\n  if (props && defaultProps) {\n    for (var propName in defaultProps) {\n      if (props[propName] === void 0) {\n        props[propName] = defaultProps[propName];\n      }\n    }\n  } else if (!props) {\n    props = defaultProps || {};\n  }\n\n  if (childrenLength === 1) {\n    props.children = children;\n  } else if (childrenLength > 1) {\n    var childArray = new Array(childrenLength);\n\n    for (var i = 0; i < childrenLength; i++) {\n      childArray[i] = arguments[i + 3];\n    }\n\n    props.children = childArray;\n  }\n\n  return {\n    $$typeof: REACT_ELEMENT_TYPE,\n    type: type,\n    key: key === undefined ? null : '' + key,\n    ref: null,\n    props: props,\n    _owner: null\n  };\n}\n\nfunction _asyncIterator(iterable) {\n  if (typeof Symbol === \"function\") {\n    if (Symbol.asyncIterator) {\n      var method = iterable[Symbol.asyncIterator];\n      if (method != null) return method.call(iterable);\n    }\n\n    if (Symbol.iterator) {\n      return iterable[Symbol.iterator]();\n    }\n  }\n\n  throw new TypeError(\"Object is not async iterable\");\n}\n\nfunction _AwaitValue(value) {\n  this.wrapped = value;\n}\n\nfunction _AsyncGenerator(gen) {\n  var front, back;\n\n  function send(key, arg) {\n    return new Promise(function (resolve, reject) {\n      var request = {\n        key: key,\n        arg: arg,\n        resolve: resolve,\n        reject: reject,\n        next: null\n      };\n\n      if (back) {\n        back = back.next = request;\n      } else {\n        front = back = request;\n        resume(key, arg);\n      }\n    });\n  }\n\n  function resume(key, arg) {\n    try {\n      var result = gen[key](arg);\n      var value = result.value;\n      var wrappedAwait = value instanceof _AwaitValue;\n      Promise.resolve(wrappedAwait ? value.wrapped : value).then(function (arg) {\n        if (wrappedAwait) {\n          resume(\"next\", arg);\n          return;\n        }\n\n        settle(result.done ? \"return\" : \"normal\", arg);\n      }, function (err) {\n        resume(\"throw\", err);\n      });\n    } catch (err) {\n      settle(\"throw\", err);\n    }\n  }\n\n  function settle(type, value) {\n    switch (type) {\n      case \"return\":\n        front.resolve({\n          value: value,\n          done: true\n        });\n        break;\n\n      case \"throw\":\n        front.reject(value);\n        break;\n\n      default:\n        front.resolve({\n          value: value,\n          done: false\n        });\n        break;\n    }\n\n    front = front.next;\n\n    if (front) {\n      resume(front.key, front.arg);\n    } else {\n      back = null;\n    }\n  }\n\n  this._invoke = send;\n\n  if (typeof gen.return !== \"function\") {\n    this.return = undefined;\n  }\n}\n\nif (typeof Symbol === \"function\" && Symbol.asyncIterator) {\n  _AsyncGenerator.prototype[Symbol.asyncIterator] = function () {\n    return this;\n  };\n}\n\n_AsyncGenerator.prototype.next = function (arg) {\n  return this._invoke(\"next\", arg);\n};\n\n_AsyncGenerator.prototype.throw = function (arg) {\n  return this._invoke(\"throw\", arg);\n};\n\n_AsyncGenerator.prototype.return = function (arg) {\n  return this._invoke(\"return\", arg);\n};\n\nfunction _wrapAsyncGenerator(fn) {\n  return function () {\n    return new _AsyncGenerator(fn.apply(this, arguments));\n  };\n}\n\nfunction _awaitAsyncGenerator(value) {\n  return new _AwaitValue(value);\n}\n\nfunction _asyncGeneratorDelegate(inner, awaitWrap) {\n  var iter = {},\n      waiting = false;\n\n  function pump(key, value) {\n    waiting = true;\n    value = new Promise(function (resolve) {\n      resolve(inner[key](value));\n    });\n    return {\n      done: false,\n      value: awaitWrap(value)\n    };\n  }\n\n  ;\n\n  if (typeof Symbol === \"function\" && Symbol.iterator) {\n    iter[Symbol.iterator] = function () {\n      return this;\n    };\n  }\n\n  iter.next = function (value) {\n    if (waiting) {\n      waiting = false;\n      return value;\n    }\n\n    return pump(\"next\", value);\n  };\n\n  if (typeof inner.throw === \"function\") {\n    iter.throw = function (value) {\n      if (waiting) {\n        waiting = false;\n        throw value;\n      }\n\n      return pump(\"throw\", value);\n    };\n  }\n\n  if (typeof inner.return === \"function\") {\n    iter.return = function (value) {\n      return pump(\"return\", value);\n    };\n  }\n\n  return iter;\n}\n\nfunction _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function step(key, arg) {\n        try {\n          var info = gen[key](arg);\n          var value = info.value;\n        } catch (error) {\n          reject(error);\n          return;\n        }\n\n        if (info.done) {\n          resolve(value);\n        } else {\n          Promise.resolve(value).then(_next, _throw);\n        }\n      }\n\n      function _next(value) {\n        step(\"next\", value);\n      }\n\n      function _throw(err) {\n        step(\"throw\", err);\n      }\n\n      _next();\n    });\n  };\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _defineEnumerableProperties(obj, descs) {\n  for (var key in descs) {\n    var desc = descs[key];\n    desc.configurable = desc.enumerable = true;\n    if (\"value\" in desc) desc.writable = true;\n    Object.defineProperty(obj, key, desc);\n  }\n\n  if (Object.getOwnPropertySymbols) {\n    var objectSymbols = Object.getOwnPropertySymbols(descs);\n\n    for (var i = 0; i < objectSymbols.length; i++) {\n      var sym = objectSymbols[i];\n      var desc = descs[sym];\n      desc.configurable = desc.enumerable = true;\n      if (\"value\" in desc) desc.writable = true;\n      Object.defineProperty(obj, sym, desc);\n    }\n  }\n\n  return obj;\n}\n\nfunction _defaults(obj, defaults) {\n  var keys = Object.getOwnPropertyNames(defaults);\n\n  for (var i = 0; i < keys.length; i++) {\n    var key = keys[i];\n    var value = Object.getOwnPropertyDescriptor(defaults, key);\n\n    if (value && value.configurable && obj[key] === undefined) {\n      Object.defineProperty(obj, key, value);\n    }\n  }\n\n  return obj;\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n    var ownKeys = Object.keys(source);\n\n    if (typeof Object.getOwnPropertySymbols === 'function') {\n      ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(source, sym).enumerable;\n      }));\n    }\n\n    ownKeys.forEach(function (key) {\n      _defineProperty(target, key, source[key]);\n    });\n  }\n\n  return target;\n}\n\nfunction _get(object, property, receiver) {\n  if (object === null) object = Function.prototype;\n  var desc = Object.getOwnPropertyDescriptor(object, property);\n\n  if (desc === undefined) {\n    var parent = Object.getPrototypeOf(object);\n\n    if (parent === null) {\n      return undefined;\n    } else {\n      return _get(parent, property, receiver);\n    }\n  } else if (\"value\" in desc) {\n    return desc.value;\n  } else {\n    var getter = desc.get;\n\n    if (getter === undefined) {\n      return undefined;\n    }\n\n    return getter.call(receiver);\n  }\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n}\n\nfunction _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  subClass.__proto__ = superClass;\n}\n\nfunction _gPO(o) {\n  _gPO = Object.getPrototypeOf || function _gPO(o) {\n    return o.__proto__;\n  };\n\n  return _gPO(o);\n}\n\nfunction _sPO(o, p) {\n  _sPO = Object.setPrototypeOf || function _sPO(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _sPO(o, p);\n}\n\nfunction _construct(Parent, args, Class) {\n  _construct = typeof Reflect === \"object\" && Reflect.construct || function _construct(Parent, args, Class) {\n    var Constructor,\n        a = [null];\n    a.push.apply(a, args);\n    Constructor = Parent.bind.apply(Parent, a);\n    return _sPO(new Constructor(), Class.prototype);\n  };\n\n  return _construct(Parent, args, Class);\n}\n\nfunction _wrapNativeSuper(Class) {\n  var _cache = typeof Map === \"function\" ? new Map() : undefined;\n\n  _wrapNativeSuper = function _wrapNativeSuper(Class) {\n    if (typeof Class !== \"function\") {\n      throw new TypeError(\"Super expression must either be null or a function\");\n    }\n\n    if (typeof _cache !== \"undefined\") {\n      if (_cache.has(Class)) return _cache.get(Class);\n\n      _cache.set(Class, Wrapper);\n    }\n\n    function Wrapper() {}\n\n    Wrapper.prototype = Object.create(Class.prototype, {\n      constructor: {\n        value: Wrapper,\n        enumerable: false,\n        writable: true,\n        configurable: true\n      }\n    });\n    return _sPO(Wrapper, _sPO(function Super() {\n      return _construct(Class, arguments, _gPO(this).constructor);\n    }, Class));\n  };\n\n  return _wrapNativeSuper(Class);\n}\n\nfunction _instanceof(left, right) {\n  if (right != null && typeof Symbol !== \"undefined\" && right[Symbol.hasInstance]) {\n    return right[Symbol.hasInstance](left);\n  } else {\n    return left instanceof right;\n  }\n}\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _interopRequireWildcard(obj) {\n  if (obj && obj.__esModule) {\n    return obj;\n  } else {\n    var newObj = {};\n\n    if (obj != null) {\n      for (var key in obj) {\n        if (Object.prototype.hasOwnProperty.call(obj, key)) {\n          var desc = Object.defineProperty && Object.getOwnPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : {};\n\n          if (desc.get || desc.set) {\n            Object.defineProperty(newObj, key, desc);\n          } else {\n            newObj[key] = obj[key];\n          }\n        }\n      }\n    }\n\n    newObj.default = obj;\n    return newObj;\n  }\n}\n\nfunction _newArrowCheck(innerThis, boundThis) {\n  if (innerThis !== boundThis) {\n    throw new TypeError(\"Cannot instantiate an arrow function\");\n  }\n}\n\nfunction _objectDestructuringEmpty(obj) {\n  if (obj == null) throw new TypeError(\"Cannot destructure undefined\");\n}\n\nfunction _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}\n\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (typeof call === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return _assertThisInitialized(self);\n}\n\nfunction _set(object, property, value, receiver) {\n  var desc = Object.getOwnPropertyDescriptor(object, property);\n\n  if (desc === undefined) {\n    var parent = Object.getPrototypeOf(object);\n\n    if (parent !== null) {\n      _set(parent, property, value, receiver);\n    }\n  } else if (\"value\" in desc && desc.writable) {\n    desc.value = value;\n  } else {\n    var setter = desc.set;\n\n    if (setter !== undefined) {\n      setter.call(receiver, value);\n    }\n  }\n\n  return value;\n}\n\nfunction _taggedTemplateLiteral(strings, raw) {\n  if (!raw) {\n    raw = strings.slice(0);\n  }\n\n  return Object.freeze(Object.defineProperties(strings, {\n    raw: {\n      value: Object.freeze(raw)\n    }\n  }));\n}\n\nfunction _taggedTemplateLiteralLoose(strings, raw) {\n  if (!raw) {\n    raw = strings.slice(0);\n  }\n\n  strings.raw = raw;\n  return strings;\n}\n\nfunction _temporalRef(val, name) {\n  if (val === _temporalUndefined) {\n    throw new ReferenceError(name + \" is not defined - temporal dead zone\");\n  } else {\n    return val;\n  }\n}\n\nfunction _readOnlyError(name) {\n  throw new Error(\"\\\"\" + name + \"\\\" is read-only\");\n}\n\nfunction _classNameTDZError(name) {\n  throw new Error(\"Class \\\"\" + name + \"\\\" cannot be referenced in computed property keys.\");\n}\n\nvar _temporalUndefined = {};\n\nfunction _slicedToArray(arr, i) {\n  return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _nonIterableRest();\n}\n\nfunction _slicedToArrayLoose(arr, i) {\n  return _arrayWithHoles(arr) || _iterableToArrayLimitLoose(arr, i) || _nonIterableRest();\n}\n\nfunction _toArray(arr) {\n  return _arrayWithHoles(arr) || _iterableToArray(arr) || _nonIterableRest();\n}\n\nfunction _toConsumableArray(arr) {\n  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread();\n}\n\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) arr2[i] = arr[i];\n\n    return arr2;\n  }\n}\n\nfunction _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nfunction _iterableToArray(iter) {\n  if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter);\n}\n\nfunction _iterableToArrayLimit(arr, i) {\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nfunction _iterableToArrayLimitLoose(arr, i) {\n  var _arr = [];\n\n  for (var _iterator = arr[Symbol.iterator](), _step; !(_step = _iterator.next()).done;) {\n    _arr.push(_step.value);\n\n    if (i && _arr.length === i) break;\n  }\n\n  return _arr;\n}\n\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance\");\n}\n\nfunction _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n}\n\nfunction _skipFirstGeneratorNext(fn) {\n  return function () {\n    var it = fn.apply(this, arguments);\n    it.next();\n    return it;\n  };\n}\n\nfunction _toPropertyKey(key) {\n  if (typeof key === \"symbol\") {\n    return key;\n  } else {\n    return String(key);\n  }\n}\n\nfunction _initializerWarningHelper(descriptor, context) {\n  throw new Error('Decorating class property failed. Please ensure that ' + 'proposal-class-properties is enabled and set to use loose mode. ' + 'To use proposal-class-properties in spec mode with decorators, wait for ' + 'the next major version of decorators in stage 2.');\n}\n\nfunction _initializerDefineProperty(target, property, descriptor, context) {\n  if (!descriptor) return;\n  Object.defineProperty(target, property, {\n    enumerable: descriptor.enumerable,\n    configurable: descriptor.configurable,\n    writable: descriptor.writable,\n    value: descriptor.initializer ? descriptor.initializer.call(context) : void 0\n  });\n}\n\nfunction _applyDecoratedDescriptor(target, property, decorators, descriptor, context) {\n  var desc = {};\n  Object['ke' + 'ys'](descriptor).forEach(function (key) {\n    desc[key] = descriptor[key];\n  });\n  desc.enumerable = !!desc.enumerable;\n  desc.configurable = !!desc.configurable;\n\n  if ('value' in desc || desc.initializer) {\n    desc.writable = true;\n  }\n\n  desc = decorators.slice().reverse().reduce(function (desc, decorator) {\n    return decorator(target, property, desc) || desc;\n  }, desc);\n\n  if (context && desc.initializer !== void 0) {\n    desc.value = desc.initializer ? desc.initializer.call(context) : void 0;\n    desc.initializer = undefined;\n  }\n\n  if (desc.initializer === void 0) {\n    Object['define' + 'Property'](target, property, desc);\n    desc = null;\n  }\n\n  return desc;\n}","util =\n    isBrowser: ->\n        typeof window == 'object' and typeof document == 'object'\n\n    isNode: ->\n        typeof process == 'object'\n\n    error: (err, options) ->\n        err.message = err.message or null\n\n        if typeof options is 'string'\n            err.message = options\n        else if typeof options is 'object' and options?\n            for key, value of options\n                err[key] = value\n\n            err.message = options.message if options.message?\n            err.code = options.code or options.name if options.code? or options.message?\n            err.stack = options.stack if options.stack?\n\n        err.name = options and options.name or err.name or err.code or 'Error'\n        err.time = new Date()\n\n        err\n\n    uuid: ->\n        'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace /[xy]/g, (c) ->\n            r = Math.random() * 16 | 0\n            v = if c is 'x' then r else (r & 0x3|0x8)\n\n            v.toString 16\n\n    getQueryParam: (field, url) ->\n        href = if url then url else window.location.href\n        reg = new RegExp '[?&]' + field + '=([^&#]*)', 'i'\n        string = reg.exec href\n\n        if string then string[1] else undefined\n\n    formatQueryParams: (queryParams = {}) ->\n        Object\n            .keys queryParams\n            .map (key) -> key + '=' + encodeURIComponent(queryParams[key])\n            .join '&'\n\n    getRandomNumberBetween: (from, to) ->\n        Math.floor(Math.random() * to) + from\n\n    getOS: ->\n        name = null\n        ua = window.navigator.userAgent\n\n        if ua.indexOf('Windows') > -1\n            name = 'Windows'\n        else if ua.indexOf('Mac') > -1\n            name = 'macOS'\n        else if ua.indexOf('X11') > -1\n            name = 'unix'\n        else if ua.indexOf('Linux') > -1\n            name = 'Linux'\n        else if ua.indexOf('iOS') > -1\n            name = 'iOS'\n        else if ua.indexOf('Android') > -1\n            name = 'Android'\n\n        name\n    \n    getDeviceCategory: ->\n        deviceCategory = 'desktop'\n\n        if navigator.platform is 'iPod' or navigator.platform is 'iPhone'\n            deviceCategory = 'mobile'\n        else if navigator.platform is 'iPad'\n            deviceCategory = 'tablet'\n        else if navigator.platform is 'Android' or /android/gi.test(navigator.userAgent)\n            if /tablet/gi.test(navigator.userAgent)\n                deviceCategory = 'tablet'\n            else\n                deviceCategory = 'mobile'\n\n        deviceCategory\n    \n    getPointer: ->\n        pointer = 'fine'\n\n        pointer = 'coarse' if matchMedia('(pointer:coarse)').matches\n\n        pointer\n    \n    getOrientation: (width, height) ->\n        if width is height\n            'quadratic'\n        else if width > height\n            'horizontal'\n        else\n            'vertical'\n\n    getScreenDimensions: ->\n        density = window.devicePixelRatio ? 1\n        logical =\n            width: window.screen.width\n            height: window.screen.height\n        physical =\n            width: Math.round logical.width * density\n            height: Math.round logical.height * density\n\n        density: density\n        logical: logical\n        physical: physical\n\n    getUtcOffsetSeconds: ->\n        now = new Date()\n        jan1 = new Date now.getFullYear(), 0, 1, 0, 0, 0, 0\n        tmp = jan1.toGMTString()\n        jan2 = new Date tmp.substring(0, tmp.lastIndexOf(' ') - 1)\n        stdTimeOffset = (jan1 - jan2) / 1000\n\n        stdTimeOffset\n\n    getUtcDstOffsetSeconds: ->\n        new Date().getTimezoneOffset() * 60 * -1\n\n    getColorBrightness: (color) ->\n        color = color.replace '#', ''\n        hex = parseInt (hex + '').replace(/[^a-f0-9]/gi, ''), 16\n        rgb = []\n        sum = 0\n        x = 0\n\n        while x < 3\n            s = parseInt(color.substring(2 * x, 2), 16)\n            rgb[x] = s\n\n            sum += s if s > 0\n\n            ++x\n\n        if sum <= 381 then 'dark' else 'light'\n\n    btoa: (str) ->\n        if util.isBrowser()\n            btoa str\n        else\n            buffer = null\n\n            if str instanceof Buffer\n                buffer = str\n            else\n                buffer = new Buffer str.toString(), 'binary'\n\n            buffer.toString 'base64'\n\n    chunk: (arr, size) ->\n        results = []\n\n        while arr.length\n            results.push arr.splice(0, size)\n\n        results\n\n    throttle: (fn, threshold = 250, scope) ->\n        last = undefined\n        deferTimer = undefined\n\n        ->\n            context = scope or @\n            now = new Date().getTime()\n            args = arguments\n\n            if last and now < last + threshold\n                clearTimeout deferTimer\n\n                deferTimer = setTimeout ->\n                    last = now\n                    \n                    fn.apply context, args\n                \n                    return\n                , threshold\n            else\n                last = now\n                fn.apply context, args\n\n            return\n\n    loadImage: (src, callback) ->\n        img = new Image()\n\n        img.onload = -> callback null, img.width, img.height\n        img.onerror = -> callback new Error()\n        img.src = src\n\n        img\n\n    distance: (lat1, lng1, lat2, lng2) ->\n        radlat1 = Math.PI * lat1 / 180\n        radlat2 = Math.PI * lat2 / 180\n        theta = lng1 - lng2\n        radtheta = Math.PI * theta / 180\n        dist = Math.sin(radlat1) * Math.sin(radlat2) + Math.cos(radlat1) * Math.cos(radlat2) * Math.cos(radtheta)\n        dist = Math.acos(dist)\n        dist = dist * 180 / Math.PI\n        dist = dist * 60 * 1.1515\n        dist = dist * 1.609344 * 1000\n\n        dist\n\n    async:\n        parallel: (asyncCalls, sharedCallback) ->\n            counter = asyncCalls.length\n            allResults = []\n            k = 0\n\n            makeCallback = (index) ->\n                ->\n                    results = []\n                    i = 0\n\n                    counter--\n\n                    while i < arguments.length\n                        results.push arguments[i]\n                        i++\n\n                    allResults[index] = results\n\n                    sharedCallback allResults if counter is 0\n\n                    return\n\n            while k < asyncCalls.length\n                asyncCalls[k] makeCallback(k)\n                k++\n\n            return\n\nmodule.exports = util\n","MicroEvent = require 'microevent'\nConfig = class Config\n    keys: [\n        'appVersion',\n        'appKey',\n        'appSecret',\n        'authToken',\n        'eventTracker',\n        'locale',\n        'coreSessionToken',\n        'coreSessionClientId',\n        'coreUrl',\n        'graphUrl',\n        'eventsTrackUrl',\n        'eventsPulseUrl',\n        'assetsFileUploadUrl'\n    ]\n\n    constructor: ->\n        @attrs = {}\n\n        return\n\n    set: (config = {}) ->\n        changedAttributes = {}\n\n        for key, value of config\n            if key in @keys\n                @attrs[key] = value\n                changedAttributes[key] = value\n\n        @trigger 'change', changedAttributes\n\n        return\n\n    get: (option) ->\n        @attrs[option]\n\nMicroEvent.mixin Config\n\nmodule.exports = Config\n","Mustache = require 'mustache'\npairs =\n    'paged_publication.hotspot_picker.header': 'Which offer did you mean?'\n    'incito_publication.product_picker.header': 'Which product?'\n\nmodule.exports =\n    t: (key, view) ->\n        template = pairs[key] ? ''\n\n        Mustache.render template, view\n\n    update: (translations) ->\n        for key, value of translations\n            pairs[key] = value\n\n        return\n","Config = require './config'\ntranslations = require './translations'\nutil = require './util'\nconfig = new Config()\n\n# Set default values.\nconfig.set\n    locale: 'en_US'\n    coreUrl: 'https://api.etilbudsavis.dk'\n    graphUrl: 'https://graph.service.shopgun.com'\n    eventsTrackUrl: 'https://events.service.shopgun.com/track'\n    eventsPulseUrl: 'wss://events.service.shopgun.com/pulse'\n    assetsFileUploadUrl: 'https://assets.service.shopgun.com/upload'\n\nmodule.exports =\n    config: config\n\n    translations: translations\n\n    util: util","module.exports = require './core'\n","SGN = require '../sgn'\nprefixKey = 'sgn-'\n\nmodule.exports =\n    key: 'sgn-'\n\n    storage: do ->\n        try\n            storage = window.localStorage\n\n            storage[\"#{prefixKey}test-storage\"] = 'foobar'\n            delete storage[\"#{prefixKey}test-storage\"]\n\n            storage\n        catch\n            {}\n\n    get: (key) ->\n        try\n            JSON.parse @storage[\"#{prefixKey}#{key}\"]\n\n    set: (key, value) ->\n        try\n            @storage[\"#{prefixKey}#{key}\"] = JSON.stringify value\n\n        @\n","SGN = require '../sgn'\nprefixKey = 'sgn-'\n\nmodule.exports =\n    key: 'sgn-'\n\n    storage: do ->\n        try\n            storage = window.sessionStorage\n\n            storage[\"#{prefixKey}test-storage\"] = 'foobar'\n            delete storage[\"#{prefixKey}test-storage\"]\n\n            storage\n        catch\n            {}\n\n    get: (key) ->\n        try\n            JSON.parse @storage[\"#{prefixKey}#{key}\"]\n\n    set: (key, value) ->\n        try\n            @storage[\"#{prefixKey}#{key}\"] = JSON.stringify value\n\n        @\n","SGN = require '../sgn'\nprefixKey = 'sgn-'\n\nmodule.exports =\n    get: (key) ->\n        return if SGN.util.isNode()\n\n        try\n            name = \"#{prefixKey}#{key}=\"\n            ca = document.cookie.split ';'\n\n            for c in ca\n                ct = c.trim()\n\n                value = ct.substring(name.length, ct.length) if ct.indexOf(name) is 0\n\n            value = JSON.parse value\n        catch err\n            value = {}\n\n        value\n\n    set: (key, value) ->\n        return if SGN.util.isNode()\n\n        try\n            days = 365\n            date = new Date()\n            str = JSON.stringify value\n\n            date.setTime date.getTime() + days * 24 * 60 * 60 * 1000\n\n            document.cookie = \"#{prefixKey}#{key}=#{str};expires=#{date.toUTCString()};path=/\"\n        catch err\n\n        return\n\n\n","/**\n * Wrapper for built-in http.js to emulate the browser XMLHttpRequest object.\n *\n * This can be used with JS designed for browsers to improve reuse of code and\n * allow the use of existing libraries.\n *\n * Usage: include(\"XMLHttpRequest.js\") and use XMLHttpRequest per W3C specs.\n *\n * @author Dan DeFelippi <dan@driverdan.com>\n * @contributor David Ellis <d.f.ellis@ieee.org>\n * @license MIT\n */\n\nvar Url = require(\"url\");\nvar cp = require(\"child_process\");\nvar fs = require(\"fs\");\n\nexports.XMLHttpRequest = function() {\n  \"use strict\";\n\n  /**\n   * Private variables\n   */\n  var self = this;\n  var http = require(\"http\");\n  var https = require(\"https\");\n\n  // Holds http.js objects\n  var request;\n  var response;\n\n  // Request settings\n  var settings = {};\n\n  // Disable header blacklist.\n  // Not part of XHR specs.\n  var disableHeaderCheck = false;\n\n  // Set some default headers\n  var defaultHeaders = {\n    \"User-Agent\": \"node-XMLHttpRequest\",\n    \"Accept\": \"*/*\",\n  };\n\n  var headers = {};\n  var headersCase = {};\n\n  // These headers are not user setable.\n  // The following are allowed but banned in the spec:\n  // * user-agent\n  var forbiddenRequestHeaders = [\n    \"accept-charset\",\n    \"accept-encoding\",\n    \"access-control-request-headers\",\n    \"access-control-request-method\",\n    \"connection\",\n    \"content-length\",\n    \"content-transfer-encoding\",\n    \"cookie\",\n    \"cookie2\",\n    \"date\",\n    \"expect\",\n    \"host\",\n    \"keep-alive\",\n    \"origin\",\n    \"referer\",\n    \"te\",\n    \"trailer\",\n    \"transfer-encoding\",\n    \"upgrade\",\n    \"via\"\n  ];\n\n  // These request methods are not allowed\n  var forbiddenRequestMethods = [\n    \"TRACE\",\n    \"TRACK\",\n    \"CONNECT\"\n  ];\n\n  // Send flag\n  var sendFlag = false;\n  // Error flag, used when errors occur or abort is called\n  var errorFlag = false;\n\n  // Event listeners\n  var listeners = {};\n\n  /**\n   * Constants\n   */\n\n  this.UNSENT = 0;\n  this.OPENED = 1;\n  this.HEADERS_RECEIVED = 2;\n  this.LOADING = 3;\n  this.DONE = 4;\n\n  /**\n   * Public vars\n   */\n\n  // Current state\n  this.readyState = this.UNSENT;\n\n  // default ready state change handler in case one is not set or is set late\n  this.onreadystatechange = null;\n\n  // Result & response\n  this.responseText = \"\";\n  this.responseXML = \"\";\n  this.status = null;\n  this.statusText = null;\n  \n  // Whether cross-site Access-Control requests should be made using\n  // credentials such as cookies or authorization headers\n  this.withCredentials = false;\n\n  /**\n   * Private methods\n   */\n\n  /**\n   * Check if the specified header is allowed.\n   *\n   * @param string header Header to validate\n   * @return boolean False if not allowed, otherwise true\n   */\n  var isAllowedHttpHeader = function(header) {\n    return disableHeaderCheck || (header && forbiddenRequestHeaders.indexOf(header.toLowerCase()) === -1);\n  };\n\n  /**\n   * Check if the specified method is allowed.\n   *\n   * @param string method Request method to validate\n   * @return boolean False if not allowed, otherwise true\n   */\n  var isAllowedHttpMethod = function(method) {\n    return (method && forbiddenRequestMethods.indexOf(method) === -1);\n  };\n\n  /**\n   * Public methods\n   */\n\n  /**\n   * Open the connection. Currently supports local server requests.\n   *\n   * @param string method Connection method (eg GET, POST)\n   * @param string url URL for the connection.\n   * @param boolean async Asynchronous connection. Default is true.\n   * @param string user Username for basic authentication (optional)\n   * @param string password Password for basic authentication (optional)\n   */\n  this.open = function(method, url, async, user, password) {\n    this.abort();\n    errorFlag = false;\n\n    // Check for valid request method\n    if (!isAllowedHttpMethod(method)) {\n      throw new Error(\"SecurityError: Request method not allowed\");\n    }\n\n    settings = {\n      \"method\": method,\n      \"url\": url.toString(),\n      \"async\": (typeof async !== \"boolean\" ? true : async),\n      \"user\": user || null,\n      \"password\": password || null\n    };\n\n    setState(this.OPENED);\n  };\n\n  /**\n   * Disables or enables isAllowedHttpHeader() check the request. Enabled by default.\n   * This does not conform to the W3C spec.\n   *\n   * @param boolean state Enable or disable header checking.\n   */\n  this.setDisableHeaderCheck = function(state) {\n    disableHeaderCheck = state;\n  };\n\n  /**\n   * Sets a header for the request or appends the value if one is already set.\n   *\n   * @param string header Header name\n   * @param string value Header value\n   */\n  this.setRequestHeader = function(header, value) {\n    if (this.readyState !== this.OPENED) {\n      throw new Error(\"INVALID_STATE_ERR: setRequestHeader can only be called when state is OPEN\");\n    }\n    if (!isAllowedHttpHeader(header)) {\n      console.warn(\"Refused to set unsafe header \\\"\" + header + \"\\\"\");\n      return;\n    }\n    if (sendFlag) {\n      throw new Error(\"INVALID_STATE_ERR: send flag is true\");\n    }\n    header = headersCase[header.toLowerCase()] || header;\n    headersCase[header.toLowerCase()] = header;\n    headers[header] = headers[header] ? headers[header] + ', ' + value : value;\n  };\n\n  /**\n   * Gets a header from the server response.\n   *\n   * @param string header Name of header to get.\n   * @return string Text of the header or null if it doesn't exist.\n   */\n  this.getResponseHeader = function(header) {\n    if (typeof header === \"string\"\n      && this.readyState > this.OPENED\n      && response\n      && response.headers\n      && response.headers[header.toLowerCase()]\n      && !errorFlag\n    ) {\n      return response.headers[header.toLowerCase()];\n    }\n\n    return null;\n  };\n\n  /**\n   * Gets all the response headers.\n   *\n   * @return string A string with all response headers separated by CR+LF\n   */\n  this.getAllResponseHeaders = function() {\n    if (this.readyState < this.HEADERS_RECEIVED || errorFlag) {\n      return \"\";\n    }\n    var result = \"\";\n\n    for (var i in response.headers) {\n      // Cookie headers are excluded\n      if (i !== \"set-cookie\" && i !== \"set-cookie2\") {\n        result += i + \": \" + response.headers[i] + \"\\r\\n\";\n      }\n    }\n    return result.substr(0, result.length - 2);\n  };\n\n  /**\n   * Gets a request header\n   *\n   * @param string name Name of header to get\n   * @return string Returns the request header or empty string if not set\n   */\n  this.getRequestHeader = function(name) {\n    if (typeof name === \"string\" && headersCase[name.toLowerCase()]) {\n      return headers[headersCase[name.toLowerCase()]];\n    }\n\n    return \"\";\n  };\n\n  /**\n   * Sends the request to the server.\n   *\n   * @param string data Optional data to send as request body.\n   */\n  this.send = function(data) {\n    if (this.readyState !== this.OPENED) {\n      throw new Error(\"INVALID_STATE_ERR: connection must be opened before send() is called\");\n    }\n\n    if (sendFlag) {\n      throw new Error(\"INVALID_STATE_ERR: send has already been called\");\n    }\n\n    var ssl = false, local = false;\n    var url = Url.parse(settings.url);\n    var host;\n    // Determine the server\n    switch (url.protocol) {\n      case \"https:\":\n        ssl = true;\n        // SSL & non-SSL both need host, no break here.\n      case \"http:\":\n        host = url.hostname;\n        break;\n\n      case \"file:\":\n        local = true;\n        break;\n\n      case undefined:\n      case null:\n      case \"\":\n        host = \"localhost\";\n        break;\n\n      default:\n        throw new Error(\"Protocol not supported.\");\n    }\n\n    // Load files off the local filesystem (file://)\n    if (local) {\n      if (settings.method !== \"GET\") {\n        throw new Error(\"XMLHttpRequest: Only GET method is supported\");\n      }\n\n      if (settings.async) {\n        fs.readFile(url.pathname, \"utf8\", function(error, data) {\n          if (error) {\n            self.handleError(error);\n          } else {\n            self.status = 200;\n            self.responseText = data;\n            setState(self.DONE);\n          }\n        });\n      } else {\n        try {\n          this.responseText = fs.readFileSync(url.pathname, \"utf8\");\n          this.status = 200;\n          setState(self.DONE);\n        } catch(e) {\n          this.handleError(e);\n        }\n      }\n\n      return;\n    }\n\n    // Default to port 80. If accessing localhost on another port be sure\n    // to use http://localhost:port/path\n    var port = url.port || (ssl ? 443 : 80);\n    // Add query string if one is used\n    var uri = url.pathname + (url.search ? url.search : \"\");\n\n    // Set the defaults if they haven't been set\n    for (var name in defaultHeaders) {\n      if (!headersCase[name.toLowerCase()]) {\n        headers[name] = defaultHeaders[name];\n      }\n    }\n\n    // Set the Host header or the server may reject the request\n    headers.Host = host;\n    if (!((ssl && port === 443) || port === 80)) {\n      headers.Host += \":\" + url.port;\n    }\n\n    // Set Basic Auth if necessary\n    if (settings.user) {\n      if (typeof settings.password === \"undefined\") {\n        settings.password = \"\";\n      }\n      var authBuf = new Buffer(settings.user + \":\" + settings.password);\n      headers.Authorization = \"Basic \" + authBuf.toString(\"base64\");\n    }\n\n    // Set content length header\n    if (settings.method === \"GET\" || settings.method === \"HEAD\") {\n      data = null;\n    } else if (data) {\n      headers[\"Content-Length\"] = Buffer.isBuffer(data) ? data.length : Buffer.byteLength(data);\n\n      if (!this.getRequestHeader(\"Content-Type\")) {\n        headers[\"Content-Type\"] = \"text/plain;charset=UTF-8\";\n      }\n    } else if (settings.method === \"POST\") {\n      // For a post with no data set Content-Length: 0.\n      // This is required by buggy servers that don't meet the specs.\n      headers[\"Content-Length\"] = 0;\n    }\n\n    var options = {\n      host: host,\n      port: port,\n      path: uri,\n      method: settings.method,\n      headers: headers,\n      agent: false,\n      withCredentials: self.withCredentials\n    };\n\n    // Reset error flag\n    errorFlag = false;\n\n    // Handle async requests\n    if (settings.async) {\n      // Use the proper protocol\n      var doRequest = ssl ? https.request : http.request;\n\n      // Request is being sent, set send flag\n      sendFlag = true;\n\n      // As per spec, this is called here for historical reasons.\n      self.dispatchEvent(\"readystatechange\");\n\n      // Handler for the response\n      var responseHandler = function responseHandler(resp) {\n        // Set response var to the response we got back\n        // This is so it remains accessable outside this scope\n        response = resp;\n        // Check for redirect\n        // @TODO Prevent looped redirects\n        if (response.statusCode === 301 || response.statusCode === 302 || response.statusCode === 303 || response.statusCode === 307) {\n          // Change URL to the redirect location\n          settings.url = response.headers.location;\n          var url = Url.parse(settings.url);\n          // Set host var in case it's used later\n          host = url.hostname;\n          // Options for the new request\n          var newOptions = {\n            hostname: url.hostname,\n            port: url.port,\n            path: url.path,\n            method: response.statusCode === 303 ? \"GET\" : settings.method,\n            headers: headers,\n            withCredentials: self.withCredentials\n          };\n\n          // Issue the new request\n          request = doRequest(newOptions, responseHandler).on(\"error\", errorHandler);\n          request.end();\n          // @TODO Check if an XHR event needs to be fired here\n          return;\n        }\n\n        response.setEncoding(\"utf8\");\n\n        setState(self.HEADERS_RECEIVED);\n        self.status = response.statusCode;\n\n        response.on(\"data\", function(chunk) {\n          // Make sure there's some data\n          if (chunk) {\n            self.responseText += chunk;\n          }\n          // Don't emit state changes if the connection has been aborted.\n          if (sendFlag) {\n            setState(self.LOADING);\n          }\n        });\n\n        response.on(\"end\", function() {\n          if (sendFlag) {\n            // Discard the end event if the connection has been aborted\n            setState(self.DONE);\n            sendFlag = false;\n          }\n        });\n\n        response.on(\"error\", function(error) {\n          self.handleError(error);\n        });\n      };\n\n      // Error handler for the request\n      var errorHandler = function errorHandler(error) {\n        self.handleError(error);\n      };\n\n      // Create the request\n      request = doRequest(options, responseHandler).on(\"error\", errorHandler);\n\n      // Node 0.4 and later won't accept empty data. Make sure it's needed.\n      if (data) {\n        request.write(data);\n      }\n\n      request.end();\n\n      self.dispatchEvent(\"loadstart\");\n    } else { // Synchronous\n      // Create a temporary file for communication with the other Node process\n      var contentFile = \".node-xmlhttprequest-content-\" + process.pid;\n      var syncFile = \".node-xmlhttprequest-sync-\" + process.pid;\n      fs.writeFileSync(syncFile, \"\", \"utf8\");\n      // The async request the other Node process executes\n      var execString = \"var http = require('http'), https = require('https'), fs = require('fs');\"\n        + \"var doRequest = http\" + (ssl ? \"s\" : \"\") + \".request;\"\n        + \"var options = \" + JSON.stringify(options) + \";\"\n        + \"var responseText = '';\"\n        + \"var req = doRequest(options, function(response) {\"\n        + \"response.setEncoding('utf8');\"\n        + \"response.on('data', function(chunk) {\"\n        + \"  responseText += chunk;\"\n        + \"});\"\n        + \"response.on('end', function() {\"\n        + \"fs.writeFileSync('\" + contentFile + \"', JSON.stringify({err: null, data: {statusCode: response.statusCode, headers: response.headers, text: responseText}}), 'utf8');\"\n        + \"fs.unlinkSync('\" + syncFile + \"');\"\n        + \"});\"\n        + \"response.on('error', function(error) {\"\n        + \"fs.writeFileSync('\" + contentFile + \"', JSON.stringify({err: error}), 'utf8');\"\n        + \"fs.unlinkSync('\" + syncFile + \"');\"\n        + \"});\"\n        + \"}).on('error', function(error) {\"\n        + \"fs.writeFileSync('\" + contentFile + \"', JSON.stringify({err: error}), 'utf8');\"\n        + \"fs.unlinkSync('\" + syncFile + \"');\"\n        + \"});\"\n        + (data ? \"req.write('\" + JSON.stringify(data).slice(1,-1).replace(/'/g, \"\\\\'\") + \"');\":\"\")\n        + \"req.end();\";\n      // Start the other Node Process, executing this string\n      var syncProc = cp.spawn(process.argv[0], [\"-e\", execString]);\n      while(fs.existsSync(syncFile)) {\n        // Wait while the sync file is empty\n      }\n      var resp = JSON.parse(fs.readFileSync(contentFile, 'utf8'));\n      // Kill the child process once the file has data\n      syncProc.stdin.end();\n      // Remove the temporary file\n      fs.unlinkSync(contentFile);\n\n      if (resp.err) {\n        self.handleError(resp.err);\n      } else {\n        response = resp.data;\n        self.status = resp.data.statusCode;\n        self.responseText = resp.data.text;\n        setState(self.DONE);\n      }\n    }\n  };\n\n  /**\n   * Called when an error is encountered to deal with it.\n   */\n  this.handleError = function(error) {\n    this.status = 0;\n    this.statusText = error;\n    this.responseText = error.stack;\n    errorFlag = true;\n    setState(this.DONE);\n    this.dispatchEvent('error');\n  };\n\n  /**\n   * Aborts a request.\n   */\n  this.abort = function() {\n    if (request) {\n      request.abort();\n      request = null;\n    }\n\n    headers = defaultHeaders;\n    this.status = 0;\n    this.responseText = \"\";\n    this.responseXML = \"\";\n\n    errorFlag = true;\n\n    if (this.readyState !== this.UNSENT\n        && (this.readyState !== this.OPENED || sendFlag)\n        && this.readyState !== this.DONE) {\n      sendFlag = false;\n      setState(this.DONE);\n    }\n    this.readyState = this.UNSENT;\n    this.dispatchEvent('abort');\n  };\n\n  /**\n   * Adds an event listener. Preferred method of binding to events.\n   */\n  this.addEventListener = function(event, callback) {\n    if (!(event in listeners)) {\n      listeners[event] = [];\n    }\n    // Currently allows duplicate callbacks. Should it?\n    listeners[event].push(callback);\n  };\n\n  /**\n   * Remove an event callback that has already been bound.\n   * Only works on the matching funciton, cannot be a copy.\n   */\n  this.removeEventListener = function(event, callback) {\n    if (event in listeners) {\n      // Filter will return a new array with the callback removed\n      listeners[event] = listeners[event].filter(function(ev) {\n        return ev !== callback;\n      });\n    }\n  };\n\n  /**\n   * Dispatch any events, including both \"on\" methods and events attached using addEventListener.\n   */\n  this.dispatchEvent = function(event) {\n    if (typeof self[\"on\" + event] === \"function\") {\n      self[\"on\" + event]();\n    }\n    if (event in listeners) {\n      for (var i = 0, len = listeners[event].length; i < len; i++) {\n        listeners[event][i].call(self);\n      }\n    }\n  };\n\n  /**\n   * Changes readyState and calls onreadystatechange.\n   *\n   * @param int state New state\n   */\n  var setState = function(state) {\n    if (state == self.LOADING || self.readyState !== state) {\n      self.readyState = state;\n\n      if (settings.async || self.readyState < self.OPENED || self.readyState === self.DONE) {\n        self.dispatchEvent(\"readystatechange\");\n      }\n\n      if (self.readyState === self.DONE && !errorFlag) {\n        self.dispatchEvent(\"load\");\n        // @TODO figure out InspectorInstrumentation::didLoadXHR(cookie)\n        self.dispatchEvent(\"loadend\");\n      }\n    }\n  };\n};","SGN = require '../sgn'\n\n{ isBrowser } = require '../util'\n\nXMLHttpRequest = if isBrowser() then window.XMLHttpRequest else require(\"../../../vendor/xmlhttprequest\").XMLHttpRequest\n\nmodule.exports = (options = {}, callback, progressCallback) ->\n    http = new XMLHttpRequest()\n    method = options.method ? 'get'\n    url = options.url\n    headers = options.headers ? {}\n\n    if options.qs?\n        queryParams = SGN.util.formatQueryParams options.qs\n\n        if url.indexOf('?') is -1\n            url += '?' + queryParams\n        else\n            url += '&' + queryParams\n\n    http.open method.toUpperCase(), url\n    http.timeout = options.timeout if options.timeout?\n    http.withCredentials = true if options.useCookies is true\n\n    if options.json is true\n        headers['Content-Type'] = 'application/json'\n        headers['Accept'] = 'application/json'\n\n    for header, value of options.headers\n        http.setRequestHeader header, value if value?\n\n    http.addEventListener 'load', ->\n        headers = http.getAllResponseHeaders().split '\\r\\n'\n        headers = headers.reduce (acc, current, i) ->\n            parts = current.split ': '\n\n            acc[parts[0].toLowerCase()] = parts[1]\n\n            acc\n        , {}\n        body = http.responseText\n\n        body = JSON.parse body if options.json is true\n\n        callback null,\n            statusCode: http.status\n            headers: headers\n            body: body\n\n        return\n    http.addEventListener 'error', ->\n        callback new Error()\n\n        return\n    http.addEventListener 'timeout', ->\n        callback new Error()\n\n        return\n    http.addEventListener 'progress', (e) ->\n        if e.lengthComputable and typeof progressCallback is 'function'\n            progressCallback e.loaded, e.total\n\n        return\n\n    if options.formData?\n        formData = new FormData()\n\n        for key, value of options.formData\n            formData.append key, value\n\n        http.send formData\n    else if options.body?\n        if options.json is true\n            http.send JSON.stringify(options.body)\n        else\n            http.send options.body\n    else\n        http.send()\n\n    return\n","SGN = require '../../sgn'\n\nmodule.exports = (options = {}, callback, progressCallback) ->\n    throw new Error('File is not defined') if not options.file?\n\n    url = SGN.config.get 'assetsFileUploadUrl'\n    timeout = 1000 * 60 * 60\n\n    SGN.request\n        method: 'post'\n        url: url\n        headers:\n            'Accept': 'application/json'\n        formData:\n            file: options.file\n        timeout: timeout\n    , (err, data) ->\n        if err?\n            callback SGN.util.error(new Error('Request error'),\n                code: 'RequestError'\n            )\n        else\n            if data.statusCode is 200\n                callback null, JSON.parse(data.body)\n            else\n                callback SGN.util.error(new Error('Request error'),\n                    code: 'RequestError'\n                    statusCode: data.statusCode\n                )\n\n        return\n    , (loaded, total) ->\n        if typeof progressCallback is 'function'\n            progressCallback\n                progress: loaded / total\n                loaded: loaded\n                total: total\n\n        return\n\n    return\n","module.exports =\n    fileUpload: require './file-upload'\n","SGN = require '../../sgn'\nclientLocalStorage = require '../../storage/client-local'\ngetPool = ->\n    data = clientLocalStorage.get 'event-tracker-pool'\n    data = [] if Array.isArray(data) is false\n\n    data\npool = getPool()\n\nclientLocalStorage.set 'event-tracker-pool', []\n\ntry\n    window.addEventListener 'unload', ->\n        pool = pool.concat getPool()\n\n        clientLocalStorage.set 'event-tracker-pool', pool\n\n        return\n    , false\n\nmodule.exports = class Tracker\n    defaultOptions:\n        trackId: null\n        dispatchInterval: 3000\n        dispatchLimit: 100\n        poolLimit: 1000\n        dryRun: false\n\n    constructor: (options = {}) ->\n        for key, value of @defaultOptions\n            @[key] = options[key] or value\n\n        @dispatching = false\n        @session =\n            id: SGN.util.uuid()\n        @client =\n            trackId: @trackId\n            id: SGN.client.id\n        @view =\n            path: []\n            previousPath: []\n            uri: null\n        @location = {}\n        @application = {}\n        @identity = {}\n\n        # Dispatch events periodically.\n        @interval = setInterval @dispatch.bind(@), @dispatchInterval\n\n        return\n\n    trackEvent: (type, properties = {}, version = '1.0.0') ->\n        throw SGN.util.error(new Error('Event type is required')) if typeof type isnt 'string'\n        return if not @trackId?\n\n        pool.push\n            id: SGN.util.uuid()\n            type: type\n            version: version\n            recordedAt: new Date().toISOString()\n            sentAt: null\n            client:\n                id: @client.id\n                trackId: @client.trackId\n            context: @getContext()\n            properties: properties\n\n        pool.shift() while @getPoolSize() > @poolLimit\n\n        @\n\n    identify: (id) ->\n        @identity.id = id\n\n        @\n\n    setLocation: (location = {}) ->\n        @location.determinedAt = new Date(location.timestamp).toISOString()\n        @location.latitude = location.latitude\n        @location.longitude = location.longitude\n        @location.altitude = location.altitude\n        @location.accuracy =\n            horizontal: location.accuracy?.horizontal\n            vertical: location.accuracy?.vertical\n        @location.speed = location.speed\n        @location.floor = location.floor\n\n        @\n\n    setApplication: (application = {}) ->\n        @application.name = application.name\n        @application.version = application.version\n        @application.build = application.build\n\n        @\n\n    setView: (path) ->\n        @view.previousPath = @view.path\n        @view.path = path if Array.isArray(path) is true\n        @view.uri = window.location.href\n\n        @\n\n    getView: ->\n        view = {}\n\n        view.path = @view.path if @view.path.length > 0\n        view.previousPath = @view.previousPath if @view.previousPath.length > 0\n        view.uri = @view.uri if @view.uri?\n\n        view\n\n    getContext: ->\n        screenDimensions = SGN.util.getScreenDimensions()\n        os = SGN.util.getOS()\n        context =\n            userAgent: window.navigator.userAgent\n            locale: navigator.language\n            timeZone:\n                utcOffsetSeconds: SGN.util.getUtcOffsetSeconds()\n                utcDstOffsetSeconds: SGN.util.getUtcDstOffsetSeconds()\n            device:\n                screen:\n                    width: screenDimensions.physical.width\n                    height: screenDimensions.physical.height\n                    density: screenDimensions.density\n            session:\n                id: @session.id\n            view: @getView()\n        application =\n            name: @application.name\n            version: @application.version\n            build: @application.build\n        campaign =\n            source: SGN.util.getQueryParam 'utm_source'\n            medium: SGN.util.getQueryParam 'utm_medium'\n            name: SGN.util.getQueryParam 'utm_campaign'\n            term: SGN.util.getQueryParam 'utm_term'\n            content: SGN.util.getQueryParam 'utm_content'\n        loc =\n            determinedAt: @location.determinedAt\n            latitude: @location.latitude\n            longitude: @location.longitude\n            altitude: @location.altitude\n            speed: @location.speed\n            floor: @location.floor\n            accuracy:\n                horizontal: @location.accuracy?.horizontal\n                vertical: @location.accuracy?.vertical\n\n        # Operating system.\n        context.os = name: os if os?\n\n        # Session referrer.\n        context.session.referrer = document.referrer if document.referrer.length > 0\n\n        # Application.\n        ['name', 'version', 'build'].forEach (key) ->\n            delete application[key] if typeof application[key] isnt 'string' or application[key].length is 0\n            return\n        context.application = application if Object.keys(application).length > 0\n\n        # Campaign.\n        ['source', 'medium', 'name', 'term', 'content'].forEach (key) ->\n            delete campaign[key] if typeof campaign[key] isnt 'string' or campaign[key].length is 0\n            return\n        context.campaign = campaign if Object.keys(campaign).length > 0\n\n        # Location.\n        ['latitude', 'longitude', 'altitude', 'speed', 'floor'].forEach (key) ->\n            delete loc[key] if typeof loc[key] isnt 'number'\n            return\n        delete loc.accuracy.horizontal if typeof loc.accuracy.horizontal isnt 'number'\n        delete loc.accuracy.vertical if typeof loc.accuracy.vertical isnt 'number'\n        delete loc.accuracy if Object.keys(loc.accuracy).length is 0\n        delete loc.determinedAt if typeof loc.determinedAt isnt 'string' or loc.determinedAt.length is 0\n        context.location = loc if Object.keys(loc).length > 0\n\n        # Person identifier.\n        context.personId = @identity.id if @identity.id?\n\n        context\n\n    getPoolSize: ->\n        pool.length\n\n    dispatch: ->\n        return if @dispatching is true or @getPoolSize() is 0\n        return pool.splice(0, @dispatchLimit) if @dryRun is true\n\n        events = pool.slice 0, @dispatchLimit\n        nacks = 0\n\n        @dispatching = true\n\n        @ship events, (err, response) =>\n            @dispatching = false\n\n            if not err?\n                response.events.forEach (resEvent) ->\n                    if resEvent.status is 'validation_error' or resEvent.status is 'ack'\n                        pool = pool.filter (poolEvent) -> poolEvent.id isnt resEvent.id\n                    else if 'nack'\n                        nacks++\n\n                    return\n\n                # Keep dispatching until the pool size reaches a sane level.\n                @dispatch() if @getPoolSize() >= @dispatchLimit and nacks is 0\n\n            return\n\n        @\n\n    ship: (events = [], callback) ->\n        http = new XMLHttpRequest()\n        url = SGN.config.get 'eventsTrackUrl'\n        payload = events: events.map (event) ->\n            event.sentAt = new Date().toISOString()\n\n            event\n\n        http.open 'POST', url\n        http.setRequestHeader 'Content-Type', 'application/json'\n        http.setRequestHeader 'Accept', 'application/json'\n        http.timeout = 1000 * 20\n        http.onload = ->\n            if http.status is 200\n                try\n                    callback null, JSON.parse(http.responseText)\n                catch err\n                    callback SGN.util.error(new Error('Could not parse JSON'))\n            else\n                callback SGN.util.error(new Error('Server did not accept request'))\n\n            return\n        http.onerror = ->\n            callback SGN.util.error(new Error('Could not perform network request'))\n\n            return\n        http.send JSON.stringify(payload)\n\n        @\n","MicroEvent = require 'microevent'\n\nclass Pulse\n    constructor: ->\n        @destroyed = false\n        @connection = @connect()\n\n        return\n\n    destroy: ->\n        @destroyed = true\n\n        @connection.close()\n\n        @\n\n    connect: ->\n        connection = new WebSocket SGN.config.get('eventsPulseUrl')\n\n        connection.onopen = @onOpen.bind @\n        connection.onmessage = @onMessage.bind @\n        connection.onerror = @onError.bind @\n        connection.onclose = @onClose.bind @\n\n        connection\n\n    onOpen: ->\n        @trigger 'open'\n\n        return\n\n    onMessage: (e) ->\n        try\n            @trigger 'event', JSON.parse(e.data)\n\n        return\n\n    onError: ->\n        return\n\n    onClose: ->\n        if @destroyed is false\n            setTimeout =>\n                @connection = @connect()\n\n                return\n            , 2000\n\n        return\n\nMicroEvent.mixin Pulse\n\nmodule.exports = Pulse\n","module.exports =\n    Tracker: require './tracker'\n\n    Pulse: require './pulse'\n","SGN = require '../../sgn'\n\nparseCookies = (cookies = []) ->\n    parsedCookies = {}\n\n    cookies.map (cookie) ->\n        parts = cookie.split '; '\n        keyValuePair = parts[0].split '='\n        key = keyValuePair[0]\n        value = keyValuePair[1]\n\n        parsedCookies[key] = value\n\n        return\n    \n    parsedCookies\n\nmodule.exports = (options = {}, callback) ->\n    url = SGN.config.get 'graphUrl'\n    timeout = 1000 * 12\n    appKey = SGN.config.get 'appKey'\n    authToken = SGN.config.get 'authToken'\n    authTokenCookieName = 'shopgun-auth-token'\n    options =\n        method: 'post'\n        url: url\n        timeout: timeout\n        json: true\n        headers: {}\n        body:\n            query: options.query\n            operationName: options.operationName\n            variables: options.variables\n\n    # Apply authorization header when app key is provided to avoid rate limiting.\n    options.headers.Authorization = 'Basic ' + SGN.util.btoa(\"app-key:#{appKey}\") if appKey?\n\n    # Set cookies manually in node.js.\n    if SGN.util.isNode() and authToken?\n        options.cookies = [\n            key: authTokenCookieName\n            value: authToken\n            url: url\n        ]\n    else if SGN.util.isBrowser()\n        options.useCookies = true\n\n    SGN.request options, (err, data) ->\n        if err?\n            callback SGN.util.error(new Error('Graph request error'),\n                code: 'GraphRequestError'\n            )\n        else\n            # Update auth token as it might have changed.\n            if SGN.util.isNode()\n                cookies = parseCookies data.headers?['set-cookie']\n                authCookie = cookies[authTokenCookieName]\n\n                if SGN.config.get('authToken') isnt authCookie\n                    SGN.config.set 'authToken', authCookie\n\n            if data.statusCode is 200\n                callback null, data.body\n            else\n                callback SGN.util.error(new Error('Graph API error'),\n                    code: 'GraphAPIError'\n                    statusCode: data.statusCode\n                )\n\n        return\n\n    return\n\n\n","module.exports =\n    request: require './request'\n","SGN = require '../../sgn'\n\nrequest = (options = {}, callback = ->, runs = 0) ->\n    SGN.CoreKit.session.ensure (err) ->\n        return callback err if err?\n\n        url = options.url ? ''\n        headers = options.headers ? {}\n        json = if typeof options.json is 'boolean' then options.json else true\n        token = SGN.config.get 'coreSessionToken'\n        clientId = SGN.config.get 'coreSessionClientId'\n        appVersion = SGN.config.get 'appVersion'\n        appSecret = SGN.config.get 'appSecret'\n        locale = SGN.config.get 'locale'\n        qs = options.qs ? {}\n        geo = options.geolocation\n\n        headers['X-Token'] = token\n        headers['X-Signature'] = SGN.CoreKit.session.sign appSecret, token if appSecret?\n\n        qs.r_locale = locale if locale?\n        qs.api_av = appVersion if appVersion?\n        qs.client_id = clientId if clientId?\n\n        if geo?\n            qs.r_lat = geo.latitude if geo.latitude? and not qs.r_lat?\n            qs.r_lng = geo.longitude if geo.longitude? and not qs.r_lng?\n            qs.r_radius = geo.radius if geo.radius? and not qs.r_radius?\n            qs.r_sensor = geo.sensor if geo.sensor? and not qs.r_sensor?\n\n        SGN.request\n            method: options.method\n            url: SGN.config.get('coreUrl') + url\n            qs: qs\n            body: options.body\n            formData: options.formData\n            headers: headers\n            json: json\n            useCookies: false\n        , (err, data) ->\n            if err?\n                callback SGN.util.error(new Error('Core request error'),\n                    code: 'CoreRequestError'\n                )\n            else\n                token = SGN.config.get 'coreSessionToken'\n                responseToken = data.headers['x-token']\n\n                SGN.CoreKit.session.saveToken responseToken if responseToken and token isnt responseToken\n\n                if data.statusCode >= 200 and data.statusCode < 300 or data.statusCode is 304\n                    callback null, data.body\n                else\n                    if runs is 0 and data.body? and data.body.code in [1101, 1107, 1108]\n                        SGN.config.set coreSessionToken: undefined\n\n                        request options, callback, ++runs\n                    else\n                        callback SGN.util.error(new Error('Core API error'),\n                            code: 'CoreAPIError'\n                            statusCode: data.statusCode\n                        ), data.body\n\n            return\n\n    return\n\nmodule.exports = request\n","SGN = require '../../sgn'\nsha256 = require 'sha256'\nclientCookieStorage = require '../../storage/client-cookie'\ncallbackQueue = []\nrenewed = false\n\nsession =\n    ttl: 1 * 60 * 60 * 24 * 60\n\n    saveToken: (token) ->\n        throw new Error('No token provided for saving') if not token\n\n        SGN.config.set coreSessionToken: token\n\n        session.saveCookie()\n\n        return\n\n    saveClientId: (clientId) ->\n        SGN.config.set coreSessionClientId: clientId\n\n        session.saveCookie()\n\n        return\n\n    saveCookie: ->\n        clientCookieStorage.set 'session',\n            token: SGN.config.get 'coreSessionToken'\n            client_id: SGN.config.get 'coreSessionClientId'\n\n        return\n\n    create: (callback) ->\n        SGN.request\n            method: 'post'\n            url: SGN.config.get('coreUrl') + '/v2/sessions'\n            json: true\n            qs:\n                api_key: SGN.config.get 'appKey'\n                token_ttl: session.ttl\n        , (err, data) ->\n            if err?\n                callback err\n            else if data.statusCode is 201\n                session.saveToken data.body.token\n                session.saveClientId data.body.client_id\n\n                callback err, data.body\n            else\n                callback new Error('Could not create session')\n\n            return\n\n        return\n    \n    update: (callback) ->\n        headers = {}\n        token = SGN.config.get 'coreSessionToken'\n        appSecret = SGN.config.get 'appSecret'\n\n        headers['X-Token'] = token\n        headers['X-Signature'] = session.sign appSecret, token if appSecret?\n\n        SGN.request\n            url: SGN.config.get('coreUrl') + '/v2/sessions'\n            headers: headers\n            json: true\n        , (err, data) ->\n            if err?\n                callback err\n            else if data.statusCode is 200\n                session.saveToken data.body.token\n                session.saveClientId data.body.client_id\n\n                callback err, data.body\n            else\n                callback new Error('Could not update session')\n\n            return\n\n        return\n\n    renew: (callback) ->\n        headers = {}\n        token = SGN.config.get 'coreSessionToken'\n        appSecret = SGN.config.get 'appSecret'\n\n        headers['X-Token'] = token\n        headers['X-Signature'] = session.sign appSecret, token if appSecret?\n\n        SGN.request\n            method: 'put'\n            url: SGN.config.get('coreUrl') + '/v2/sessions'\n            headers: headers\n            json: true\n        , (err, data) ->\n            if err?\n                callback err\n            else if data.statusCode is 200\n                session.saveToken data.body.token\n                session.saveClientId data.body.client_id\n\n                callback err, data.body\n            else\n                callback new Error('Could not renew session')\n\n            return\n\n        return\n\n    ensure: (callback) ->\n        queueCount = callbackQueue.length\n        complete = (err) ->\n            callbackQueue = callbackQueue.filter (fn) ->\n                fn err\n\n                false\n\n            return\n\n        callbackQueue.push callback\n\n        if queueCount is 0\n            if not SGN.config.get('coreSessionToken')?\n                session.create complete\n            else if renewed is false\n                renewed = true\n                session.renew (err) ->\n                    if err?\n                        session.create complete\n                    else\n                        complete()\n                    \n                    return\n            else\n                complete()\n\n        return\n\n    sign: (appSecret, token) ->\n        sha256 [appSecret, token].join('')\n\nmodule.exports = session\n","SGN = require '../../sgn'\nrequest = require './request'\nsession = require './session'\n\nmodule.exports =\n    request: request\n\n    session: session\n","MicroEvent = require 'microevent'\nSGN = require '../../sgn'\n\nclass PagedPublicationPageSpread\n    constructor: (@options = {}) ->\n        @contentsRendered = false\n        @hotspotsRendered = false\n        @el = @renderEl()\n\n        return\n\n    getId: ->\n        @options.id\n\n    getEl: ->\n        @el\n\n    getPages: ->\n        @options.pages\n\n    renderEl: ->\n        el = document.createElement 'div'\n        pageIds = @getPages().map (page) -> page.id\n\n        el.className = 'verso__page-spread sgn-pp__page-spread'\n\n        el.setAttribute 'data-id', @getId()\n        el.setAttribute 'data-type', 'page'\n        el.setAttribute 'data-width', @options.width\n        el.setAttribute 'data-page-ids', pageIds.join(',')\n        el.setAttribute 'data-max-zoom-scale', @options.maxZoomScale\n        el.setAttribute 'data-zoomable', false\n\n        el\n\n    renderContents: ->\n        id = @getId()\n        el = @getEl()\n        pages = @getPages()\n        pageCount = pages.length\n        imageLoads = 0\n\n        pages.forEach (page, i) =>\n            image = page.images.medium\n            pageEl = document.createElement 'div'\n            loaderEl = document.createElement 'div'\n\n            pageEl.className = 'sgn-pp__page verso__page'\n            pageEl.setAttribute('data-id', page.id) if page.id?\n\n            if pageCount is 2\n                pageEl.className += if i is 0 then ' verso-page--verso' else ' verso-page--recto'\n\n            pageEl.appendChild loaderEl\n            el.appendChild pageEl\n\n            loaderEl.className = 'sgn-pp-page__loader'\n            loaderEl.innerHTML = \"<span>#{page.label}</span>\"\n\n            SGN.util.loadImage image, (err, width, height) =>\n                if not err?\n                    isComplete = ++imageLoads is pageCount\n\n                    pageEl.style.backgroundImage = \"url(#{image})\"\n                    pageEl.setAttribute 'data-width', width\n                    pageEl.setAttribute 'data-height', height\n                    pageEl.innerHTML = '&nbsp;'\n\n                    el.setAttribute('data-zoomable', true) if isComplete\n\n                    @trigger 'pageLoaded', pageSpreadId: id, page: page\n                    @trigger 'pagesLoaded', pageSpreadId: id, pages: pages if isComplete\n                else\n                    loaderEl.innerHTML = '<span>!</span>'\n\n                return\n\n            return\n\n        @contentsRendered = true\n\n        @\n\n    clearContents: (pageSpread, versoPageSpread) ->\n        @el.innerHTML = ''\n        @contentsRendered = false\n\n        @\n\n    zoomIn: ->\n        pageEls = [].slice.call @el.querySelectorAll('.sgn-pp__page')\n        pages = @getPages()\n\n        pageEls.forEach (pageEl) =>\n            id = pageEl.getAttribute 'data-id'\n            page = pages.find (page) -> page.id is id\n            image = page.images.large\n\n            SGN.util.loadImage image, (err) =>\n                if not err? and @el.getAttribute('data-active') is 'true'\n                    pageEl.setAttribute 'data-image', pageEl.style.backgroundImage\n                    pageEl.style.backgroundImage = \"url(#{image})\"\n\n                return\n\n            return\n\n        return\n\n    zoomOut: ->\n        pageEls = [].slice.call @el.querySelectorAll('.sgn-pp__page[data-image]')\n\n        pageEls.forEach (pageEl) ->\n            pageEl.style.backgroundImage = pageEl.getAttribute 'data-image'\n            \n            pageEl.removeAttribute 'data-image'\n\n            return\n\n        return\n\nMicroEvent.mixin PagedPublicationPageSpread\n\nmodule.exports = PagedPublicationPageSpread\n","MicroEvent = require 'microevent'\nPageSpread = require './page-spread'\nSGN = require '../../sgn'\n\nclass PagedPublicationPageSpreads\n    constructor: (@options) ->\n        @collection = []\n        @ids = {}\n\n        return\n\n    get: (id) ->\n        @ids[id]\n\n    getFrag: ->\n        frag = document.createDocumentFragment()\n\n        @collection.forEach (pageSpread) -> frag.appendChild pageSpread.el\n\n        frag\n\n    update: (pageMode = 'single') ->\n        pageSpreads = []\n        ids = {}\n        pages = @options.pages.slice()\n        width = @options.width\n        maxZoomScale = @options.maxZoomScale\n\n        if pageMode is 'single'\n            pages.forEach (page) -> pageSpreads.push [page]\n        else\n            firstPage = pages.shift()\n            lastPage = if pages.length % 2 is 1 then pages.pop() else null\n            midstPageSpreads = SGN.util.chunk pages, 2\n\n            pageSpreads.push [firstPage] if firstPage?\n            midstPageSpreads.forEach (midstPages) -> pageSpreads.push midstPages.map (page) -> page\n            pageSpreads.push [lastPage] if lastPage?\n\n        @collection = pageSpreads.map (pages, i) =>\n            id = \"#{pageMode}-#{i}\"\n            pageSpread = new PageSpread\n                width: width\n                maxZoomScale: maxZoomScale\n                pages: pages\n                id: id\n\n            pageSpread.bind 'pageLoaded', (e) => @trigger 'pageLoaded', e\n            pageSpread.bind 'pagesLoaded', (e) => @trigger 'pagesLoaded', e\n\n            ids[id] = pageSpread\n\n            pageSpread\n        @ids = ids\n\n        @\n\nMicroEvent.mixin PagedPublicationPageSpreads\n\nmodule.exports = PagedPublicationPageSpreads\n","MicroEvent = require 'microevent'\nVerso = require 'verso-browser'\nPageSpreads = require './page-spreads'\nclientLocalStorage = require '../../storage/client-local'\nSGN = require '../../sgn'\n\nclass PagedPublicationCore\n    defaults:\n        pages: []\n        pageSpreadWidth: 100\n        pageSpreadMaxZoomScale: 2.3\n        idleDelay: 1000\n        resizeDelay: 400\n        color: '#ffffff'\n\n    constructor: (el, options = {}) ->\n        @options = @makeOptions options, @defaults\n        @pageId = @getOption 'pageId'\n        @els =\n            root: el\n            pages: el.querySelector '.sgn-pp__pages'\n            verso: el.querySelector '.verso'\n        @pageMode = @getPageMode()\n        @pageSpreads = new PageSpreads\n            pages: @getOption 'pages'\n            maxZoomScale: @getOption 'pageSpreadMaxZoomScale'\n            width: @getOption 'pageSpreadWidth'\n\n        @pageSpreads.bind 'pageLoaded', @pageLoaded.bind(@)\n        @pageSpreads.bind 'pagesLoaded', @pagesLoaded.bind(@)\n\n        @setColor @getOption('color')\n\n        # It's important to insert the page spreads before instantiating Verso.\n        @els.pages.parentNode.insertBefore @pageSpreads.update(@pageMode).getFrag(), @els.pages\n\n        @verso = @createVerso()\n\n        @bind 'started', @start.bind(@)\n        @bind 'destroyed', @destroy.bind(@)\n\n        return\n\n    start: ->\n        @getVerso().start()\n\n        @visibilityChangeListener = @visibilityChange.bind @\n        @resizeListener = SGN.util.throttle @resize, @getOption('resizeDelay'), @\n        @unloadListener = @unload.bind @\n\n        document.addEventListener 'visibilitychange', @visibilityChangeListener, false\n        window.addEventListener 'resize', @resizeListener, false\n        window.addEventListener 'beforeunload', @unloadListener, false\n\n        @els.root.setAttribute 'data-started', ''\n        @els.root.setAttribute 'tabindex', '-1'\n        @els.root.focus()\n\n        return\n\n    destroy: ->\n        verso = @getVerso()\n        pageSpreadEls = verso.el.querySelectorAll '.sgn-pp__page-spread'\n\n        @els.root.removeAttribute 'data-started'\n        @els.root.removeAttribute 'data-idle'\n        @els.root.removeAttribute 'data-navigating'\n        @els.root.removeAttribute 'data-color-brightness'\n        @els.root.removeAttribute 'data-zoomed-in'\n\n        @els.root.style.backgroundColor = '#ffffff'\n\n        pageSpreadEl.parentNode.removeChild pageSpreadEl for pageSpreadEl in pageSpreadEls\n\n        verso.destroy()\n\n        document.removeEventListener 'visibilitychange', @visibilityChangeListener, false\n        window.removeEventListener 'resize', @resizeListener, false\n        window.removeEventListener 'beforeunload', @unloadListener, false\n\n        return\n\n    makeOptions: (options, defaults) ->\n        opts = {}\n\n        opts[key] = options[key] ? defaults[key] for key, value of options\n\n        opts\n\n    getOption: (key) ->\n        @options[key]\n\n    setColor: (color) ->\n        @els.root.setAttribute 'data-color-brightness', SGN.util.getColorBrightness(color)\n        @els.root.style.backgroundColor = color\n\n        return\n\n    createVerso: ->\n        verso = new Verso @els.verso, pageId: @pageId\n\n        verso.pageSpreads.forEach @overridePageSpreadContentRect.bind(@)\n\n        verso.bind 'beforeNavigation', @beforeNavigation.bind(@)\n        verso.bind 'afterNavigation', @afterNavigation.bind(@)\n        verso.bind 'attemptedNavigation', @attemptedNavigation.bind(@)\n        verso.bind 'clicked', @clicked.bind(@)\n        verso.bind 'doubleClicked', @doubleClicked.bind(@)\n        verso.bind 'pressed', @pressed.bind(@)\n        verso.bind 'contextmenu', @contextmenu.bind(@)\n        verso.bind 'panStart', @panStart.bind(@)\n        verso.bind 'panEnd', @panEnd.bind(@)\n        verso.bind 'zoomedIn', @zoomedIn.bind(@)\n        verso.bind 'zoomedOut', @zoomedOut.bind(@)\n\n        verso\n\n    getVerso: ->\n        @verso\n\n    getContentRect: (pageSpread) ->\n        rect =\n            top: 0\n            left: 0\n            right: 0\n            bottom: 0\n            width: 0\n            height: 0\n        pageEls = pageSpread.getPageEls()\n        pageEl = pageEls[0]\n        pageCount = pageEls.length\n\n        return rect if not pageCount\n        \n        scale = @getVerso().transform.scale\n        pageWidth = pageEl.offsetWidth * pageCount * scale\n        pageHeight = pageEl.offsetHeight * scale\n        imageRatio = +pageEl.getAttribute('data-height') / (+pageEl.getAttribute('data-width') * pageCount)\n        actualHeight = pageHeight\n        actualWidth = actualHeight / imageRatio\n        actualWidth = Math.min pageWidth, actualWidth\n        actualHeight = actualWidth * imageRatio\n        clientRect = pageEl.getBoundingClientRect()\n\n        rect.width = actualWidth\n        rect.height = actualHeight\n        rect.top = clientRect.top + (pageHeight - actualHeight) / 2\n        rect.left = clientRect.left + (pageWidth - actualWidth) / 2\n        rect.right = rect.width + rect.left\n        rect.bottom = rect.height + rect.top\n\n        rect\n\n    formatProgressLabel: (pageSpread) ->\n        pages = pageSpread?.options.pages ? []\n        pageIds = pages.map (page) -> page.id\n        pageLabels = pages.map (page) -> page.label\n        pageCount = @getOption('pages').length\n        label = if pageIds.length > 0 then pageLabels.join('-') + ' / ' + pageCount else null\n\n        label\n\n    renderPageSpreads: ->\n        @getVerso().pageSpreads.forEach (pageSpread) =>\n            visibility = pageSpread.getVisibility()\n            match = @pageSpreads.get pageSpread.getId()\n\n            if match?\n                if visibility is 'visible' and match.contentsRendered is false\n                    setTimeout match.renderContents.bind(match), 0\n                if visibility is 'gone' and match.contentsRendered is true\n                    setTimeout match.clearContents.bind(match), 0\n\n            return\n\n        @\n\n    findPage: (pageId) ->\n        @getOption('pages').find (page) -> page.id is pageId\n\n    pageLoaded: (e) ->\n        @trigger 'pageLoaded', e\n\n        return\n\n    pagesLoaded: (e) ->\n        @trigger 'pagesLoaded', e\n\n        return\n\n    beforeNavigation: (e) ->\n        position = e.newPosition\n        theVerso = @getVerso()\n        versoPageSpread = theVerso.getPageSpreadFromPosition position\n        pageSpread = @pageSpreads.get versoPageSpread.getId()\n        pageSpreadCount = theVerso.getPageSpreadCount()\n        newSpreadEl = theVerso.pageSpreadEls[e.newPosition]\n        progress = position / (pageSpreadCount - 1) * 100\n        progressLabel = @formatProgressLabel pageSpread\n\n        @els.root.setAttribute 'data-navigating', true\n\n        @renderPageSpreads()\n        @resetIdleTimer()\n        @startIdleTimer()\n        @trigger 'beforeNavigation',\n            verso: e\n            pageSpread: pageSpread\n            newSpreadEl: newSpreadEl\n            progress: progress\n            progressLabel: progressLabel\n            pageSpreadCount: pageSpreadCount\n            newPositionIsEnd: e.newPosition + 1 == pageSpreadCount\n\n        return\n\n    afterNavigation: (e) ->\n        position = e.newPosition\n        theVerso = @getVerso()\n        versoPageSpread = theVerso.getPageSpreadFromPosition position\n        pageSpread = @pageSpreads.get versoPageSpread.getId()\n        pageSpreadCount = theVerso.getPageSpreadCount()\n        newSpreadEl = theVerso.pageSpreadEls[e.newPosition]\n\n        @els.root.setAttribute 'data-navigating', false\n\n        @trigger 'afterNavigation',\n            verso: e\n            pageSpread: pageSpread\n            pageSpreadCount: pageSpreadCount\n            newSpreadEl: newSpreadEl\n            newPositionIsEnd: e.newPosition + 1 == pageSpreadCount\n\n        return\n\n    attemptedNavigation: (e) ->\n        @trigger 'attemptedNavigation', verso: e\n\n        return\n\n    clicked: (e) ->\n        if e.isInsideContent\n            pageId = e.pageEl.getAttribute 'data-id'\n            page = @findPage pageId\n\n            @trigger 'clicked', verso: e, page: page\n\n        return\n\n    doubleClicked: (e) ->\n        if e.isInsideContent\n            pageId = e.pageEl.getAttribute 'data-id'\n            page = @findPage pageId\n\n            @trigger 'doubleClicked', verso: e, page: page\n\n        return\n\n    pressed: (e) ->\n        if e.isInsideContent\n            pageId = e.pageEl.getAttribute 'data-id'\n            page = @findPage pageId\n\n            @trigger 'pressed', verso: e, page: page\n\n        return\n\n    contextmenu: (e) ->\n        if e.isInsideContent\n            pageId = e.pageEl.getAttribute 'data-id'\n            page = @findPage pageId\n\n            @trigger 'contextmenu', verso: e, page: page\n\n        return\n\n    panStart: ->\n        @resetIdleTimer()\n        @trigger 'panStart', scale: @getVerso().transform.scale\n\n        return\n\n    panEnd: ->\n        @startIdleTimer()\n        @trigger 'panEnd'\n\n        return\n\n    zoomedIn: (e) ->\n        position = e.position\n        versoPageSpread = @getVerso().getPageSpreadFromPosition position\n        pageSpread = @pageSpreads.get versoPageSpread.getId()\n\n        pageSpread.zoomIn() if pageSpread?\n\n        @els.root.setAttribute 'data-zoomed-in', true\n        @trigger 'zoomedIn', verso: e, pageSpread: pageSpread\n\n        return\n\n    zoomedOut: (e) ->\n        position = e.position\n        versoPageSpread = @getVerso().getPageSpreadFromPosition position\n        pageSpread = @pageSpreads.get versoPageSpread.getId()\n\n        pageSpread.zoomOut() if pageSpread?\n\n        @els.root.setAttribute 'data-zoomed-in', false\n        @trigger 'zoomedOut', verso: e, pageSpread: pageSpread\n\n        return\n\n    getPageMode: ->\n        pageMode = @getOption 'pageMode'\n\n        if not pageMode?\n            width = @els.root.offsetWidth\n            height = @els.root.offsetHeight\n\n            pageMode = if height / width < 0.8 then 'double' else 'single'\n\n        pageMode\n\n    resetIdleTimer: ->\n        clearTimeout @idleTimeout\n\n        @els.root.setAttribute 'data-idle', false\n\n        @\n\n    startIdleTimer: ->\n        @idleTimeout = setTimeout =>\n            @els.root.setAttribute 'data-idle', true\n\n            return\n        , @getOption('idleDelay')\n\n        @\n\n    switchPageMode: (pageMode) ->\n        return @ if @pageMode is pageMode\n\n        verso = @getVerso()\n        pageIds = verso.getPageSpreadFromPosition(verso.getPosition()).getPageIds()\n        pageSpreadEls = @getVerso().el.querySelectorAll '.sgn-pp__page-spread'\n\n        @pageMode = pageMode\n\n        @pageSpreads.update @pageMode\n\n        pageSpreadEl.parentNode.removeChild pageSpreadEl for pageSpreadEl in pageSpreadEls\n        @els.pages.parentNode.insertBefore @pageSpreads.getFrag(), @els.pages\n\n        verso.refresh()\n        verso.navigateTo verso.getPageSpreadPositionFromPageId(pageIds[0]), duration: 0\n        verso.pageSpreads.forEach @overridePageSpreadContentRect.bind(@)\n\n        @\n\n    overridePageSpreadContentRect: (pageSpread) ->\n        if pageSpread.getType() is 'page'\n            pageSpread.getContentRect = => @getContentRect pageSpread\n\n    visibilityChange: ->\n        pageSpread = @getVerso().getPageSpreadFromPosition @getVerso().getPosition()\n        eventName = if document.hidden is true then 'disappeared' else 'appeared'\n\n        @trigger eventName, pageSpread: @pageSpreads.get(pageSpread.id)\n\n        return\n\n    resize: ->\n        pageMode = @getPageMode()\n\n        if not @getOption('pageMode')? and pageMode isnt @pageMode\n            @switchPageMode pageMode\n        else\n            @trigger 'resized'\n\n        return\n\n    unload: ->\n        @trigger 'disappeared'\n\n        return\n\nMicroEvent.mixin PagedPublicationCore\n\nmodule.exports = PagedPublicationCore\n","MicroEvent = require 'microevent'\nMustache = require 'mustache'\n\nclass PagedPublicationHotspots\n    constructor: ->\n        @currentPageSpreadId = null\n        @pageSpreadsLoaded = {}\n        @cache = {}\n\n        @bind 'hotspotsReceived', @hotspotsReceived.bind(@)\n        @bind 'afterNavigation', @afterNavigation.bind(@)\n        @bind 'pagesLoaded', @pagesLoaded.bind(@)\n        @bind 'resized', @resized.bind(@)\n\n        return\n\n    renderHotspots: (data) ->\n        frag = document.createDocumentFragment()\n        contentRect = data.versoPageSpread.getContentRect()\n        pageSpreadEl = data.pageSpread.getEl()\n        hotspotEls = pageSpreadEl.querySelectorAll '.sgn-pp__hotspot'\n        boundingRect = pageSpreadEl.getBoundingClientRect()\n\n        hotspotEl.parentNode.removeChild hotspotEl for hotspotEl in hotspotEls\n\n        for id, hotspot of data.hotspots\n            position = @getPosition data.pages, data.ratio, hotspot\n            el = @renderHotspot hotspot, position, contentRect, boundingRect\n            \n            frag.appendChild el\n\n        pageSpreadEl.appendChild frag\n\n        @\n\n    renderHotspot: (hotspot, position, contentRect, boundingRect) ->\n        el = document.createElement 'div'\n        top = Math.round contentRect.height / 100 * position.top\n        left = Math.round contentRect.width / 100 * position.left\n        width = Math.round contentRect.width / 100 * position.width\n        height = Math.round contentRect.height / 100 * position.height\n\n        top += Math.round contentRect.top\n        left += Math.round contentRect.left\n        top -= boundingRect.top\n        left -= boundingRect.left\n\n        el.className = 'sgn-pp__hotspot verso__overlay'\n        el.setAttribute 'data-id', hotspot.id if hotspot.id?\n        el.setAttribute 'data-type', hotspot.type if hotspot.type?\n        el.innerHTML = Mustache.render hotspot.template ? '', hotspot\n\n        el.style.top = \"#{top}px\"\n        el.style.left = \"#{left}px\"\n        el.style.width = \"#{width}px\"\n        el.style.height = \"#{height}px\"\n\n        el\n\n    getPosition: (pages, ratio, hotspot) ->\n        minX = null\n        minY = null\n        maxX = null\n        maxY = null\n        pageNumbers = pages.map (page) -> page.pageNumber\n\n        for pageNumber of hotspot.locations\n            continue if pageNumbers.indexOf(+pageNumber) is -1\n\n            hotspot.locations[pageNumber].forEach (coords) ->\n                x = coords[0]\n                y = coords[1]\n\n                x +=1 if pages[1] and pageNumbers[1] is +pageNumber\n                x /= pages.length\n\n                if not minX?\n                    minX = maxX = x\n                    minY = maxY = y\n\n                minX = x if x < minX\n                maxX = x if x > maxX\n                minY = y if y < minY\n                maxY = y if y > maxY\n\n        width = maxX - minX\n        height = maxY - minY\n\n        top: minY / ratio * 100\n        left: minX * 100\n        width: width * 100\n        height: height / ratio * 100\n\n    requestHotspots: (pageSpreadId, pages) ->\n        @trigger 'hotspotsRequested',\n            id: pageSpreadId\n            pages: pages\n\n        return\n\n    hotspotsReceived: (e) ->\n        pageSpreadId = e.pageSpread.getId()\n\n        @setCache pageSpreadId, e\n        @renderHotspots e\n\n        return\n\n    getCache: (pageSpreadId) ->\n        @cache[pageSpreadId]\n\n    setCache: (pageSpreadId, data) ->\n        @cache[pageSpreadId] = data\n\n        @\n\n    afterNavigation: (e) ->\n        return if not e.pageSpread?\n\n        id = e.pageSpread.getId()\n\n        @currentPageSpreadId = id\n        @requestHotspots id, e.pageSpread.getPages() if @pageSpreadsLoaded[id]\n\n        return\n\n    pagesLoaded: (e) ->\n        @pageSpreadsLoaded[e.pageSpreadId] = true\n        @requestHotspots e.pageSpreadId, e.pages if @currentPageSpreadId is e.pageSpreadId\n\n        return\n\n    resized: (e) ->\n        data = @getCache @currentPageSpreadId\n\n        @renderHotspots data if data?\n\n        return\n\nMicroEvent.mixin PagedPublicationHotspots\n\nmodule.exports = PagedPublicationHotspots\n\n\n","module.exports =\n    ESC: 27\n    ARROW_RIGHT: 39\n    ARROW_LEFT: 37\n    SPACE: 32\n    NUMBER_ONE: 49\n","MicroEvent = require 'microevent'\nSGN = require '../../sgn'\nkeyCodes = require '../../key-codes'\n\nclass PagedPublicationControls\n    constructor: (el, @options = {}) ->\n        @els =\n            root: el\n            progress: el.querySelector '.sgn-pp__progress'\n            progressBar: el.querySelector '.sgn-pp-progress__bar'\n            progressLabel: el.querySelector '.sgn-pp__progress-label'\n            prevControl: el.querySelector '.sgn-pp__control[data-direction=prev]'\n            nextControl: el.querySelector '.sgn-pp__control[data-direction=next]'\n            close: el.querySelector '.sgn-pp--close'\n\n        @keyDownListener = SGN.util.throttle @keyDown, 150, @\n\n        @els.root.addEventListener 'keydown', @keyDownListener, false if @options.keyboard is true\n        @els.prevControl.addEventListener 'click', @prevClicked.bind(@), false if @els.prevControl?\n        @els.nextControl.addEventListener 'click', @nextClicked.bind(@), false if @els.nextControl?\n        @els.close.addEventListener 'click', @closeClicked.bind(@), false if @els.close?\n\n        @bind 'beforeNavigation', @beforeNavigation.bind(@)\n\n        return\n\n    destroy: ->\n        @els.root.removeEventListener 'keydown', @keyDownListener\n\n        return\n\n    beforeNavigation: (e) ->\n        showProgress = typeof e.progressLabel is 'string' and e.progressLabel.length > 0\n        visibilityClassName = 'sgn-pp--hidden'\n\n        if @els.progress? and @els.progressBar?\n            @els.progressBar.style.width = \"#{e.progress}%\"\n\n            if showProgress is true\n                @els.progress.classList.remove visibilityClassName\n            else\n                @els.progress.classList.add visibilityClassName\n\n        if @els.progressLabel?\n            if showProgress is true\n                @els.progressLabel.textContent = e.progressLabel\n                @els.progressLabel.classList.remove visibilityClassName\n            else\n                @els.progressLabel.classList.add visibilityClassName\n\n        if @els.prevControl?\n            if e.verso.newPosition is 0\n                @els.prevControl.classList.add visibilityClassName\n            else\n                @els.prevControl.classList.remove visibilityClassName\n\n        if @els.nextControl?\n            if e.verso.newPosition is e.pageSpreadCount - 1\n                @els.nextControl.classList.add visibilityClassName\n            else\n                @els.nextControl.classList.remove visibilityClassName\n\n        return\n\n    prevClicked: (e) ->\n        e.preventDefault()\n\n        @trigger 'prev'\n\n        return\n\n    nextClicked: (e) ->\n        e.preventDefault()\n\n        @trigger 'next'\n\n        return\n    \n    closeClicked: (e) ->\n        e.preventDefault()\n\n        @trigger 'close'\n\n        return\n\n    keyDown: (e) ->\n        keyCode = e.keyCode\n\n        if keyCodes.ARROW_LEFT is keyCode\n            @trigger 'prev', duration: 0\n        else if keyCodes.ARROW_RIGHT is keyCode or keyCodes.SPACE is keyCode\n            @trigger 'next', duration: 0\n        else if keyCodes.NUMBER_ONE is keyCode\n            @trigger 'first', duration: 0\n\n        return\n\nMicroEvent.mixin PagedPublicationControls\n\nmodule.exports = PagedPublicationControls\n","MicroEvent = require 'microevent'\n\nclass PagedPublicationEventTracking\n    constructor: ->\n        @hidden = true\n        @pageSpread = null\n\n        @bind 'appeared', @appeared.bind(@)\n        @bind 'disappeared', @disappeared.bind(@)\n        @bind 'beforeNavigation', @beforeNavigation.bind(@)\n        @bind 'afterNavigation', @afterNavigation.bind(@)\n        @bind 'attemptedNavigation', @attemptedNavigation.bind(@)\n        @bind 'clicked', @clicked.bind(@)\n        @bind 'doubleClicked', @doubleClicked.bind(@)\n        @bind 'pressed', @pressed.bind(@)\n        @bind 'panStart', @panStart.bind(@)\n        @bind 'zoomedIn', @zoomedIn.bind(@)\n        @bind 'zoomedOut', @zoomedOut.bind(@)\n        @bind 'destroyed', @destroy.bind(@)\n\n        return\n\n    destroy: ->\n        @pageSpreadDisappeared()\n\n        return\n\n    trackEvent: (type, properties = {}) ->\n        @trigger 'trackEvent', type: type, properties: properties\n\n        return\n\n    trackOpened: (properties) ->\n        @trackEvent 'paged-publication-opened', properties\n\n        @\n\n    trackPageClicked: (properties) ->\n        @trackEvent 'paged-publication-page-clicked', properties\n\n        @\n\n    trackPageDoubleClicked: (properties) ->\n        @trackEvent 'paged-publication-page-double-clicked', properties\n\n        @\n\n    trackPageLongPressed: (properties) ->\n        @trackEvent 'paged-publication-page-long-pressed', properties\n\n        @\n\n    trackPageHotspotsClicked: (properties) ->\n        @trackEvent 'paged-publication-page-hotspots-clicked', properties\n\n        @\n\n    trackPageSpreadAppeared: (properties) ->\n        @trackEvent 'paged-publication-page-spread-appeared', properties\n\n        @\n\n    trackPageSpreadDisappeared: (properties) ->\n        @trackEvent 'paged-publication-page-spread-disappeared', properties\n\n        @\n\n    trackPageSpreadZoomedIn: (properties) ->\n        @trackEvent 'paged-publication-page-spread-zoomed-in', properties\n\n        @\n\n    trackPageSpreadZoomedOut: (properties) ->\n        @trackEvent 'paged-publication-page-spread-zoomed-out', properties\n\n        @\n\n    appeared: (e) ->\n        @pageSpreadAppeared e.pageSpread\n\n        return\n\n    disappeared: ->\n        @pageSpreadDisappeared()\n\n        return\n\n    beforeNavigation: ->\n        @pageSpreadDisappeared()\n\n        return\n\n    afterNavigation: (e) ->\n        @pageSpreadAppeared e.pageSpread\n\n        return\n\n    attemptedNavigation: (e) ->\n        @pageSpreadAppeared e.pageSpread\n\n        return\n\n    clicked: (e) ->\n        if e.page?\n            properties =\n                pageNumber: e.page.pageNumber\n                x: e.verso.pageX\n                y: e.verso.pageY\n\n            @trackPageClicked pagedPublicationPage: properties\n            @trackPageHotspotsClicked pagedPublicationPage: properties if e.verso.overlayEls.length > 0\n\n        return\n\n    doubleClicked: (e) =>\n        if e.page?\n            @trackPageDoubleClicked pagedPublicationPage:\n                pageNumber: e.page.pageNumber\n                x: e.verso.pageX\n                y: e.verso.pageY\n\n        return\n\n    pressed: (e) ->\n        if e.page?\n            @trackPageLongPressed pagedPublicationPage:\n                pageNumber: e.page.pageNumber\n                x: e.verso.pageX\n                y: e.verso.pageY\n\n        return\n\n    panStart: (e) ->\n        @pageSpreadDisappeared() if e.scale is 1\n\n        return\n\n    zoomedIn: (e) ->\n        if e.pageSpread?\n            @trackPageSpreadZoomedIn pagedPublicationPageSpread:\n                pageNumbers: e.pageSpread.getPages().map (page) -> page.pageNumber\n\n        return\n\n    zoomedOut: (e) ->\n        if e.pageSpread?\n            @trackPageSpreadZoomedOut pagedPublicationPageSpread:\n                pageNumbers: e.pageSpread.getPages().map (page) -> page.pageNumber\n\n        return\n\n    pageSpreadAppeared: (pageSpread) ->\n        if pageSpread? and @hidden is true\n            @pageSpread = pageSpread\n\n            @trackPageSpreadAppeared pagedPublicationPageSpread:\n                pageNumbers: pageSpread.getPages().map (page) -> page.pageNumber\n\n            @hidden = false\n\n        return\n\n    pageSpreadDisappeared: ->\n        if @pageSpread? and @hidden is false\n            @trackPageSpreadDisappeared pagedPublicationPageSpread:\n                pageNumbers: @pageSpread.getPages().map (page) -> page.pageNumber\n\n            @hidden = true\n            @pageSpread = null\n\n        return\n\nMicroEvent.mixin PagedPublicationEventTracking\n\nmodule.exports = PagedPublicationEventTracking\n","MicroEvent = require 'microevent'\nSGN = require '../../sgn'\nCore = require './core'\nHotspots = require './hotspots'\nControls = require './controls'\nEventTracking = require './event-tracking'\n\nclass Viewer\n    constructor: (@el, @options = {}) ->\n        @_core = new Core @el,\n            id: @options.id\n            pages: @options.pages\n            pageSpreadWidth: @options.pageSpreadWidth\n            pageSpreadMaxZoomScale: @options.pageSpreadMaxZoomScale\n            pageId: @options.pageId\n            idleDelay: @options.idleDelay\n            resizeDelay: @options.resizeDelay\n            color: @options.color\n        @_hotspots = new Hotspots()\n        @_controls = new Controls @el,\n            keyboard: @options.keyboard\n        @_eventTracking = new EventTracking()\n        @viewSession = SGN.util.uuid()\n        @hotspots = null\n        @hotspotQueue = []\n        @popover = null\n\n        @_setupEventListeners()\n\n        return\n\n        return\n\n    start: ->\n        @_eventTracking.trackOpened()\n        @_core.trigger 'started'\n\n        @\n\n    destroy: ->\n        @_core.trigger 'destroyed'\n        @_hotspots.trigger 'destroyed'\n        @_controls.trigger 'destroyed'\n        @_eventTracking.trigger 'destroyed'\n\n        @trigger 'destroyed'\n\n        @\n\n    navigateTo: (position, options) ->\n        @navigateToIndex position, options\n\n        @\n\n    navigateToIndex: (position, options) ->\n        @_core.getVerso().navigateTo position, options\n\n        @\n    \n    navigateToPageId: (pageId, options) ->\n        position = @_core.getVerso().getPageSpreadPositionFromPageId pageId\n        \n        @_core.getVerso().navigateTo position, options\n\n    first: (options) ->\n        @_core.getVerso().first options\n\n        @\n\n    prev: (options) ->\n        @_core.getVerso().prev options\n\n        @\n\n    next: (options) ->\n        @_core.getVerso().next options\n\n        @\n\n    last: (options) ->\n        @_core.getVerso().last options\n\n        @\n\n    _trackEvent: (e) ->\n        type = e.type\n        idType = 'legacy'\n        properties = pagedPublication:\n            id: [idType, @options.id]\n            ownedBy: [idType, @options.ownedBy]\n        eventTracker = @options.eventTracker\n\n        properties[key] = value for key, value of e.properties\n\n        eventTracker.trackEvent type, properties if eventTracker?\n\n        return\n\n    _setupEventListeners: ->\n        @_eventTracking.bind 'trackEvent', (e) =>\n            @_trackEvent e\n\n            return\n\n        @_controls.bind 'prev', (e) =>\n            @prev e\n            \n            return\n        @_controls.bind 'next', (e) =>\n            @next e\n            \n            return\n        @_controls.bind 'first', (e) =>\n            @first e\n            \n            return\n        @_controls.bind 'last', (e) =>\n            @last e\n            \n            return\n        @_controls.bind 'close', (e) =>\n            @destroy e\n\n            return\n        @_hotspots.bind 'hotspotsRequested', (e) =>\n            @trigger 'hotspotsRequested', e\n\n            return\n\n        @_core.bind 'appeared', (e) =>\n            @_eventTracking.trigger 'appeared', e\n            @trigger 'appeared', e\n\n            return\n        @_core.bind 'disappeared', (e) =>\n            @_eventTracking.trigger 'disappeared', e\n            @trigger 'disappeared', e\n\n            return\n        @_core.bind 'beforeNavigation', (e) =>\n            @_eventTracking.trigger 'beforeNavigation', e\n            @_controls.trigger 'beforeNavigation', e\n            @trigger 'beforeNavigation', e\n\n            return\n        @_core.bind 'afterNavigation', (e) =>\n            @_eventTracking.trigger 'afterNavigation', e\n            @_hotspots.trigger 'afterNavigation', e\n            @trigger 'afterNavigation', e\n\n            return\n        @_core.bind 'attemptedNavigation', (e) =>\n            @_eventTracking.trigger 'attemptedNavigation', e\n            @trigger 'attemptedNavigation', e\n\n            return\n        @_core.bind 'clicked', (e) =>\n            @_eventTracking.trigger 'clicked', e\n            @trigger 'clicked', e\n\n            return\n        @_core.bind 'doubleClicked', (e) =>\n            @_eventTracking.trigger 'doubleClicked', e\n            @trigger 'doubleClicked', e\n\n            return\n        @_core.bind 'contextmenu', (e) =>\n            @trigger 'contextmenu', e\n\n            return\n        @_core.bind 'pressed', (e) =>\n            @_eventTracking.trigger 'pressed', e\n            @trigger 'pressed', e\n\n            return\n        @_core.bind 'panStart', (e) =>\n            @_eventTracking.trigger 'panStart', e\n            @trigger 'panStart', e\n\n            return\n        @_core.bind 'zoomedIn', (e) =>\n            @_eventTracking.trigger 'zoomedIn', e\n            @trigger 'zoomedIn', e\n\n            return\n        @_core.bind 'zoomedOut', (e) =>\n            @_eventTracking.trigger 'zoomedOut', e\n            @trigger 'zoomedOut', e\n\n            return\n        @_core.bind 'pageLoaded', (e) =>\n            @_eventTracking.trigger 'pageLoaded', e\n            @trigger 'pageLoaded', e\n\n            return\n        @_core.bind 'pagesLoaded', (e) =>\n            @_hotspots.trigger 'pagesLoaded', e\n            @trigger 'pagesLoaded', e\n\n            return\n        @_core.bind 'resized', (e) =>\n            @_hotspots.trigger 'resized'\n            @trigger 'resized', e\n\n            return\n\n        @bind 'hotspotsRequested', @hotspotsRequested.bind(@)\n        @bind 'beforeNavigation', @beforeNavigation.bind(@)\n        @bind 'clicked', @clicked.bind(@)\n        @bind 'contextmenu', @contextmenu.bind(@)\n        @bind 'pressed', @pressed.bind(@)\n\n        return\n\n    pickHotspot: (e, callback) ->\n        return if not @hotspots?\n\n        if @popover?\n            @popover.destroy()\n            @popover = null\n        \n        hotspots = e.verso.overlayEls.map (overlayEl) =>\n            @hotspots[overlayEl.getAttribute('data-id')]\n\n        if hotspots.length is 1\n            callback hotspots[0]\n        else if hotspots.length > 1\n            @popover = SGN.CoreUIKit.singleChoicePopover\n                el: @el\n                header: SGN.translations.t 'paged_publication.hotspot_picker.header'\n                x: e.verso.x\n                y: e.verso.y\n                items: hotspots\n                    .filter (hotspot) -> hotspot.type is 'offer'\n                    .map (hotspot) ->\n                        id: hotspot.id\n                        title: hotspot.offer.heading\n                        subtitle: hotspot.offer.pricing.currency + '' + hotspot.offer.pricing.price\n            , (e) =>\n                callback @hotspots[e.id]\n\n                return\n        \n        return\n\n    processHotspotQueue: ->\n        return if not @hotspots?\n\n        @hotspotQueue = @hotspotQueue.filter (hotspotRequest) =>\n            hotspots = {}\n            versoPageSpread = @_core.getVerso().pageSpreads.find (pageSpread) ->\n                pageSpread.getId() is hotspotRequest.id\n\n            for id, hotspot of @hotspots\n                continue if hotspots[id]?\n\n                for page in hotspotRequest.pages\n                    if hotspot.locations[page.pageNumber]?\n                        hotspots[id] =\n                            type: hotspot.type\n                            id: hotspot.id\n                            locations: hotspot.locations\n                        \n                        break\n\n            @_hotspots.trigger 'hotspotsReceived',\n                pageSpread: @_core.pageSpreads.get hotspotRequest.id\n                versoPageSpread: versoPageSpread\n                ratio: @options.hotspotRatio\n                pages: hotspotRequest.pages\n                hotspots: hotspots\n\n            false\n\n        return\n\n    hotspotsRequested: (e) ->\n        @hotspotQueue.push e\n        @processHotspotQueue()\n\n        return\n    \n    applyHotspots: (hotspots = {}) ->\n        @hotspots = hotspots\n\n        @processHotspotQueue()\n\n        return\n    \n    beforeNavigation: ->\n        @popover.destroy() if @popover?\n\n        return\n    \n    clicked: (e) ->\n        @pickHotspot e, (hotspot) =>\n            @trigger 'hotspotClicked', hotspot\n\n            return\n            \n        return\n    \n    contextmenu: (e) ->\n        @pickHotspot e, (hotspot) =>\n            @trigger 'hotspotContextmenu', hotspot\n\n            return\n        \n        return\n    \n    pressed: (e) ->\n        @pickHotspot e, (hotspot) =>\n            @trigger 'hotspotPressed', hotspot\n\n            return\n            \n        return\n\nMicroEvent.mixin Viewer\n\nmodule.exports = Viewer\n","MicroEvent = require 'microevent'\nSGN = require '../../core'\n\nmodule.exports = class Bootstrapper\n    constructor: (@options = {}) ->\n        return\n\n    createViewer: (data) ->\n        new SGN.PagedPublicationKit.Viewer @options.el,\n            id: @options.id\n            ownedBy: data.details.dealer_id\n            color: '#' + data.details.branding.pageflip.color\n            hotspotRatio: data.details.dimensions.height\n            keyboard: true\n            pageId: @options.pageId\n            eventTracker: @options.eventTracker\n            pages: @transformPages data.pages\n\n    transformPages: (pages) ->\n        pages.map (page, i) ->\n            pageNumber = i + 1\n\n            id: 'page' + pageNumber\n            label: pageNumber + ''\n            pageNumber: pageNumber\n            images:\n                medium: page.view\n                large: page.zoom\n\n    applyHotspots: (viewer, hotspots) ->\n        obj = {}\n\n        hotspots.forEach (hotspot) -> obj[hotspot.id] = hotspot\n        \n        viewer.applyHotspots obj\n\n        return\n    \n    fetch: (callback) ->\n        SGN.util.async.parallel [@fetchDetails.bind(@), @fetchPages.bind(@)], (result) ->\n            data =\n                details: result[0][1]\n                pages: result[1][1]\n\n            if data.details? and data.pages?\n                callback null, data\n            else\n                callback new Error()\n\n            return\n        \n        return\n\n    fetchDetails: (callback) ->\n        SGN.CoreKit.request\n            url: \"/v2/catalogs/#{@options.id}\"\n        , callback\n\n        return\n\n    fetchPages: (callback) ->\n        SGN.CoreKit.request\n            url: \"/v2/catalogs/#{@options.id}/pages\"\n        , callback\n\n        return\n\n    fetchHotspots: (callback) ->\n        SGN.CoreKit.request\n            url: \"/v2/catalogs/#{@options.id}/hotspots\"\n        , callback\n\n        return","module.exports =\n    Viewer: require './viewer'\n\n    Bootstrapper: require './bootstrapper'\n","Incito = require 'incito-browser'\nMicroEvent = require 'microevent'\n\nclass Viewer\n    constructor: (@el, @options = {}) ->\n        @incito = new Incito @el,\n            incito: @options.incito\n            \n        return\n    \n    start: ->\n        @incito.start()\n\n        @_trackEvent\n            type: 'x-incito-publication-opened'\n            properties:\n                id: @options.id\n\n        @\n    \n    destroy: ->\n        @incito.destroy()\n\n        return\n    \n    _trackEvent: (e) ->\n        type = e.type\n        properties =\n            id: @options.id\n        eventTracker = @options.eventTracker\n\n        properties[key] = value for key, value of e.properties\n\n        eventTracker.trackEvent type, properties if eventTracker?\n\nMicroEvent.mixin Viewer\n\nmodule.exports = Viewer","module.exports = class Controls\n    constructor: (@viewer) ->\n        @progressEl = @viewer.el.querySelector '.sgn-incito__progress'\n        @scrollListener = @scroll.bind @\n\n        if @progressEl?\n            window.addEventListener 'scroll', @scrollListener, false\n\n            @viewer.bind 'destroyed', =>\n                window.removeEventListener 'scroll', @scrollListener\n\n                return\n\n        return\n    \n    scroll: ->\n        scrollTop = window.scrollY\n        winHeight = window.innerHeight\n        docHeight = document.body.clientHeight\n        progress = Math.round (scrollTop + winHeight) / docHeight * 100\n\n        if scrollTop < 300\n            @progressEl.style.opacity = 0\n        else if scrollTop >= docHeight - winHeight\n            @progressEl.textContent = '100%'\n            @progressEl.style.opacity = 1\n        else\n            @progressEl.textContent = \"#{progress} %\"\n            @progressEl.style.opacity = 1\n\n        return","util = require '../../util'\nSGN = require '../../core'\nControls = require './controls'\nschema = require '../../../graphql/incito.graphql'\n\nmodule.exports = class Bootstrapper\n    constructor: (@options = {}) ->\n        @deviceCategory = @getDeviceCategory()\n        @pixelRatio = @getPixelRatio()\n        @pointer = @getPointer()\n        @orientation = @getOrientation()\n        @maxWidth = @getMaxWidth()\n        @versionsSupported = ['1.0.0']\n        @storageKey = \"incito-#{@options.id}\"\n\n        return\n    \n    getDeviceCategory: ->\n        util.getDeviceCategory()\n    \n    getPixelRatio: ->\n        window.devicePixelRatio or 1\n    \n    getPointer: ->\n        util.getPointer()\n    \n    getOrientation: ->\n        orientation = util.getOrientation screen.width, screen.height\n        orientation = 'horizontal' if orientation is 'quadratic'\n\n        orientation\n    \n    getMaxWidth: ->\n        if Math.abs(window.orientation) is 90\n            Math.min @options.el.offsetWidth, screen.width\n        else\n            @options.el.offsetWidth\n\n    fetch: (callback) ->\n        data = SGN.storage.session.get @storageKey\n\n        if data? and data.response? and data.width is @maxWidth\n            return callback null, data.response\n\n        SGN.GraphKit.request\n            query: schema\n            operationName: 'GetIncitoPublication'\n            variables:\n                id: @options.id\n                deviceCategory: 'DEVICE_CATEGORY_' + @deviceCategory.toUpperCase()\n                pixelRatio: @pixelRatio\n                pointer: 'POINTER_' + @pointer.toUpperCase()\n                orientation: 'ORIENTATION_' + @orientation.toUpperCase()\n                maxWidth: @maxWidth\n                versionsSupported: @versionsSupported\n        , (err, res) =>\n            if err?\n                callback err\n            else if res.errors and res.errors.length > 0\n                callback util.error(new Error(), 'graph request contained errors')\n            else\n                callback null, res\n\n                SGN.storage.session.set @storageKey,\n                    width: @maxWidth\n                    response: res\n            \n            return\n\n        return\n    \n    createViewer: (data) ->\n        if not data.incito?\n            throw util.error new Error(), 'you need to supply valid Incito to create a viewer'\n\n        viewer = new SGN.IncitoPublicationKit.Viewer @options.el,\n            id: @options.id\n            incito: data.incito\n            eventTracker: @options.eventTracker\n        controls = new Controls viewer\n\n        viewer","module.exports =\n    Viewer: require './viewer'\n\n    Bootstrapper: require './bootstrapper'","/**\n * Copyright 2014 Craig Campbell\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * GATOR.JS\n * Simple Event Delegation\n *\n * @version 1.2.4\n *\n * Compatible with IE 9+, FF 3.6+, Safari 5+, Chrome\n *\n * Include legacy.js for compatibility with older browsers\n *\n *             .-._   _ _ _ _ _ _ _ _\n *  .-''-.__.-'00  '-' ' ' ' ' ' ' ' '-.\n * '.___ '    .   .--_'-' '-' '-' _'-' '._\n *  V: V 'vv-'   '_   '.       .'  _..' '.'.\n *    '=.____.=_.--'   :_.__.__:_   '.   : :\n *            (((____.-'        '-.  /   : :\n *                              (((-'\\ .' /\n *                            _____..'  .'\n *                           '-._____.-'\n */\nvar _matcher,\n  _level = 0,\n  _id = 0,\n  _handlers = {},\n  _gatorInstances = {};\n\nfunction _addEvent(gator, type, callback) {\n  // blur and focus do not bubble up but if you use event capturing\n  // then you will get them\n  var useCapture = type == \"blur\" || type == \"focus\";\n  gator.element.addEventListener(type, callback, useCapture);\n}\n\nfunction _cancel(e) {\n  e.preventDefault();\n  e.stopPropagation();\n}\n\n/**\n     * returns function to use for determining if an element\n     * matches a query selector\n     *\n     * @returns {Function}\n     */\nfunction _getMatcher(element) {\n  if (_matcher) {\n    return _matcher;\n  }\n\n  if (element.matches) {\n    _matcher = element.matches;\n    return _matcher;\n  }\n\n  if (element.webkitMatchesSelector) {\n    _matcher = element.webkitMatchesSelector;\n    return _matcher;\n  }\n\n  if (element.mozMatchesSelector) {\n    _matcher = element.mozMatchesSelector;\n    return _matcher;\n  }\n\n  if (element.msMatchesSelector) {\n    _matcher = element.msMatchesSelector;\n    return _matcher;\n  }\n\n  if (element.oMatchesSelector) {\n    _matcher = element.oMatchesSelector;\n    return _matcher;\n  }\n\n  // if it doesn't match a native browser method\n  // fall back to the gator function\n  _matcher = Gator.matchesSelector;\n  return _matcher;\n}\n\n/**\n     * determines if the specified element matches a given selector\n     *\n     * @param {Node} element - the element to compare against the selector\n     * @param {string} selector\n     * @param {Node} boundElement - the element the listener was attached to\n     * @returns {void|Node}\n     */\nfunction _matchesSelector(element, selector, boundElement) {\n  // no selector means this event was bound directly to this element\n  if (selector == \"_root\") {\n    return boundElement;\n  }\n\n  // if we have moved up to the element you bound the event to\n  // then we have come too far\n  if (element === boundElement) {\n    return;\n  }\n\n  // if this is a match then we are done!\n  if (_getMatcher(element).call(element, selector)) {\n    return element;\n  }\n\n  // if this element did not match but has a parent we should try\n  // going up the tree to see if any of the parent elements match\n  // for example if you are looking for a click on an <a> tag but there\n  // is a <span> inside of the a tag that it is the target,\n  // it should still work\n  if (element.parentNode) {\n    _level++;\n    return _matchesSelector(element.parentNode, selector, boundElement);\n  }\n}\n\nfunction _addHandler(gator, event, selector, callback) {\n  if (!_handlers[gator.id]) {\n    _handlers[gator.id] = {};\n  }\n\n  if (!_handlers[gator.id][event]) {\n    _handlers[gator.id][event] = {};\n  }\n\n  if (!_handlers[gator.id][event][selector]) {\n    _handlers[gator.id][event][selector] = [];\n  }\n\n  _handlers[gator.id][event][selector].push(callback);\n}\n\nfunction _removeHandler(gator, event, selector, callback) {\n  // if there are no events tied to this element at all\n  // then don't do anything\n  if (!_handlers[gator.id]) {\n    return;\n  }\n\n  // if there is no event type specified then remove all events\n  // example: Gator(element).off()\n  if (!event) {\n    for (var type in _handlers[gator.id]) {\n      if (_handlers[gator.id].hasOwnProperty(type)) {\n        _handlers[gator.id][type] = {};\n      }\n    }\n    return;\n  }\n\n  // if no callback or selector is specified remove all events of this type\n  // example: Gator(element).off('click')\n  if (!callback && !selector) {\n    _handlers[gator.id][event] = {};\n    return;\n  }\n\n  // if a selector is specified but no callback remove all events\n  // for this selector\n  // example: Gator(element).off('click', '.sub-element')\n  if (!callback) {\n    delete _handlers[gator.id][event][selector];\n    return;\n  }\n\n  // if we have specified an event type, selector, and callback then we\n  // need to make sure there are callbacks tied to this selector to\n  // begin with.  if there aren't then we can stop here\n  if (!_handlers[gator.id][event][selector]) {\n    return;\n  }\n\n  // if there are then loop through all the callbacks and if we find\n  // one that matches remove it from the array\n  for (var i = 0; i < _handlers[gator.id][event][selector].length; i++) {\n    if (_handlers[gator.id][event][selector][i] === callback) {\n      _handlers[gator.id][event][selector].splice(i, 1);\n      break;\n    }\n  }\n}\n\nfunction _handleEvent(id, e, type) {\n  if (!_handlers[id][type]) {\n    return;\n  }\n\n  var target = e.target || e.srcElement,\n    selector,\n    match,\n    matches = {},\n    i = 0,\n    j = 0;\n\n  // find all events that match\n  _level = 0;\n  for (selector in _handlers[id][type]) {\n    if (_handlers[id][type].hasOwnProperty(selector)) {\n      match = _matchesSelector(target, selector, _gatorInstances[id].element);\n\n      if (\n        match &&\n        Gator.matchesEvent(\n          type,\n          _gatorInstances[id].element,\n          match,\n          selector == \"_root\",\n          e\n        )\n      ) {\n        _level++;\n        _handlers[id][type][selector].match = match;\n        matches[_level] = _handlers[id][type][selector];\n      }\n    }\n  }\n\n  // stopPropagation() fails to set cancelBubble to true in Webkit\n  // @see http://code.google.com/p/chromium/issues/detail?id=162270\n  e.stopPropagation = function() {\n    e.cancelBubble = true;\n  };\n\n  for (i = 0; i <= _level; i++) {\n    if (matches[i]) {\n      for (j = 0; j < matches[i].length; j++) {\n        if (matches[i][j].call(matches[i].match, e) === false) {\n          Gator.cancel(e);\n          return;\n        }\n\n        if (e.cancelBubble) {\n          return;\n        }\n      }\n    }\n  }\n}\n\n/**\n     * binds the specified events to the element\n     *\n     * @param {string|Array} events\n     * @param {string} selector\n     * @param {Function} callback\n     * @param {boolean=} remove\n     * @returns {Object}\n     */\nfunction _bind(events, selector, callback, remove) {\n  // fail silently if you pass null or undefined as an alement\n  // in the Gator constructor\n  if (!this.element) {\n    return;\n  }\n\n  if (!(events instanceof Array)) {\n    events = [events];\n  }\n\n  if (!callback && typeof selector == \"function\") {\n    callback = selector;\n    selector = \"_root\";\n  }\n\n  var id = this.id,\n    i;\n\n  function _getGlobalCallback(type) {\n    return function(e) {\n      _handleEvent(id, e, type);\n    };\n  }\n\n  for (i = 0; i < events.length; i++) {\n    if (remove) {\n      _removeHandler(this, events[i], selector, callback);\n      continue;\n    }\n\n    if (!_handlers[id] || !_handlers[id][events[i]]) {\n      Gator.addEvent(this, events[i], _getGlobalCallback(events[i]));\n    }\n\n    _addHandler(this, events[i], selector, callback);\n  }\n\n  return this;\n}\n\n/**\n     * Gator object constructor\n     *\n     * @param {Node} element\n     */\nfunction Gator(element, id) {\n  // called as function\n  if (!(this instanceof Gator)) {\n    // only keep one Gator instance per node to make sure that\n    // we don't create a ton of new objects if you want to delegate\n    // multiple events from the same node\n    //\n    // for example: Gator(document).on(...\n    for (var key in _gatorInstances) {\n      if (_gatorInstances[key].element === element) {\n        return _gatorInstances[key];\n      }\n    }\n\n    _id++;\n    _gatorInstances[_id] = new Gator(element, _id);\n\n    return _gatorInstances[_id];\n  }\n\n  this.element = element;\n  this.id = id;\n}\n\n/**\n     * adds an event\n     *\n     * @param {string|Array} events\n     * @param {string} selector\n     * @param {Function} callback\n     * @returns {Object}\n     */\nGator.prototype.on = function(events, selector, callback) {\n  return _bind.call(this, events, selector, callback);\n};\n\n/**\n     * removes an event\n     *\n     * @param {string|Array} events\n     * @param {string} selector\n     * @param {Function} callback\n     * @returns {Object}\n     */\nGator.prototype.off = function(events, selector, callback) {\n  return _bind.call(this, events, selector, callback, true);\n};\n\nGator.matchesSelector = function() {};\nGator.cancel = _cancel;\nGator.addEvent = _addEvent;\nGator.matchesEvent = function() {\n  return true;\n};\n\nif (typeof module !== \"undefined\" && module.exports) {\n  module.exports = Gator;\n}\n\nif (typeof window !== \"undefined\" && window.exports) {\n  window.Gator = Gator;\n}\n","module.exports = class OfferDetails\n    constructor: (@options = {}) ->\n        @el = document.createElement 'div'\n\n        @el.className = 'sgn-offer-details'\n        @el.setAttribute 'tabindex', -1\n        @el.appendChild @options.contentEl\n\n        @resizeListener = @resize.bind @\n\n        @position()\n\n        return\n    \n    appendTo: (el) ->\n        el.appendChild @el\n\n        @el.offsetWidth\n\n        @show()\n\n        @\n    \n    show: ->\n        @el.className += ' in'\n\n        window.addEventListener 'resize', @resizeListener, false\n\n        @\n    \n    destroy: ->\n        window.removeEventListener 'resize', @resizeListener\n\n        @el.parentNode.removeChild @el\n\n        return\n    \n    position: ->\n        rect = @options.anchorEl.getBoundingClientRect()\n        top = window.pageYOffset + rect.top + @options.anchorEl.offsetHeight\n        left = window.pageXOffset + rect.left\n        width = @options.anchorEl.offsetWidth\n\n        @el.style.top = top + 'px'\n        @el.style.left = left + 'px'\n        @el.style.width = width + 'px'\n\n        return\n    \n    resize: ->\n        @position()\n\n        return","MicroEvent = require 'microevent'\nGator = require '../../../../vendor/gator'\nMustache = require 'mustache'\nkeyCodes = require '../../key-codes'\n\ntemplate = \"\"\"\n<div class=\"sgn-popover__background\" data-close></div>\n<div class=\"sgn-popover__menu\">\n    {{#header}}\n        <div class=\"sgn-popover__header\">{{header}}</div>\n    {{/header}}\n    <div class=\"sgn-popover__content\">\n        <ul>\n            {{#singleChoiceItems}}\n                <li data-index=\"{{index}}\">\n                    <p class=\"sgn-popover-item__title\">{{item.title}}</p>\n                    {{#item.subtitle}}\n                        <p class=\"sgn-popover-item__subtitle\">{{item.subtitle}}</p>\n                    {{/item.subtitle}}\n                </li>\n            {{/singleChoiceItems}}\n        </ul>\n    </div>\n</div>\n\"\"\"\n\nclass Popover\n    constructor: (@options = {}) ->\n        @el = document.createElement 'div'\n        @backgroundEl = document.createElement 'div'\n        @resizeListener = @resize.bind @\n        @scrollListener = @scroll.bind @\n\n        return\n\n    render: ->\n        width = @options.width ? 100\n        header = @options.header\n        template = @options.template if @options.template?\n        trigger = @trigger.bind @\n        view =\n            header: header\n            singleChoiceItems: @options.singleChoiceItems.map (item, i) ->\n                item: item\n                index: i\n\n        @el.className = 'sgn-popover'\n        @el.setAttribute 'tabindex', -1\n        @el.innerHTML = Mustache.render template, view\n\n        @position()\n        @addEventListeners()\n\n        @\n\n    destroy: ->\n        Gator(@el).off()\n\n        window.removeEventListener 'resize', @resizeListener\n        window.removeEventListener 'scroll', @scrollListener\n\n        if @el.parentNode?\n            @el.parentNode.removeChild @el\n\n            @trigger 'destroyed'\n\n        return\n    \n    position: ->\n        top = @options.y\n        left = @options.x\n\n        menuEl = @el.querySelector '.sgn-popover__menu'\n\n        width = menuEl.offsetWidth\n        height = menuEl.offsetHeight\n        parentWidth = @el.parentNode.offsetWidth\n        parentHeight = @el.parentNode.offsetHeight\n        boundingRect = @el.parentNode.getBoundingClientRect()\n\n        top -= boundingRect.top\n        left -= boundingRect.left\n\n        top -= window.pageYOffset\n        left -= window.pageXOffset\n\n        if top + height > parentHeight\n            menuEl.style.top = parentHeight - height + 'px'\n        else\n            menuEl.style.top = top + 'px'\n\n        if left + width > parentWidth\n            menuEl.style.left = parentWidth - width + 'px'\n        else\n            menuEl.style.left = left + 'px'\n        \n        return\n    \n    addEventListeners: ->\n        trigger = @trigger.bind @\n\n        @el.addEventListener 'keyup', @keyUp.bind(@)\n\n        Gator(@el).on 'click', '[data-index]', (e) ->\n            e.preventDefault()\n            e.stopPropagation()\n\n            trigger 'selected', index: +@getAttribute 'data-index'\n\n            return\n\n        Gator(@el).on 'click', '[data-close]', (e) =>\n            e.preventDefault()\n            e.stopPropagation()\n            \n            @destroy()\n\n            return\n\n        Gator(@el).on 'click', '.sgn-popover__menu', (e) ->\n            e.stopPropagation()\n\n            return\n\n        window.addEventListener 'resize', @resizeListener, false\n        window.addEventListener 'scroll', @scrollListener, false\n\n        return\n\n    keyUp: (e) ->\n        @destroy() if e.keyCode is keyCodes.ESC\n        \n        return\n\n    resize: ->\n        @destroy()\n\n        return\n\n    scroll: ->\n        @destroy()\n\n        return\n\nMicroEvent.mixin Popover\n\nmodule.exports = Popover\n","Popover = require './popover'\n\nmodule.exports = (ctx, callback) ->\n    items = ctx.items\n    popover = null\n\n    if items.length is 1\n        callback items[0]\n    else if items.length > 1\n        popover = new Popover\n            header: ctx.header,\n            x: ctx.x\n            y: ctx.y\n            singleChoiceItems: items\n\n        popover.bind 'selected', (e) ->\n            callback items[e.index]\n\n            popover.destroy()\n\n            return\n\n        popover.bind 'destroyed', ->\n            ctx.el.focus()\n\n            return\n\n        ctx.el.appendChild popover.el\n        popover.render().el.focus()\n\n    destroy: ->\n        popover.destroy() if popover?\n\n        return","Gator = require '../../../../vendor/gator'\n\nmodule.exports =\n    OfferDetails: require './offer-details'\n\n    Popover: require './popover'\n\n    singleChoicePopover: require './single-choice-popover'\n\n    on: (el, events, selector, callback) ->\n        Gator(el).on events, selector, callback\n\n    off: (el, events, selector, callback) ->\n        Gator(el).off events, selector, callback","{ isBrowser } = require './util'\n\nSGN = require './core'\n\n# Expose storage backends.\nSGN.storage =\n    local: require './storage/client-local'\n    session: require './storage/client-session'\n    cookie: require './storage/client-cookie'\n\n# Expose request handler.\nSGN.request = require './request'\n\n# Expose the different kits.\nSGN.AssetsKit = require './kits/assets'\nSGN.EventsKit = require './kits/events'\nSGN.GraphKit = require './kits/graph'\nSGN.CoreKit = require './kits/core'\nSGN.PagedPublicationKit = require './kits/paged-publication'\nSGN.IncitoPublicationKit = require './kits/incito-publication'\nSGN.CoreUIKit = require './kits/core-ui'\n\n# Set the core session from the cookie store if possible.\nsession = SGN.storage.cookie.get 'session'\n\nif typeof session is 'object'\n    SGN.config.set\n        coreSessionToken: session.token\n        coreSessionClientId: session.client_id\n\nSGN.client = do ->\n    id = SGN.storage.local.get 'client-id'\n    id = id?.data\n    firstOpen = not id?\n\n    if firstOpen\n        id = SGN.util.uuid()\n        \n        SGN.storage.local.set 'client-id', id\n\n    firstOpen: firstOpen\n    id: id\n\n# Listen for changes in the config.\nSGN.config.bind 'change', (changedAttributes) ->\n    eventTracker = changedAttributes.eventTracker\n\n    if eventTracker?\n        eventTracker.trackEvent 'first-client-session-opened', {}, '1.0.0' if SGN.client.firstOpen is true\n        eventTracker.trackEvent 'client-session-opened', {}, '1.0.0'\n\n    return\n\nif isBrowser()\n    # Autoconfigure the SDK.\n    scriptEl = document.getElementById 'sgn-sdk'\n\n    if scriptEl?\n        appKey = scriptEl.getAttribute 'data-app-key'\n        trackId = scriptEl.getAttribute 'data-track-id'\n        config = {}\n\n        config.appKey = appKey if appKey?\n        config.eventTracker = new SGN.EventsKit.Tracker(trackId: trackId) if trackId?\n\n        SGN.config.set config\n\nmodule.exports = SGN\n"],"names":["util","window","document","process","err","options","key","value","message","code","name","stack","time","Date","replace","c","r","v","Math","random","toString","field","url","href","reg","string","location","RegExp","exec","queryParams","Object","keys","map","encodeURIComponent","join","from","to","floor","ua","navigator","userAgent","indexOf","deviceCategory","platform","test","pointer","matchMedia","matches","width","height","density","logical","physical","ref","screen","round","jan1","jan2","now","stdTimeOffset","tmp","getFullYear","toGMTString","substring","lastIndexOf","getTimezoneOffset","color","hex","rgb","s","sum","x","parseInt","str","buffer","isBrowser","btoa","Buffer","arr","size","results","length","push","splice","fn","threshold","scope","deferTimer","last","args","context","getTime","arguments","setTimeout","apply","src","callback","img","Image","onload","onerror","Error","lat1","lng1","lat2","lng2","dist","radlat1","radlat2","radtheta","theta","PI","sin","cos","acos","asyncCalls","sharedCallback","allResults","counter","k","makeCallback","index","i","Config","MicroEvent","require$$0","attrs","config","changedAttributes","trigger","option","mixin","Mustache","pairs","view","template","render","translations","require$$1","require$$2","set","prefixKey","SGN","storage","localStorage","JSON","parse","stringify","sessionStorage","ca","ct","len","isNode","cookie","split","trim","date","days","setTime","toUTCString","self","http","https","request","response","settings","disableHeaderCheck","defaultHeaders","headers","headersCase","forbiddenRequestHeaders","forbiddenRequestMethods","sendFlag","errorFlag","listeners","UNSENT","OPENED","HEADERS_RECEIVED","LOADING","DONE","readyState","onreadystatechange","responseText","responseXML","status","statusText","withCredentials","isAllowedHttpHeader","header","toLowerCase","isAllowedHttpMethod","method","open","async","user","password","abort","setDisableHeaderCheck","state","setRequestHeader","warn","getResponseHeader","getAllResponseHeaders","result","substr","getRequestHeader","send","data","ssl","local","Url","host","protocol","hostname","undefined","readFile","pathname","error","handleError","fs","readFileSync","e","port","uri","search","Host","authBuf","Authorization","isBuffer","byteLength","doRequest","dispatchEvent","responseHandler","resp","statusCode","newOptions","path","on","errorHandler","end","setEncoding","chunk","write","contentFile","pid","syncFile","writeFileSync","execString","slice","syncProc","cp","spawn","argv","existsSync","stdin","unlinkSync","text","addEventListener","event","removeEventListener","filter","ev","call","setState","XMLHttpRequest","progressCallback","formData","ref1","ref2","ref3","formatQueryParams","qs","toUpperCase","timeout","useCookies","json","body","reduce","acc","current","parts","lengthComputable","loaded","total","FormData","append","get","file","Tracker","clientLocalStorage","getPool","pool","Array","isArray","concat","dispatching","session","uuid","client","trackId","id","application","identity","interval","setInterval","dispatch","bind","dispatchInterval","type","properties","version","toISOString","getContext","getPoolSize","poolLimit","shift","determinedAt","timestamp","latitude","longitude","altitude","accuracy","horizontal","vertical","speed","build","previousPath","campaign","loc","os","screenDimensions","getScreenDimensions","getOS","language","getUtcOffsetSeconds","getUtcDstOffsetSeconds","getView","getQueryParam","referrer","forEach","personId","events","nacks","dryRun","dispatchLimit","ship","resEvent","poolEvent","payload","sentAt","defaultOptions","Pulse","destroyed","connection","connect","close","WebSocket","onopen","onOpen","onmessage","onMessage","onError","onclose","onClose","parseCookies","cookies","parsedCookies","keyValuePair","appKey","authToken","authTokenCookieName","query","operationName","variables","authCookie","runs","CoreKit","ensure","appSecret","appVersion","clientId","geo","locale","token","geolocation","sign","r_locale","api_av","client_id","r_lat","r_lng","r_radius","radius","r_sensor","sensor","responseToken","saveToken","callbackQueue","clientCookieStorage","renewed","sha256","saveCookie","ttl","saveClientId","complete","queueCount","create","renew","PagedPublicationPageSpread","contentsRendered","hotspotsRendered","el","renderEl","pages","pageIds","createElement","getPages","page","className","setAttribute","getId","maxZoomScale","imageLoads","pageCount","getEl","image","loaderEl","pageEl","images","medium","appendChild","innerHTML","label","loadImage","isComplete","style","backgroundImage","pageSpread","versoPageSpread","pageEls","querySelectorAll","getAttribute","find","large","removeAttribute","PageSpread","PagedPublicationPageSpreads","collection","ids","frag","createDocumentFragment","pageMode","firstPage","lastPage","midstPageSpreads","pageSpreads","pop","midstPages","PageSpreads","PagedPublicationCore","Verso","require$$4","makeOptions","defaults","pageId","getOption","els","querySelector","getPageMode","pageLoaded","pagesLoaded","setColor","parentNode","insertBefore","update","getFrag","verso","createVerso","start","destroy","getVerso","visibilityChangeListener","visibilityChange","resizeListener","throttle","resize","unloadListener","unload","root","focus","pageSpreadEl","pageSpreadEls","backgroundColor","removeChild","opts","getColorBrightness","overridePageSpreadContentRect","beforeNavigation","afterNavigation","attemptedNavigation","clicked","doubleClicked","pressed","contextmenu","panStart","panEnd","zoomedIn","zoomedOut","actualHeight","actualWidth","clientRect","imageRatio","pageHeight","pageWidth","rect","scale","getPageEls","transform","offsetWidth","offsetHeight","min","getBoundingClientRect","top","left","right","bottom","pageLabels","match","visibility","getVisibility","renderContents","clearContents","newSpreadEl","pageSpreadCount","position","progress","progressLabel","theVerso","newPosition","getPageSpreadFromPosition","getPageSpreadCount","formatProgressLabel","renderPageSpreads","resetIdleTimer","startIdleTimer","isInsideContent","findPage","zoomIn","zoomOut","idleTimeout","getPosition","getPageIds","refresh","navigateTo","getPageSpreadPositionFromPageId","getType","getContentRect","eventName","hidden","switchPageMode","PagedPublicationHotspots","currentPageSpreadId","pageSpreadsLoaded","cache","hotspotsReceived","resized","boundingRect","contentRect","hotspot","hotspotEl","hotspotEls","ratio","renderHotspot","maxX","maxY","minX","minY","pageNumber","pageNumbers","locations","coords","y","pageSpreadId","setCache","renderHotspots","requestHotspots","getCache","PagedPublicationControls","keyCodes","keyDownListener","keyDown","keyboard","prevControl","prevClicked","nextControl","nextClicked","closeClicked","showProgress","visibilityClassName","progressBar","classList","remove","add","textContent","preventDefault","keyCode","ARROW_LEFT","ARROW_RIGHT","SPACE","NUMBER_ONE","PagedPublicationEventTracking","appeared","disappeared","pageSpreadDisappeared","trackEvent","pageSpreadAppeared","pageX","pageY","trackPageClicked","overlayEls","trackPageHotspotsClicked","trackPageDoubleClicked","trackPageLongPressed","trackPageSpreadZoomedIn","trackPageSpreadZoomedOut","trackPageSpreadAppeared","trackPageSpreadDisappeared","Controls","Core","EventTracking","Hotspots","Viewer","require$$3","require$$5","_core","pageSpreadWidth","pageSpreadMaxZoomScale","idleDelay","resizeDelay","_hotspots","_controls","_eventTracking","viewSession","hotspots","hotspotQueue","popover","_setupEventListeners","trackOpened","navigateToIndex","first","prev","next","eventTracker","idType","ownedBy","_trackEvent","hotspotsRequested","overlayEl","CoreUIKit","singleChoicePopover","t","offer","heading","pricing","currency","price","hotspotRequest","hotspotRatio","processHotspotQueue","pickHotspot","Bootstrapper","PagedPublicationKit","details","dealer_id","branding","pageflip","dimensions","transformPages","zoom","viewer","obj","applyHotspots","parallel","fetchDetails","fetchPages","Incito","incito","progressEl","scrollListener","scroll","docHeight","scrollTop","winHeight","scrollY","innerHeight","clientHeight","opacity","schema","getDeviceCategory","pixelRatio","getPixelRatio","getPointer","orientation","getOrientation","maxWidth","getMaxWidth","versionsSupported","storageKey","devicePixelRatio","abs","GraphKit","res","errors","controls","IncitoPublicationKit","_matcher","_level","_id","_handlers","_gatorInstances","_addEvent","gator","useCapture","element","_cancel","stopPropagation","_getMatcher","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector","Gator","matchesSelector","_matchesSelector","selector","boundElement","_addHandler","_removeHandler","hasOwnProperty","_handleEvent","target","srcElement","j","matchesEvent","cancelBubble","cancel","_bind","_getGlobalCallback","addEvent","prototype","off","module","exports","OfferDetails","contentEl","show","anchorEl","pageYOffset","pageXOffset","Popover","backgroundEl","singleChoiceItems","item","addEventListeners","menuEl","parentHeight","parentWidth","keyUp","ESC","ctx","items","scriptEl","AssetsKit","require$$6","EventsKit","require$$7","require$$8","require$$9","require$$10","require$$11","require$$12","firstOpen","getElementById"],"mappings":"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"}