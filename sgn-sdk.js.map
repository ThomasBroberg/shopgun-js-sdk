{"version":3,"file":"sgn-sdk.js","sources":["../node_modules/microevent/microevent.js","../lib/coffeescript/config.coffee","../node_modules/mustache/mustache.js","../lib/coffeescript/translations.coffee","../node_modules/process/browser.js","../lib/coffeescript/util.coffee","../lib/coffeescript/core.coffee","../lib/coffeescript/sgn.coffee","../lib/coffeescript/storage/client-local.coffee","../lib/coffeescript/storage/client-cookie.coffee","../lib/coffeescript/request/browser.coffee","../lib/coffeescript/kits/auth/index.coffee","../lib/coffeescript/kits/assets/file-upload.coffee","../lib/coffeescript/kits/assets/index.coffee","../lib/coffeescript/kits/events/tracker.coffee","../lib/coffeescript/kits/events/pulse.coffee","../lib/coffeescript/kits/events/index.coffee","../lib/coffeescript/kits/graph/request.coffee","../lib/coffeescript/kits/graph/index.coffee","../lib/coffeescript/kits/core/request.coffee","../node_modules/convert-hex/convert-hex.js","../node_modules/convert-string/convert-string.js","../node_modules/sha256/lib/sha256.js","../lib/coffeescript/kits/core/session.coffee","../lib/coffeescript/kits/core/index.coffee","../lib/coffeescript/kits/paged-publication/page-spread.coffee","../lib/coffeescript/kits/paged-publication/page-spreads.coffee","../lib/coffeescript/kits/paged-publication/core.coffee","../lib/coffeescript/kits/paged-publication/templates/hotspot.coffee","../lib/coffeescript/kits/paged-publication/hotspots.coffee","../lib/coffeescript/key-codes.coffee","../lib/coffeescript/kits/paged-publication/controls.coffee","../lib/coffeescript/kits/paged-publication/event-tracking.coffee","../lib/coffeescript/kits/paged-publication/legacy-event-tracking.coffee","../lib/coffeescript/kits/paged-publication/viewer.coffee","../node_modules/gator/gator.js","../lib/coffeescript/kits/paged-publication/templates/hotspot-picker.coffee","../lib/coffeescript/kits/paged-publication/hotspot-picker.coffee","../lib/coffeescript/kits/paged-publication/templates/widget.coffee","../lib/coffeescript/kits/paged-publication/widget.coffee","../lib/coffeescript/kits/paged-publication/initialize.coffee","../lib/coffeescript/kits/paged-publication/index.coffee","../lib/coffeescript/kits/shopping-list/index.coffee","../lib/coffeescript/browser.coffee"],"sourcesContent":["/**\n * MicroEvent - to make any js object an event emitter (server or browser)\n * \n * - pure javascript - server compatible, browser compatible\n * - dont rely on the browser doms\n * - super simple - you get it immediatly, no mistery, no magic involved\n *\n * - create a MicroEventDebug with goodies to debug\n *   - make it safer to use\n*/\n\nvar MicroEvent\t= function(){}\nMicroEvent.prototype\t= {\n\tbind\t: function(event, fct){\n\t\tthis._events = this._events || {};\n\t\tthis._events[event] = this._events[event]\t|| [];\n\t\tthis._events[event].push(fct);\n\t},\n\tunbind\t: function(event, fct){\n\t\tthis._events = this._events || {};\n\t\tif( event in this._events === false  )\treturn;\n\t\tthis._events[event].splice(this._events[event].indexOf(fct), 1);\n\t},\n\ttrigger\t: function(event /* , args... */){\n\t\tthis._events = this._events || {};\n\t\tif( event in this._events === false  )\treturn;\n\t\tfor(var i = 0; i < this._events[event].length; i++){\n\t\t\tthis._events[event][i].apply(this, Array.prototype.slice.call(arguments, 1))\n\t\t}\n\t}\n};\n\n/**\n * mixin will delegate all MicroEvent.js function in the destination object\n *\n * - require('MicroEvent').mixin(Foobar) will make Foobar able to use MicroEvent\n *\n * @param {Object} the object which will support MicroEvent\n*/\nMicroEvent.mixin\t= function(destObject){\n\tvar props\t= ['bind', 'unbind', 'trigger'];\n\tfor(var i = 0; i < props.length; i ++){\n\t\tdestObject.prototype[props[i]]\t= MicroEvent.prototype[props[i]];\n\t}\n}\n\n// export in common js\nif( typeof module !== \"undefined\" && ('exports' in module)){\n\tmodule.exports\t= MicroEvent\n}\n","MicroEvent = require 'microevent'\nConfig = class Config\n    keys: [\n        'appVersion',\n        'appKey',\n        'appSecret',\n        'authToken',\n        'eventTracker',\n        'locale',\n        'coreSessionToken',\n        'coreSessionClientId',\n        'coreUrl',\n        'graphUrl',\n        'eventsTrackUrl',\n        'eventsPulseUrl',\n        'assetsFileUploadUrl'\n    ]\n\n    constructor: ->\n        @attrs = {}\n\n        return\n\n    set: (config = {}) ->\n        changedAttributes = {}\n\n        for key, value of config\n            if key in @keys\n                @attrs[key] = value\n                changedAttributes[key] = value\n\n        @trigger 'change', changedAttributes\n\n        return\n\n    get: (option) ->\n        @attrs[option]\n\nMicroEvent.mixin Config\n\nmodule.exports = Config\n","/*!\n * mustache.js - Logic-less {{mustache}} templates with JavaScript\n * http://github.com/janl/mustache.js\n */\n\n/*global define: false Mustache: true*/\n\n(function defineMustache (global, factory) {\n  if (typeof exports === 'object' && exports && typeof exports.nodeName !== 'string') {\n    factory(exports); // CommonJS\n  } else if (typeof define === 'function' && define.amd) {\n    define(['exports'], factory); // AMD\n  } else {\n    global.Mustache = {};\n    factory(global.Mustache); // script, wsh, asp\n  }\n}(this, function mustacheFactory (mustache) {\n\n  var objectToString = Object.prototype.toString;\n  var isArray = Array.isArray || function isArrayPolyfill (object) {\n    return objectToString.call(object) === '[object Array]';\n  };\n\n  function isFunction (object) {\n    return typeof object === 'function';\n  }\n\n  /**\n   * More correct typeof string handling array\n   * which normally returns typeof 'object'\n   */\n  function typeStr (obj) {\n    return isArray(obj) ? 'array' : typeof obj;\n  }\n\n  function escapeRegExp (string) {\n    return string.replace(/[\\-\\[\\]{}()*+?.,\\\\\\^$|#\\s]/g, '\\\\$&');\n  }\n\n  /**\n   * Null safe way of checking whether or not an object,\n   * including its prototype, has a given property\n   */\n  function hasProperty (obj, propName) {\n    return obj != null && typeof obj === 'object' && (propName in obj);\n  }\n\n  // Workaround for https://issues.apache.org/jira/browse/COUCHDB-577\n  // See https://github.com/janl/mustache.js/issues/189\n  var regExpTest = RegExp.prototype.test;\n  function testRegExp (re, string) {\n    return regExpTest.call(re, string);\n  }\n\n  var nonSpaceRe = /\\S/;\n  function isWhitespace (string) {\n    return !testRegExp(nonSpaceRe, string);\n  }\n\n  var entityMap = {\n    '&': '&amp;',\n    '<': '&lt;',\n    '>': '&gt;',\n    '\"': '&quot;',\n    \"'\": '&#39;',\n    '/': '&#x2F;',\n    '`': '&#x60;',\n    '=': '&#x3D;'\n  };\n\n  function escapeHtml (string) {\n    return String(string).replace(/[&<>\"'`=\\/]/g, function fromEntityMap (s) {\n      return entityMap[s];\n    });\n  }\n\n  var whiteRe = /\\s*/;\n  var spaceRe = /\\s+/;\n  var equalsRe = /\\s*=/;\n  var curlyRe = /\\s*\\}/;\n  var tagRe = /#|\\^|\\/|>|\\{|&|=|!/;\n\n  /**\n   * Breaks up the given `template` string into a tree of tokens. If the `tags`\n   * argument is given here it must be an array with two string values: the\n   * opening and closing tags used in the template (e.g. [ \"<%\", \"%>\" ]). Of\n   * course, the default is to use mustaches (i.e. mustache.tags).\n   *\n   * A token is an array with at least 4 elements. The first element is the\n   * mustache symbol that was used inside the tag, e.g. \"#\" or \"&\". If the tag\n   * did not contain a symbol (i.e. {{myValue}}) this element is \"name\". For\n   * all text that appears outside a symbol this element is \"text\".\n   *\n   * The second element of a token is its \"value\". For mustache tags this is\n   * whatever else was inside the tag besides the opening symbol. For text tokens\n   * this is the text itself.\n   *\n   * The third and fourth elements of the token are the start and end indices,\n   * respectively, of the token in the original template.\n   *\n   * Tokens that are the root node of a subtree contain two more elements: 1) an\n   * array of tokens in the subtree and 2) the index in the original template at\n   * which the closing tag for that section begins.\n   */\n  function parseTemplate (template, tags) {\n    if (!template)\n      return [];\n\n    var sections = [];     // Stack to hold section tokens\n    var tokens = [];       // Buffer to hold the tokens\n    var spaces = [];       // Indices of whitespace tokens on the current line\n    var hasTag = false;    // Is there a {{tag}} on the current line?\n    var nonSpace = false;  // Is there a non-space char on the current line?\n\n    // Strips all whitespace tokens array for the current line\n    // if there was a {{#tag}} on it and otherwise only space.\n    function stripSpace () {\n      if (hasTag && !nonSpace) {\n        while (spaces.length)\n          delete tokens[spaces.pop()];\n      } else {\n        spaces = [];\n      }\n\n      hasTag = false;\n      nonSpace = false;\n    }\n\n    var openingTagRe, closingTagRe, closingCurlyRe;\n    function compileTags (tagsToCompile) {\n      if (typeof tagsToCompile === 'string')\n        tagsToCompile = tagsToCompile.split(spaceRe, 2);\n\n      if (!isArray(tagsToCompile) || tagsToCompile.length !== 2)\n        throw new Error('Invalid tags: ' + tagsToCompile);\n\n      openingTagRe = new RegExp(escapeRegExp(tagsToCompile[0]) + '\\\\s*');\n      closingTagRe = new RegExp('\\\\s*' + escapeRegExp(tagsToCompile[1]));\n      closingCurlyRe = new RegExp('\\\\s*' + escapeRegExp('}' + tagsToCompile[1]));\n    }\n\n    compileTags(tags || mustache.tags);\n\n    var scanner = new Scanner(template);\n\n    var start, type, value, chr, token, openSection;\n    while (!scanner.eos()) {\n      start = scanner.pos;\n\n      // Match any text between tags.\n      value = scanner.scanUntil(openingTagRe);\n\n      if (value) {\n        for (var i = 0, valueLength = value.length; i < valueLength; ++i) {\n          chr = value.charAt(i);\n\n          if (isWhitespace(chr)) {\n            spaces.push(tokens.length);\n          } else {\n            nonSpace = true;\n          }\n\n          tokens.push([ 'text', chr, start, start + 1 ]);\n          start += 1;\n\n          // Check for whitespace on the current line.\n          if (chr === '\\n')\n            stripSpace();\n        }\n      }\n\n      // Match the opening tag.\n      if (!scanner.scan(openingTagRe))\n        break;\n\n      hasTag = true;\n\n      // Get the tag type.\n      type = scanner.scan(tagRe) || 'name';\n      scanner.scan(whiteRe);\n\n      // Get the tag value.\n      if (type === '=') {\n        value = scanner.scanUntil(equalsRe);\n        scanner.scan(equalsRe);\n        scanner.scanUntil(closingTagRe);\n      } else if (type === '{') {\n        value = scanner.scanUntil(closingCurlyRe);\n        scanner.scan(curlyRe);\n        scanner.scanUntil(closingTagRe);\n        type = '&';\n      } else {\n        value = scanner.scanUntil(closingTagRe);\n      }\n\n      // Match the closing tag.\n      if (!scanner.scan(closingTagRe))\n        throw new Error('Unclosed tag at ' + scanner.pos);\n\n      token = [ type, value, start, scanner.pos ];\n      tokens.push(token);\n\n      if (type === '#' || type === '^') {\n        sections.push(token);\n      } else if (type === '/') {\n        // Check section nesting.\n        openSection = sections.pop();\n\n        if (!openSection)\n          throw new Error('Unopened section \"' + value + '\" at ' + start);\n\n        if (openSection[1] !== value)\n          throw new Error('Unclosed section \"' + openSection[1] + '\" at ' + start);\n      } else if (type === 'name' || type === '{' || type === '&') {\n        nonSpace = true;\n      } else if (type === '=') {\n        // Set the tags for the next time around.\n        compileTags(value);\n      }\n    }\n\n    // Make sure there are no open sections when we're done.\n    openSection = sections.pop();\n\n    if (openSection)\n      throw new Error('Unclosed section \"' + openSection[1] + '\" at ' + scanner.pos);\n\n    return nestTokens(squashTokens(tokens));\n  }\n\n  /**\n   * Combines the values of consecutive text tokens in the given `tokens` array\n   * to a single token.\n   */\n  function squashTokens (tokens) {\n    var squashedTokens = [];\n\n    var token, lastToken;\n    for (var i = 0, numTokens = tokens.length; i < numTokens; ++i) {\n      token = tokens[i];\n\n      if (token) {\n        if (token[0] === 'text' && lastToken && lastToken[0] === 'text') {\n          lastToken[1] += token[1];\n          lastToken[3] = token[3];\n        } else {\n          squashedTokens.push(token);\n          lastToken = token;\n        }\n      }\n    }\n\n    return squashedTokens;\n  }\n\n  /**\n   * Forms the given array of `tokens` into a nested tree structure where\n   * tokens that represent a section have two additional items: 1) an array of\n   * all tokens that appear in that section and 2) the index in the original\n   * template that represents the end of that section.\n   */\n  function nestTokens (tokens) {\n    var nestedTokens = [];\n    var collector = nestedTokens;\n    var sections = [];\n\n    var token, section;\n    for (var i = 0, numTokens = tokens.length; i < numTokens; ++i) {\n      token = tokens[i];\n\n      switch (token[0]) {\n        case '#':\n        case '^':\n          collector.push(token);\n          sections.push(token);\n          collector = token[4] = [];\n          break;\n        case '/':\n          section = sections.pop();\n          section[5] = token[2];\n          collector = sections.length > 0 ? sections[sections.length - 1][4] : nestedTokens;\n          break;\n        default:\n          collector.push(token);\n      }\n    }\n\n    return nestedTokens;\n  }\n\n  /**\n   * A simple string scanner that is used by the template parser to find\n   * tokens in template strings.\n   */\n  function Scanner (string) {\n    this.string = string;\n    this.tail = string;\n    this.pos = 0;\n  }\n\n  /**\n   * Returns `true` if the tail is empty (end of string).\n   */\n  Scanner.prototype.eos = function eos () {\n    return this.tail === '';\n  };\n\n  /**\n   * Tries to match the given regular expression at the current position.\n   * Returns the matched text if it can match, the empty string otherwise.\n   */\n  Scanner.prototype.scan = function scan (re) {\n    var match = this.tail.match(re);\n\n    if (!match || match.index !== 0)\n      return '';\n\n    var string = match[0];\n\n    this.tail = this.tail.substring(string.length);\n    this.pos += string.length;\n\n    return string;\n  };\n\n  /**\n   * Skips all text until the given regular expression can be matched. Returns\n   * the skipped string, which is the entire tail if no match can be made.\n   */\n  Scanner.prototype.scanUntil = function scanUntil (re) {\n    var index = this.tail.search(re), match;\n\n    switch (index) {\n      case -1:\n        match = this.tail;\n        this.tail = '';\n        break;\n      case 0:\n        match = '';\n        break;\n      default:\n        match = this.tail.substring(0, index);\n        this.tail = this.tail.substring(index);\n    }\n\n    this.pos += match.length;\n\n    return match;\n  };\n\n  /**\n   * Represents a rendering context by wrapping a view object and\n   * maintaining a reference to the parent context.\n   */\n  function Context (view, parentContext) {\n    this.view = view;\n    this.cache = { '.': this.view };\n    this.parent = parentContext;\n  }\n\n  /**\n   * Creates a new context using the given view with this context\n   * as the parent.\n   */\n  Context.prototype.push = function push (view) {\n    return new Context(view, this);\n  };\n\n  /**\n   * Returns the value of the given name in this context, traversing\n   * up the context hierarchy if the value is absent in this context's view.\n   */\n  Context.prototype.lookup = function lookup (name) {\n    var cache = this.cache;\n\n    var value;\n    if (cache.hasOwnProperty(name)) {\n      value = cache[name];\n    } else {\n      var context = this, names, index, lookupHit = false;\n\n      while (context) {\n        if (name.indexOf('.') > 0) {\n          value = context.view;\n          names = name.split('.');\n          index = 0;\n\n          /**\n           * Using the dot notion path in `name`, we descend through the\n           * nested objects.\n           *\n           * To be certain that the lookup has been successful, we have to\n           * check if the last object in the path actually has the property\n           * we are looking for. We store the result in `lookupHit`.\n           *\n           * This is specially necessary for when the value has been set to\n           * `undefined` and we want to avoid looking up parent contexts.\n           **/\n          while (value != null && index < names.length) {\n            if (index === names.length - 1)\n              lookupHit = hasProperty(value, names[index]);\n\n            value = value[names[index++]];\n          }\n        } else {\n          value = context.view[name];\n          lookupHit = hasProperty(context.view, name);\n        }\n\n        if (lookupHit)\n          break;\n\n        context = context.parent;\n      }\n\n      cache[name] = value;\n    }\n\n    if (isFunction(value))\n      value = value.call(this.view);\n\n    return value;\n  };\n\n  /**\n   * A Writer knows how to take a stream of tokens and render them to a\n   * string, given a context. It also maintains a cache of templates to\n   * avoid the need to parse the same template twice.\n   */\n  function Writer () {\n    this.cache = {};\n  }\n\n  /**\n   * Clears all cached templates in this writer.\n   */\n  Writer.prototype.clearCache = function clearCache () {\n    this.cache = {};\n  };\n\n  /**\n   * Parses and caches the given `template` and returns the array of tokens\n   * that is generated from the parse.\n   */\n  Writer.prototype.parse = function parse (template, tags) {\n    var cache = this.cache;\n    var tokens = cache[template];\n\n    if (tokens == null)\n      tokens = cache[template] = parseTemplate(template, tags);\n\n    return tokens;\n  };\n\n  /**\n   * High-level method that is used to render the given `template` with\n   * the given `view`.\n   *\n   * The optional `partials` argument may be an object that contains the\n   * names and templates of partials that are used in the template. It may\n   * also be a function that is used to load partial templates on the fly\n   * that takes a single argument: the name of the partial.\n   */\n  Writer.prototype.render = function render (template, view, partials) {\n    var tokens = this.parse(template);\n    var context = (view instanceof Context) ? view : new Context(view);\n    return this.renderTokens(tokens, context, partials, template);\n  };\n\n  /**\n   * Low-level method that renders the given array of `tokens` using\n   * the given `context` and `partials`.\n   *\n   * Note: The `originalTemplate` is only ever used to extract the portion\n   * of the original template that was contained in a higher-order section.\n   * If the template doesn't use higher-order sections, this argument may\n   * be omitted.\n   */\n  Writer.prototype.renderTokens = function renderTokens (tokens, context, partials, originalTemplate) {\n    var buffer = '';\n\n    var token, symbol, value;\n    for (var i = 0, numTokens = tokens.length; i < numTokens; ++i) {\n      value = undefined;\n      token = tokens[i];\n      symbol = token[0];\n\n      if (symbol === '#') value = this.renderSection(token, context, partials, originalTemplate);\n      else if (symbol === '^') value = this.renderInverted(token, context, partials, originalTemplate);\n      else if (symbol === '>') value = this.renderPartial(token, context, partials, originalTemplate);\n      else if (symbol === '&') value = this.unescapedValue(token, context);\n      else if (symbol === 'name') value = this.escapedValue(token, context);\n      else if (symbol === 'text') value = this.rawValue(token);\n\n      if (value !== undefined)\n        buffer += value;\n    }\n\n    return buffer;\n  };\n\n  Writer.prototype.renderSection = function renderSection (token, context, partials, originalTemplate) {\n    var self = this;\n    var buffer = '';\n    var value = context.lookup(token[1]);\n\n    // This function is used to render an arbitrary template\n    // in the current context by higher-order sections.\n    function subRender (template) {\n      return self.render(template, context, partials);\n    }\n\n    if (!value) return;\n\n    if (isArray(value)) {\n      for (var j = 0, valueLength = value.length; j < valueLength; ++j) {\n        buffer += this.renderTokens(token[4], context.push(value[j]), partials, originalTemplate);\n      }\n    } else if (typeof value === 'object' || typeof value === 'string' || typeof value === 'number') {\n      buffer += this.renderTokens(token[4], context.push(value), partials, originalTemplate);\n    } else if (isFunction(value)) {\n      if (typeof originalTemplate !== 'string')\n        throw new Error('Cannot use higher-order sections without the original template');\n\n      // Extract the portion of the original template that the section contains.\n      value = value.call(context.view, originalTemplate.slice(token[3], token[5]), subRender);\n\n      if (value != null)\n        buffer += value;\n    } else {\n      buffer += this.renderTokens(token[4], context, partials, originalTemplate);\n    }\n    return buffer;\n  };\n\n  Writer.prototype.renderInverted = function renderInverted (token, context, partials, originalTemplate) {\n    var value = context.lookup(token[1]);\n\n    // Use JavaScript's definition of falsy. Include empty arrays.\n    // See https://github.com/janl/mustache.js/issues/186\n    if (!value || (isArray(value) && value.length === 0))\n      return this.renderTokens(token[4], context, partials, originalTemplate);\n  };\n\n  Writer.prototype.renderPartial = function renderPartial (token, context, partials) {\n    if (!partials) return;\n\n    var value = isFunction(partials) ? partials(token[1]) : partials[token[1]];\n    if (value != null)\n      return this.renderTokens(this.parse(value), context, partials, value);\n  };\n\n  Writer.prototype.unescapedValue = function unescapedValue (token, context) {\n    var value = context.lookup(token[1]);\n    if (value != null)\n      return value;\n  };\n\n  Writer.prototype.escapedValue = function escapedValue (token, context) {\n    var value = context.lookup(token[1]);\n    if (value != null)\n      return mustache.escape(value);\n  };\n\n  Writer.prototype.rawValue = function rawValue (token) {\n    return token[1];\n  };\n\n  mustache.name = 'mustache.js';\n  mustache.version = '2.3.0';\n  mustache.tags = [ '{{', '}}' ];\n\n  // All high-level mustache.* functions use this writer.\n  var defaultWriter = new Writer();\n\n  /**\n   * Clears all cached templates in the default writer.\n   */\n  mustache.clearCache = function clearCache () {\n    return defaultWriter.clearCache();\n  };\n\n  /**\n   * Parses and caches the given template in the default writer and returns the\n   * array of tokens it contains. Doing this ahead of time avoids the need to\n   * parse templates on the fly as they are rendered.\n   */\n  mustache.parse = function parse (template, tags) {\n    return defaultWriter.parse(template, tags);\n  };\n\n  /**\n   * Renders the `template` with the given `view` and `partials` using the\n   * default writer.\n   */\n  mustache.render = function render (template, view, partials) {\n    if (typeof template !== 'string') {\n      throw new TypeError('Invalid template! Template should be a \"string\" ' +\n                          'but \"' + typeStr(template) + '\" was given as the first ' +\n                          'argument for mustache#render(template, view, partials)');\n    }\n\n    return defaultWriter.render(template, view, partials);\n  };\n\n  // This is here for backwards compatibility with 0.4.x.,\n  /*eslint-disable */ // eslint wants camel cased function name\n  mustache.to_html = function to_html (template, view, partials, send) {\n    /*eslint-enable*/\n\n    var result = mustache.render(template, view, partials);\n\n    if (isFunction(send)) {\n      send(result);\n    } else {\n      return result;\n    }\n  };\n\n  // Export the escaping function so that the user may override it.\n  // See https://github.com/janl/mustache.js/issues/244\n  mustache.escape = escapeHtml;\n\n  // Export these mainly for testing, but also for advanced usage.\n  mustache.Scanner = Scanner;\n  mustache.Context = Context;\n  mustache.Writer = Writer;\n\n  return mustache;\n}));\n","Mustache = require 'mustache'\npairs =\n    'paged_publication.hotspot_picker.header': 'Which offer did you mean?'\n\nmodule.exports =\n    t: (key, view) ->\n        template = pairs[key] ? ''\n\n        Mustache.render template, view\n\n    update: (translations) ->\n        for key, value of translations\n            pairs[key] = value\n\n        return\n","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","process = require 'process'\n\nutil =\n    isBrowser: ->\n        typeof process isnt 'undefined' and process.browser\n\n    isNode: ->\n        not util.isBrowser()\n\n    error: (err, options) ->\n        err.message = err.message or null\n\n        if typeof options is 'string'\n            err.message = options\n        else if typeof options is 'object' and options?\n            for key, value of options\n                err[key] = value\n\n            err.message = options.message if options.message?\n            err.code = options.code or options.name if options.code? or options.message?\n            err.stack = options.stack if options.stack?\n\n        err.name = options and options.name or err.name or err.code or 'Error'\n        err.time = new Date()\n\n        err\n\n    uuid: ->\n        'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace /[xy]/g, (c) ->\n            r = Math.random() * 16 | 0\n            v = if c is 'x' then r else (r & 0x3|0x8)\n\n            v.toString 16\n\n    getQueryParam: (field, url) ->\n        href = if url then url else window.location.href\n        reg = new RegExp '[?&]' + field + '=([^&#]*)', 'i'\n        string = reg.exec href\n\n        if string then string[1] else undefined\n\n    formatQueryParams: (queryParams = {}) ->\n        Object\n            .keys queryParams\n            .map (key) -> key + '=' + encodeURIComponent(queryParams[key])\n            .join '&'\n\n    getRandomNumberBetween: (from, to) ->\n        Math.floor(Math.random() * to) + from\n\n    getOS: ->\n        name = null\n        ua = window.navigator.userAgent\n\n        if ua.indexOf('Windows') > -1\n            name = 'Windows'\n        else if ua.indexOf('Mac') > -1\n            name = 'macOS'\n        else if ua.indexOf('X11') > -1\n            name = 'unix'\n        else if ua.indexOf('Linux') > -1\n            name = 'Linux'\n        else if ua.indexOf('iOS') > -1\n            name = 'iOS'\n        else if ua.indexOf('Android') > -1\n            name = 'Android'\n\n        name\n\n    btoa: (str) ->\n        if util.isBrowser()\n            btoa str\n        else\n            buffer = null\n\n            if str instanceof Buffer\n                buffer = str\n            else\n                buffer = new Buffer str.toString(), 'binary'\n\n            buffer.toString 'base64'\n\n    getScreenDimensions: ->\n        density = window.devicePixelRatio ? 1\n        logical =\n            width: window.screen.width\n            height: window.screen.height\n        physical =\n            width: Math.round logical.width * density\n            height: Math.round logical.height * density\n\n        density: density\n        logical: logical\n        physical: physical\n\n    getUtcOffsetSeconds: ->\n        now = new Date()\n        jan1 = new Date now.getFullYear(), 0, 1, 0, 0, 0, 0\n        tmp = jan1.toGMTString()\n        jan2 = new Date tmp.substring(0, tmp.lastIndexOf(' ') - 1)\n        stdTimeOffset = (jan1 - jan2) / 1000\n\n        stdTimeOffset\n\n    getUtcDstOffsetSeconds: ->\n        new Date().getTimezoneOffset() * 60 * -1\n\n    getColorBrightness: (color) ->\n        color = color.replace '#', ''\n        hex = parseInt (hex + '').replace(/[^a-f0-9]/gi, ''), 16\n        rgb = []\n        sum = 0\n        x = 0\n\n        while x < 3\n            s = parseInt(color.substring(2 * x, 2), 16)\n            rgb[x] = s\n\n            sum += s if s > 0\n\n            ++x\n\n        if sum <= 381 then 'dark' else 'light'\n\n    find: (arr, fn) ->\n        for item in arr\n            return item if fn(item) is true\n\n    chunk: (arr, size) ->\n        results = []\n\n        while arr.length\n            results.push arr.splice(0, size)\n\n        results\n\n    throttle: (fn, threshold = 250, scope) ->\n        last = undefined\n        deferTimer = undefined\n\n        ->\n            context = scope or @\n            now = new Date().getTime()\n            args = arguments\n\n            if last and now < last + threshold\n                clearTimeout deferTimer\n\n                deferTimer = setTimeout ->\n                    last = now\n                    \n                    fn.apply context, args\n                \n                    return\n                , threshold\n            else\n                last = now\n                fn.apply context, args\n\n            return\n\n    loadImage: (src, callback) ->\n        img = new Image()\n\n        img.onload = -> callback null, img.width, img.height\n        img.onerror = -> callback new Error()\n        img.src = src\n\n        img\n\n    distance: (lat1, lng1, lat2, lng2) ->\n        radlat1 = Math.PI * lat1 / 180\n        radlat2 = Math.PI * lat2 / 180\n        theta = lng1 - lng2\n        radtheta = Math.PI * theta / 180\n        dist = Math.sin(radlat1) * Math.sin(radlat2) + Math.cos(radlat1) * Math.cos(radlat2) * Math.cos(radtheta)\n        dist = Math.acos(dist)\n        dist = dist * 180 / Math.PI\n        dist = dist * 60 * 1.1515\n        dist = dist * 1.609344 * 1000\n\n        dist\n\n    async:\n        parallel: (asyncCalls, sharedCallback) ->\n            counter = asyncCalls.length\n            allResults = []\n            k = 0\n\n            makeCallback = (index) ->\n                ->\n                    results = []\n                    i = 0\n\n                    counter--\n\n                    while i < arguments.length\n                        results.push arguments[i]\n                        i++\n\n                    allResults[index] = results\n\n                    sharedCallback allResults if counter is 0\n\n                    return\n\n            while k < asyncCalls.length\n                asyncCalls[k] makeCallback(k)\n                k++\n\n            return\n\nmodule.exports = util\n","Config = require './config'\ntranslations = require './translations'\nutil = require './util'\nconfig = new Config()\n\n# Set default values.\nconfig.set\n    locale: 'en_US'\n    coreUrl: 'https://api.etilbudsavis.dk'\n    graphUrl: 'https://graph.service.shopgun.com'\n    eventsTrackUrl: 'https://events.service.shopgun.com/track'\n    eventsPulseUrl: 'wss://events.service.shopgun.com/pulse'\n    assetsFileUploadUrl: 'https://assets.service.shopgun.com/upload'\n\nmodule.exports =\n    config: config\n\n    translations: translations\n\n    util: util\n","module.exports = require './core'\n","SGN = require '../sgn'\nprefixKey = 'sgn-'\n\nmodule.exports =\n    key: 'sgn-'\n\n    storage: do ->\n        try\n            storage = window.localStorage\n\n            storage[\"#{prefixKey}test-storage\"] = 'foobar'\n            delete storage[\"#{prefixKey}test-storage\"]\n\n            storage\n        catch\n            {}\n\n    get: (key) ->\n        try\n            JSON.parse @storage[\"#{prefixKey}#{key}\"]\n\n    set: (key, value) ->\n        try\n            @storage[\"#{prefixKey}#{key}\"] = JSON.stringify value\n\n        @\n","SGN = require '../sgn'\nprefixKey = 'sgn-'\n\nmodule.exports =\n    get: (key) ->\n        return if SGN.util.isNode()\n\n        try\n            name = \"#{prefixKey}#{key}=\"\n            ca = document.cookie.split ';'\n\n            for c in ca\n                ct = c.trim()\n\n                value = ct.substring(name.length, ct.length) if ct.indexOf(name) is 0\n\n            value = JSON.parse value\n        catch err\n            value = {}\n\n        value\n\n    set: (key, value) ->\n        return if SGN.util.isNode()\n\n        try\n            days = 365\n            date = new Date()\n            str = JSON.stringify value\n\n            date.setTime date.getTime() + days * 24 * 60 * 60 * 1000\n\n            document.cookie = \"#{prefixKey}#{key}=#{str};expires=#{date.toUTCString()};path=/\"\n        catch err\n\n        return\n\n\n","SGN = require '../sgn'\n\nmodule.exports = (options = {}, callback, progressCallback) ->\n    http = new XMLHttpRequest()\n    method = options.method ? 'get'\n    url = options.url\n    headers = options.headers ? {}\n\n    if options.qs?\n        queryParams = SGN.util.formatQueryParams options.qs\n\n        if url.indexOf('?') is -1\n            url += '?' + queryParams\n        else\n            url += '&' + queryParams\n\n    http.open method.toUpperCase(), url\n    http.timeout = options.timeout if options.timeout?\n    http.withCredentials = true if options.useCookies is true\n\n    if options.json is true\n        headers['Content-Type'] = 'application/json'\n        headers['Accept'] = 'application/json'\n\n    for header, value of options.headers\n        http.setRequestHeader header, value\n\n    http.addEventListener 'load', ->\n        headers = http.getAllResponseHeaders().split '\\r\\n'\n        headers = headers.reduce (acc, current, i) ->\n            parts = current.split ': '\n\n            acc[parts[0].toLowerCase()] = parts[1]\n\n            acc\n        , {}\n        body = http.responseText\n\n        body = JSON.parse body if options.json is true\n\n        callback null,\n            statusCode: http.status\n            headers: headers\n            body: body\n\n        return\n    http.addEventListener 'error', ->\n        callback new Error()\n\n        return\n    http.addEventListener 'timeout', ->\n        callback new Error()\n\n        return\n    http.addEventListener 'progress', (e) ->\n        if e.lengthComputable and typeof progressCallback is 'function'\n            progressCallback e.loaded, e.total\n\n        return\n\n    if options.formData?\n        formData = new FormData()\n\n        for key, value of options.formData\n            formData.append key, value\n\n        http.send formData\n    else if options.body?\n        if options.json is true\n            http.send JSON.stringify(options.body)\n        else\n            http.send options.body\n    else\n        http.send()\n\n    return\n","module.exports = {}\n","SGN = require '../../sgn'\n\nmodule.exports = (options = {}, callback, progressCallback) ->\n    throw new Error('File is not defined') if not options.file?\n\n    url = SGN.config.get 'assetsFileUploadUrl'\n    formData = file: options.file\n    timeout = 1000 * 60 * 60\n\n    SGN.request\n        method: 'post'\n        url: url\n        formData: formData\n        timeout: timeout\n        headers:\n            'Accept': 'application/json'\n    , (err, data) ->\n        if err?\n            callback SGN.util.error(new Error('Request error'),\n                code: 'RequestError'\n            )\n        else\n            if data.statusCode is 200\n                callback null, JSON.parse(data.body)\n            else\n                callback SGN.util.error(new Error('Request error'),\n                    code: 'RequestError'\n                    statusCode: data.statusCode\n                )\n\n        return\n    , (loaded, total) ->\n        if typeof progressCallback is 'function'\n            progressCallback\n                progress: loaded / total\n                loaded: loaded\n                total: total\n\n        return\n\n    return\n","module.exports =\n    fileUpload: require './file-upload'\n","SGN = require '../../sgn'\nclientLocalStorage = require '../../storage/client-local'\ngetPool = ->\n    data = clientLocalStorage.get 'event-tracker-pool'\n    data = [] if Array.isArray(data) is false\n\n    data\npool = getPool()\n\nclientLocalStorage.set 'event-tracker-pool', []\n\ntry\n    window.addEventListener 'unload', ->\n        pool = pool.concat getPool()\n\n        clientLocalStorage.set 'event-tracker-pool', pool\n\n        return\n    , false\n\nmodule.exports = class Tracker\n    defaultOptions:\n        trackId: null\n        dispatchInterval: 3000\n        dispatchLimit: 100\n        poolLimit: 1000\n        dryRun: false\n\n    constructor: (options = {}) ->\n        for key, value of @defaultOptions\n            @[key] = options[key] or value\n\n        @dispatching = false\n        @session =\n            id: SGN.util.uuid()\n        @client =\n            trackId: @trackId\n            id: SGN.client.id\n        @view =\n            path: []\n            previousPath: []\n            uri: null\n        @location = {}\n        @application = {}\n        @identity = {}\n\n        # Dispatch events periodically.\n        @interval = setInterval @dispatch.bind(@), @dispatchInterval\n\n        return\n\n    trackEvent: (type, properties = {}, version = '1.0.0') ->\n        throw SGN.util.error(new Error('Event type is required')) if typeof type isnt 'string'\n        return if not @trackId?\n\n        pool.push\n            id: SGN.util.uuid()\n            type: type\n            version: version\n            recordedAt: new Date().toISOString()\n            sentAt: null\n            client:\n                id: @client.id\n                trackId: @client.trackId\n            context: @getContext()\n            properties: properties\n\n        pool.shift() while @getPoolSize() > @poolLimit\n\n        @\n\n    identify: (id) ->\n        @identity.id = id\n\n        @\n\n    setLocation: (location = {}) ->\n        @location.determinedAt = new Date(location.timestamp).toISOString()\n        @location.latitude = location.latitude\n        @location.longitude = location.longitude\n        @location.altitude = location.altitude\n        @location.accuracy =\n            horizontal: location.accuracy?.horizontal\n            vertical: location.accuracy?.vertical\n        @location.speed = location.speed\n        @location.floor = location.floor\n\n        @\n\n    setApplication: (application = {}) ->\n        @application.name = application.name\n        @application.version = application.version\n        @application.build = application.build\n\n        @\n\n    setView: (path) ->\n        @view.previousPath = @view.path\n        @view.path = path if Array.isArray(path) is true\n        @view.uri = window.location.href\n\n        @\n\n    getView: ->\n        view = {}\n\n        view.path = @view.path if @view.path.length > 0\n        view.previousPath = @view.previousPath if @view.previousPath.length > 0\n        view.uri = @view.uri if @view.uri?\n\n        view\n\n    getContext: ->\n        screenDimensions = SGN.util.getScreenDimensions()\n        os = SGN.util.getOS()\n        context =\n            userAgent: window.navigator.userAgent\n            locale: navigator.language\n            timeZone:\n                utcOffsetSeconds: SGN.util.getUtcOffsetSeconds()\n                utcDstOffsetSeconds: SGN.util.getUtcDstOffsetSeconds()\n            device:\n                screen:\n                    width: screenDimensions.physical.width\n                    height: screenDimensions.physical.height\n                    density: screenDimensions.density\n            session:\n                id: @session.id\n            view: @getView()\n        application =\n            name: @application.name\n            version: @application.version\n            build: @application.build\n        campaign =\n            source: SGN.util.getQueryParam 'utm_source'\n            medium: SGN.util.getQueryParam 'utm_medium'\n            name: SGN.util.getQueryParam 'utm_campaign'\n            term: SGN.util.getQueryParam 'utm_term'\n            content: SGN.util.getQueryParam 'utm_content'\n        loc =\n            determinedAt: @location.determinedAt\n            latitude: @location.latitude\n            longitude: @location.longitude\n            altitude: @location.altitude\n            speed: @location.speed\n            floor: @location.floor\n            accuracy:\n                horizontal: @location.accuracy?.horizontal\n                vertical: @location.accuracy?.vertical\n\n        # Operating system.\n        context.os = name: os if os?\n\n        # Session referrer.\n        context.session.referrer = document.referrer if document.referrer.length > 0\n\n        # Application.\n        ['name', 'version', 'build'].forEach (key) ->\n            delete application[key] if typeof application[key] isnt 'string' or application[key].length is 0\n            return\n        context.application = application if Object.keys(application).length > 0\n\n        # Campaign.\n        ['source', 'medium', 'name', 'term', 'content'].forEach (key) ->\n            delete campaign[key] if typeof campaign[key] isnt 'string' or campaign[key].length is 0\n            return\n        context.campaign = campaign if Object.keys(campaign).length > 0\n\n        # Location.\n        ['latitude', 'longitude', 'altitude', 'speed', 'floor'].forEach (key) ->\n            delete loc[key] if typeof loc[key] isnt 'number'\n            return\n        delete loc.accuracy.horizontal if typeof loc.accuracy.horizontal isnt 'number'\n        delete loc.accuracy.vertical if typeof loc.accuracy.vertical isnt 'number'\n        delete loc.accuracy if Object.keys(loc.accuracy).length is 0\n        delete loc.determinedAt if typeof loc.determinedAt isnt 'string' or loc.determinedAt.length is 0\n        context.location = loc if Object.keys(loc).length > 0\n\n        # Person identifier.\n        context.personId = @identity.id if @identity.id?\n\n        context\n\n    getPoolSize: ->\n        pool.length\n\n    dispatch: ->\n        return if @dispatching is true or @getPoolSize() is 0\n        return pool.splice(0, @dispatchLimit) if @dryRun is true\n\n        events = pool.slice 0, @dispatchLimit\n        nacks = 0\n\n        @dispatching = true\n\n        @ship events, (err, response) =>\n            @dispatching = false\n\n            if not err?\n                response.events.forEach (resEvent) ->\n                    if resEvent.status is 'validation_error' or resEvent.status is 'ack'\n                        pool = pool.filter (poolEvent) -> poolEvent.id isnt resEvent.id\n                    else if 'nack'\n                        nacks++\n\n                    return\n\n                # Keep dispatching until the pool size reaches a sane level.\n                @dispatch() if @getPoolSize() >= @dispatchLimit and nacks is 0\n\n            return\n\n        @\n\n    ship: (events = [], callback) ->\n        http = new XMLHttpRequest()\n        url = SGN.config.get 'eventsTrackUrl'\n        payload = events: events.map (event) ->\n            event.sentAt = new Date().toISOString()\n\n            event\n\n        http.open 'POST', url\n        http.setRequestHeader 'Content-Type', 'application/json'\n        http.setRequestHeader 'Accept', 'application/json'\n        http.timeout = 1000 * 20\n        http.onload = ->\n            if http.status is 200\n                try\n                    callback null, JSON.parse(http.responseText)\n                catch err\n                    callback SGN.util.error(new Error('Could not parse JSON'))\n            else\n                callback SGN.util.error(new Error('Server did not accept request'))\n\n            return\n        http.onerror = ->\n            callback SGN.util.error(new Error('Could not perform network request'))\n\n            return\n        http.send JSON.stringify(payload)\n\n        @\n","MicroEvent = require 'microevent'\n\nclass Pulse\n    constructor: ->\n        @destroyed = false\n        @connection = @connect()\n\n        return\n\n    destroy: ->\n        @destroyed = true\n\n        @connection.close()\n\n        @\n\n    connect: ->\n        connection = new WebSocket SGN.config.get('eventsPulseUrl')\n\n        connection.onopen = @onOpen.bind @\n        connection.onmessage = @onMessage.bind @\n        connection.onerror = @onError.bind @\n        connection.onclose = @onClose.bind @\n\n        connection\n\n    onOpen: ->\n        @trigger 'open'\n\n        return\n\n    onMessage: (e) ->\n        try\n            @trigger 'event', JSON.parse(e.data)\n\n        return\n\n    onError: ->\n        return\n\n    onClose: ->\n        if @destroyed is false\n            setTimeout =>\n                @connection = @connect()\n\n                return\n            , 2000\n\n        return\n\nMicroEvent.mixin Pulse\n\nmodule.exports = Pulse\n","module.exports =\n    Tracker: require './tracker'\n\n    Pulse: require './pulse'\n","SGN = require '../../sgn'\n\nparseCookies = (cookies = []) ->\n    parsedCookies = {}\n\n    cookies.map (cookie) ->\n        parts = cookie.split '; '\n        keyValuePair = parts[0].split '='\n        key = keyValuePair[0]\n        value = keyValuePair[1]\n\n        parsedCookies[key] = value\n\n        return\n    \n    parsedCookies\n\nmodule.exports = (options = {}, callback) ->\n    url = SGN.config.get 'graphUrl'\n    timeout = 1000 * 12\n    appKey = SGN.config.get 'appKey'\n    authToken = SGN.config.get 'authToken'\n    authTokenCookieName = 'shopgun-auth-token'\n    options =\n        method: 'post'\n        url: url\n        timeout: timeout\n        json: true\n        headers: {}\n        body:\n            query: options.query\n            operationName: options.operationName\n            variables: options.variables\n\n    # Apply authorization header when app key is provided to avoid rate limiting.\n    options.headers.Authorization = 'Basic ' + SGN.util.btoa(\"app-key:#{appKey}\") if appKey?\n\n    # Set cookies manually in node.js.\n    if SGN.util.isNode() and authToken?\n        options.cookies = [\n            key: authTokenCookieName\n            value: authToken\n            url: url\n        ]\n    else if SGN.util.isBrowser()\n        options.useCookies = true\n\n    SGN.request options, (err, data) ->\n        if err?\n            callback SGN.util.error(new Error('Graph request error'),\n                code: 'GraphRequestError'\n            )\n        else\n            # Update auth token as it might have changed.\n            if SGN.util.isNode()\n                cookies = parseCookies data.headers?['set-cookie']\n                authCookie = cookies[authTokenCookieName]\n\n                if SGN.config.get('authToken') isnt authCookie\n                    SGN.config.set 'authToken', authCookie\n\n            if data.statusCode is 200\n                callback null, data.body\n            else\n                callback SGN.util.error(new Error('Graph API error'),\n                    code: 'GraphAPIError'\n                    statusCode: data.statusCode\n                )\n\n        return\n\n    return\n\n\n","module.exports =\n    request: require './request'\n","SGN = require '../../sgn'\n\nmodule.exports = (options = {}, callback = ->) ->\n    SGN.CoreKit.session.ensure (err) ->\n        return callback err if err?\n\n        url = options.url ? ''\n        headers = options.headers ? {}\n        token = SGN.config.get 'coreSessionToken'\n        clientId = SGN.config.get 'coreSessionClientId'\n        appVersion = SGN.config.get 'appVersion'\n        appSecret = SGN.config.get 'appSecret'\n        locale = SGN.config.get 'locale'\n        qs = options.qs ? {}\n        geo = options.geolocation\n\n        headers['X-Token'] = token\n        headers['X-Signature'] = SGN.CoreKit.session.sign appSecret, token if appSecret?\n\n        qs.r_locale = locale if locale?\n        qs.api_av = appVersion if appVersion?\n        qs.client_id = clientId if clientId?\n\n        if geo?\n            qs.r_lat = geo.latitude if geo.latitude? and not qs.r_lat?\n            qs.r_lng = geo.longitude if geo.longitude? and not qs.r_lng?\n            qs.r_radius = geo.radius if geo.radius? and not qs.r_radius?\n            qs.r_sensor = geo.sensor if geo.sensor? and not qs.r_sensor?\n\n        SGN.request\n            method: options.method\n            url: SGN.config.get('coreUrl') + url\n            qs: qs\n            body: options.body\n            formData: options.formData\n            headers: headers\n            json: true\n            useCookies: false\n        , (err, data) ->\n            if err?\n                callback SGN.util.error(new Error('Core request error'),\n                    code: 'CoreRequestError'\n                )\n            else\n                token = SGN.config.get 'coreSessionToken'\n                responseToken = data.headers['x-token']\n\n                SGN.CoreKit.session.saveToken responseToken if token isnt responseToken\n\n                if data.statusCode >= 200 and data.statusCode < 300 or data.statusCode is 304\n                    callback null, data.body\n                else\n                    callback SGN.util.error(new Error('Core API error'),\n                        code: 'CoreAPIError'\n                        statusCode: data.statusCode\n                    ), data.body\n\n            return\n\n    return\n","!function(globals) {\n'use strict'\n\nvar convertHex = {\n  bytesToHex: function(bytes) {\n    /*if (typeof bytes.byteLength != 'undefined') {\n      var newBytes = []\n\n      if (typeof bytes.buffer != 'undefined')\n        bytes = new DataView(bytes.buffer)\n      else\n        bytes = new DataView(bytes)\n\n      for (var i = 0; i < bytes.byteLength; ++i) {\n        newBytes.push(bytes.getUint8(i))\n      }\n      bytes = newBytes\n    }*/\n    return arrBytesToHex(bytes)\n  },\n  hexToBytes: function(hex) {\n    if (hex.length % 2 === 1) throw new Error(\"hexToBytes can't have a string with an odd number of characters.\")\n    if (hex.indexOf('0x') === 0) hex = hex.slice(2)\n    return hex.match(/../g).map(function(x) { return parseInt(x,16) })\n  }\n}\n\n\n// PRIVATE\n\nfunction arrBytesToHex(bytes) {\n  return bytes.map(function(x) { return padLeft(x.toString(16),2) }).join('')\n}\n\nfunction padLeft(orig, len) {\n  if (orig.length > len) return orig\n  return Array(len - orig.length + 1).join('0') + orig\n}\n\n\nif (typeof module !== 'undefined' && module.exports) { //CommonJS\n  module.exports = convertHex\n} else {\n  globals.convertHex = convertHex\n}\n\n}(this);","!function(globals) {\n'use strict'\n\nvar convertString = {\n  bytesToString: function(bytes) {\n    return bytes.map(function(x){ return String.fromCharCode(x) }).join('')\n  },\n  stringToBytes: function(str) {\n    return str.split('').map(function(x) { return x.charCodeAt(0) })\n  }\n}\n\n//http://hossa.in/2012/07/20/utf-8-in-javascript.html\nconvertString.UTF8 = {\n   bytesToString: function(bytes) {\n    return decodeURIComponent(escape(convertString.bytesToString(bytes)))\n  },\n  stringToBytes: function(str) {\n   return convertString.stringToBytes(unescape(encodeURIComponent(str)))\n  }\n}\n\nif (typeof module !== 'undefined' && module.exports) { //CommonJS\n  module.exports = convertString\n} else {\n  globals.convertString = convertString\n}\n\n}(this);","!function(globals) {\n'use strict'\n\nvar _imports = {}\n\nif (typeof module !== 'undefined' && module.exports) { //CommonJS\n  _imports.bytesToHex = require('convert-hex').bytesToHex\n  _imports.convertString = require('convert-string')\n  module.exports = sha256\n} else {\n  _imports.bytesToHex = globals.convertHex.bytesToHex\n  _imports.convertString = globals.convertString\n  globals.sha256 = sha256\n}\n\n/*\nCryptoJS v3.1.2\ncode.google.com/p/crypto-js\n(c) 2009-2013 by Jeff Mott. All rights reserved.\ncode.google.com/p/crypto-js/wiki/License\n*/\n\n// Initialization round constants tables\nvar K = []\n\n// Compute constants\n!function () {\n  function isPrime(n) {\n    var sqrtN = Math.sqrt(n);\n    for (var factor = 2; factor <= sqrtN; factor++) {\n      if (!(n % factor)) return false\n    }\n\n    return true\n  }\n\n  function getFractionalBits(n) {\n    return ((n - (n | 0)) * 0x100000000) | 0\n  }\n\n  var n = 2\n  var nPrime = 0\n  while (nPrime < 64) {\n    if (isPrime(n)) {\n      K[nPrime] = getFractionalBits(Math.pow(n, 1 / 3))\n      nPrime++\n    }\n\n    n++\n  }\n}()\n\nvar bytesToWords = function (bytes) {\n  var words = []\n  for (var i = 0, b = 0; i < bytes.length; i++, b += 8) {\n    words[b >>> 5] |= bytes[i] << (24 - b % 32)\n  }\n  return words\n}\n\nvar wordsToBytes = function (words) {\n  var bytes = []\n  for (var b = 0; b < words.length * 32; b += 8) {\n    bytes.push((words[b >>> 5] >>> (24 - b % 32)) & 0xFF)\n  }\n  return bytes\n}\n\n// Reusable object\nvar W = []\n\nvar processBlock = function (H, M, offset) {\n  // Working variables\n  var a = H[0], b = H[1], c = H[2], d = H[3]\n  var e = H[4], f = H[5], g = H[6], h = H[7]\n\n    // Computation\n  for (var i = 0; i < 64; i++) {\n    if (i < 16) {\n      W[i] = M[offset + i] | 0\n    } else {\n      var gamma0x = W[i - 15]\n      var gamma0  = ((gamma0x << 25) | (gamma0x >>> 7))  ^\n                    ((gamma0x << 14) | (gamma0x >>> 18)) ^\n                    (gamma0x >>> 3)\n\n      var gamma1x = W[i - 2];\n      var gamma1  = ((gamma1x << 15) | (gamma1x >>> 17)) ^\n                    ((gamma1x << 13) | (gamma1x >>> 19)) ^\n                    (gamma1x >>> 10)\n\n      W[i] = gamma0 + W[i - 7] + gamma1 + W[i - 16];\n    }\n\n    var ch  = (e & f) ^ (~e & g);\n    var maj = (a & b) ^ (a & c) ^ (b & c);\n\n    var sigma0 = ((a << 30) | (a >>> 2)) ^ ((a << 19) | (a >>> 13)) ^ ((a << 10) | (a >>> 22));\n    var sigma1 = ((e << 26) | (e >>> 6)) ^ ((e << 21) | (e >>> 11)) ^ ((e << 7)  | (e >>> 25));\n\n    var t1 = h + sigma1 + ch + K[i] + W[i];\n    var t2 = sigma0 + maj;\n\n    h = g;\n    g = f;\n    f = e;\n    e = (d + t1) | 0;\n    d = c;\n    c = b;\n    b = a;\n    a = (t1 + t2) | 0;\n  }\n\n  // Intermediate hash value\n  H[0] = (H[0] + a) | 0;\n  H[1] = (H[1] + b) | 0;\n  H[2] = (H[2] + c) | 0;\n  H[3] = (H[3] + d) | 0;\n  H[4] = (H[4] + e) | 0;\n  H[5] = (H[5] + f) | 0;\n  H[6] = (H[6] + g) | 0;\n  H[7] = (H[7] + h) | 0;\n}\n\nfunction sha256(message, options) {;\n  if (message.constructor === String) {\n    message = _imports.convertString.UTF8.stringToBytes(message);\n  }\n\n  var H =[ 0x6A09E667, 0xBB67AE85, 0x3C6EF372, 0xA54FF53A,\n           0x510E527F, 0x9B05688C, 0x1F83D9AB, 0x5BE0CD19 ];\n\n  var m = bytesToWords(message);\n  var l = message.length * 8;\n\n  m[l >> 5] |= 0x80 << (24 - l % 32);\n  m[((l + 64 >> 9) << 4) + 15] = l;\n\n  for (var i=0 ; i<m.length; i += 16) {\n    processBlock(H, m, i);\n  }\n\n  var digestbytes = wordsToBytes(H);\n  return options && options.asBytes ? digestbytes :\n         options && options.asString ? _imports.convertString.bytesToString(digestbytes) :\n         _imports.bytesToHex(digestbytes)\n}\n\nsha256.x2 = function(message, options) {\n  return sha256(sha256(message, { asBytes:true }), options)\n}\n\n}(this);\n","SGN = require '../../sgn'\nsha256 = require 'sha256'\nclientCookieStorage = require '../../storage/client-cookie'\ncallbackQueue = []\n\nsession =\n    ttl: 1 * 60 * 60 * 24 * 60\n\n    saveToken: (token) ->\n        SGN.config.set coreSessionToken: token\n\n        session.saveCookie()\n\n        return\n\n    saveClientId: (clientId) ->\n        SGN.config.set coreSessionClientId: clientId\n\n        session.saveCookie()\n\n        return\n\n    saveCookie: ->\n        clientCookieStorage.set 'session',\n            token: SGN.config.get 'coreSessionToken'\n            client_id: SGN.config.get 'coreSessionClientId'\n\n        return\n\n    create: (callback) ->\n        SGN.request\n            method: 'post'\n            url: SGN.config.get('coreUrl') + '/v2/sessions'\n            json: true\n            qs:\n                api_key: SGN.config.get 'appKey'\n                token_ttl: session.ttl\n        , (err, data) ->\n            if err?\n                callback err\n            else if data.statusCode is 201\n                session.saveToken data.body.token\n                session.saveClientId data.body.client_id\n\n                callback err, data.body\n            else\n                callback new Error('Could not create session')\n\n            return\n\n        return\n    \n    update: (callback) ->\n        headers = {}\n        token = SGN.config.get 'coreSessionToken'\n        appSecret = SGN.config.get 'appSecret'\n\n        headers['X-Token'] = token\n        headers['X-Signature'] = session.sign appSecret, token if appSecret?\n\n        SGN.request\n            url: SGN.config.get('coreUrl') + '/v2/sessions'\n            headers: headers\n            json: true\n        , (err, data) ->\n            if err?\n                callback err\n            else if data.statusCode is 200\n                session.saveToken data.body.token\n                session.saveClientId data.body.client_id\n\n                callback err, data.body\n            else\n                callback new Error('Could not update session')\n\n            return\n\n        return\n\n    renew: (callback) ->\n        headers = {}\n        token = SGN.config.get 'coreSessionToken'\n        appSecret = SGN.config.get 'appSecret'\n\n        headers['X-Token'] = token\n        headers['X-Signature'] = session.sign appSecret, token if appSecret?\n\n        SGN.request\n            method: 'put'\n            url: SGN.config.get('coreUrl') + '/v2/sessions'\n            headers: headers\n            json: true\n        , (err, data) ->\n            if err?\n                callback err\n            else if data.statusCode is 200\n                session.saveToken data.body.token\n                session.saveClientId data.body.client_id\n\n                callback err, data.body\n            else\n                callback new Error('Could not renew session')\n\n            return\n\n        return\n\n    ensure: (callback) ->\n        queueCount = callbackQueue.length\n        complete = (err) ->\n            callbackQueue = callbackQueue.filter (fn) ->\n                fn err\n\n                false\n\n            return\n\n        callbackQueue.push callback\n\n        if queueCount is 0\n            if not SGN.config.get('coreSessionToken')?\n                session.create complete\n            else\n                complete()\n\n        return\n\n    sign: (appSecret, token) ->\n        sha256 [appSecret, token].join('')\n\nmodule.exports = session\n","SGN = require '../../sgn'\nrequest = require './request'\nsession = require './session'\n\nmodule.exports =\n    request: request\n\n    session: session\n","MicroEvent = require 'microevent'\nSGN = require '../../sgn'\n\nclass PagedPublicationPageSpread\n    constructor: (@options = {}) ->\n        @contentsRendered = false\n        @hotspotsRendered = false\n        @el = @renderEl()\n\n        return\n\n    getId: ->\n        @options.id\n\n    getEl: ->\n        @el\n\n    getPages: ->\n        @options.pages\n\n    renderEl: ->\n        el = document.createElement 'div'\n        pageIds = @getPages().map (page) -> page.id\n\n        el.className = 'verso__page-spread sgn-pp__page-spread'\n\n        el.setAttribute 'data-id', @getId()\n        el.setAttribute 'data-type', 'page'\n        el.setAttribute 'data-width', @options.width\n        el.setAttribute 'data-page-ids', pageIds.join(',')\n        el.setAttribute 'data-max-zoom-scale', @options.maxZoomScale\n        el.setAttribute 'data-zoomable', false\n\n        el\n\n    renderContents: ->\n        id = @getId()\n        el = @getEl()\n        pages = @getPages()\n        pageCount = pages.length\n        imageLoads = 0\n\n        pages.forEach (page, i) =>\n            image = page.images.medium\n            pageEl = document.createElement 'div'\n            loaderEl = document.createElement 'div'\n\n            pageEl.className = 'sgn-pp__page verso__page'\n            pageEl.setAttribute('data-id', page.id) if page.id?\n\n            if pageCount is 2\n                pageEl.className += if i is 0 then ' verso-page--verso' else ' verso-page--recto'\n\n            pageEl.appendChild loaderEl\n            el.appendChild pageEl\n\n            loaderEl.className = 'sgn-pp-page__loader'\n            loaderEl.innerHTML = \"<span>#{page.label}</span>\"\n\n            SGN.util.loadImage image, (err, width, height) =>\n                if not err?\n                    isComplete = ++imageLoads is pageCount\n\n                    pageEl.style.backgroundImage = \"url(#{image})\"\n                    pageEl.setAttribute 'data-width', width\n                    pageEl.setAttribute 'data-height', height\n                    pageEl.innerHTML = '&nbsp;'\n\n                    el.setAttribute('data-zoomable', true) if isComplete\n\n                    @trigger 'pageLoaded', pageSpreadId: id, page: page\n                    @trigger 'pagesLoaded', pageSpreadId: id, pages: pages if isComplete\n                else\n                    loaderEl.innerHTML = '<span>!</span>'\n\n                return\n\n            return\n\n        @contentsRendered = true\n\n        @\n\n    clearContents: (pageSpread, versoPageSpread) ->\n        @el.innerHTML = ''\n        @contentsRendered = false\n\n        @\n\n    zoomIn: ->\n        pageEls = [].slice.call @el.querySelectorAll('.sgn-pp__page')\n        pages = @getPages()\n\n        pageEls.forEach (pageEl) =>\n            id = pageEl.getAttribute 'data-id'\n            page = SGN.util.find pages, (page) -> page.id is id\n            image = page.images.large\n\n            SGN.util.loadImage image, (err) =>\n                if not err? and @el.getAttribute('data-active') is 'true'\n                    pageEl.setAttribute 'data-image', pageEl.style.backgroundImage\n                    pageEl.style.backgroundImage = \"url(#{image})\"\n\n                return\n\n            return\n\n        return\n\n    zoomOut: ->\n        pageEls = [].slice.call @el.querySelectorAll('.sgn-pp__page[data-image]')\n\n        pageEls.forEach (pageEl) ->\n            pageEl.style.backgroundImage = pageEl.getAttribute 'data-image'\n            \n            pageEl.removeAttribute 'data-image'\n\n            return\n\n        return\n\nMicroEvent.mixin PagedPublicationPageSpread\n\nmodule.exports = PagedPublicationPageSpread\n","MicroEvent = require 'microevent'\nPageSpread = require './page-spread'\nSGN = require '../../sgn'\n\nclass PagedPublicationPageSpreads\n    constructor: (@options) ->\n        @collection = []\n        @ids = {}\n\n        return\n\n    get: (id) ->\n        @ids[id]\n\n    getFrag: ->\n        frag = document.createDocumentFragment()\n\n        @collection.forEach (pageSpread) -> frag.appendChild pageSpread.el\n\n        frag\n\n    update: (pageMode = 'single') ->\n        pageSpreads = []\n        ids = {}\n        pages = @options.pages.slice()\n        width = @options.width\n        maxZoomScale = @options.maxZoomScale\n\n        if pageMode is 'single'\n            pages.forEach (page) -> pageSpreads.push [page]\n        else\n            firstPage = pages.shift()\n            lastPage = if pages.length % 2 is 1 then pages.pop() else null\n            midstPageSpreads = SGN.util.chunk pages, 2\n\n            pageSpreads.push [firstPage] if firstPage?\n            midstPageSpreads.forEach (midstPages) -> pageSpreads.push midstPages.map (page) -> page\n            pageSpreads.push [lastPage] if lastPage?\n\n        @collection = pageSpreads.map (pages, i) =>\n            id = \"#{pageMode}-#{i}\"\n            pageSpread = new PageSpread\n                width: width\n                maxZoomScale: maxZoomScale\n                pages: pages\n                id: id\n\n            pageSpread.bind 'pageLoaded', (e) => @trigger 'pageLoaded', e\n            pageSpread.bind 'pagesLoaded', (e) => @trigger 'pagesLoaded', e\n\n            ids[id] = pageSpread\n\n            pageSpread\n        @ids = ids\n\n        @\n\nMicroEvent.mixin PagedPublicationPageSpreads\n\nmodule.exports = PagedPublicationPageSpreads\n","MicroEvent = require 'microevent'\nPageSpreads = require './page-spreads'\nclientLocalStorage = require '../../storage/client-local'\nSGN = require '../../sgn'\n\nclass PagedPublicationCore\n    defaults:\n        pages: []\n        pageSpreadWidth: 100\n        pageSpreadMaxZoomScale: 2.3\n        idleDelay: 1000\n        resizeDelay: 400\n        color: '#ffffff'\n\n    constructor: (el, options = {}) ->\n        @options = @makeOptions options, @defaults\n        @pageId = @getOption 'pageId'\n        @els =\n            root: el\n            pages: el.querySelector '.sgn-pp__pages'\n            verso: el.querySelector '.verso'\n        @pageMode = @getPageMode()\n        @pageSpreads = new PageSpreads\n            pages: @getOption 'pages'\n            maxZoomScale: @getOption 'pageSpreadMaxZoomScale'\n            width: @getOption 'pageSpreadWidth'\n\n        @pageSpreads.bind 'pageLoaded', @pageLoaded.bind(@)\n        @pageSpreads.bind 'pagesLoaded', @pagesLoaded.bind(@)\n\n        @setColor @getOption('color')\n\n        # It's important to insert the page spreads before instantiating Verso.\n        @els.pages.parentNode.insertBefore @pageSpreads.update(@pageMode).getFrag(), @els.pages\n\n        @verso = @createVerso()\n\n        @bind 'started', @start.bind(@)\n        @bind 'destroyed', @destroy.bind(@)\n\n        return\n\n    start: ->\n        @getVerso().start()\n\n        @visibilityChangeListener = @visibilityChange.bind @\n        @resizeListener = SGN.util.throttle @resize, @getOption('resizeDelay'), @\n        @unloadListener = @unload.bind @\n\n        document.addEventListener 'visibilitychange', @visibilityChangeListener, false\n        window.addEventListener 'resize', @resizeListener, false\n        window.addEventListener 'beforeunload', @unloadListener, false\n\n        @els.root.setAttribute 'data-started', ''\n        @els.root.setAttribute 'tabindex', '-1'\n        @els.root.focus()\n\n        return\n\n    destroy: ->\n        @getVerso().destroy()\n\n        document.removeEventListener 'visibilitychange', @visibilityChangeListener, false\n        window.removeEventListener 'resize', @resizeListener, false\n\n        return\n\n    makeOptions: (options, defaults) ->\n        opts = {}\n\n        opts[key] = options[key] ? defaults[key] for key, value of options\n\n        opts\n\n    getOption: (key) ->\n        @options[key]\n\n    setColor: (color) ->\n        @els.root.setAttribute 'data-color-brightness', SGN.util.getColorBrightness(color)\n        @els.root.style.backgroundColor = color\n\n        return\n\n    createVerso: ->\n        Verso = require 'verso-browser'\n        verso = new Verso @els.verso, pageId: @pageId\n\n        verso.pageSpreads.forEach @overridePageSpreadContentRect.bind(@)\n\n        verso.bind 'beforeNavigation', @beforeNavigation.bind(@)\n        verso.bind 'afterNavigation', @afterNavigation.bind(@)\n        verso.bind 'attemptedNavigation', @attemptedNavigation.bind(@)\n        verso.bind 'clicked', @clicked.bind(@)\n        verso.bind 'doubleClicked', @doubleClicked.bind(@)\n        verso.bind 'pressed', @pressed.bind(@)\n        verso.bind 'contextmenu', @contextmenu.bind(@)\n        verso.bind 'panStart', @panStart.bind(@)\n        verso.bind 'panEnd', @panEnd.bind(@)\n        verso.bind 'zoomedIn', @zoomedIn.bind(@)\n        verso.bind 'zoomedOut', @zoomedOut.bind(@)\n\n        verso\n\n    getVerso: ->\n        @verso\n\n    getContentRect: (pageSpread) ->\n        rect =\n            top: 0\n            left: 0\n            right: 0\n            bottom: 0\n            width: 0\n            height: 0\n        pageEls = pageSpread.getPageEls()\n        pageEl = pageEls[0]\n        pageCount = pageEls.length\n\n        return rect if not pageCount\n        \n        scale = @getVerso().transform.scale\n        pageWidth = pageEl.offsetWidth * pageCount * scale\n        pageHeight = pageEl.offsetHeight * scale\n        imageRatio = +pageEl.getAttribute('data-height') / (+pageEl.getAttribute('data-width') * pageCount)\n        actualHeight = pageHeight\n        actualWidth = actualHeight / imageRatio\n        actualWidth = Math.min pageWidth, actualWidth\n        actualHeight = actualWidth * imageRatio\n        clientRect = pageEl.getBoundingClientRect()\n\n        rect.width = actualWidth\n        rect.height = actualHeight\n        rect.top = clientRect.top + (pageHeight - actualHeight) / 2\n        rect.left = clientRect.left + (pageWidth - actualWidth) / 2\n        rect.right = rect.width + rect.left\n        rect.bottom = rect.height + rect.top\n\n        rect\n\n    formatProgressLabel: (pageSpread) ->\n        pages = pageSpread?.options.pages ? []\n        pageIds = pages.map (page) -> page.id\n        pageLabels = pages.map (page) -> page.label\n        pageCount = @getOption('pages').length\n        label = if pageIds.length > 0 then pageLabels.join('-') + ' / ' + pageCount else null\n\n        label\n\n    renderPageSpreads: ->\n        @getVerso().pageSpreads.forEach (pageSpread) =>\n            visibility = pageSpread.getVisibility()\n            match = @pageSpreads.get pageSpread.getId()\n\n            if match?\n                if visibility is 'visible' and match.contentsRendered is false\n                    setTimeout match.renderContents.bind(match), 0\n                if visibility is 'gone' and match.contentsRendered is true\n                    setTimeout match.clearContents.bind(match), 0\n\n            return\n\n        @\n\n    findPage: (pageId) ->\n        SGN.util.find @getOption('pages'), (page) -> page.id is pageId\n\n    pageLoaded: (e) ->\n        @trigger 'pageLoaded', e\n\n        return\n\n    pagesLoaded: (e) ->\n        @trigger 'pagesLoaded', e\n\n        return\n\n    beforeNavigation: (e) ->\n        position = e.newPosition\n        theVerso = @getVerso()\n        versoPageSpread = theVerso.getPageSpreadFromPosition position\n        pageSpread = @pageSpreads.get versoPageSpread.getId()\n        pageSpreadCount = theVerso.getPageSpreadCount()\n        newSpreadEl = theVerso.pageSpreadEls[e.newPosition]\n        progress = position / (pageSpreadCount - 1) * 100\n        progressLabel = @formatProgressLabel pageSpread\n\n        @els.root.setAttribute 'data-navigating', true\n\n        @renderPageSpreads()\n        @resetIdleTimer()\n        @startIdleTimer()\n        @trigger 'beforeNavigation',\n            verso: e\n            pageSpread: pageSpread\n            newSpreadEl: newSpreadEl\n            progress: progress\n            progressLabel: progressLabel\n            pageSpreadCount: pageSpreadCount\n            newPositionIsEnd: e.newPosition + 1 == pageSpreadCount\n\n        return\n\n    afterNavigation: (e) ->\n        position = e.newPosition\n        theVerso = @getVerso()\n        versoPageSpread = theVerso.getPageSpreadFromPosition position\n        pageSpread = @pageSpreads.get versoPageSpread.getId()\n        pageSpreadCount = theVerso.getPageSpreadCount()\n        newSpreadEl = theVerso.pageSpreadEls[e.newPosition]\n\n        @els.root.setAttribute 'data-navigating', false\n\n        @trigger 'afterNavigation',\n            verso: e\n            pageSpread: pageSpread\n            pageSpreadCount: pageSpreadCount\n            newSpreadEl: newSpreadEl\n            newPositionIsEnd: e.newPosition + 1 == pageSpreadCount\n\n        return\n\n    attemptedNavigation: (e) ->\n        @trigger 'attemptedNavigation', verso: e\n\n        return\n\n    clicked: (e) ->\n        if e.isInsideContent\n            pageId = e.pageEl.getAttribute 'data-id'\n            page = @findPage pageId\n\n            @trigger 'clicked', verso: e, page: page\n\n        return\n\n    doubleClicked: (e) ->\n        if e.isInsideContent\n            pageId = e.pageEl.getAttribute 'data-id'\n            page = @findPage pageId\n\n            @trigger 'doubleClicked', verso: e, page: page\n\n        return\n\n    pressed: (e) ->\n        if e.isInsideContent\n            pageId = e.pageEl.getAttribute 'data-id'\n            page = @findPage pageId\n\n            @trigger 'pressed', verso: e, page: page\n\n        return\n\n    contextmenu: (e) ->\n        if e.isInsideContent\n            pageId = e.pageEl.getAttribute 'data-id'\n            page = @findPage pageId\n\n            @trigger 'contextmenu', verso: e, page: page\n\n        return\n\n    panStart: ->\n        @resetIdleTimer()\n        @trigger 'panStart', scale: @getVerso().transform.scale\n\n        return\n\n    panEnd: ->\n        @startIdleTimer()\n        @trigger 'panEnd'\n\n        return\n\n    zoomedIn: (e) ->\n        position = e.position\n        versoPageSpread = @getVerso().getPageSpreadFromPosition position\n        pageSpread = @pageSpreads.get versoPageSpread.getId()\n\n        pageSpread.zoomIn() if pageSpread?\n\n        @els.root.setAttribute 'data-zoomed-in', true\n        @trigger 'zoomedIn', verso: e, pageSpread: pageSpread\n\n        return\n\n    zoomedOut: (e) ->\n        position = e.position\n        versoPageSpread = @getVerso().getPageSpreadFromPosition position\n        pageSpread = @pageSpreads.get versoPageSpread.getId()\n\n        pageSpread.zoomOut() if pageSpread?\n\n        @els.root.setAttribute 'data-zoomed-in', false\n        @trigger 'zoomedOut', verso: e, pageSpread: pageSpread\n\n        return\n\n    getPageMode: ->\n        pageMode = @getOption 'pageMode'\n\n        if not pageMode?\n            width = @els.root.offsetWidth\n            height = @els.root.offsetHeight\n\n            pageMode = if height >= width then 'single' else 'double'\n\n        pageMode\n\n    resetIdleTimer: ->\n        clearTimeout @idleTimeout\n\n        #@els.root.setAttribute 'data-idle', false\n\n        @\n\n    startIdleTimer: ->\n        @idleTimeout = setTimeout =>\n            #@els.root.setAttribute 'data-idle', true\n\n            return\n        , @getOption('idleDelay')\n\n        @\n\n    switchPageMode: (pageMode) ->\n        return @ if @pageMode is pageMode\n\n        verso = @getVerso()\n        pageIds = verso.getPageSpreadFromPosition(verso.getPosition()).getPageIds()\n        pageSpreadEls = @getVerso().el.querySelectorAll '.sgn-pp__page-spread'\n\n        @pageMode = pageMode\n\n        @pageSpreads.update @pageMode\n\n        pageSpreadEl.parentNode.removeChild pageSpreadEl for pageSpreadEl in pageSpreadEls\n        @els.pages.parentNode.insertBefore @pageSpreads.getFrag(), @els.pages\n\n        verso.refresh()\n        verso.navigateTo verso.getPageSpreadPositionFromPageId(pageIds[0]), duration: 0\n        verso.pageSpreads.forEach @overridePageSpreadContentRect.bind(@)\n\n        @\n\n    overridePageSpreadContentRect: (pageSpread) ->\n        if pageSpread.getType() is 'page'\n            pageSpread.getContentRect = => @getContentRect pageSpread\n\n    visibilityChange: ->\n        pageSpread = @getVerso().getPageSpreadFromPosition @getVerso().getPosition()\n        eventName = if document.hidden is true then 'disappeared' else 'appeared'\n\n        @trigger eventName, pageSpread: @pageSpreads.get(pageSpread.id)\n\n        return\n\n    resize: ->\n        pageMode = @getPageMode()\n\n        if not @getOption('pageMode')? and pageMode isnt @pageMode\n            @switchPageMode pageMode\n        else\n            @trigger 'resized'\n\n        return\n\n    unload: ->\n        @trigger 'disappeared'\n\n        return\n\nMicroEvent.mixin PagedPublicationCore\n\nmodule.exports = PagedPublicationCore\n","module.exports = \"\"\"\n\"\"\"\n","MicroEvent = require 'microevent'\nMustache = require 'mustache'\ntemplate = require './templates/hotspot'\n\nclass PagedPublicationHotspots\n    constructor: ->\n        @currentPageSpreadId = null\n        @pageSpreadsLoaded = {}\n        @cache = {}\n\n        @bind 'hotspotsReceived', @hotspotsReceived.bind(@)\n        @bind 'afterNavigation', @afterNavigation.bind(@)\n        @bind 'pagesLoaded', @pagesLoaded.bind(@)\n        @bind 'resized', @resized.bind(@)\n\n        return\n\n    renderHotspots: (data) ->\n        frag = document.createDocumentFragment()\n        contentRect = data.versoPageSpread.getContentRect()\n        pageSpreadEl = data.pageSpread.getEl()\n        hotspotEls = pageSpreadEl.querySelectorAll '.sgn-pp__hotspot'\n\n        hotspotEl.parentNode.removeChild hotspotEl for hotspotEl in hotspotEls\n\n        for id, hotspot of data.hotspots\n            position = @getPosition data.pages, data.ratio, hotspot\n            el = @renderHotspot hotspot, position, contentRect\n            \n            frag.appendChild el\n\n        pageSpreadEl.appendChild frag\n\n        @\n\n    renderHotspot: (hotspot, position, contentRect) ->\n        el = document.createElement 'div'\n        top = Math.round contentRect.height / 100 * position.top\n        left = Math.round contentRect.width / 100 * position.left\n        width = Math.round contentRect.width / 100 * position.width\n        height = Math.round contentRect.height / 100 * position.height\n\n        top += Math.round contentRect.top\n        left += Math.round contentRect.left\n\n        el.className = 'sgn-pp__hotspot verso__overlay'\n        el.setAttribute 'data-id', hotspot.id if hotspot.id?\n        el.setAttribute 'data-type', hotspot.type if hotspot.type?\n        el.innerHTML = Mustache.render hotspot.template ? template, hotspot\n\n        el.style.top = \"#{top}px\"\n        el.style.left = \"#{left}px\"\n        el.style.width = \"#{width}px\"\n        el.style.height = \"#{height}px\"\n\n        el\n\n    getPosition: (pages, ratio, hotspot) ->\n        minX = null\n        minY = null\n        maxX = null\n        maxY = null\n        pageNumbers = pages.map (page) -> page.pageNumber\n\n        for pageNumber of hotspot.locations\n            continue if pageNumbers.indexOf(+pageNumber) is -1\n\n            hotspot.locations[pageNumber].forEach (coords) ->\n                x = coords[0]\n                y = coords[1]\n\n                x +=1 if pages[1] and pageNumbers[1] is +pageNumber\n                x /= pages.length\n\n                if not minX?\n                    minX = maxX = x\n                    minY = maxY = y\n\n                minX = x if x < minX\n                maxX = x if x > maxX\n                minY = y if y < minY\n                maxY = y if y > maxY\n\n        width = maxX - minX\n        height = maxY - minY\n\n        top: minY / ratio * 100\n        left: minX * 100\n        width: width * 100\n        height: height / ratio * 100\n\n    requestHotspots: (pageSpreadId, pages) ->\n        @trigger 'hotspotsRequested',\n            id: pageSpreadId\n            pages: pages\n\n        return\n\n    hotspotsReceived: (e) ->\n        pageSpreadId = e.pageSpread.getId()\n\n        @setCache pageSpreadId, e\n        @renderHotspots e\n\n        return\n\n    getCache: (pageSpreadId) ->\n        @cache[pageSpreadId]\n\n    setCache: (pageSpreadId, data) ->\n        @cache[pageSpreadId] = data\n\n        @\n\n    afterNavigation: (e) ->\n        return if not e.pageSpread?\n\n        id = e.pageSpread.getId()\n\n        @currentPageSpreadId = id\n        @requestHotspots id, e.pageSpread.getPages() if @pageSpreadsLoaded[id]\n\n        return\n\n    pagesLoaded: (e) ->\n        @pageSpreadsLoaded[e.pageSpreadId] = true\n        @requestHotspots e.pageSpreadId, e.pages if @currentPageSpreadId is e.pageSpreadId\n\n        return\n\n    resized: (e) ->\n        data = @getCache @currentPageSpreadId\n\n        @renderHotspots data if data?\n\n        return\n\nMicroEvent.mixin PagedPublicationHotspots\n\nmodule.exports = PagedPublicationHotspots\n\n\n","module.exports =\n    ESC: 27\n    ARROW_RIGHT: 39\n    ARROW_LEFT: 37\n    SPACE: 32\n    NUMBER_ONE: 49\n","MicroEvent = require 'microevent'\nSGN = require '../../sgn'\nkeyCodes = require '../../key-codes'\n\nclass PagedPublicationControls\n    constructor: (el, @options = {}) ->\n        @els =\n            root: el\n            progress: el.querySelector '.sgn-pp__progress'\n            progressBar: el.querySelector '.sgn-pp-progress__bar'\n            progressLabel: el.querySelector '.sgn-pp__progress-label'\n            prevControl: el.querySelector '.sgn-pp__control[data-direction=prev]'\n            nextControl: el.querySelector '.sgn-pp__control[data-direction=next]'\n        @mouse =\n            x: 0\n            y: 0\n\n        @keyDownListener = SGN.util.throttle @keyDown, 150, @\n        @mouseMoveListener = SGN.util.throttle @mouseMove, 50, @\n\n        @els.root.addEventListener 'keydown', @keyDownListener, false if @options.keyboard is true\n        @els.root.addEventListener 'mousemove', @mouseMoveListener, false\n        @els.prevControl.addEventListener 'click', @prevClicked.bind(@), false if @els.prevControl?\n        @els.nextControl.addEventListener 'click', @nextClicked.bind(@), false if @els.nextControl?\n\n        @mouseMove {}\n\n        @bind 'beforeNavigation', @beforeNavigation.bind(@)\n\n        return\n\n    destroy: ->\n        @els.root.removeEventListener 'keydown', @keyDownListener\n        @els.root.removeEventListener 'mousemove', @mouseMoveListener\n\n        return\n\n    beforeNavigation: (e) ->\n        showProgress = typeof e.progressLabel is 'string' and e.progressLabel.length > 0\n        visibilityClassName = 'sgn-pp--hidden'\n\n        if @els.progress? and @els.progressBar?\n            @els.progressBar.style.width = \"#{e.progress}%\"\n\n            if showProgress is true\n                @els.progress.classList.remove visibilityClassName\n            else\n                @els.progress.classList.add visibilityClassName\n\n        if @els.progressLabel?\n            if showProgress is true\n                @els.progressLabel.textContent = e.progressLabel\n                @els.progressLabel.classList.remove visibilityClassName\n            else\n                @els.progressLabel.classList.add visibilityClassName\n\n        if @els.prevControl?\n            if e.verso.newPosition is 0\n                @els.prevControl.classList.add visibilityClassName\n            else\n                @els.prevControl.classList.remove visibilityClassName\n\n        if @els.nextControl?\n            if e.verso.newPosition is e.pageSpreadCount - 1\n                @els.nextControl.classList.add visibilityClassName\n            else\n                @els.nextControl.classList.remove visibilityClassName\n\n        return\n\n    prevClicked: (e) ->\n        e.preventDefault()\n\n        @trigger 'prev'\n\n        return\n\n    nextClicked: (e) ->\n        e.preventDefault()\n\n        @trigger 'next'\n\n        return\n\n    keyDown: (e) ->\n        keyCode = e.keyCode\n\n        if keyCodes.ARROW_LEFT is keyCode\n            @trigger 'prev', duration: 0\n        else if keyCodes.ARROW_RIGHT is keyCode or keyCodes.SPACE is keyCode\n            @trigger 'next', duration: 0\n        else if keyCodes.NUMBER_ONE is keyCode\n            @trigger 'first', duration: 0\n\n        return\n\n    mouseMove: (e) ->\n        return if e.clientX is @mouse.x and @mouse.y is e.clientY\n\n        @mouse.x = e.clientX\n        @mouse.y = e.clientY\n        \n        @els.root.setAttribute 'data-mouse-moving', true\n\n        clearTimeout @mouseMoveTimeout\n\n        @mouseMoveTimeout = setTimeout =>\n            @els.root.setAttribute 'data-mouse-moving', false\n\n            return\n        , 4000\n\n        return\n\nMicroEvent.mixin PagedPublicationControls\n\nmodule.exports = PagedPublicationControls\n","MicroEvent = require 'microevent'\n\nclass PagedPublicationEventTracking\n    constructor: ->\n        @hidden = true\n        @pageSpread = null\n\n        @bind 'appeared', @appeared.bind(@)\n        @bind 'disappeared', @disappeared.bind(@)\n        @bind 'beforeNavigation', @beforeNavigation.bind(@)\n        @bind 'afterNavigation', @afterNavigation.bind(@)\n        @bind 'attemptedNavigation', @attemptedNavigation.bind(@)\n        @bind 'clicked', @clicked.bind(@)\n        @bind 'doubleClicked', @doubleClicked.bind(@)\n        @bind 'pressed', @pressed.bind(@)\n        @bind 'panStart', @panStart.bind(@)\n        @bind 'zoomedIn', @zoomedIn.bind(@)\n        @bind 'zoomedOut', @zoomedOut.bind(@)\n        @bind 'destroyed', @destroy.bind(@)\n\n        return\n\n    destroy: ->\n        @pageSpreadDisappeared()\n        @trackDisappeared()\n\n        return\n\n    trackEvent: (type, properties = {}) ->\n        @trigger 'trackEvent', type: type, properties: properties\n\n        return\n\n    trackOpened: (properties) ->\n        @trackEvent 'paged-publication-opened', properties\n\n        @\n\n    trackPageClicked: (properties) ->\n        @trackEvent 'paged-publication-page-clicked', properties\n\n        @\n\n    trackPageDoubleClicked: (properties) ->\n        @trackEvent 'paged-publication-page-double-clicked', properties\n\n        @\n\n    trackPageLongPressed: (properties) ->\n        @trackEvent 'paged-publication-page-long-pressed', properties\n\n        @\n\n    trackPageHotspotsClicked: (properties) ->\n        @trackEvent 'paged-publication-page-hotspots-clicked', properties\n\n        @\n\n    trackPageSpreadAppeared: (properties) ->\n        @trackEvent 'paged-publication-page-spread-appeared', properties\n\n        @\n\n    trackPageSpreadDisappeared: (properties) ->\n        @trackEvent 'paged-publication-page-spread-disappeared', properties\n\n        @\n\n    trackPageSpreadZoomedIn: (properties) ->\n        @trackEvent 'paged-publication-page-spread-zoomed-in', properties\n\n        @\n\n    trackPageSpreadZoomedOut: (properties) ->\n        @trackEvent 'paged-publication-page-spread-zoomed-out', properties\n\n        @\n\n    appeared: (e) ->\n        @pageSpreadAppeared e.pageSpread\n\n        return\n\n    disappeared: ->\n        @pageSpreadDisappeared()\n\n        return\n\n    beforeNavigation: ->\n        @pageSpreadDisappeared()\n\n        return\n\n    afterNavigation: (e) ->\n        @pageSpreadAppeared e.pageSpread\n\n        return\n\n    attemptedNavigation: (e) ->\n        @pageSpreadAppeared e.pageSpread\n\n        return\n\n    clicked: (e) ->\n        if e.page?\n            properties =\n                pageNumber: e.page.pageNumber\n                x: e.verso.pageX\n                y: e.verso.pageY\n\n            @trackPageClicked pagedPublicationPage: properties\n            @trackPageHotspotsClicked pagedPublicationPage: properties if e.verso.overlayEls.length > 0\n\n        return\n\n    doubleClicked: (e) =>\n        if e.page?\n            @trackPageDoubleClicked pagedPublicationPage:\n                pageNumber: e.page.pageNumber\n                x: e.verso.pageX\n                y: e.verso.pageY\n\n        return\n\n    pressed: (e) ->\n        if e.page?\n            @trackPageLongPressed pagedPublicationPage:\n                pageNumber: e.page.pageNumber\n                x: e.verso.pageX\n                y: e.verso.pageY\n\n        return\n\n    panStart: (e) ->\n        @pageSpreadDisappeared() if e.scale is 1\n\n        return\n\n    zoomedIn: (e) ->\n        if e.pageSpread?\n            @trackPageSpreadZoomedIn pagedPublicationPageSpread:\n                pageNumbers: e.pageSpread.getPages().map (page) -> page.pageNumber\n\n        return\n\n    zoomedOut: (e) ->\n        if e.pageSpread?\n            @trackPageSpreadZoomedOut pagedPublicationPageSpread:\n                pageNumbers: e.pageSpread.getPages().map (page) -> page.pageNumber\n\n        return\n\n    pageSpreadAppeared: (pageSpread) ->\n        if pageSpread? and @hidden is true\n            @pageSpread = pageSpread\n\n            @trackPageSpreadAppeared pagedPublicationPageSpread:\n                pageNumbers: pageSpread.getPages().map (page) -> page.pageNumber\n\n            @hidden = false\n\n        return\n\n    pageSpreadDisappeared: ->\n        if @pageSpread? and @hidden is false\n            @trackPageSpreadDisappeared pagedPublicationPageSpread:\n                pageNumbers: @pageSpread.getPages().map (page) -> page.pageNumber\n\n            @hidden = true\n            @pageSpread = null\n\n        return\n\nMicroEvent.mixin PagedPublicationEventTracking\n\nmodule.exports = PagedPublicationEventTracking\n","MicroEvent = require 'microevent'\n\nclass PagedPublicationLegacyEventTracking\n    constructor: ->\n        @bind 'eventTracked', @eventTracked.bind(@)\n        @zoomedIn = false\n        @appearedAt = null\n\n        return\n\n    trackEvent: (e) ->\n        @trigger 'trackEvent', e\n\n        return\n\n    eventTracked: (e) ->\n        if e.type is 'paged-publication-page-spread-appeared'\n            @appearedAt = Date.now()\n        if e.type is 'paged-publication-page-spread-disappeared'\n            @trigger 'trackEvent',\n                type: if @zoomedIn then 'zoom' else 'view'\n                ms: Date.now() - @appearedAt\n                orientation: @getOrientation()\n                pages: e.properties.pagedPublicationPageSpread.pageNumbers\n        else if e.type is 'paged-publication-page-spread-zoomed-in'\n            @trigger 'trackEvent',\n                type: 'view'\n                ms: @getDuration()\n                orientation: @getOrientation()\n                pages: e.properties.pagedPublicationPageSpread.pageNumbers\n\n            @zoomedIn = true\n            @appearedAt = Date.now()\n        else if e.type is 'paged-publication-page-spread-zoomed-out'\n            @trigger 'trackEvent',\n                type: 'zoom'\n                ms: @getDuration()\n                orientation: @getOrientation()\n                pages: e.properties.pagedPublicationPageSpread.pageNumbers\n\n            @zoomedIn = false\n            @appearedAt = Date.now()\n\n        return\n\n    getOrientation: ->\n        if window.innerWidth >= window.innerHeight then 'landscape' else 'portrait'\n\n    getDuration: ->\n        Date.now() - @appearedAt\n\nMicroEvent.mixin PagedPublicationLegacyEventTracking\n\nmodule.exports = PagedPublicationLegacyEventTracking\n","MicroEvent = require 'microevent'\nSGN = require '../../sgn'\nCore = require './core'\nHotspots = require './hotspots'\nControls = require './controls'\nEventTracking = require './event-tracking'\nLegacyEventTracking = require './legacy-event-tracking'\n\nclass Viewer\n    constructor: (@el, @options = {}) ->\n        @_core = new Core @el,\n            id: @options.id\n            pages: @options.pages\n            pageSpreadWidth: @options.pageSpreadWidth\n            pageSpreadMaxZoomScale: @options.pageSpreadMaxZoomScale\n            pageId: @options.pageId\n            idleDelay: @options.idleDelay\n            resizeDelay: @options.resizeDelay\n            color: @options.color\n        @_hotspots = new Hotspots()\n        @_controls = new Controls @el, keyboard: @options.keyboard\n        @_eventTracking = new EventTracking()\n        @_legacyEventTracking = new LegacyEventTracking()\n        @viewSession = SGN.util.uuid()\n\n        @_setupEventListeners()\n\n        return\n\n    start: ->\n        @_eventTracking.trackOpened()\n        @_core.trigger 'started'\n\n        @\n\n    destroy: ->\n        @_core.trigger 'destroyed'\n        @_hotspots.trigger 'destroyed'\n        @_controls.trigger 'destroyed'\n        @_eventTracking.trigger 'destroyed'\n\n        @el.parentNode.removeChild @el\n\n        @\n\n    navigateTo: (position, options) ->\n        @navigateToIndex position, options\n\n        @\n\n    navigateToIndex: (position, options) ->\n        @_core.getVerso().navigateTo position, options\n\n        @\n    \n    navigateToPageId: (pageId, options) ->\n        position = @_core.getVerso().getPageSpreadPositionFromPageId pageId\n        \n        @_core.getVerso().navigateTo position, options\n\n    first: (options) ->\n        @_core.getVerso().first options\n\n        @\n\n    prev: (options) ->\n        @_core.getVerso().prev options\n\n        @\n\n    next: (options) ->\n        @_core.getVerso().next options\n\n        @\n\n    last: (options) ->\n        @_core.getVerso().last options\n\n        @\n\n    _trackEvent: (e) ->\n        type = e.type\n        idType = 'legacy'\n        properties = pagedPublication:\n            id: [idType, @options.id]\n            ownedBy: [idType, @options.ownedBy]\n        eventTracker = @options.eventTracker\n\n        properties[key] = value for key, value of e.properties\n\n        eventTracker.trackEvent type, properties if eventTracker?\n\n        return\n\n    _trackLegacyEvent: (e) ->\n        eventTracker = @options.eventTracker\n        geolocation = {}\n\n        if eventTracker?\n            geolocation.latitude = eventTracker.location.latitude\n            geolocation.longitude = eventTracker.location.longitude\n            geolocation.sensor = true if geolocation.latitude?\n\n            SGN.CoreKit.request\n                geolocation: geolocation\n                method: 'post'\n                url: \"/v2/catalogs/#{@options.id}/collect\"\n                json: true\n                body:\n                    type: e.type\n                    ms: e.ms\n                    orientation: e.orientation\n                    pages: e.pages.join ','\n                    view_session: @viewSession\n        \n        return\n\n    _setupEventListeners: ->\n        @_eventTracking.bind 'trackEvent', (e) =>\n            @_trackEvent e\n            @_legacyEventTracking.trigger 'eventTracked', e\n\n            return\n\n        @_legacyEventTracking.bind 'trackEvent', (e) =>\n            @_trackLegacyEvent e\n                \n            return\n\n        @_controls.bind 'prev', (e) =>\n            @prev e\n            \n            return\n        @_controls.bind 'next', (e) =>\n            @next e\n            \n            return\n        @_controls.bind 'first', (e) =>\n            @first e\n            \n            return\n        @_controls.bind 'last', (e) =>\n            @last()\n            \n            return\n        @_hotspots.bind 'hotspotsRequested', (e) =>\n            @trigger 'hotspotsRequested', e\n\n            return\n\n        @_core.bind 'appeared', (e) =>\n            @_eventTracking.trigger 'appeared', e\n            @trigger 'appeared', e\n\n            return\n        @_core.bind 'disappeared', (e) =>\n            @_eventTracking.trigger 'disappeared', e\n            @trigger 'disappeared', e\n\n            return\n        @_core.bind 'beforeNavigation', (e) =>\n            @_eventTracking.trigger 'beforeNavigation', e\n            @_controls.trigger 'beforeNavigation', e\n            @trigger 'beforeNavigation', e\n\n            return\n        @_core.bind 'afterNavigation', (e) =>\n            @_eventTracking.trigger 'afterNavigation', e\n            @_hotspots.trigger 'afterNavigation', e\n            @trigger 'afterNavigation', e\n\n            return\n        @_core.bind 'attemptedNavigation', (e) =>\n            @_eventTracking.trigger 'attemptedNavigation', e\n            @trigger 'attemptedNavigation', e\n\n            return\n        @_core.bind 'clicked', (e) =>\n            @_eventTracking.trigger 'clicked', e\n            @trigger 'clicked', e\n\n            return\n        @_core.bind 'doubleClicked', (e) =>\n            @_eventTracking.trigger 'doubleClicked', e\n            @trigger 'doubleClicked', e\n\n            return\n        @_core.bind 'contextmenu', (e) =>\n            @trigger 'contextmenu', e\n\n            return\n        @_core.bind 'pressed', (e) =>\n            @_eventTracking.trigger 'pressed', e\n            @trigger 'pressed', e\n\n            return\n        @_core.bind 'panStart', (e) =>\n            @_eventTracking.trigger 'panStart', e\n            @trigger 'panStart', e\n\n            return\n        @_core.bind 'zoomedIn', (e) =>\n            @_eventTracking.trigger 'zoomedIn', e\n            @trigger 'zoomedIn', e\n\n            return\n        @_core.bind 'zoomedOut', (e) =>\n            @_eventTracking.trigger 'zoomedOut', e\n            @trigger 'zoomedOut', e\n\n            return\n        @_core.bind 'pageLoaded', (e) =>\n            @_eventTracking.trigger 'pageLoaded', e\n            @trigger 'pageLoaded', e\n\n            return\n        @_core.bind 'pagesLoaded', (e) =>\n            @_hotspots.trigger 'pagesLoaded', e\n            @trigger 'pagesLoaded', e\n\n            return\n        @_core.bind 'resized', (e) =>\n            @_hotspots.trigger 'resized'\n            @trigger 'resized', e\n\n            return\n\n        @bind 'hotspotsReceived', (e) =>\n            @_hotspots.trigger 'hotspotsReceived',\n                pageSpread: @_core.pageSpreads.get e.id\n                versoPageSpread: SGN.util.find @_core.getVerso().pageSpreads, (pageSpread) ->\n                    pageSpread.getId() is e.id\n                ratio: e.ratio\n                pages: e.pages\n                hotspots: e.hotspots\n\n            return\n\n        return\n\nMicroEvent.mixin Viewer\n\nmodule.exports = Viewer\n","/**\n * Copyright 2014 Craig Campbell\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * GATOR.JS\n * Simple Event Delegation\n *\n * @version 1.2.4\n *\n * Compatible with IE 9+, FF 3.6+, Safari 5+, Chrome\n *\n * Include legacy.js for compatibility with older browsers\n *\n *             .-._   _ _ _ _ _ _ _ _\n *  .-''-.__.-'00  '-' ' ' ' ' ' ' ' '-.\n * '.___ '    .   .--_'-' '-' '-' _'-' '._\n *  V: V 'vv-'   '_   '.       .'  _..' '.'.\n *    '=.____.=_.--'   :_.__.__:_   '.   : :\n *            (((____.-'        '-.  /   : :\n *                              (((-'\\ .' /\n *                            _____..'  .'\n *                           '-._____.-'\n */\n(function() {\n    var _matcher,\n        _level = 0,\n        _id = 0,\n        _handlers = {},\n        _gatorInstances = {};\n\n    function _addEvent(gator, type, callback) {\n\n        // blur and focus do not bubble up but if you use event capturing\n        // then you will get them\n        var useCapture = type == 'blur' || type == 'focus';\n        gator.element.addEventListener(type, callback, useCapture);\n    }\n\n    function _cancel(e) {\n        e.preventDefault();\n        e.stopPropagation();\n    }\n\n    /**\n     * returns function to use for determining if an element\n     * matches a query selector\n     *\n     * @returns {Function}\n     */\n    function _getMatcher(element) {\n        if (_matcher) {\n            return _matcher;\n        }\n\n        if (element.matches) {\n            _matcher = element.matches;\n            return _matcher;\n        }\n\n        if (element.webkitMatchesSelector) {\n            _matcher = element.webkitMatchesSelector;\n            return _matcher;\n        }\n\n        if (element.mozMatchesSelector) {\n            _matcher = element.mozMatchesSelector;\n            return _matcher;\n        }\n\n        if (element.msMatchesSelector) {\n            _matcher = element.msMatchesSelector;\n            return _matcher;\n        }\n\n        if (element.oMatchesSelector) {\n            _matcher = element.oMatchesSelector;\n            return _matcher;\n        }\n\n        // if it doesn't match a native browser method\n        // fall back to the gator function\n        _matcher = Gator.matchesSelector;\n        return _matcher;\n    }\n\n    /**\n     * determines if the specified element matches a given selector\n     *\n     * @param {Node} element - the element to compare against the selector\n     * @param {string} selector\n     * @param {Node} boundElement - the element the listener was attached to\n     * @returns {void|Node}\n     */\n    function _matchesSelector(element, selector, boundElement) {\n\n        // no selector means this event was bound directly to this element\n        if (selector == '_root') {\n            return boundElement;\n        }\n\n        // if we have moved up to the element you bound the event to\n        // then we have come too far\n        if (element === boundElement) {\n            return;\n        }\n\n        // if this is a match then we are done!\n        if (_getMatcher(element).call(element, selector)) {\n            return element;\n        }\n\n        // if this element did not match but has a parent we should try\n        // going up the tree to see if any of the parent elements match\n        // for example if you are looking for a click on an <a> tag but there\n        // is a <span> inside of the a tag that it is the target,\n        // it should still work\n        if (element.parentNode) {\n            _level++;\n            return _matchesSelector(element.parentNode, selector, boundElement);\n        }\n    }\n\n    function _addHandler(gator, event, selector, callback) {\n        if (!_handlers[gator.id]) {\n            _handlers[gator.id] = {};\n        }\n\n        if (!_handlers[gator.id][event]) {\n            _handlers[gator.id][event] = {};\n        }\n\n        if (!_handlers[gator.id][event][selector]) {\n            _handlers[gator.id][event][selector] = [];\n        }\n\n        _handlers[gator.id][event][selector].push(callback);\n    }\n\n    function _removeHandler(gator, event, selector, callback) {\n\n        // if there are no events tied to this element at all\n        // then don't do anything\n        if (!_handlers[gator.id]) {\n            return;\n        }\n\n        // if there is no event type specified then remove all events\n        // example: Gator(element).off()\n        if (!event) {\n            for (var type in _handlers[gator.id]) {\n                if (_handlers[gator.id].hasOwnProperty(type)) {\n                    _handlers[gator.id][type] = {};\n                }\n            }\n            return;\n        }\n\n        // if no callback or selector is specified remove all events of this type\n        // example: Gator(element).off('click')\n        if (!callback && !selector) {\n            _handlers[gator.id][event] = {};\n            return;\n        }\n\n        // if a selector is specified but no callback remove all events\n        // for this selector\n        // example: Gator(element).off('click', '.sub-element')\n        if (!callback) {\n            delete _handlers[gator.id][event][selector];\n            return;\n        }\n\n        // if we have specified an event type, selector, and callback then we\n        // need to make sure there are callbacks tied to this selector to\n        // begin with.  if there aren't then we can stop here\n        if (!_handlers[gator.id][event][selector]) {\n            return;\n        }\n\n        // if there are then loop through all the callbacks and if we find\n        // one that matches remove it from the array\n        for (var i = 0; i < _handlers[gator.id][event][selector].length; i++) {\n            if (_handlers[gator.id][event][selector][i] === callback) {\n                _handlers[gator.id][event][selector].splice(i, 1);\n                break;\n            }\n        }\n    }\n\n    function _handleEvent(id, e, type) {\n        if (!_handlers[id][type]) {\n            return;\n        }\n\n        var target = e.target || e.srcElement,\n            selector,\n            match,\n            matches = {},\n            i = 0,\n            j = 0;\n\n        // find all events that match\n        _level = 0;\n        for (selector in _handlers[id][type]) {\n            if (_handlers[id][type].hasOwnProperty(selector)) {\n                match = _matchesSelector(target, selector, _gatorInstances[id].element);\n\n                if (match && Gator.matchesEvent(type, _gatorInstances[id].element, match, selector == '_root', e)) {\n                    _level++;\n                    _handlers[id][type][selector].match = match;\n                    matches[_level] = _handlers[id][type][selector];\n                }\n            }\n        }\n\n        // stopPropagation() fails to set cancelBubble to true in Webkit\n        // @see http://code.google.com/p/chromium/issues/detail?id=162270\n        e.stopPropagation = function() {\n            e.cancelBubble = true;\n        };\n\n        for (i = 0; i <= _level; i++) {\n            if (matches[i]) {\n                for (j = 0; j < matches[i].length; j++) {\n                    if (matches[i][j].call(matches[i].match, e) === false) {\n                        Gator.cancel(e);\n                        return;\n                    }\n\n                    if (e.cancelBubble) {\n                        return;\n                    }\n                }\n            }\n        }\n    }\n\n    /**\n     * binds the specified events to the element\n     *\n     * @param {string|Array} events\n     * @param {string} selector\n     * @param {Function} callback\n     * @param {boolean=} remove\n     * @returns {Object}\n     */\n    function _bind(events, selector, callback, remove) {\n\n        // fail silently if you pass null or undefined as an alement\n        // in the Gator constructor\n        if (!this.element) {\n            return;\n        }\n\n        if (!(events instanceof Array)) {\n            events = [events];\n        }\n\n        if (!callback && typeof(selector) == 'function') {\n            callback = selector;\n            selector = '_root';\n        }\n\n        var id = this.id,\n            i;\n\n        function _getGlobalCallback(type) {\n            return function(e) {\n                _handleEvent(id, e, type);\n            };\n        }\n\n        for (i = 0; i < events.length; i++) {\n            if (remove) {\n                _removeHandler(this, events[i], selector, callback);\n                continue;\n            }\n\n            if (!_handlers[id] || !_handlers[id][events[i]]) {\n                Gator.addEvent(this, events[i], _getGlobalCallback(events[i]));\n            }\n\n            _addHandler(this, events[i], selector, callback);\n        }\n\n        return this;\n    }\n\n    /**\n     * Gator object constructor\n     *\n     * @param {Node} element\n     */\n    function Gator(element, id) {\n\n        // called as function\n        if (!(this instanceof Gator)) {\n            // only keep one Gator instance per node to make sure that\n            // we don't create a ton of new objects if you want to delegate\n            // multiple events from the same node\n            //\n            // for example: Gator(document).on(...\n            for (var key in _gatorInstances) {\n                if (_gatorInstances[key].element === element) {\n                    return _gatorInstances[key];\n                }\n            }\n\n            _id++;\n            _gatorInstances[_id] = new Gator(element, _id);\n\n            return _gatorInstances[_id];\n        }\n\n        this.element = element;\n        this.id = id;\n    }\n\n    /**\n     * adds an event\n     *\n     * @param {string|Array} events\n     * @param {string} selector\n     * @param {Function} callback\n     * @returns {Object}\n     */\n    Gator.prototype.on = function(events, selector, callback) {\n        return _bind.call(this, events, selector, callback);\n    };\n\n    /**\n     * removes an event\n     *\n     * @param {string|Array} events\n     * @param {string} selector\n     * @param {Function} callback\n     * @returns {Object}\n     */\n    Gator.prototype.off = function(events, selector, callback) {\n        return _bind.call(this, events, selector, callback, true);\n    };\n\n    Gator.matchesSelector = function() {};\n    Gator.cancel = _cancel;\n    Gator.addEvent = _addEvent;\n    Gator.matchesEvent = function() {\n        return true;\n    };\n\n    if (typeof module !== 'undefined' && module.exports) {\n        module.exports = Gator;\n    }\n\n    window.Gator = Gator;\n}) ();\n","module.exports = \"\"\"\n<div class=\"sgn-pp-hotspot-picker__background\" data-close></div>\n<div class=\"sgn__popover\" style=\"top: {{top}}px; left: {{left}}px;\">\n    {{#header}}\n        <div class=\"sgn-popover__header\">{{header}}</div>\n    {{/header}}\n    <div class=\"sgn-popover__content\">\n        <ul>\n            {{#hotspots}}\n                <li data-id=\"{{id}}\">\n                    <p>{{title}}</p>\n                    <p>{{subtitle}}</p>\n                </li>\n            {{/hotspots}}\n        </ul>\n    </div>\n</div>\n\"\"\"\n","MicroEvent = require 'microevent'\nGator = require 'gator'\nMustache = require 'mustache'\ntemplate = require './templates/hotspot-picker'\nkeyCodes = require '../../key-codes'\n\nclass PagedPublicationHotspotPicker\n    constructor: (@options = {}) ->\n        @el = document.createElement 'div'\n        @resizeListener = @resize.bind @\n\n        return\n\n    render: ->\n        width = @options.width ? 100\n        header = @options.header\n        template = @options.template if @options.template?\n        trigger = @trigger.bind @\n        view =\n            header: header\n            hotspots: @options.hotspots\n            top: @options.y\n            left: @options.x\n\n        @el.className = 'sgn-pp__hotspot-picker'\n        @el.setAttribute 'tabindex', -1\n        @el.innerHTML = Mustache.render template, view\n\n        popoverEl = @el.querySelector '.sgn__popover'\n        width = popoverEl.offsetWidth\n        height = popoverEl.offsetHeight\n        parentWidth = @el.parentNode.offsetWidth\n        parentHeight = @el.parentNode.offsetHeight\n\n        if view.top + height > parentHeight\n            popoverEl.style.top = parentHeight - height + 'px'\n\n        if view.left + width > parentWidth\n            popoverEl.style.left = parentWidth - width + 'px'\n\n        @el.addEventListener 'keyup', @keyUp.bind(@)\n\n        Gator(@el).on 'click', '[data-id]', ->\n            trigger 'selected', id: @getAttribute('data-id')\n\n            return\n\n        Gator(@el).on 'click', '[data-close]', @destroy.bind(@)\n\n        window.addEventListener 'resize', @resizeListener, false\n\n        @\n\n    destroy: ->\n        @el.parentNode.removeChild @el\n\n        @trigger 'destroyed'\n\n        return\n\n    keyUp: (e) ->\n        @destroy() if e.keyCode is keyCodes.ESC\n        \n        return\n\n    resize: ->\n        window.removeEventListener 'resize', @resizeListener\n\n        @destroy()\n\n        return\n\nMicroEvent.mixin PagedPublicationHotspotPicker\n\nmodule.exports = PagedPublicationHotspotPicker\n","module.exports = \"\"\"\n<div class=\"sgn__pp\" style=\"height: 100%;\">\n    <div class=\"verso\">\n        <div class=\"verso__scroller\">\n            <div class=\"sgn-pp__pages\"></div>\n        </div>\n    </div>\n\n    {{#showProgressBar}}\n        <div class=\"sgn-pp__progress\">\n            <div class=\"sgn-pp-progress__bar\"></div>\n        </div>\n    {{/showProgressBar}}\n\n    {{#showProgressLabel}}\n        <div class=\"sgn-pp__progress-label\"></div>\n    {{/showProgressLabel}}\n\n    {{#showControls}}\n        <a class=\"sgn-pp__control\" href=\"#\" role=\"button\" data-direction=\"prev\">&lsaquo;</a>\n        <a class=\"sgn-pp__control\" href=\"#\" role=\"button\" data-direction=\"next\">&rsaquo;</a>\n    {{/showControls}}\n</div>\n\"\"\"\n","Mustache = require 'mustache'\nSGN = require '../../core'\ntemplate = require './templates/widget'\n\nmodule.exports = class PagedPublicationWidget\n    constructor: (@el) ->\n        publicationId = @el.getAttribute 'data-id'\n        hotspots = @el.getAttribute 'data-hotspots'\n        progressBar = @el.getAttribute 'data-progress-bar'\n        progressLabel = @el.getAttribute 'data-progress-label'\n        controls = @el.getAttribute 'data-controls'\n\n        @el.innerHTML = Mustache.render template,\n            showProgressBar: progressBar is 'true'\n            showProgressLabel: progressLabel is 'true'\n            showControls: controls is 'true'\n\n        SGN.PagedPublicationKit.initialize\n            el: @el.querySelector '.sgn__pp'\n            id: publicationId\n            eventTracker: SGN.config.get 'eventTracker'\n            showHotspots: hotspots is 'true'\n        , (err, viewer) ->\n            viewer.start() if not err?\n\n            return\n\n        return\n","MicroEvent = require 'microevent'\nSGN = require '../../core'\n\nmodule.exports = (options = {}, callback) ->\n    data =\n        details: null\n        pages: null\n        hotspots: null\n    viewer = null\n    hotspots = {}\n    hotspotQueue = []\n    hotspotPicker = null\n    fetch = (callback) ->\n        if options.data?.details\n            callback null, options.data.details\n        else\n            SGN.CoreKit.request\n                url: \"/v2/catalogs/#{options.id}\"\n            , callback\n\n        return\n    fetchPages = (callback) ->\n        if options.data?.pages\n            callback null, options.data.pages\n        else\n            SGN.CoreKit.request\n                url: \"/v2/catalogs/#{options.id}/pages\"\n            , callback\n\n        return\n    fetchHotspots = (callback) ->\n        if options.data?.hotspots\n            callback null, options.data.hotspots\n        else\n            SGN.CoreKit.request\n                url: \"/v2/catalogs/#{options.id}/hotspots\"\n            , callback\n\n        return\n    render = ->\n        viewer = new SGN.PagedPublicationKit.Viewer options.el,\n            id: options.id\n            ownedBy: data.details.dealer_id\n            color: '#' + data.details.branding.pageflip.color\n            keyboard: true\n            pageId: options.pageId\n            eventTracker: options.eventTracker\n            pages: transformPages data.pages\n\n        viewer.bind 'hotspotsRequested', (e) ->\n            hotspotQueue.push e\n            processHotspotQueue()\n\n            return\n\n        viewer.bind 'beforeNavigation', ->\n            hotspotPicker.destroy() if hotspotPicker?\n\n            return\n\n        viewer.bind 'clicked', (e) ->\n            getSelectedHotspot e, (hotspot) ->\n                viewer.trigger 'hotspotClicked', hotspot\n\n                return\n            \n            return\n\n        viewer.bind 'contextmenu', (e) ->\n            getSelectedHotspot e, (hotspot) ->\n                viewer.trigger 'hotspotContextmenu', hotspot\n\n                return\n            \n            return\n        \n        viewer.bind 'pressed', (e) ->\n            getSelectedHotspot e, (hotspot) ->\n                viewer.trigger 'hotspotPressed', hotspot\n\n                return\n            \n            return\n\n        callback null, viewer, data\n        \n        if !options.data?.details\n            viewer.trigger 'pagedPublicationFetched', data.details\n        if !options.data?.pages\n            viewer.trigger 'pagesFetched', data.pages\n        if data.hotspots and !options.data?.hotspots\n            viewer.trigger 'hotspotsFetched', Object.keys(data.hotspots).map((key) -> data.hotspots[key])\n\n        return\n    transformPages = (pages) ->\n        pages.map (page, i) ->\n            pageNumber = i + 1\n\n            id: 'page' + pageNumber\n            label: pageNumber + ''\n            pageNumber: pageNumber\n            images:\n                medium: page.view\n                large: page.zoom\n    processHotspotQueue = ->\n        return if not viewer or not data.hotspots\n\n        hotspotQueue = hotspotQueue.filter (hotspotRequest) ->\n            hotspots = {}\n\n            for id, hotspot of data.hotspots\n                match = false\n\n                hotspotRequest.pages.forEach (page) ->\n                    match = true if hotspot.locations[page.pageNumber]?\n\n                    return\n\n                if match\n                    hotspots[id] =\n                        type: hotspot.type\n                        id: hotspot.id\n                        locations: hotspot.locations\n\n            viewer.trigger 'hotspotsReceived',\n                id: hotspotRequest.id\n                pages: hotspotRequest.pages\n                ratio: data.details.dimensions.height\n                hotspots: hotspots\n\n            false\n\n        return\n    getSelectedHotspot = (e, callback) ->\n        hotspots = e.verso.overlayEls.map (overlayEl) ->\n            data.hotspots[overlayEl.getAttribute('data-id')]\n\n        if hotspots.length is 1\n            callback hotspots[0]\n        else if hotspots.length > 1\n            hotspots = hotspots\n                .filter (hotspot) -> hotspot.type is 'offer'\n                .map (hotspot) ->\n                    id: hotspot.id\n                    title: hotspot.offer.heading\n                    subtitle: hotspot.offer.pricing.currency + '' + hotspot.offer.pricing.price\n\n            hotspotPicker = new SGN.PagedPublicationKit.HotspotPicker\n                header: SGN.translations.t 'paged_publication.hotspot_picker.header'\n                x: e.verso.x\n                y: e.verso.y\n                hotspots: hotspots\n\n            hotspotPicker.bind 'selected', (e) ->\n                callback data.hotspots[e.id]\n                hotspotPicker.destroy()\n\n                return\n\n            hotspotPicker.bind 'destroyed', ->\n                hotspotPicker = null\n                viewer.el.focus()\n\n                return\n\n            viewer.el.appendChild hotspotPicker.el\n            hotspotPicker.render().el.focus()\n\n    SGN.util.async.parallel [fetch, fetchPages], (result) ->\n        details = result[0][1]\n        pages = result[1][1]\n\n        if details? and pages?\n            data.details = details\n            data.pages = pages\n\n            if options.showHotspots isnt false\n                fetchHotspots (err, response) ->\n                    return if err?\n\n                    data.hotspots = {}\n\n                    response.forEach (hotspot) ->\n                        data.hotspots[hotspot.id] = hotspot\n\n                        return\n\n                    processHotspotQueue()\n\n                    render()\n            else\n                render()\n        else\n            callback new Error()\n\n        return\n\n\n    return\n","module.exports =\n    Viewer: require './viewer'\n\n    HotspotPicker: require './hotspot-picker'\n\n    Widget: require './widget'\n\n    initialize: require './initialize'\n","module.exports = {}","SGN = require './sgn'\n\n# Expose storage backends.\nSGN.storage =\n    local: require './storage/client-local'\n    cookie: require './storage/client-cookie'\n\n# Expose request handler.\nSGN.request = require './request/browser'\n\n# Expose the different kits.\nSGN.AuthKit = require './kits/auth'\nSGN.AssetsKit = require './kits/assets'\nSGN.EventsKit = require './kits/events'\nSGN.GraphKit = require './kits/graph'\nSGN.CoreKit = require './kits/core'\nSGN.PagedPublicationKit = require './kits/paged-publication'\nSGN.ShoppingListKit = require './kits/shopping-list'\n\n# Set the core session from the cookie store if possible.\nsession = SGN.storage.cookie.get 'session'\n\nif typeof session is 'object'\n    SGN.config.set\n        coreSessionToken: session.token\n        coreSessionClientId: session.client_id\n\nSGN.client = do ->\n    id = SGN.storage.local.get 'client-id'\n    id = id?.data\n    firstOpen = not id?\n\n    if firstOpen\n        id = SGN.util.uuid()\n        \n        SGN.storage.local.set 'client-id', id\n\n    firstOpen: firstOpen\n    id: id\n\n# Listen for changes in the config.\nSGN.config.bind 'change', (changedAttributes) ->\n    eventTracker = changedAttributes.eventTracker\n\n    if eventTracker?\n        eventTracker.trackEvent 'first-client-session-opened', {}, '1.0.0' if SGN.client.firstOpen is true\n        eventTracker.trackEvent 'client-session-opened', {}, '1.0.0'\n\n    return\n\n# Autoconfigure the SDK.\nscriptEl = document.getElementById 'sgn-sdk'\n\nif scriptEl?\n    appKey = scriptEl.getAttribute 'data-app-key'\n    trackId = scriptEl.getAttribute 'data-track-id'\n    config = {}\n\n    config.appKey = appKey if appKey?\n    config.eventTracker = new SGN.EventsKit.Tracker(trackId: trackId) if trackId?\n\n    SGN.config.set config\n\n    # Look for paged publication widgets.\n    for el in document.querySelectorAll('.shopgun-paged-publication')\n        new SGN.PagedPublicationKit.Widget el\n\nmodule.exports = SGN\n"],"names":["MicroEvent","prototype","event","fct","_events","push","splice","indexOf","i","length","apply","Array","slice","call","arguments","mixin","destObject","props","module","Config","require$$0","attrs","config","changedAttributes","key","value","keys","trigger","option","defineMustache","global","factory","exports","nodeName","define","amd","Mustache","this","mustacheFactory","mustache","objectToString","Object","toString","isArray","isArrayPolyfill","object","isFunction","typeStr","obj","escapeRegExp","string","replace","hasProperty","propName","regExpTest","RegExp","test","testRegExp","re","nonSpaceRe","isWhitespace","entityMap","escapeHtml","String","fromEntityMap","s","whiteRe","spaceRe","equalsRe","curlyRe","tagRe","parseTemplate","template","tags","sections","tokens","spaces","hasTag","nonSpace","stripSpace","pop","openingTagRe","closingTagRe","closingCurlyRe","compileTags","tagsToCompile","split","Error","scanner","Scanner","start","type","chr","token","openSection","eos","pos","scanUntil","valueLength","charAt","scan","nestTokens","squashTokens","squashedTokens","lastToken","numTokens","nestedTokens","collector","section","tail","match","index","substring","search","Context","view","parentContext","cache","parent","lookup","name","hasOwnProperty","context","names","lookupHit","Writer","clearCache","parse","render","partials","renderTokens","originalTemplate","buffer","symbol","undefined","renderSection","renderInverted","renderPartial","unescapedValue","escapedValue","rawValue","self","subRender","j","escape","version","defaultWriter","TypeError","to_html","send","result","pairs","ref","translations","process","cachedSetTimeout","cachedClearTimeout","defaultSetTimout","defaultClearTimeout","setTimeout","e","clearTimeout","runTimeout","fun","runClearTimeout","marker","queue","draining","currentQueue","queueIndex","cleanUpNextTick","concat","drainQueue","timeout","len","run","nextTick","args","Item","array","title","browser","env","argv","versions","noop","on","addListener","once","off","removeListener","removeAllListeners","emit","prependListener","prependOnceListener","listeners","binding","cwd","chdir","dir","umask","util","isBrowser","err","options","message","code","stack","time","Date","c","r","v","Math","random","field","url","href","reg","window","location","exec","queryParams","map","encodeURIComponent","join","from","to","floor","ua","navigator","userAgent","str","btoa","Buffer","density","logical","physical","screen","width","height","round","jan1","jan2","now","stdTimeOffset","tmp","getFullYear","toGMTString","lastIndexOf","getTimezoneOffset","color","hex","rgb","sum","x","parseInt","arr","fn","item","size","results","threshold","scope","deferTimer","last","getTime","src","callback","img","Image","onload","onerror","lat1","lng1","lat2","lng2","dist","radlat1","radlat2","radtheta","theta","PI","sin","cos","acos","asyncCalls","sharedCallback","allResults","counter","k","makeCallback","require$$1","require$$2","set","prefixKey","SGN","storage","localStorage","JSON","stringify","ca","ct","isNode","document","cookie","trim","date","days","setTime","toUTCString","progressCallback","formData","header","headers","http","method","ref1","ref2","ref3","XMLHttpRequest","formatQueryParams","qs","open","toUpperCase","useCookies","withCredentials","json","setRequestHeader","addEventListener","body","getAllResponseHeaders","reduce","acc","current","parts","toLowerCase","responseText","status","lengthComputable","loaded","total","FormData","append","get","file","request","data","error","statusCode","Tracker","clientLocalStorage","getPool","pool","dispatching","session","uuid","client","trackId","id","application","identity","interval","setInterval","dispatch","bind","dispatchInterval","properties","toISOString","getContext","getPoolSize","poolLimit","shift","determinedAt","timestamp","latitude","longitude","altitude","accuracy","horizontal","vertical","speed","build","path","previousPath","uri","campaign","loc","os","screenDimensions","getScreenDimensions","getOS","language","getUtcOffsetSeconds","getUtcDstOffsetSeconds","getView","getQueryParam","referrer","forEach","personId","events","nacks","dryRun","dispatchLimit","ship","response","resEvent","filter","poolEvent","payload","sentAt","defaultOptions","Pulse","destroyed","connection","connect","close","WebSocket","onopen","onOpen","onmessage","onMessage","onError","onclose","onClose","parseCookies","cookies","parsedCookies","keyValuePair","appKey","authToken","authTokenCookieName","query","operationName","variables","Authorization","authCookie","CoreKit","ensure","appSecret","appVersion","clientId","geo","locale","geolocation","sign","r_locale","api_av","client_id","r_lat","r_lng","r_radius","radius","r_sensor","sensor","responseToken","saveToken","globals","convertHex","bytes","arrBytesToHex","padLeft","orig","convertString","fromCharCode","charCodeAt","UTF8","decodeURIComponent","bytesToString","stringToBytes","unescape","_imports","bytesToHex","sha256","K","isPrime","n","sqrtN","sqrt","factor","getFractionalBits","nPrime","pow","bytesToWords","words","b","wordsToBytes","W","processBlock","H","M","offset","a","d","f","g","h","gamma0x","gamma0","gamma1x","gamma1","ch","maj","sigma0","sigma1","t1","t2","constructor","m","l","digestbytes","asBytes","asString","x2","callbackQueue","clientCookieStorage","saveCookie","ttl","saveClientId","complete","queueCount","create","PagedPublicationPageSpread","contentsRendered","hotspotsRendered","el","renderEl","pages","pageIds","createElement","getPages","page","className","setAttribute","getId","maxZoomScale","imageLoads","pageCount","getEl","image","loaderEl","pageEl","images","medium","appendChild","innerHTML","label","loadImage","isComplete","style","backgroundImage","pageSpread","versoPageSpread","pageEls","querySelectorAll","getAttribute","find","large","removeAttribute","PageSpread","PagedPublicationPageSpreads","collection","ids","frag","createDocumentFragment","pageMode","firstPage","lastPage","midstPageSpreads","pageSpreads","chunk","midstPages","PageSpreads","PagedPublicationCore","require$$3","makeOptions","defaults","pageId","getOption","els","querySelector","getPageMode","pageLoaded","pagesLoaded","setColor","parentNode","insertBefore","update","getFrag","verso","createVerso","destroy","getVerso","visibilityChangeListener","visibilityChange","resizeListener","throttle","resize","unloadListener","unload","root","focus","removeEventListener","opts","getColorBrightness","backgroundColor","Verso","require$$4","overridePageSpreadContentRect","beforeNavigation","afterNavigation","attemptedNavigation","clicked","doubleClicked","pressed","contextmenu","panStart","panEnd","zoomedIn","zoomedOut","actualHeight","actualWidth","clientRect","imageRatio","pageHeight","pageWidth","rect","scale","getPageEls","transform","offsetWidth","offsetHeight","min","getBoundingClientRect","top","left","right","bottom","pageLabels","visibility","getVisibility","renderContents","clearContents","newSpreadEl","pageSpreadCount","position","progress","progressLabel","theVerso","newPosition","getPageSpreadFromPosition","getPageSpreadCount","pageSpreadEls","formatProgressLabel","renderPageSpreads","resetIdleTimer","startIdleTimer","isInsideContent","findPage","zoomIn","zoomOut","idleTimeout","pageSpreadEl","getPosition","getPageIds","removeChild","refresh","navigateTo","getPageSpreadPositionFromPageId","getType","getContentRect","eventName","hidden","switchPageMode","PagedPublicationHotspots","currentPageSpreadId","pageSpreadsLoaded","hotspotsReceived","resized","contentRect","hotspot","hotspotEl","hotspotEls","ratio","renderHotspot","maxX","maxY","minX","minY","pageNumber","pageNumbers","locations","coords","y","pageSpreadId","setCache","renderHotspots","requestHotspots","getCache","PagedPublicationControls","keyCodes","mouse","keyDownListener","keyDown","mouseMoveListener","mouseMove","keyboard","prevControl","prevClicked","nextControl","nextClicked","showProgress","visibilityClassName","progressBar","classList","remove","add","textContent","preventDefault","keyCode","ARROW_LEFT","ARROW_RIGHT","SPACE","NUMBER_ONE","clientX","clientY","mouseMoveTimeout","PagedPublicationEventTracking","appeared","disappeared","pageSpreadDisappeared","trackDisappeared","trackEvent","pageSpreadAppeared","pageX","pageY","trackPageClicked","overlayEls","trackPageHotspotsClicked","trackPageDoubleClicked","trackPageLongPressed","trackPageSpreadZoomedIn","trackPageSpreadZoomedOut","trackPageSpreadAppeared","trackPageSpreadDisappeared","PagedPublicationLegacyEventTracking","eventTracked","appearedAt","getOrientation","pagedPublicationPageSpread","getDuration","innerWidth","innerHeight","Controls","Core","EventTracking","Hotspots","LegacyEventTracking","Viewer","require$$5","require$$6","_core","pageSpreadWidth","pageSpreadMaxZoomScale","idleDelay","resizeDelay","_hotspots","_controls","_eventTracking","_legacyEventTracking","viewSession","_setupEventListeners","trackOpened","navigateToIndex","first","prev","next","eventTracker","idType","ownedBy","ms","orientation","_trackEvent","_trackLegacyEvent","hotspots","_matcher","_level","_id","_handlers","_gatorInstances","_addEvent","gator","useCapture","element","_cancel","stopPropagation","_getMatcher","matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector","Gator","matchesSelector","_matchesSelector","selector","boundElement","_addHandler","_removeHandler","_handleEvent","target","srcElement","matchesEvent","cancelBubble","cancel","_bind","_getGlobalCallback","addEvent","PagedPublicationHotspotPicker","parentHeight","parentWidth","popoverEl","keyUp","ESC","PagedPublicationWidget","controls","publicationId","PagedPublicationKit","initialize","viewer","fetch","fetchHotspots","fetchPages","getSelectedHotspot","hotspotPicker","hotspotQueue","processHotspotQueue","transformPages","details","dealer_id","branding","pageflip","zoom","hotspotRequest","dimensions","overlayEl","offer","heading","pricing","currency","price","HotspotPicker","t","async","parallel","showHotspots","scriptEl","AuthKit","AssetsKit","EventsKit","GraphKit","require$$7","require$$8","require$$9","ShoppingListKit","require$$10","firstOpen","local","getElementById","Widget"],"mappings":"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;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC3DA,IAAAhjB,YAAA;IAAA4jB,WAAA;IAAAC,oBAAA;IAAArR,MAAA;;AAAAxS,eAAaoB,UAAb;;AACAwiB,cAAcxR,WAAd;;AACA2D,AACAvD,SAAMsR,GAAN;;AAEMD;MAANA;kCASkBhD,EAAd;UAAkBjU,8EAAU;;;WACvBA,OAAD,GAAW,KAACmX,WAAD,CAAanX,OAAb,EAAsB,KAACoX,QAAvB,CAAX;WACCC,MAAD,GAAU,KAACC,SAAD,CAAW,QAAX,CAAV;WACCC,GAAD,GACI;cAAMtD,EAAN;eACOA,GAAGuD,aAAH,CAAiB,gBAAjB,CADP;eAEOvD,GAAGuD,aAAH,CAAiB,QAAjB;OAHX;WAICf,QAAD,GAAY,KAACgB,WAAD,EAAZ;WACCZ,WAAD,GAAe,IAAIG,WAAJ,CACX;eAAO,KAACM,SAAD,CAAW,OAAX,CAAP;sBACc,KAACA,SAAD,CAAW,wBAAX,CADd;eAEO,KAACA,SAAD,CAAW,iBAAX;OAHI,CAAf;WAKCT,WAAD,CAAa5M,IAAb,CAAkB,YAAlB,EAAgC,KAACyN,UAAD,CAAYzN,IAAZ,CAAiB,IAAjB,CAAhC;WACC4M,WAAD,CAAa5M,IAAb,CAAkB,aAAlB,EAAiC,KAAC0N,WAAD,CAAa1N,IAAb,CAAkB,IAAlB,CAAjC;WAEC2N,QAAD,CAAU,KAACN,SAAD,CAAW,OAAX,CAAV;;WAGCC,GAAD,CAAKpD,KAAL,CAAW0D,UAAX,CAAsBC,YAAtB,CAAmC,KAACjB,WAAD,CAAakB,MAAb,CAAoB,KAACtB,QAArB,EAA+BuB,OAA/B,EAAnC,EAA6E,KAACT,GAAD,CAAKpD,KAAlF;WAEC8D,KAAD,GAAS,KAACC,WAAD,EAAT;WAECjO,IAAD,CAAM,SAAN,EAAiB,KAACnR,KAAD,CAAOmR,IAAP,CAAY,IAAZ,CAAjB;WACCA,IAAD,CAAM,WAAN,EAAmB,KAACkO,OAAD,CAASlO,IAAT,CAAc,IAAd,CAAnB;;;;;;;aAKCmO,QAAD,GAAYtf,KAAZ;aAECuf,wBAAD,GAA4B,KAACC,gBAAD,CAAkBrO,IAAlB,CAAuB,IAAvB,CAA5B;aACCsO,cAAD,GAAkB3S,OAAI/F,IAAJ,CAAS2Y,QAAT,CAAkB,KAACC,MAAnB,EAA2B,KAACnB,SAAD,CAAW,aAAX,CAA3B,EAAsD,IAAtD,CAAlB;aACCoB,cAAD,GAAkB,KAACC,MAAD,CAAQ1O,IAAR,CAAa,IAAb,CAAlB;iBAESpC,gBAAT,CAA0B,kBAA1B,EAA8C,KAACwQ,wBAA/C,EAAyE,KAAzE;eACOxQ,gBAAP,CAAwB,QAAxB,EAAkC,KAAC0Q,cAAnC,EAAmD,KAAnD;eACO1Q,gBAAP,CAAwB,cAAxB,EAAwC,KAAC6Q,cAAzC,EAAyD,KAAzD;aAECnB,GAAD,CAAKqB,IAAL,CAAUnE,YAAV,CAAuB,cAAvB,EAAuC,EAAvC;aACC8C,GAAD,CAAKqB,IAAL,CAAUnE,YAAV,CAAuB,UAAvB,EAAmC,IAAnC;aACC8C,GAAD,CAAKqB,IAAL,CAAUC,KAAV;;;;;aAKCT,QAAD,GAAYD,OAAZ;iBAESW,mBAAT,CAA6B,kBAA7B,EAAiD,KAACT,wBAAlD,EAA4E,KAA5E;eACOS,mBAAP,CAA2B,QAA3B,EAAqC,KAACP,cAAtC,EAAsD,KAAtD;;;;kCAIUvY,SAASoX;YACnBxiB,KAAAmkB,MAAAnc;eAAO,EAAP;aAEAhI,GAAA,WAAA;eAAKA,GAAL,yCAA2BwiB,YAASxiB,GAAT,CAA3B;;eAEAmkB;;;;gCAEQnkB;eACR,KAACoL,OAAD,CAASpL,GAAT;;;;+BAEOmO;aACNwU,GAAD,CAAKqB,IAAL,CAAUnE,YAAV,CAAuB,uBAAvB,EAAgD7O,OAAI/F,IAAJ,CAASmZ,kBAAT,CAA4BjW,KAA5B,CAAhD;aACCwU,GAAD,CAAKqB,IAAL,CAAUnD,KAAV,CAAgBwD,eAAhB,GAAkClW,KAAlC;;;;;YAKAmW,OAAAjB;gBAAQkB,KAAR;mBACQ,IAAID,KAAJ,CAAU,KAAC3B,GAAD,CAAKU,KAAf,EAAsB;kBAAQ,KAACZ;SAA/B,CAAR;iBAEMR,WAAN,CAAkB3K,OAAlB,CAA0B,KAACkN,6BAAD,CAA+BnP,IAA/B,CAAoC,IAApC,CAA1B;iBAEMA,IAAN,CAAW,kBAAX,EAA+B,KAACoP,gBAAD,CAAkBpP,IAAlB,CAAuB,IAAvB,CAA/B;iBACMA,IAAN,CAAW,iBAAX,EAA8B,KAACqP,eAAD,CAAiBrP,IAAjB,CAAsB,IAAtB,CAA9B;iBACMA,IAAN,CAAW,qBAAX,EAAkC,KAACsP,mBAAD,CAAqBtP,IAArB,CAA0B,IAA1B,CAAlC;iBACMA,IAAN,CAAW,SAAX,EAAsB,KAACuP,OAAD,CAASvP,IAAT,CAAc,IAAd,CAAtB;iBACMA,IAAN,CAAW,eAAX,EAA4B,KAACwP,aAAD,CAAexP,IAAf,CAAoB,IAApB,CAA5B;iBACMA,IAAN,CAAW,SAAX,EAAsB,KAACyP,OAAD,CAASzP,IAAT,CAAc,IAAd,CAAtB;iBACMA,IAAN,CAAW,aAAX,EAA0B,KAAC0P,WAAD,CAAa1P,IAAb,CAAkB,IAAlB,CAA1B;iBACMA,IAAN,CAAW,UAAX,EAAuB,KAAC2P,QAAD,CAAU3P,IAAV,CAAe,IAAf,CAAvB;iBACMA,IAAN,CAAW,QAAX,EAAqB,KAAC4P,MAAD,CAAQ5P,IAAR,CAAa,IAAb,CAArB;iBACMA,IAAN,CAAW,UAAX,EAAuB,KAAC6P,QAAD,CAAU7P,IAAV,CAAe,IAAf,CAAvB;iBACMA,IAAN,CAAW,WAAX,EAAwB,KAAC8P,SAAD,CAAW9P,IAAX,CAAgB,IAAhB,CAAxB;eAEAgO;;;;;eAGA,KAACA;;;;qCAEYtC;YACbqE,cAAAC,aAAAC,YAAAC,YAAAtF,WAAAI,QAAAY,SAAAuE,YAAAC,WAAAC,MAAAC;eACI;eAAK,CAAL;gBACM,CADN;iBAEO,CAFP;kBAGQ,CAHR;iBAIO,CAJP;kBAKQ;SANZ;kBAOU5E,WAAW6E,UAAX,EAAV;iBACS3E,QAAQ,CAAR,CAAT;oBACYA,QAAQhiB,MAApB;YAEe,CAAIghB,SAAnB;iBAAOyF;;gBAEC,KAAClC,QAAD,GAAYqC,SAAZ,CAAsBF,KAA9B;oBACYtF,OAAOyF,WAAP,GAAqB7F,SAArB,GAAiC0F,KAA7C;qBACatF,OAAO0F,YAAP,GAAsBJ,KAAnC;qBACa,CAACtF,OAAOc,YAAP,CAAoB,aAApB,CAAD,IAAuC,CAACd,OAAOc,YAAP,CAAoB,YAApB,CAAD,GAAqClB,SAA5E,CAAb;uBACeuF,UAAf;sBACcJ,eAAeG,UAA7B;sBACc1Z,KAAKma,GAAL,CAASP,SAAT,EAAoBJ,WAApB,CAAd;uBACeA,cAAcE,UAA7B;qBACalF,OAAO4F,qBAAP,EAAb;aAEK1Y,KAAL,GAAa8X,WAAb;aACK7X,MAAL,GAAc4X,YAAd;aACKc,GAAL,GAAWZ,WAAWY,GAAX,GAAiB,CAACV,aAAaJ,YAAd,IAA8B,CAA1D;aACKe,IAAL,GAAYb,WAAWa,IAAX,GAAkB,CAACV,YAAYJ,WAAb,IAA4B,CAA1D;aACKe,KAAL,GAAaV,KAAKnY,KAAL,GAAamY,KAAKS,IAA/B;aACKE,MAAL,GAAcX,KAAKlY,MAAL,GAAckY,KAAKQ,GAAjC;eAEAR;;;;0CAEkB3E;YAClBL,OAAAT,WAAAT,SAAA8G,YAAA/G,OAAAvX;+FAAoC,EAApC;kBACUuX,MAAMhT,GAAN,CAAU,UAACoT,IAAD;iBAAUA,KAAK5K;SAAzB,CAAV;qBACawK,MAAMhT,GAAN,CAAU,UAACoT,IAAD;iBAAUA,KAAKe;SAAzB,CAAb;oBACY,KAACgC,SAAD,CAAW,OAAX,EAAoBzjB,MAAhC;gBACWugB,QAAQvgB,MAAR,GAAiB,CAAjB,GAAwBqnB,WAAW7Z,IAAX,CAAgB,GAAhB,IAAuB,KAAvB,GAA+BwT,SAAvD,GAAsE,IAAjF;eAEAS;;;;;;;aAGC8C,QAAD,GAAYvB,WAAZ,CAAwB3K,OAAxB,CAAgC,UAACyJ,UAAD;cAC5Bzb,OAAAihB;uBAAaxF,WAAWyF,aAAX,EAAb;kBACQ,MAACvE,WAAD,CAAajO,GAAb,CAAiB+M,WAAWjB,KAAX,EAAjB,CAAR;cAEGxa,aAAH;gBACOihB,eAAc,SAAd,IAA4BjhB,MAAM6Z,gBAAN,KAA0B,KAAzD;yBACe7Z,MAAMmhB,cAAN,CAAqBpR,IAArB,CAA0B/P,KAA1B,CAAX,EAA6C,CAA7C;;gBACDihB,eAAc,MAAd,IAAyBjhB,MAAM6Z,gBAAN,KAA0B,IAAtD;yBACe7Z,MAAMohB,aAAN,CAAoBrR,IAApB,CAAyB/P,KAAzB,CAAX,EAA4C,CAA5C;;;SARZ;eAYA;;;;+BAEOmd;eACPzR,OAAI/F,IAAJ,CAASmW,IAAT,CAAc,KAACsB,SAAD,CAAW,OAAX,CAAd,EAAmC,UAAC/C,IAAD;iBAAUA,KAAK5K,EAAL,KAAW0N;SAAxD;;;;iCAESja;aACRrI,OAAD,CAAS,YAAT,EAAuBqI,CAAvB;;;;kCAIUA;aACTrI,OAAD,CAAS,aAAT,EAAwBqI,CAAxB;;;;uCAIeA;YACfme,aAAA5F,YAAA6F,iBAAAC,UAAAC,UAAAC,eAAAC,UAAAhG;mBAAWxY,EAAEye,WAAb;mBACW,KAACzD,QAAD,EAAX;0BACkBwD,SAASE,yBAAT,CAAmCL,QAAnC,CAAlB;qBACa,KAAC5E,WAAD,CAAajO,GAAb,CAAiBgN,gBAAgBlB,KAAhB,EAAjB,CAAb;0BACkBkH,SAASG,kBAAT,EAAlB;sBACcH,SAASI,aAAT,CAAuB5e,EAAEye,WAAzB,CAAd;mBACWJ,YAAYD,kBAAkB,CAA9B,IAAmC,GAA9C;wBACgB,KAACS,mBAAD,CAAqBtG,UAArB,CAAhB;aAEC4B,GAAD,CAAKqB,IAAL,CAAUnE,YAAV,CAAuB,iBAAvB,EAA0C,IAA1C;aAECyH,iBAAD;aACCC,cAAD;aACCC,cAAD;aACCrnB,OAAD,CAAS,kBAAT,EACI;iBAAOqI,CAAP;sBACYuY,UADZ;uBAEa4F,WAFb;oBAGUG,QAHV;yBAIeC,aAJf;2BAKiBH,eALjB;4BAMkBpe,EAAEye,WAAF,GAAgB,CAAhB,KAAqBL;SAP3C;;;;sCAWcpe;YACdme,aAAA5F,YAAA6F,iBAAAC,UAAAG,UAAAhG;mBAAWxY,EAAEye,WAAb;mBACW,KAACzD,QAAD,EAAX;0BACkBwD,SAASE,yBAAT,CAAmCL,QAAnC,CAAlB;qBACa,KAAC5E,WAAD,CAAajO,GAAb,CAAiBgN,gBAAgBlB,KAAhB,EAAjB,CAAb;0BACkBkH,SAASG,kBAAT,EAAlB;sBACcH,SAASI,aAAT,CAAuB5e,EAAEye,WAAzB,CAAd;aAECtE,GAAD,CAAKqB,IAAL,CAAUnE,YAAV,CAAuB,iBAAvB,EAA0C,KAA1C;aAEC1f,OAAD,CAAS,iBAAT,EACI;iBAAOqI,CAAP;sBACYuY,UADZ;2BAEiB6F,eAFjB;uBAGaD,WAHb;4BAIkBne,EAAEye,WAAF,GAAgB,CAAhB,KAAqBL;SAL3C;;;;0CASkBpe;aACjBrI,OAAD,CAAS,qBAAT,EAAgC;iBAAOqI;SAAvC;;;;8BAIMA;YACNmX,MAAA8C;YAAGja,EAAEif,eAAL;mBACajf,EAAE6X,MAAF,CAASc,YAAT,CAAsB,SAAtB,CAAT;iBACO,KAACuG,QAAD,CAAUjF,MAAV,CAAP;eAECtiB,OAAD,CAAS,SAAT,EAAoB;mBAAOqI,CAAP;kBAAgBmX;WAApC;;;;;oCAIQnX;YACZmX,MAAA8C;YAAGja,EAAEif,eAAL;mBACajf,EAAE6X,MAAF,CAASc,YAAT,CAAsB,SAAtB,CAAT;iBACO,KAACuG,QAAD,CAAUjF,MAAV,CAAP;eAECtiB,OAAD,CAAS,eAAT,EAA0B;mBAAOqI,CAAP;kBAAgBmX;WAA1C;;;;;8BAIEnX;YACNmX,MAAA8C;YAAGja,EAAEif,eAAL;mBACajf,EAAE6X,MAAF,CAASc,YAAT,CAAsB,SAAtB,CAAT;iBACO,KAACuG,QAAD,CAAUjF,MAAV,CAAP;eAECtiB,OAAD,CAAS,SAAT,EAAoB;mBAAOqI,CAAP;kBAAgBmX;WAApC;;;;;kCAIMnX;YACVmX,MAAA8C;YAAGja,EAAEif,eAAL;mBACajf,EAAE6X,MAAF,CAASc,YAAT,CAAsB,SAAtB,CAAT;iBACO,KAACuG,QAAD,CAAUjF,MAAV,CAAP;eAECtiB,OAAD,CAAS,aAAT,EAAwB;mBAAOqI,CAAP;kBAAgBmX;WAAxC;;;;;;aAKH4H,cAAD;aACCpnB,OAAD,CAAS,UAAT,EAAqB;iBAAO,KAACqjB,QAAD,GAAYqC,SAAZ,CAAsBF;SAAlD;;;;;aAKC6B,cAAD;aACCrnB,OAAD,CAAS,QAAT;;;;+BAIOqI;YACPuY,YAAA8F,UAAA7F;mBAAWxY,EAAEqe,QAAb;0BACkB,KAACrD,QAAD,GAAY0D,yBAAZ,CAAsCL,QAAtC,CAAlB;qBACa,KAAC5E,WAAD,CAAajO,GAAb,CAAiBgN,gBAAgBlB,KAAhB,EAAjB,CAAb;YAEuBiB,kBAAvB;qBAAW4G,MAAX;;aAEChF,GAAD,CAAKqB,IAAL,CAAUnE,YAAV,CAAuB,gBAAvB,EAAyC,IAAzC;aACC1f,OAAD,CAAS,UAAT,EAAqB;iBAAOqI,CAAP;sBAAsBuY;SAA3C;;;;gCAIQvY;YACRuY,YAAA8F,UAAA7F;mBAAWxY,EAAEqe,QAAb;0BACkB,KAACrD,QAAD,GAAY0D,yBAAZ,CAAsCL,QAAtC,CAAlB;qBACa,KAAC5E,WAAD,CAAajO,GAAb,CAAiBgN,gBAAgBlB,KAAhB,EAAjB,CAAb;YAEwBiB,kBAAxB;qBAAW6G,OAAX;;aAECjF,GAAD,CAAKqB,IAAL,CAAUnE,YAAV,CAAuB,gBAAvB,EAAyC,KAAzC;aACC1f,OAAD,CAAS,WAAT,EAAsB;iBAAOqI,CAAP;sBAAsBuY;SAA5C;;;;;YAKAvT,QAAAqU,UAAAtU;mBAAW,KAACmV,SAAD,CAAW,UAAX,CAAX;YAEOb,gBAAP;kBACY,KAACc,GAAD,CAAKqB,IAAL,CAAU8B,WAAlB;mBACS,KAACnD,GAAD,CAAKqB,IAAL,CAAU+B,YAAnB;qBAEcvY,UAAUD,KAAV,GAAqB,QAArB,GAAmC,QAAjD;;eAEJsU;;;;;qBAGa,KAACgG,WAAd;eAIA;;;;;;aAGCA,WAAD,GAAetf,WAAW,cAAX,EAIb,KAACma,SAAD,CAAW,WAAX,CAJa,CAAf;eAMA;;;;qCAEab;YACb7iB,GAAAsK,KAAAkW,SAAAsI,cAAAV,eAAA/D;YAAY,KAACxB,QAAD,KAAaA,QAAzB;iBAAO;;mBAEC,KAAC2B,QAAD,EAAR;kBACUH,SAAM6D,yBAAN,CAAgC7D,SAAM0E,WAAN,EAAhC,EAAqDC,UAArD,EAAV;wBACgB,KAACxE,QAAD,GAAYnE,EAAZ,CAAe6B,gBAAf,CAAgC,sBAAhC,CAAhB;aAECW,QAAD,GAAYA,QAAZ;aAECI,WAAD,CAAakB,MAAb,CAAoB,KAACtB,QAArB;aAEA7iB,KAAA,4BAAA,SAAA,KAAA;;uBAAaikB,UAAb,CAAwBgF,WAAxB,CAAoCH,YAApC;;aACCnF,GAAD,CAAKpD,KAAL,CAAW0D,UAAX,CAAsBC,YAAtB,CAAmC,KAACjB,WAAD,CAAamB,OAAb,EAAnC,EAA2D,KAACT,GAAD,CAAKpD,KAAhE;iBAEM2I,OAAN;iBACMC,UAAN,CAAiB9E,SAAM+E,+BAAN,CAAsC5I,QAAQ,CAAR,CAAtC,CAAjB,EAAoE;oBAAU;SAA9E;iBACMyC,WAAN,CAAkB3K,OAAlB,CAA0B,KAACkN,6BAAD,CAA+BnP,IAA/B,CAAoC,IAApC,CAA1B;eAEA;;;;oDAE4B0L;;;YACzBA,WAAWsH,OAAX,OAAwB,MAA3B;iBACItH,WAAWuH,cAAX,GAA4B;mBAAG,OAACA,cAAD,CAAgBvH,UAAhB;;;;;;;YAGnCwH,WAAAxH;qBAAa,KAACyC,QAAD,GAAY0D,yBAAZ,CAAsC,KAAC1D,QAAD,GAAYuE,WAAZ,EAAtC,CAAb;oBACevW,SAASgX,MAAT,KAAmB,IAAnB,GAA6B,aAA7B,GAAgD,UAA/D;aAECroB,OAAD,CAASooB,SAAT,EAAoB;sBAAY,KAACtG,WAAD,CAAajO,GAAb,CAAiB+M,WAAWhM,EAA5B;SAAhC;;;;;YAKA8M;mBAAW,KAACgB,WAAD,EAAX;8CAEO,IAA4BhB,aAAc,KAACA,QAAlD;eACK4G,cAAD,CAAgB5G,QAAhB;SADJ,MAAA;eAGK1hB,OAAD,CAAS,SAAT;;;;;;aAKHA,OAAD,CAAS,aAAT;;;;;;;;iCA1WJqiB,WACI;WAAO,EAAP;qBACiB,GADjB;4BAEwB,GAFxB;eAGW,IAHX;iBAIa,GAJb;WAKO;;;;GAPT;;AA+WNhkB,aAAWe,KAAX,CAAiB8iB,oBAAjB;;AAEA,aAAiBA,oBAAjB;;ACtXA,cAAiB,EAAjB;;ACAA,IAAA7jB,YAAA;IAAAoC,UAAA;IAAA8nB,wBAAA;IAAA1lB,QAAA;;AAAAxE,eAAaoB,UAAb;;AACAgB,aAAWgQ,QAAX;;AACA5N,WAAW6N,OAAX;;AAEM6X;;;;SAEGC,mBAAD,GAAuB,IAAvB;SACCC,iBAAD,GAAqB,EAArB;SACC/iB,KAAD,GAAS,EAAT;SAECwP,IAAD,CAAM,kBAAN,EAA0B,KAACwT,gBAAD,CAAkBxT,IAAlB,CAAuB,IAAvB,CAA1B;SACCA,IAAD,CAAM,iBAAN,EAAyB,KAACqP,eAAD,CAAiBrP,IAAjB,CAAsB,IAAtB,CAAzB;SACCA,IAAD,CAAM,aAAN,EAAqB,KAAC0N,WAAD,CAAa1N,IAAb,CAAkB,IAAlB,CAArB;SACCA,IAAD,CAAM,SAAN,EAAiB,KAACyT,OAAD,CAASzT,IAAT,CAAc,IAAd,CAAjB;;;;;;mCAIalB,IAbf;UAcE4U,aAAA1J,IAAAsC,MAAAqH,YAAAC,WAAAC,YAAAlqB,GAAA+V,IAAAzL,KAAAwe,cAAAjB,UAAA7e;aAAOwJ,SAASoQ,sBAAT,EAAP;oBACczN,KAAK6M,eAAL,CAAqBsH,cAArB,EAAd;qBACenU,KAAK4M,UAAL,CAAgBb,KAAhB,EAAf;mBACa4H,aAAa5G,gBAAb,CAA8B,kBAA9B,CAAb;WAEAliB,KAAA,yBAAA,SAAA,KAAA;;kBAAUikB,UAAV,CAAqBgF,WAArB,CAAiCgB,SAAjC;;;WAEAlU,EAAA,OAAA;;mBACe,KAACgT,WAAD,CAAa5T,KAAKoL,KAAlB,EAAyBpL,KAAKgV,KAA9B,EAAqCH,UAArC,CAAX;aACK,KAACI,aAAD,CAAeJ,UAAf,EAAwBnC,QAAxB,EAAkCkC,WAAlC,CAAL;aAEKvI,WAAL,CAAiBnB,EAAjB;;mBAESmB,WAAb,CAAyBmB,IAAzB;aAEA;;;;kCAEYqH,UA/Bd,EA+BuBnC,QA/BvB,EA+BiCkC,WA/BjC;UAgCE1J,IAAA7R,QAAA2Y,MAAAne,KAAAke,KAAA3Y;WAAKiE,SAASiO,aAAT,CAAuB,KAAvB,CAAL;YACM5T,KAAK4B,KAAL,CAAWsb,YAAYvb,MAAZ,GAAqB,GAArB,GAA2BqZ,SAASX,GAA/C,CAAN;aACOra,KAAK4B,KAAL,CAAWsb,YAAYxb,KAAZ,GAAoB,GAApB,GAA0BsZ,SAASV,IAA9C,CAAP;cACQta,KAAK4B,KAAL,CAAWsb,YAAYxb,KAAZ,GAAoB,GAApB,GAA0BsZ,SAAStZ,KAA9C,CAAR;eACS1B,KAAK4B,KAAL,CAAWsb,YAAYvb,MAAZ,GAAqB,GAArB,GAA2BqZ,SAASrZ,MAA/C,CAAT;aAEO3B,KAAK4B,KAAL,CAAWsb,YAAY7C,GAAvB,CAAP;cACQra,KAAK4B,KAAL,CAAWsb,YAAY5C,IAAvB,CAAR;SAEGvG,SAAH,GAAe,gCAAf;UACyCoJ,aAAA,QAAzC;WAAGnJ,YAAH,CAAgB,SAAhB,EAA2BmJ,WAAQjU,EAAnC;;UAC6CiU,eAAA,QAA7C;WAAGnJ,YAAH,CAAgB,WAAhB,EAA6BmJ,WAAQ7kB,IAArC;;SACGsc,SAAH,GAAe7f,WAAS4F,MAAT,6CAAmCxD,QAAnC,EAA6CgmB,UAA7C,CAAf;SAEGnI,KAAH,CAASqF,GAAT,GAAkBA,GAAlB;SACGrF,KAAH,CAASsF,IAAT,GAAmBA,IAAnB;SACGtF,KAAH,CAAStT,KAAT,GAAoBA,KAApB;SACGsT,KAAH,CAASrT,MAAT,GAAqBA,MAArB;aAEA6R;;;;gCAEUE,KArDZ,EAqDmB4J,KArDnB,EAqD0BH,UArD1B;UAsDExb,QAAA6b,MAAAC,MAAAC,MAAAC,MAAAC,YAAAC,aAAAnc;aAAO,IAAP;aACO,IAAP;aACO,IAAP;aACO,IAAP;oBACcgS,MAAMhT,GAAN,CAAU,UAACoT,IAAD;eAAUA,KAAK8J;OAAzB,CAAd;WAEAA,UAAA,wBAAA;YACgBC,YAAY3qB,OAAZ,CAAoB,CAAC0qB,UAArB,MAAoC,CAAC,CAAjD;;;mBAEQE,SAAR,CAAkBF,UAAlB,EAA8BnS,OAA9B,CAAsC,UAACsS,MAAD;cAClCrb,GAAAsb;cAAID,OAAO,CAAP,CAAJ;cACIA,OAAO,CAAP,CAAJ;cAESrK,MAAM,CAAN,KAAamK,YAAY,CAAZ,MAAkB,CAACD,UAAzC;iBAAI,CAAJ;;eACKlK,MAAMtgB,MAAX;cAEOsqB,YAAP;mBACWF,OAAO9a,CAAd;mBACO+a,OAAOO,CAAd;;cAEQtb,IAAIgb,IAAhB;mBAAOhb,CAAP;;cACYA,IAAI8a,IAAhB;mBAAO9a,CAAP;;cACYsb,IAAIL,IAAhB;mBAAOK,CAAP;;cACYA,IAAIP,IAAhB;mBAAAA,OAAOO;;SAdX;;cAgBIR,OAAOE,IAAf;eACSD,OAAOE,IAAhB;aAEA;aAAKA,OAAOL,KAAP,GAAe,GAApB;cACMI,OAAO,GADb;eAEOhc,QAAQ,GAFf;gBAGQC,SAAS2b,KAAT,GAAiB;;;;;oCAEXW,YAvFhB,EAuF8BvK,KAvF9B;WAwFGpf,OAAD,CAAS,mBAAT,EACI;YAAI2pB,YAAJ;eACOvK;OAFX;;;;qCAMe/W,CA9FjB;UA+FEshB;qBAAethB,EAAEuY,UAAF,CAAajB,KAAb,EAAf;WAECiK,QAAD,CAAUD,YAAV,EAAwBthB,CAAxB;WACCwhB,cAAD,CAAgBxhB,CAAhB;;;;6BAIOshB,YAtGT;aAuGE,KAACjkB,KAAD,CAAOikB,YAAP;;;;6BAEOA,YAzGT,EAyGuB3V,IAzGvB;WA0GGtO,KAAD,CAAOikB,YAAP,IAAuB3V,IAAvB;aAEA;;;;oCAEc3L,CA9GhB;UA+GEuM;UAAcvM,YAAA,QAAd;;;WAEKA,EAAEuY,UAAF,CAAajB,KAAb,EAAL;WAEC6I,mBAAD,GAAuB5T,EAAvB;UACgD,KAAC6T,iBAAD,CAAmB7T,EAAnB,CAAhD;aAACkV,eAAD,CAAiBlV,EAAjB,EAAqBvM,EAAEuY,UAAF,CAAarB,QAAb,EAArB;;;;;gCAIUlX,CAxHZ;WAyHGogB,iBAAD,CAAmBpgB,EAAEshB,YAArB,IAAqC,IAArC;UAC4C,KAACnB,mBAAD,KAAwBngB,EAAEshB,YAAtE;aAACG,eAAD,CAAiBzhB,EAAEshB,YAAnB,EAAiCthB,EAAE+W,KAAnC;;;;;4BAIM/W,CA9HR;UA+HE2L;aAAO,KAAC+V,QAAD,CAAU,KAACvB,mBAAX,CAAP;UAEwBxU,YAAxB;aAAC6V,cAAD,CAAgB7V,IAAhB;;;;;;;AAIR3V,aAAWe,KAAX,CAAiBmpB,wBAAjB;;AAEA,eAAiBA,wBAAjB;;AC3IA,iBACI;OAAK,EAAL;eACa,EADb;cAEY,EAFZ;SAGO,EAHP;cAIY;CALhB;;ACAA,IAAAlqB,YAAA;IAAA2rB,wBAAA;IAAAnZ,MAAA;IAAAoZ,QAAA;;AAAA5rB,eAAaoB,UAAb;;AACAoR,SAAMJ,GAAN;;AACAwZ,WAAWvZ,UAAX;;AAEMsZ;oCACY9K,EAAd;sFAA6B;;;SAAVjU,OAAD,UAAA;SACbuX,GAAD,GACI;YAAMtD,EAAN;gBACUA,GAAGuD,aAAH,CAAiB,mBAAjB,CADV;mBAEavD,GAAGuD,aAAH,CAAiB,uBAAjB,CAFb;qBAGevD,GAAGuD,aAAH,CAAiB,yBAAjB,CAHf;mBAIavD,GAAGuD,aAAH,CAAiB,uCAAjB,CAJb;mBAKavD,GAAGuD,aAAH,CAAiB,uCAAjB;KANjB;SAOCyH,KAAD,GACI;SAAG,CAAH;SACG;KAFP;SAICC,eAAD,GAAmBtZ,OAAI/F,IAAJ,CAAS2Y,QAAT,CAAkB,KAAC2G,OAAnB,EAA4B,GAA5B,EAAiC,IAAjC,CAAnB;SACCC,iBAAD,GAAqBxZ,OAAI/F,IAAJ,CAAS2Y,QAAT,CAAkB,KAAC6G,SAAnB,EAA8B,EAA9B,EAAkC,IAAlC,CAArB;QAEiE,KAACrf,OAAD,CAASsf,QAAT,KAAqB,IAAtF;WAAC/H,GAAD,CAAKqB,IAAL,CAAU/Q,gBAAV,CAA2B,SAA3B,EAAsC,KAACqX,eAAvC,EAAwD,KAAxD;;SACC3H,GAAD,CAAKqB,IAAL,CAAU/Q,gBAAV,CAA2B,WAA3B,EAAwC,KAACuX,iBAAzC,EAA4D,KAA5D;QAC0E,QAAA,YAAA,QAA1E;WAAC7H,GAAD,CAAKgI,WAAL,CAAiB1X,gBAAjB,CAAkC,OAAlC,EAA2C,KAAC2X,WAAD,CAAavV,IAAb,CAAkB,IAAlB,CAA3C,EAAiE,KAAjE;;QAC0E,QAAA,YAAA,QAA1E;WAACsN,GAAD,CAAKkI,WAAL,CAAiB5X,gBAAjB,CAAkC,OAAlC,EAA2C,KAAC6X,WAAD,CAAazV,IAAb,CAAkB,IAAlB,CAA3C,EAAiE,KAAjE;;SAECoV,SAAD,CAAW,EAAX;SAECpV,IAAD,CAAM,kBAAN,EAA0B,KAACoP,gBAAD,CAAkBpP,IAAlB,CAAuB,IAAvB,CAA1B;;;;;;;WAKCsN,GAAD,CAAKqB,IAAL,CAAUE,mBAAV,CAA8B,SAA9B,EAAyC,KAACoG,eAA1C;WACC3H,GAAD,CAAKqB,IAAL,CAAUE,mBAAV,CAA8B,WAA9B,EAA2C,KAACsG,iBAA5C;;;;qCAIehiB,CAjCjB;UAkCEuiB,cAAAC;qBAAe,OAAOxiB,EAAEue,aAAT,KAA0B,QAA1B,IAAuCve,EAAEue,aAAF,CAAgB9nB,MAAhB,GAAyB,CAA/E;4BACsB,gBAAtB;mCAEG,gCAAH;aACK0jB,GAAD,CAAKsI,WAAL,CAAiBpK,KAAjB,CAAuBtT,KAAvB,GAAkC/E,EAAEse,QAApC;YAEGiE,iBAAgB,IAAnB;eACKpI,GAAD,CAAKmE,QAAL,CAAcoE,SAAd,CAAwBC,MAAxB,CAA+BH,mBAA/B;SADJ,MAAA;eAGKrI,GAAD,CAAKmE,QAAL,CAAcoE,SAAd,CAAwBE,GAAxB,CAA4BJ,mBAA5B;;;UAEL,QAAA,cAAA,QAAH;YACOD,iBAAgB,IAAnB;eACKpI,GAAD,CAAKoE,aAAL,CAAmBsE,WAAnB,GAAiC7iB,EAAEue,aAAnC;eACCpE,GAAD,CAAKoE,aAAL,CAAmBmE,SAAnB,CAA6BC,MAA7B,CAAoCH,mBAApC;SAFJ,MAAA;eAIKrI,GAAD,CAAKoE,aAAL,CAAmBmE,SAAnB,CAA6BE,GAA7B,CAAiCJ,mBAAjC;;;UAEL,QAAA,YAAA,QAAH;YACOxiB,EAAE6a,KAAF,CAAQ4D,WAAR,KAAuB,CAA1B;eACKtE,GAAD,CAAKgI,WAAL,CAAiBO,SAAjB,CAA2BE,GAA3B,CAA+BJ,mBAA/B;SADJ,MAAA;eAGKrI,GAAD,CAAKgI,WAAL,CAAiBO,SAAjB,CAA2BC,MAA3B,CAAkCH,mBAAlC;;;UAEL,QAAA,YAAA,QAAH;YACOxiB,EAAE6a,KAAF,CAAQ4D,WAAR,KAAuBze,EAAEoe,eAAF,GAAoB,CAA9C;eACKjE,GAAD,CAAKkI,WAAL,CAAiBK,SAAjB,CAA2BE,GAA3B,CAA+BJ,mBAA/B;SADJ,MAAA;eAGKrI,GAAD,CAAKkI,WAAL,CAAiBK,SAAjB,CAA2BC,MAA3B,CAAkCH,mBAAlC;;;;;;gCAIExiB,CAlEZ;QAmEI8iB,cAAF;WAECnrB,OAAD,CAAS,MAAT;;;;gCAIUqI,CAzEZ;QA0EI8iB,cAAF;WAECnrB,OAAD,CAAS,MAAT;;;;4BAIMqI,CAhFR;UAiFE+iB;gBAAU/iB,EAAE+iB,OAAZ;UAEGnB,SAASoB,UAAT,KAAuBD,OAA1B;aACKprB,OAAD,CAAS,MAAT,EAAiB;oBAAU;SAA3B;OADJ,MAEK,IAAGiqB,SAASqB,WAAT,KAAwBF,OAAxB,IAAmCnB,SAASsB,KAAT,KAAkBH,OAAxD;aACAprB,OAAD,CAAS,MAAT,EAAiB;oBAAU;SAA3B;OADC,MAEA,IAAGiqB,SAASuB,UAAT,KAAuBJ,OAA1B;aACAprB,OAAD,CAAS,OAAT,EAAkB;oBAAU;SAA5B;;;;;8BAIIqI,CA5FV;;;UA6FYA,EAAEojB,OAAF,KAAa,KAACvB,KAAD,CAAO9b,CAApB,IAA0B,KAAC8b,KAAD,CAAOR,CAAP,KAAYrhB,EAAEqjB,OAAlD;;;WAECxB,KAAD,CAAO9b,CAAP,GAAW/F,EAAEojB,OAAb;WACCvB,KAAD,CAAOR,CAAP,GAAWrhB,EAAEqjB,OAAb;WAEClJ,GAAD,CAAKqB,IAAL,CAAUnE,YAAV,CAAuB,mBAAvB,EAA4C,IAA5C;mBAEa,KAACiM,gBAAd;WAECA,gBAAD,GAAoBvjB,WAAW;cAC1Boa,GAAD,CAAKqB,IAAL,CAAUnE,YAAV,CAAuB,mBAAvB,EAA4C,KAA5C;OADgB,EAIlB,IAJkB,CAApB;;;;;;AAQRrhB,aAAWe,KAAX,CAAiB4qB,wBAAjB;;AAEA,eAAiBA,wBAAjB;;ACpHA,IAAA3rB,YAAA;IAAAutB,6BAAA;;AAAAvtB,eAAaoB,UAAb;;AAEMmsB;;;;SAiHFlH,qBAAAA;SA/GK2D,MAAD,GAAU,IAAV;SACCzH,UAAD,GAAc,IAAd;SAEC1L,IAAD,CAAM,UAAN,EAAkB,KAAC2W,QAAD,CAAU3W,IAAV,CAAe,IAAf,CAAlB;SACCA,IAAD,CAAM,aAAN,EAAqB,KAAC4W,WAAD,CAAa5W,IAAb,CAAkB,IAAlB,CAArB;SACCA,IAAD,CAAM,kBAAN,EAA0B,KAACoP,gBAAD,CAAkBpP,IAAlB,CAAuB,IAAvB,CAA1B;SACCA,IAAD,CAAM,iBAAN,EAAyB,KAACqP,eAAD,CAAiBrP,IAAjB,CAAsB,IAAtB,CAAzB;SACCA,IAAD,CAAM,qBAAN,EAA6B,KAACsP,mBAAD,CAAqBtP,IAArB,CAA0B,IAA1B,CAA7B;SACCA,IAAD,CAAM,SAAN,EAAiB,KAACuP,OAAD,CAASvP,IAAT,CAAc,IAAd,CAAjB;SACCA,IAAD,CAAM,eAAN,EAAuB,KAACwP,aAAD,CAAexP,IAAf,CAAoB,IAApB,CAAvB;SACCA,IAAD,CAAM,SAAN,EAAiB,KAACyP,OAAD,CAASzP,IAAT,CAAc,IAAd,CAAjB;SACCA,IAAD,CAAM,UAAN,EAAkB,KAAC2P,QAAD,CAAU3P,IAAV,CAAe,IAAf,CAAlB;SACCA,IAAD,CAAM,UAAN,EAAkB,KAAC6P,QAAD,CAAU7P,IAAV,CAAe,IAAf,CAAlB;SACCA,IAAD,CAAM,WAAN,EAAmB,KAAC8P,SAAD,CAAW9P,IAAX,CAAgB,IAAhB,CAAnB;SACCA,IAAD,CAAM,WAAN,EAAmB,KAACkO,OAAD,CAASlO,IAAT,CAAc,IAAd,CAAnB;;;;;;;WAKC6W,qBAAD;WACCC,gBAAD;;;;+BAIShoB,IA1BX;UA0BiBoR,iFAAa;;WAC3BpV,OAAD,CAAS,YAAT,EAAuB;cAAMgE,IAAN;oBAAwBoR;OAA/C;;;;gCAIUA,UA/BZ;WAgCG6W,UAAD,CAAY,0BAAZ,EAAwC7W,UAAxC;aAEA;;;;qCAEeA,UApCjB;WAqCG6W,UAAD,CAAY,gCAAZ,EAA8C7W,UAA9C;aAEA;;;;2CAEqBA,UAzCvB;WA0CG6W,UAAD,CAAY,uCAAZ,EAAqD7W,UAArD;aAEA;;;;yCAEmBA,UA9CrB;WA+CG6W,UAAD,CAAY,qCAAZ,EAAmD7W,UAAnD;aAEA;;;;6CAEuBA,UAnDzB;WAoDG6W,UAAD,CAAY,yCAAZ,EAAuD7W,UAAvD;aAEA;;;;4CAEsBA,UAxDxB;WAyDG6W,UAAD,CAAY,wCAAZ,EAAsD7W,UAAtD;aAEA;;;;+CAEyBA,UA7D3B;WA8DG6W,UAAD,CAAY,2CAAZ,EAAyD7W,UAAzD;aAEA;;;;4CAEsBA,UAlExB;WAmEG6W,UAAD,CAAY,yCAAZ,EAAuD7W,UAAvD;aAEA;;;;6CAEuBA,UAvEzB;WAwEG6W,UAAD,CAAY,0CAAZ,EAAwD7W,UAAxD;aAEA;;;;6BAEO/M,CA5ET;WA6EG6jB,kBAAD,CAAoB7jB,EAAEuY,UAAtB;;;;;WAKCmL,qBAAD;;;;;WAKCA,qBAAD;;;;oCAIc1jB,CA3FhB;WA4FG6jB,kBAAD,CAAoB7jB,EAAEuY,UAAtB;;;;wCAIkBvY,CAhGpB;WAiGG6jB,kBAAD,CAAoB7jB,EAAEuY,UAAtB;;;;4BAIMvY,CArGR;UAsGE+M;UAAG/M,MAAA,QAAH;qBAEQ;sBAAYA,EAAEmX,IAAF,CAAO8J,UAAnB;aACGjhB,EAAE6a,KAAF,CAAQiJ,KADX;aAEG9jB,EAAE6a,KAAF,CAAQkJ;SAHf;aAKCC,gBAAD,CAAkB;gCAAsBjX;SAAxC;YAC8D/M,EAAE6a,KAAF,CAAQoJ,UAAR,CAAmBxtB,MAAnB,GAA4B,CAA1F;eAACytB,wBAAD,CAA0B;kCAAsBnX;WAAhD;;;;;;kCAIQ/M,CAjHd;UAkHKA,MAAA,QAAH;aACKmkB,sBAAD,CAAwB;gCACpB;wBAAYnkB,EAAEmX,IAAF,CAAO8J,UAAnB;eACGjhB,EAAE6a,KAAF,CAAQiJ,KADX;eAEG9jB,EAAE6a,KAAF,CAAQkJ;;SAHf;;;;;4BAOE/jB,CA1HR;UA2HKA,MAAA,QAAH;aACKokB,oBAAD,CAAsB;gCAClB;wBAAYpkB,EAAEmX,IAAF,CAAO8J,UAAnB;eACGjhB,EAAE6a,KAAF,CAAQiJ,KADX;eAEG9jB,EAAE6a,KAAF,CAAQkJ;;SAHf;;;;;6BAOG/jB,CAnIT;UAoI8BA,EAAEmd,KAAF,KAAW,CAAvC;aAACuG,qBAAD;;;;;6BAIO1jB,CAxIT;UAyIKA,YAAA,QAAH;aACKqkB,uBAAD,CAAyB;sCACrB;yBAAarkB,EAAEuY,UAAF,CAAarB,QAAb,GAAwBnT,GAAxB,CAA4B,UAACoT,IAAD;qBAAUA,KAAK8J;aAA3C;;SADjB;;;;;8BAKIjhB,CA/IV;UAgJKA,YAAA,QAAH;aACKskB,wBAAD,CAA0B;sCACtB;yBAAatkB,EAAEuY,UAAF,CAAarB,QAAb,GAAwBnT,GAAxB,CAA4B,UAACoT,IAAD;qBAAUA,KAAK8J;aAA3C;;SADjB;;;;;uCAKa1I,UAtJnB;4BAuJK,IAAgB,KAACyH,MAAD,KAAW,IAA9B;aACKzH,UAAD,GAAcA,UAAd;aAECgM,uBAAD,CAAyB;sCACrB;yBAAahM,WAAWrB,QAAX,GAAsBnT,GAAtB,CAA0B,UAACoT,IAAD;qBAAUA,KAAK8J;aAAzC;;SADjB;aAGCjB,MAAD,GAAU,KAAV;;;;;;iCAKD,IAAiB,KAACA,MAAD,KAAW,KAA/B;aACKwE,0BAAD,CAA4B;sCACxB;yBAAa,KAACjM,UAAD,CAAYrB,QAAZ,GAAuBnT,GAAvB,CAA2B,UAACoT,IAAD;qBAAUA,KAAK8J;aAA1C;;SADjB;aAGCjB,MAAD,GAAU,IAAV;aACCzH,UAAD,GAAc,IAAd;;;;;;;AAIZviB,aAAWe,KAAX,CAAiBwsB,6BAAjB;;AAEA,oBAAiBA,6BAAjB;;AC/KA,IAAAvtB,YAAA;IAAAyuB,mCAAA;;AAAAzuB,eAAaoB,UAAb;;AAEMqtB;;;;SAEG5X,IAAD,CAAM,cAAN,EAAsB,KAAC6X,YAAD,CAAc7X,IAAd,CAAmB,IAAnB,CAAtB;SACC6P,QAAD,GAAY,KAAZ;SACCiI,UAAD,GAAc,IAAd;;;;;;+BAIS3kB,CARX;WASGrI,OAAD,CAAS,YAAT,EAAuBqI,CAAvB;;;;iCAIWA,CAbb;UAcKA,EAAErE,IAAF,KAAU,wCAAb;aACKgpB,UAAD,GAAc1hB,KAAKmC,GAAL,EAAd;;UACDpF,EAAErE,IAAF,KAAU,2CAAb;aACKhE,OAAD,CAAS,YAAT,EACI;gBAAS,KAAC+kB,QAAD,GAAe,MAAf,GAA2B,MAApC;cACIzZ,KAAKmC,GAAL,KAAa,KAACuf,UADlB;uBAEa,KAACC,cAAD,EAFb;iBAGO5kB,EAAE+M,UAAF,CAAa8X,0BAAb,CAAwC3D;SAJnD;OADJ,MAMK,IAAGlhB,EAAErE,IAAF,KAAU,yCAAb;aACAhE,OAAD,CAAS,YAAT,EACI;gBAAM,MAAN;cACI,KAACmtB,WAAD,EADJ;uBAEa,KAACF,cAAD,EAFb;iBAGO5kB,EAAE+M,UAAF,CAAa8X,0BAAb,CAAwC3D;SAJnD;aAMCxE,QAAD,GAAY,IAAZ;aACCiI,UAAD,GAAc1hB,KAAKmC,GAAL,EAAd;OARC,MASA,IAAGpF,EAAErE,IAAF,KAAU,0CAAb;aACAhE,OAAD,CAAS,YAAT,EACI;gBAAM,MAAN;cACI,KAACmtB,WAAD,EADJ;uBAEa,KAACF,cAAD,EAFb;iBAGO5kB,EAAE+M,UAAF,CAAa8X,0BAAb,CAAwC3D;SAJnD;aAMCxE,QAAD,GAAY,KAAZ;aACCiI,UAAD,GAAc1hB,KAAKmC,GAAL,EAAd;;;;;;UAKDzB,OAAOohB,UAAP,IAAqBphB,OAAOqhB,WAA/B;eAAgD;OAAhD,MAAA;eAAiE;;;;;;aAGjE/hB,KAAKmC,GAAL,KAAa,KAACuf;;;;;;AAEtB3uB,aAAWe,KAAX,CAAiB0tB,mCAAjB;;AAEA,0BAAiBA,mCAAjB;;ACrDA,IAAAQ,QAAA;IAAAC,IAAA;IAAAC,aAAA;IAAAC,QAAA;IAAAC,mBAAA;IAAArvB,YAAA;IAAAwS,MAAA;IAAA8c,MAAA;;AAAAtvB,eAAaoB,UAAb;;AACAoR,SAAMJ,GAAN;;AACA8c,OAAO7c,MAAP;;AACA+c,WAAWtL,QAAX;;AACAmL,WAAWlJ,QAAX;;AACAoJ,gBAAgBI,aAAhB;;AACAF,sBAAsBG,mBAAtB;;AAEMF;oBACF;uFAA8B;;;SAAfzO,EAAD,KAAA;SAAMjU,OAAD,WAAA;SACd6iB,KAAD,GAAS,IAAIP,IAAJ,CAAS,KAACrO,EAAV,EACL;UAAI,KAACjU,OAAD,CAAS2J,EAAb;aACO,KAAC3J,OAAD,CAASmU,KADhB;uBAEiB,KAACnU,OAAD,CAAS8iB,eAF1B;8BAGwB,KAAC9iB,OAAD,CAAS+iB,sBAHjC;cAIQ,KAAC/iB,OAAD,CAASqX,MAJjB;iBAKW,KAACrX,OAAD,CAASgjB,SALpB;mBAMa,KAAChjB,OAAD,CAASijB,WANtB;aAOO,KAACjjB,OAAD,CAAS+C;KARX,CAAT;SASCmgB,SAAD,GAAa,IAAIV,QAAJ,EAAb;SACCW,SAAD,GAAa,IAAId,QAAJ,CAAa,KAACpO,EAAd,EAAkB;gBAAU,KAACjU,OAAD,CAASsf;KAArC,CAAb;SACC8D,cAAD,GAAkB,IAAIb,aAAJ,EAAlB;SACCc,oBAAD,GAAwB,IAAIZ,mBAAJ,EAAxB;SACCa,WAAD,GAAe1d,OAAI/F,IAAJ,CAAS2J,IAAT,EAAf;SAEC+Z,oBAAD;;;;;;;WAKCH,cAAD,CAAgBI,WAAhB;WACCX,KAAD,CAAO9tB,OAAP,CAAe,SAAf;aAEA;;;;;WAGC8tB,KAAD,CAAO9tB,OAAP,CAAe,WAAf;WACCmuB,SAAD,CAAWnuB,OAAX,CAAmB,WAAnB;WACCouB,SAAD,CAAWpuB,OAAX,CAAmB,WAAnB;WACCquB,cAAD,CAAgBruB,OAAhB,CAAwB,WAAxB;WAECkf,EAAD,CAAI4D,UAAJ,CAAegF,WAAf,CAA2B,KAAC5I,EAA5B;aAEA;;;;+BAESwH,QArCX,EAqCqBzb,OArCrB;WAsCGyjB,eAAD,CAAiBhI,QAAjB,EAA2Bzb,OAA3B;aAEA;;;;oCAEcyb,QA1ChB,EA0C0Bzb,OA1C1B;WA2CG6iB,KAAD,CAAOzK,QAAP,GAAkB2E,UAAlB,CAA6BtB,QAA7B,EAAuCzb,OAAvC;aAEA;;;;qCAEeqX,MA/CjB,EA+CyBrX,OA/CzB;UAgDEyb;iBAAW,KAACoH,KAAD,CAAOzK,QAAP,GAAkB4E,+BAAlB,CAAkD3F,MAAlD,CAAX;aAEA,KAACwL,KAAD,CAAOzK,QAAP,GAAkB2E,UAAlB,CAA6BtB,QAA7B,EAAuCzb,OAAvC;;;;0BAEIA,OApDN;WAqDG6iB,KAAD,CAAOzK,QAAP,GAAkBsL,KAAlB,CAAwB1jB,OAAxB;aAEA;;;;yBAEGA,OAzDL;WA0DG6iB,KAAD,CAAOzK,QAAP,GAAkBuL,IAAlB,CAAuB3jB,OAAvB;aAEA;;;;yBAEGA,OA9DL;WA+DG6iB,KAAD,CAAOzK,QAAP,GAAkBwL,IAAlB,CAAuB5jB,OAAvB;aAEA;;;;yBAEGA,OAnEL;WAoEG6iB,KAAD,CAAOzK,QAAP,GAAkBvU,IAAlB,CAAuB7D,OAAvB;aAEA;;;;gCAEU5C,CAxEZ;UAyEEymB,cAAAC,QAAAlvB,KAAAuV,YAAAvN,KAAA7D,MAAAlE;aAAOuI,EAAErE,IAAT;eACS,QAAT;mBACa;0BACT;cAAI,CAAC+qB,MAAD,EAAS,KAAC9jB,OAAD,CAAS2J,EAAlB,CAAJ;mBACS,CAACma,MAAD,EAAS,KAAC9jB,OAAD,CAAS+jB,OAAlB;;OAFb;qBAGe,KAAC/jB,OAAD,CAAS6jB,YAAxB;;WAEAjvB,GAAA,OAAA;;mBAAWA,GAAX,IAAkBC,KAAlB;;UAE4CgvB,oBAA5C;qBAAa7C,UAAb,CAAwBjoB,IAAxB,EAA8BoR,UAA9B;;;;;sCAIgB/M,CAtFlB;UAuFEymB,cAAA7U;qBAAe,KAAChP,OAAD,CAAS6jB,YAAxB;oBACc,EAAd;UAEGA,oBAAH;oBACgBlZ,QAAZ,GAAuBkZ,aAAa7iB,QAAb,CAAsB2J,QAA7C;oBACYC,SAAZ,GAAwBiZ,aAAa7iB,QAAb,CAAsB4J,SAA9C;YAC6BoE,oBAAA,QAA7B;sBAAYU,MAAZ,GAAqB,IAArB;;eAEIjB,OAAJ,CAAY3F,OAAZ,CACI;uBAAakG,WAAb;kBACQ,MADR;iCAEqB,KAAChP,OAAD,CAAS2J,EAA9B,aAFA;gBAGM,IAHN;gBAKI;kBAAMvM,EAAErE,IAAR;gBACIqE,EAAE4mB,EADN;yBAEa5mB,EAAE6mB,WAFf;mBAGO7mB,EAAE+W,KAAF,CAAQ9S,IAAR,CAAa,GAAb,CAHP;0BAIc,KAACiiB;;SAVvB;;;;;;;;WAeHF,cAAD,CAAgBnZ,IAAhB,CAAqB,YAArB,EAAmC,UAAC7M,CAAD;cAC9B8mB,WAAD,CAAa9mB,CAAb;cACCimB,oBAAD,CAAsBtuB,OAAtB,CAA8B,cAA9B,EAA8CqI,CAA9C;OAFJ;WAMCimB,oBAAD,CAAsBpZ,IAAtB,CAA2B,YAA3B,EAAyC,UAAC7M,CAAD;cACpC+mB,iBAAD,CAAmB/mB,CAAnB;OADJ;WAKC+lB,SAAD,CAAWlZ,IAAX,CAAgB,MAAhB,EAAwB,UAAC7M,CAAD;cACnBumB,IAAD,CAAMvmB,CAAN;OADJ;WAIC+lB,SAAD,CAAWlZ,IAAX,CAAgB,MAAhB,EAAwB,UAAC7M,CAAD;cACnBwmB,IAAD,CAAMxmB,CAAN;OADJ;WAIC+lB,SAAD,CAAWlZ,IAAX,CAAgB,OAAhB,EAAyB,UAAC7M,CAAD;cACpBsmB,KAAD,CAAOtmB,CAAP;OADJ;WAIC+lB,SAAD,CAAWlZ,IAAX,CAAgB,MAAhB,EAAwB,UAAC7M,CAAD;cACnByG,IAAD;OADJ;WAICqf,SAAD,CAAWjZ,IAAX,CAAgB,mBAAhB,EAAqC,UAAC7M,CAAD;cAChCrI,OAAD,CAAS,mBAAT,EAA8BqI,CAA9B;OADJ;WAKCylB,KAAD,CAAO5Y,IAAP,CAAY,UAAZ,EAAwB,UAAC7M,CAAD;cACnBgmB,cAAD,CAAgBruB,OAAhB,CAAwB,UAAxB,EAAoCqI,CAApC;cACCrI,OAAD,CAAS,UAAT,EAAqBqI,CAArB;OAFJ;WAKCylB,KAAD,CAAO5Y,IAAP,CAAY,aAAZ,EAA2B,UAAC7M,CAAD;cACtBgmB,cAAD,CAAgBruB,OAAhB,CAAwB,aAAxB,EAAuCqI,CAAvC;cACCrI,OAAD,CAAS,aAAT,EAAwBqI,CAAxB;OAFJ;WAKCylB,KAAD,CAAO5Y,IAAP,CAAY,kBAAZ,EAAgC,UAAC7M,CAAD;cAC3BgmB,cAAD,CAAgBruB,OAAhB,CAAwB,kBAAxB,EAA4CqI,CAA5C;cACC+lB,SAAD,CAAWpuB,OAAX,CAAmB,kBAAnB,EAAuCqI,CAAvC;cACCrI,OAAD,CAAS,kBAAT,EAA6BqI,CAA7B;OAHJ;WAMCylB,KAAD,CAAO5Y,IAAP,CAAY,iBAAZ,EAA+B,UAAC7M,CAAD;cAC1BgmB,cAAD,CAAgBruB,OAAhB,CAAwB,iBAAxB,EAA2CqI,CAA3C;cACC8lB,SAAD,CAAWnuB,OAAX,CAAmB,iBAAnB,EAAsCqI,CAAtC;cACCrI,OAAD,CAAS,iBAAT,EAA4BqI,CAA5B;OAHJ;WAMCylB,KAAD,CAAO5Y,IAAP,CAAY,qBAAZ,EAAmC,UAAC7M,CAAD;cAC9BgmB,cAAD,CAAgBruB,OAAhB,CAAwB,qBAAxB,EAA+CqI,CAA/C;cACCrI,OAAD,CAAS,qBAAT,EAAgCqI,CAAhC;OAFJ;WAKCylB,KAAD,CAAO5Y,IAAP,CAAY,SAAZ,EAAuB,UAAC7M,CAAD;cAClBgmB,cAAD,CAAgBruB,OAAhB,CAAwB,SAAxB,EAAmCqI,CAAnC;cACCrI,OAAD,CAAS,SAAT,EAAoBqI,CAApB;OAFJ;WAKCylB,KAAD,CAAO5Y,IAAP,CAAY,eAAZ,EAA6B,UAAC7M,CAAD;cACxBgmB,cAAD,CAAgBruB,OAAhB,CAAwB,eAAxB,EAAyCqI,CAAzC;cACCrI,OAAD,CAAS,eAAT,EAA0BqI,CAA1B;OAFJ;WAKCylB,KAAD,CAAO5Y,IAAP,CAAY,aAAZ,EAA2B,UAAC7M,CAAD;cACtBrI,OAAD,CAAS,aAAT,EAAwBqI,CAAxB;OADJ;WAICylB,KAAD,CAAO5Y,IAAP,CAAY,SAAZ,EAAuB,UAAC7M,CAAD;cAClBgmB,cAAD,CAAgBruB,OAAhB,CAAwB,SAAxB,EAAmCqI,CAAnC;cACCrI,OAAD,CAAS,SAAT,EAAoBqI,CAApB;OAFJ;WAKCylB,KAAD,CAAO5Y,IAAP,CAAY,UAAZ,EAAwB,UAAC7M,CAAD;cACnBgmB,cAAD,CAAgBruB,OAAhB,CAAwB,UAAxB,EAAoCqI,CAApC;cACCrI,OAAD,CAAS,UAAT,EAAqBqI,CAArB;OAFJ;WAKCylB,KAAD,CAAO5Y,IAAP,CAAY,UAAZ,EAAwB,UAAC7M,CAAD;cACnBgmB,cAAD,CAAgBruB,OAAhB,CAAwB,UAAxB,EAAoCqI,CAApC;cACCrI,OAAD,CAAS,UAAT,EAAqBqI,CAArB;OAFJ;WAKCylB,KAAD,CAAO5Y,IAAP,CAAY,WAAZ,EAAyB,UAAC7M,CAAD;cACpBgmB,cAAD,CAAgBruB,OAAhB,CAAwB,WAAxB,EAAqCqI,CAArC;cACCrI,OAAD,CAAS,WAAT,EAAsBqI,CAAtB;OAFJ;WAKCylB,KAAD,CAAO5Y,IAAP,CAAY,YAAZ,EAA0B,UAAC7M,CAAD;cACrBgmB,cAAD,CAAgBruB,OAAhB,CAAwB,YAAxB,EAAsCqI,CAAtC;cACCrI,OAAD,CAAS,YAAT,EAAuBqI,CAAvB;OAFJ;WAKCylB,KAAD,CAAO5Y,IAAP,CAAY,aAAZ,EAA2B,UAAC7M,CAAD;cACtB8lB,SAAD,CAAWnuB,OAAX,CAAmB,aAAnB,EAAkCqI,CAAlC;cACCrI,OAAD,CAAS,aAAT,EAAwBqI,CAAxB;OAFJ;WAKCylB,KAAD,CAAO5Y,IAAP,CAAY,SAAZ,EAAuB,UAAC7M,CAAD;cAClB8lB,SAAD,CAAWnuB,OAAX,CAAmB,SAAnB;cACCA,OAAD,CAAS,SAAT,EAAoBqI,CAApB;OAFJ;WAMC6M,IAAD,CAAM,kBAAN,EAA0B,UAAC7M,CAAD;cACrB8lB,SAAD,CAAWnuB,OAAX,CAAmB,kBAAnB,EACI;sBAAY,MAAC8tB,KAAD,CAAOhM,WAAP,CAAmBjO,GAAnB,CAAuBxL,EAAEuM,EAAzB,CAAZ;2BACiB/D,OAAI/F,IAAJ,CAASmW,IAAT,CAAc,MAAC6M,KAAD,CAAOzK,QAAP,GAAkBvB,WAAhC,EAA6C,UAAClB,UAAD;mBAC1DA,WAAWjB,KAAX,OAAsBtX,EAAEuM;WADX,CADjB;iBAGOvM,EAAE2gB,KAHT;iBAIO3gB,EAAE+W,KAJT;oBAKU/W,EAAEgnB;SANhB;OADJ;;;;;;AAaRhxB,aAAWe,KAAX,CAAiBuuB,MAAjB;;AAEA,aAAiBA,MAAjB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;KChNC,YAAW;YACJ2B,QAAJ;YACIC,SAAS,CADb;YAEIC,MAAM,CAFV;YAGIC,YAAY,EAHhB;YAIIC,kBAAkB,EAJtB;;iBAMSC,SAAT,CAAmBC,KAAnB,EAA0B5rB,IAA1B,EAAgCiL,QAAhC,EAA0C;;;;gBAIlC4gB,aAAa7rB,QAAQ,MAAR,IAAkBA,QAAQ,OAA3C;kBACM8rB,OAAN,CAAchd,gBAAd,CAA+B9O,IAA/B,EAAqCiL,QAArC,EAA+C4gB,UAA/C;;;iBAGKE,OAAT,CAAiB1nB,CAAjB,EAAoB;cACd8iB,cAAF;cACE6E,eAAF;;;;;;;;;iBASKC,WAAT,CAAqBH,OAArB,EAA8B;gBACtBR,QAAJ,EAAc;uBACHA,QAAP;;;gBAGAQ,QAAQI,OAAZ,EAAqB;2BACNJ,QAAQI,OAAnB;uBACOZ,QAAP;;;gBAGAQ,QAAQK,qBAAZ,EAAmC;2BACpBL,QAAQK,qBAAnB;uBACOb,QAAP;;;gBAGAQ,QAAQM,kBAAZ,EAAgC;2BACjBN,QAAQM,kBAAnB;uBACOd,QAAP;;;gBAGAQ,QAAQO,iBAAZ,EAA+B;2BAChBP,QAAQO,iBAAnB;uBACOf,QAAP;;;gBAGAQ,QAAQQ,gBAAZ,EAA8B;2BACfR,QAAQQ,gBAAnB;uBACOhB,QAAP;;;;;uBAKOiB,MAAMC,eAAjB;mBACOlB,QAAP;;;;;;;;;;;iBAWKmB,gBAAT,CAA0BX,OAA1B,EAAmCY,QAAnC,EAA6CC,YAA7C,EAA2D;;;gBAGnDD,YAAY,OAAhB,EAAyB;uBACdC,YAAP;;;;;gBAKAb,YAAYa,YAAhB,EAA8B;;;;;gBAK1BV,YAAYH,OAAZ,EAAqB5wB,IAArB,CAA0B4wB,OAA1B,EAAmCY,QAAnC,CAAJ,EAAkD;uBACvCZ,OAAP;;;;;;;;gBAQAA,QAAQhN,UAAZ,EAAwB;;uBAEb2N,iBAAiBX,QAAQhN,UAAzB,EAAqC4N,QAArC,EAA+CC,YAA/C,CAAP;;;;iBAICC,WAAT,CAAqBhB,KAArB,EAA4BrxB,KAA5B,EAAmCmyB,QAAnC,EAA6CzhB,QAA7C,EAAuD;gBAC/C,CAACwgB,UAAUG,MAAMhb,EAAhB,CAAL,EAA0B;0BACZgb,MAAMhb,EAAhB,IAAsB,EAAtB;;;gBAGA,CAAC6a,UAAUG,MAAMhb,EAAhB,EAAoBrW,KAApB,CAAL,EAAiC;0BACnBqxB,MAAMhb,EAAhB,EAAoBrW,KAApB,IAA6B,EAA7B;;;gBAGA,CAACkxB,UAAUG,MAAMhb,EAAhB,EAAoBrW,KAApB,EAA2BmyB,QAA3B,CAAL,EAA2C;0BAC7Bd,MAAMhb,EAAhB,EAAoBrW,KAApB,EAA2BmyB,QAA3B,IAAuC,EAAvC;;;sBAGMd,MAAMhb,EAAhB,EAAoBrW,KAApB,EAA2BmyB,QAA3B,EAAqChyB,IAArC,CAA0CuQ,QAA1C;;;iBAGK4hB,cAAT,CAAwBjB,KAAxB,EAA+BrxB,KAA/B,EAAsCmyB,QAAtC,EAAgDzhB,QAAhD,EAA0D;;;;gBAIlD,CAACwgB,UAAUG,MAAMhb,EAAhB,CAAL,EAA0B;;;;;;gBAMtB,CAACrW,KAAL,EAAY;qBACH,IAAIyF,IAAT,IAAiByrB,UAAUG,MAAMhb,EAAhB,CAAjB,EAAsC;wBAC9B6a,UAAUG,MAAMhb,EAAhB,EAAoB9O,cAApB,CAAmC9B,IAAnC,CAAJ,EAA8C;kCAChC4rB,MAAMhb,EAAhB,EAAoB5Q,IAApB,IAA4B,EAA5B;;;;;;;;gBAQR,CAACiL,QAAD,IAAa,CAACyhB,QAAlB,EAA4B;0BACdd,MAAMhb,EAAhB,EAAoBrW,KAApB,IAA6B,EAA7B;;;;;;;gBAOA,CAAC0Q,QAAL,EAAe;uBACJwgB,UAAUG,MAAMhb,EAAhB,EAAoBrW,KAApB,EAA2BmyB,QAA3B,CAAP;;;;;;;gBAOA,CAACjB,UAAUG,MAAMhb,EAAhB,EAAoBrW,KAApB,EAA2BmyB,QAA3B,CAAL,EAA2C;;;;;;iBAMtC,IAAI7xB,IAAI,CAAb,EAAgBA,IAAI4wB,UAAUG,MAAMhb,EAAhB,EAAoBrW,KAApB,EAA2BmyB,QAA3B,EAAqC5xB,MAAzD,EAAiED,GAAjE,EAAsE;oBAC9D4wB,UAAUG,MAAMhb,EAAhB,EAAoBrW,KAApB,EAA2BmyB,QAA3B,EAAqC7xB,CAArC,MAA4CoQ,QAAhD,EAA0D;8BAC5C2gB,MAAMhb,EAAhB,EAAoBrW,KAApB,EAA2BmyB,QAA3B,EAAqC/xB,MAArC,CAA4CE,CAA5C,EAA+C,CAA/C;;;;;;iBAMHiyB,YAAT,CAAsBlc,EAAtB,EAA0BvM,CAA1B,EAA6BrE,IAA7B,EAAmC;gBAC3B,CAACyrB,UAAU7a,EAAV,EAAc5Q,IAAd,CAAL,EAA0B;;;;gBAItB+sB,SAAS1oB,EAAE0oB,MAAF,IAAY1oB,EAAE2oB,UAA3B;gBACIN,QADJ;gBAEIvrB,KAFJ;gBAGI+qB,UAAU,EAHd;gBAIIrxB,IAAI,CAJR;gBAKIuI,IAAI,CALR;;;qBAQS,CAAT;iBACKspB,QAAL,IAAiBjB,UAAU7a,EAAV,EAAc5Q,IAAd,CAAjB,EAAsC;oBAC9ByrB,UAAU7a,EAAV,EAAc5Q,IAAd,EAAoB8B,cAApB,CAAmC4qB,QAAnC,CAAJ,EAAkD;4BACtCD,iBAAiBM,MAAjB,EAAyBL,QAAzB,EAAmChB,gBAAgB9a,EAAhB,EAAoBkb,OAAvD,CAAR;;wBAEI3qB,SAASorB,MAAMU,YAAN,CAAmBjtB,IAAnB,EAAyB0rB,gBAAgB9a,EAAhB,EAAoBkb,OAA7C,EAAsD3qB,KAAtD,EAA6DurB,YAAY,OAAzE,EAAkFroB,CAAlF,CAAb,EAAmG;;kCAErFuM,EAAV,EAAc5Q,IAAd,EAAoB0sB,QAApB,EAA8BvrB,KAA9B,GAAsCA,KAAtC;gCACQoqB,MAAR,IAAkBE,UAAU7a,EAAV,EAAc5Q,IAAd,EAAoB0sB,QAApB,CAAlB;;;;;;;cAOVV,eAAF,GAAoB,YAAW;kBACzBkB,YAAF,GAAiB,IAAjB;aADJ;;iBAIKryB,IAAI,CAAT,EAAYA,KAAK0wB,MAAjB,EAAyB1wB,GAAzB,EAA8B;oBACtBqxB,QAAQrxB,CAAR,CAAJ,EAAgB;yBACPuI,IAAI,CAAT,EAAYA,IAAI8oB,QAAQrxB,CAAR,EAAWC,MAA3B,EAAmCsI,GAAnC,EAAwC;4BAChC8oB,QAAQrxB,CAAR,EAAWuI,CAAX,EAAclI,IAAd,CAAmBgxB,QAAQrxB,CAAR,EAAWsG,KAA9B,EAAqCkD,CAArC,MAA4C,KAAhD,EAAuD;kCAC7C8oB,MAAN,CAAa9oB,CAAb;;;;4BAIAA,EAAE6oB,YAAN,EAAoB;;;;;;;;;;;;;;;;;iBAiB3BE,KAAT,CAAe/Z,MAAf,EAAuBqZ,QAAvB,EAAiCzhB,QAAjC,EAA2C+b,MAA3C,EAAmD;;;;gBAI3C,CAAC,KAAK8E,OAAV,EAAmB;;;;gBAIf,EAAEzY,kBAAkBrY,KAApB,CAAJ,EAAgC;yBACnB,CAACqY,MAAD,CAAT;;;gBAGA,CAACpI,QAAD,IAAa,OAAOyhB,QAAP,IAAoB,UAArC,EAAiD;2BAClCA,QAAX;2BACW,OAAX;;;gBAGA9b,KAAK,KAAKA,EAAd;gBACI/V,CADJ;;qBAGSwyB,kBAAT,CAA4BrtB,IAA5B,EAAkC;uBACvB,UAASqE,CAAT,EAAY;iCACFuM,EAAb,EAAiBvM,CAAjB,EAAoBrE,IAApB;iBADJ;;;iBAKCnF,IAAI,CAAT,EAAYA,IAAIwY,OAAOvY,MAAvB,EAA+BD,GAA/B,EAAoC;oBAC5BmsB,MAAJ,EAAY;mCACO,IAAf,EAAqB3T,OAAOxY,CAAP,CAArB,EAAgC6xB,QAAhC,EAA0CzhB,QAA1C;;;;oBAIA,CAACwgB,UAAU7a,EAAV,CAAD,IAAkB,CAAC6a,UAAU7a,EAAV,EAAcyC,OAAOxY,CAAP,CAAd,CAAvB,EAAiD;0BACvCyyB,QAAN,CAAe,IAAf,EAAqBja,OAAOxY,CAAP,CAArB,EAAgCwyB,mBAAmBha,OAAOxY,CAAP,CAAnB,CAAhC;;;4BAGQ,IAAZ,EAAkBwY,OAAOxY,CAAP,CAAlB,EAA6B6xB,QAA7B,EAAuCzhB,QAAvC;;;mBAGG,IAAP;;;;;;;;iBAQKshB,KAAT,CAAeT,OAAf,EAAwBlb,EAAxB,EAA4B;;;gBAGpB,EAAE,gBAAgB2b,KAAlB,CAAJ,EAA8B;;;;;;qBAMrB,IAAI1wB,GAAT,IAAgB6vB,eAAhB,EAAiC;wBACzBA,gBAAgB7vB,GAAhB,EAAqBiwB,OAArB,KAAiCA,OAArC,EAA8C;+BACnCJ,gBAAgB7vB,GAAhB,CAAP;;;;;gCAKQ2vB,GAAhB,IAAuB,IAAIe,KAAJ,CAAUT,OAAV,EAAmBN,GAAnB,CAAvB;;uBAEOE,gBAAgBF,GAAhB,CAAP;;;iBAGCM,OAAL,GAAeA,OAAf;iBACKlb,EAAL,GAAUA,EAAV;;;;;;;;;;;cAWEtW,SAAN,CAAgByL,EAAhB,GAAqB,UAASsN,MAAT,EAAiBqZ,QAAjB,EAA2BzhB,QAA3B,EAAqC;mBAC/CmiB,MAAMlyB,IAAN,CAAW,IAAX,EAAiBmY,MAAjB,EAAyBqZ,QAAzB,EAAmCzhB,QAAnC,CAAP;SADJ;;;;;;;;;;cAYM3Q,SAAN,CAAgB4L,GAAhB,GAAsB,UAASmN,MAAT,EAAiBqZ,QAAjB,EAA2BzhB,QAA3B,EAAqC;mBAChDmiB,MAAMlyB,IAAN,CAAW,IAAX,EAAiBmY,MAAjB,EAAyBqZ,QAAzB,EAAmCzhB,QAAnC,EAA6C,IAA7C,CAAP;SADJ;;cAIMuhB,eAAN,GAAwB,YAAW,EAAnC;cACMW,MAAN,GAAepB,OAAf;cACMuB,QAAN,GAAiB3B,SAAjB;cACMsB,YAAN,GAAqB,YAAW;mBACrB,IAAP;SADJ;;YAII,aAAkB,WAAlB,IAAiC1xB,OAAOc,OAA5C,EAAqD;0BACjD,GAAiBkwB,KAAjB;;;eAGGA,KAAP,GAAeA,KAAf;KA1UJ;;;AClCA,sBAAiB,6gBAAjB;;ACAA,IAAAA,KAAA;IAAAlyB,aAAA;IAAAoC,UAAA;IAAA8wB,6BAAA;IAAAtH,UAAA;IAAApnB,UAAA;;AAAAxE,gBAAaoB,UAAb;;AACA8wB,QAAQ9f,KAAR;;AACAhQ,aAAWiQ,QAAX;;AACA7N,aAAWsf,eAAX;;AACA8H,aAAW7F,UAAX;;AAEMmN;;sFACuB;;;SAAVtmB,OAAD,UAAA;SACTiU,EAAD,GAAM7N,SAASiO,aAAT,CAAuB,KAAvB,CAAN;SACCkE,cAAD,GAAkB,KAACE,MAAD,CAAQxO,IAAR,CAAa,IAAb,CAAlB;;;;;;;UAKApD,QAAAzE,QAAAmkB,cAAAC,aAAAC,WAAA7pB,KAAA7H,SAAAwF,MAAA4H;yDAAyB,GAAzB;eACS,KAACnC,OAAD,CAAS6G,MAAlB;UACgC,YAAA,SAAA,QAAhC;qBAAW,KAAC7G,OAAD,CAASpI,QAApB;;gBACU,KAAC7C,OAAD,CAASkV,IAAT,CAAc,IAAd,CAAV;aAEI;gBAAQpD,MAAR;kBACU,KAAC7G,OAAD,CAASokB,QADnB;aAEK,KAACpkB,OAAD,CAASye,CAFd;cAGM,KAACze,OAAD,CAASmD;OAJnB;WAMC8Q,EAAD,CAAIO,SAAJ,GAAgB,wBAAhB;WACCP,EAAD,CAAIQ,YAAJ,CAAiB,UAAjB,EAA6B,CAAC,CAA9B;WACCR,EAAD,CAAIoB,SAAJ,GAAgB7f,WAAS4F,MAAT,CAAgBxD,UAAhB,EAA0B2C,IAA1B,CAAhB;kBAEY,KAAC0Z,EAAD,CAAIuD,aAAJ,CAAkB,eAAlB,CAAZ;cACQiP,UAAU/L,WAAlB;eACS+L,UAAU9L,YAAnB;oBACc,KAAC1G,EAAD,CAAI4D,UAAJ,CAAe6C,WAA7B;qBACe,KAACzG,EAAD,CAAI4D,UAAJ,CAAe8C,YAA9B;UAEGpgB,KAAKugB,GAAL,GAAW1Y,MAAX,GAAoBmkB,YAAvB;kBACc9Q,KAAV,CAAgBqF,GAAhB,GAAsByL,eAAenkB,MAAf,GAAwB,IAA9C;;UAED7H,KAAKwgB,IAAL,GAAY5Y,KAAZ,GAAoBqkB,WAAvB;kBACc/Q,KAAV,CAAgBsF,IAAhB,GAAuByL,cAAcrkB,KAAd,GAAsB,IAA7C;;WAEH8R,EAAD,CAAIpM,gBAAJ,CAAqB,OAArB,EAA8B,KAAC6e,KAAD,CAAOzc,IAAP,CAAY,IAAZ,CAA9B;YAEM,KAACgK,EAAP,EAAWnV,EAAX,CAAc,OAAd,EAAuB,WAAvB,EAAoC;gBACxB,UAAR,EAAoB;cAAI,KAACiX,YAAD,CAAc,SAAd;SAAxB;OADJ;YAKM,KAAC9B,EAAP,EAAWnV,EAAX,CAAc,OAAd,EAAuB,cAAvB,EAAuC,KAACqZ,OAAD,CAASlO,IAAT,CAAc,IAAd,CAAvC;aAEOpC,gBAAP,CAAwB,QAAxB,EAAkC,KAAC0Q,cAAnC,EAAmD,KAAnD;aAEA;;;;;WAGCtE,EAAD,CAAI4D,UAAJ,CAAegF,WAAf,CAA2B,KAAC5I,EAA5B;WAEClf,OAAD,CAAS,WAAT;;;;0BAIIqI,CAtDN;UAuDgBA,EAAE+iB,OAAF,KAAanB,WAAS2H,GAApC;aAACxO,OAAD;;;;;;aAKOW,mBAAP,CAA2B,QAA3B,EAAqC,KAACP,cAAtC;WAECJ,OAAD;;;;;;AAIR/kB,cAAWe,KAAX,CAAiBmyB,6BAAjB;;AAEA,oBAAiBA,6BAAjB;;AC1EA,eAAiB,8tBAAjB;;ACAA,IAAA9wB,UAAA;IAAAoxB,sBAAA;IAAAhhB,MAAA;IAAAhO,UAAA;;AAAApC,aAAWhB,QAAX;;AACAoR,SAAMJ,IAAN;;AACA5N,aAAW6N,QAAX;;AAEA,aAAuBmhB,yBACnB,kCAAA;;;MACIC,UAAAzC,UAAAvE,aAAAlE,eAAAmL;OADW7S,EAAD,KAAA;kBACM,KAACA,EAAD,CAAI8B,YAAJ,CAAiB,SAAjB,CAAhB;aACW,KAAC9B,EAAD,CAAI8B,YAAJ,CAAiB,eAAjB,CAAX;gBACc,KAAC9B,EAAD,CAAI8B,YAAJ,CAAiB,mBAAjB,CAAd;kBACgB,KAAC9B,EAAD,CAAI8B,YAAJ,CAAiB,qBAAjB,CAAhB;aACW,KAAC9B,EAAD,CAAI8B,YAAJ,CAAiB,eAAjB,CAAX;OAEC9B,EAAD,CAAIoB,SAAJ,GAAgB7f,WAAS4F,MAAT,CAAgBxD,UAAhB,EACZ;qBAAiBioB,gBAAe,MAAhC;uBACmBlE,kBAAiB,MADpC;kBAEckL,aAAY;GAHd,CAAhB;SAKIE,mBAAJ,CAAwBC,UAAxB,CACI;QAAI,KAAC/S,EAAD,CAAIuD,aAAJ,CAAkB,UAAlB,CAAJ;QACIsP,aADJ;kBAEclhB,OAAIlR,MAAJ,CAAWkU,GAAX,CAAe,cAAf,CAFd;kBAGcwb,aAAY;GAJ9B,EAKE,UAACrkB,GAAD,EAAMknB,MAAN;QACwBlnB,WAAtB;aAAOjH,KAAP;;GANJ;;CAbR;;ACJA,IAAA8M,MAAA;;AAAAxS,AACAwS,SAAMJ,IAAN;;AAEA,iBAAiB,mBAAA;MAACxF,8EAAU;MAAIgE;;MAC5B+E,MAAAme,OAAAC,eAAAC,YAAAC,oBAAAC,eAAAC,cAAAnD,UAAAoD,qBAAApsB,QAAAqsB,gBAAAR;SACI;aAAS,IAAT;WACO,IADP;cAEU;GAHd;WAIS,IAAT;aACW,EAAX;iBACe,EAAf;kBACgB,IAAhB;UACQ,eAACjjB,QAAD;QACJpH;2CAAiB8qB,gBAAjB;eACa,IAAT,EAAe1nB,QAAQ+I,IAAR,CAAa2e,OAA5B;KADJ,MAAA;aAGQjZ,OAAJ,CAAY3F,OAAZ,CACI;+BAAqB9I,QAAQ2J;OADjC,EAEE3F,QAFF;;GAJR;eASa,oBAACA,QAAD;QACTpH;2CAAiBuX,cAAjB;eACa,IAAT,EAAenU,QAAQ+I,IAAR,CAAaoL,KAA5B;KADJ,MAAA;aAGQ1F,OAAJ,CAAY3F,OAAZ,CACI;+BAAqB9I,QAAQ2J,EAA7B;OADJ,EAEE3F,QAFF;;GAJR;kBASgB,uBAACA,QAAD;QACZpH;2CAAiBwnB,iBAAjB;eACa,IAAT,EAAepkB,QAAQ+I,IAAR,CAAaqb,QAA5B;KADJ,MAAA;aAGQ3V,OAAJ,CAAY3F,OAAZ,CACI;+BAAqB9I,QAAQ2J,EAA7B;OADJ,EAEE3F,QAFF;;GAJR;WASS;QACLpH,KAAAqK,MAAAC;aAAS,IAAItB,OAAImhB,mBAAJ,CAAwBrE,MAA5B,CAAmC1iB,QAAQiU,EAA3C,EACL;UAAIjU,QAAQ2J,EAAZ;eACSZ,KAAK2e,OAAL,CAAaC,SADtB;aAEO,MAAM5e,KAAK2e,OAAL,CAAaE,QAAb,CAAsBC,QAAtB,CAA+B9kB,KAF5C;gBAGU,IAHV;cAIQ/C,QAAQqX,MAJhB;oBAKcrX,QAAQ6jB,YALtB;aAMO4D,eAAe1e,KAAKoL,KAApB;KAPF,CAAT;WASOlK,IAAP,CAAY,mBAAZ,EAAiC,UAAC7M,CAAD;mBAChB3J,IAAb,CAAkB2J,CAAlB;;KADJ;WAMO6M,IAAP,CAAY,kBAAZ,EAAgC;UACDqd,qBAA3B;sBAAcnP,OAAd;;KADJ;WAKOlO,IAAP,CAAY,SAAZ,EAAuB,UAAC7M,CAAD;yBACAA,CAAnB,EAAsB,UAACwgB,OAAD;eACX7oB,OAAP,CAAe,gBAAf,EAAiC6oB,OAAjC;OADJ;KADJ;WAQO3T,IAAP,CAAY,aAAZ,EAA2B,UAAC7M,CAAD;yBACJA,CAAnB,EAAsB,UAACwgB,OAAD;eACX7oB,OAAP,CAAe,oBAAf,EAAqC6oB,OAArC;OADJ;KADJ;WAQO3T,IAAP,CAAY,SAAZ,EAAuB,UAAC7M,CAAD;yBACAA,CAAnB,EAAsB,UAACwgB,OAAD;eACX7oB,OAAP,CAAe,gBAAf,EAAiC6oB,OAAjC;OADJ;KADJ;aAQS,IAAT,EAAeqJ,MAAf,EAAuBle,IAAvB;QAEG,qCAAe2e,gBAAf,CAAH;aACW3yB,OAAP,CAAe,yBAAf,EAA0CgU,KAAK2e,OAA/C;;QACD,uCAAevT,cAAf,CAAH;aACWpf,OAAP,CAAe,cAAf,EAA+BgU,KAAKoL,KAApC;;QACDpL,KAAKqb,QAAL,IAAkB,uCAAeA,iBAAf,CAArB;aACWrvB,OAAP,CAAe,iBAAf,EAAkCc,OAAOf,IAAP,CAAYiU,KAAKqb,QAAjB,EAA2BjjB,GAA3B,CAA+B,UAACvM,GAAD;eAASmU,KAAKqb,QAAL,CAAcxvB,GAAd;OAAxC,CAAlC;;GApDR;mBAuDiB,wBAACuf,KAAD;WACbA,MAAMhT,GAAN,CAAU,UAACoT,IAAD,EAAO3gB,CAAP;UACNyqB;mBAAazqB,IAAI,CAAjB;aAEA;YAAI,SAASyqB,UAAb;eACOA,aAAa,EADpB;oBAEYA,UAFZ;gBAII;kBAAQ9J,KAAKha,IAAb;iBACOga,KAAKuT;;;KARpB;GADJ;wBAUsB;QACR,CAAIb,MAAJ,IAAc,CAAIle,KAAKqb,QAAjC;;;mBAEemD,aAAa5a,MAAb,CAAoB,UAACob,cAAD;UAC/BnK,SAAAjU,IAAAzP,OAAA0C;iBAAW,EAAX;;WAEA+M,EAAA,OAAA;;gBACY,KAAR;uBAEewK,KAAf,CAAqBjI,OAArB,CAA6B,UAACqI,IAAD;cACTqJ,iBAAA,gBAAA,SAAhB;oBAAQ,IAAR;;SADJ;YAKG1jB,KAAH;mBACayP,EAAT,IACI;kBAAMiU,QAAQ7kB,IAAd;gBACI6kB,QAAQjU,EADZ;uBAEWiU,QAAQW;WAHvB;;;aAKDxpB,OAAP,CAAe,kBAAf,EACI;YAAIgzB,eAAepe,EAAnB;eACOoe,eAAe5T,KADtB;eAEOpL,KAAK2e,OAAL,CAAaM,UAAb,CAAwB5lB,MAF/B;kBAGUgiB;OAJd;aAMA;KAvBW,CAAf;GAHJ;uBA6BqB,4BAAChnB,CAAD,EAAI4G,QAAJ;eACN5G,EAAE6a,KAAF,CAAQoJ,UAAR,CAAmBlgB,GAAnB,CAAuB,UAAC8mB,SAAD;aAC9Blf,KAAKqb,QAAL,CAAc6D,UAAUlS,YAAV,CAAuB,SAAvB,CAAd;KADO,CAAX;QAGGqO,SAASvwB,MAAT,KAAmB,CAAtB;aACImQ,SAASogB,SAAS,CAAT,CAAT;KADJ,MAEK,IAAGA,SAASvwB,MAAT,GAAkB,CAArB;iBACUuwB,SACNzX,MADM,CACC,UAACiR,OAAD;eAAaA,QAAQ7kB,IAAR,KAAgB;OAD9B,EAENoI,GAFM,CAEF,UAACyc,OAAD;eACD;cAAIA,QAAQjU,EAAZ;iBACOiU,QAAQsK,KAAR,CAAcC,OADrB;oBAEUvK,QAAQsK,KAAR,CAAcE,OAAd,CAAsBC,QAAtB,GAAiC,EAAjC,GAAsCzK,QAAQsK,KAAR,CAAcE,OAAd,CAAsBE;;OALnE,CAAX;sBAOgB,IAAI1iB,OAAImhB,mBAAJ,CAAwBwB,aAA5B,CACZ;gBAAQ3iB,OAAI/I,YAAJ,CAAiB2rB,CAAjB,CAAmB,yCAAnB,CAAR;WACGprB,EAAE6a,KAAF,CAAQ9U,CADX;WAEG/F,EAAE6a,KAAF,CAAQwG,CAFX;kBAGU2F;OAJE,CAAhB;oBAMcna,IAAd,CAAmB,UAAnB,EAA+B,UAAC7M,CAAD;iBAClB2L,KAAKqb,QAAL,CAAchnB,EAAEuM,EAAhB,CAAT;sBACcwO,OAAd;OAFJ;oBAMclO,IAAd,CAAmB,WAAnB,EAAgC;wBACZ,IAAhB;eACOgK,EAAP,CAAU4E,KAAV;OAFJ;aAMO5E,EAAP,CAAUmB,WAAV,CAAsBkS,cAAcrT,EAApC;aACAqT,cAAclsB,MAAd,GAAuB6Y,EAAvB,CAA0B4E,KAA1B;;GAjCR;SAmCIhZ,IAAJ,CAAS4oB,KAAT,CAAeC,QAAf,CAAwB,CAACxB,KAAD,EAAQE,UAAR,CAAxB,EAA6C,UAAC1qB,MAAD;QACzCgrB,SAAAvT;cAAUzX,OAAO,CAAP,EAAU,CAAV,CAAV;YACQA,OAAO,CAAP,EAAU,CAAV,CAAR;uBAEG,iBAAH;WACSgrB,OAAL,GAAeA,OAAf;WACKvT,KAAL,GAAaA,KAAb;UAEGnU,QAAQ2oB,YAAR,KAA0B,KAA7B;sBACkB,UAAC5oB,GAAD,EAAM0M,QAAN;cACA1M,WAAV;;;eAEKqkB,QAAL,GAAgB,EAAhB;mBAESlY,OAAT,CAAiB,UAAC0R,OAAD;iBACRwG,QAAL,CAAcxG,QAAQjU,EAAtB,IAA4BiU,OAA5B;WADJ;;iBAOAxiB;SAZJ;OADJ,MAAA;;;KAJJ,MAAA;eAqBa,IAAIzC,KAAJ,EAAT;;GAzBR;CArKJ;;ACHA,uBACI;UAAQnE,MAAR;iBAEegR,aAFf;UAIQC,MAJR;cAMYyR;CAPhB;;ACAA,mBAAiB,EAAjB;;ACAA,IAAAtR,KAAA;IAAAqI,MAAA;IAAAvZ,MAAA;IAAAuf,EAAA;IAAArgB,CAAA;IAAAsK,GAAA;IAAAtB,GAAA;IAAAgsB,QAAA;IAAArf,OAAA;IAAAG,OAAA;;AAAA9D,QAAMpR,GAAN;;;AAGAoR,MAAIC,OAAJ,GACI;SAAOL,WAAP;UACQC;CAFZ;;;AAKAG,MAAIkD,OAAJ,GAAcoO,SAAd;;;AAGAtR,MAAIijB,OAAJ,GAAc1P,IAAd;;AACAvT,MAAIkjB,SAAJ,GAAgBnG,MAAhB;;AACA/c,MAAImjB,SAAJ,GAAgBnG,MAAhB;;AACAhd,MAAIojB,QAAJ,GAAeC,KAAf;;AACArjB,MAAI6I,OAAJ,GAAcya,MAAd;;AACAtjB,MAAImhB,mBAAJ,GAA0BoC,gBAA1B;;AACAvjB,MAAIwjB,eAAJ,GAAsBC,YAAtB;;;AAGA9f,UAAU3D,MAAIC,OAAJ,CAAYQ,MAAZ,CAAmBuC,GAAnB,CAAuB,SAAvB,CAAV;;AAEA,IAAG,QAAOW,OAAP,yCAAOA,OAAP,OAAkB,QAArB;QACQ7U,MAAJ,CAAWgR,GAAX,CACI;sBAAkB6D,QAAQtQ,KAA1B;yBACqBsQ,QAAQ6F;GAFjC;;;AAIJxJ,MAAI6D,MAAJ,GAAgB;MACZ6f,WAAA3f;OAAK/D,MAAIC,OAAJ,CAAY0jB,KAAZ,CAAkB3gB,GAAlB,CAAsB,WAAtB,CAAL;oBACKe,GAAIZ,aAAT;cACgBY,UAAhB;MAEG2f,SAAH;SACS1jB,MAAI/F,IAAJ,CAAS2J,IAAT,EAAL;UAEI3D,OAAJ,CAAY0jB,KAAZ,CAAkB7jB,GAAlB,CAAsB,WAAtB,EAAmCiE,EAAnC;;SAEJ;eAAW2f,SAAX;QACI3f;;CAXQ,EAAhB;;;AAcA/D,MAAIlR,MAAJ,CAAWuV,IAAX,CAAgB,QAAhB,EAA0B,UAACtV,iBAAD;MACtBkvB;iBAAelvB,kBAAkBkvB,YAAjC;MAEGA,oBAAH;QAC0Eje,MAAI6D,MAAJ,CAAW6f,SAAX,KAAwB,IAA9F;mBAAatI,UAAb,CAAwB,6BAAxB,EAAuD,EAAvD,EAA2D,OAA3D;;iBACaA,UAAb,CAAwB,uBAAxB,EAAiD,EAAjD,EAAqD,OAArD;;CALR;;;AAUA4H,WAAWxiB,SAASojB,cAAT,CAAwB,SAAxB,CAAX;;AAEA,IAAGZ,gBAAH;WACaA,SAAS7S,YAAT,CAAsB,cAAtB,CAAT;YACU6S,SAAS7S,YAAT,CAAsB,eAAtB,CAAV;WACS,EAAT;MAE0B9H,cAA1B;WAAOA,MAAP,GAAgBA,MAAhB;;MACqEvE,eAArE;WAAOma,YAAP,GAAsB,IAAIje,MAAImjB,SAAJ,CAAc7f,OAAlB,CAA0B;eAASQ;KAAnC,CAAtB;;QAEIhV,MAAJ,CAAWgR,GAAX,CAAehR,MAAf;;;OAGAd,KAAA,kBAAA,SAAA,KAAA;;QACQgS,MAAImhB,mBAAJ,CAAwB0C,MAA5B,CAAmCxV,EAAnC;;;;AAER,cAAiBrO,KAAjB;;;;;;;;"}