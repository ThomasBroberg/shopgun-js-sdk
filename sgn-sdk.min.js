!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.SGN=e()}(this,function(){"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function i(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),t}var r="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function o(t,e){return t(e={exports:{}},e.exports),e.exports}var s,a,l=o(function(t){var e=function(){};e.prototype={bind:function(t,e){this._events=this._events||{},this._events[t]=this._events[t]||[],this._events[t].push(e)},unbind:function(t,e){this._events=this._events||{},t in this._events!=!1&&this._events[t].splice(this._events[t].indexOf(e),1)},trigger:function(t){if(this._events=this._events||{},t in this._events!=!1)for(var e=0;e<this._events[t].length;e++)this._events[t][e].apply(this,Array.prototype.slice.call(arguments,1))}},e.mixin=function(t){for(var n=["bind","unbind","trigger"],i=0;i<n.length;i++)t.prototype[n[i]]=e.prototype[n[i]]},"exports"in t&&(t.exports=e)}),u=[].indexOf;a=l,s=s=function(){var t=function(){function t(){e(this,t),this.attrs={}}return i(t,[{key:"set",value:function(){var t,e,n,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};for(e in t={},i)n=i[e],u.call(this.keys,e)>=0&&(this.attrs[e]=n,t[e]=n);this.trigger("change",t)}},{key:"get",value:function(t){return this.attrs[t]}}]),t}();return t.prototype.keys=["appVersion","appKey","appSecret","authToken","eventTracker","locale","coreSessionToken","coreSessionClientId","coreUrl","graphUrl","eventsTrackUrl","eventsPulseUrl","assetsFileUploadUrl"],t}.call(r),a.mixin(s);var c,h,d=s,p=o(function(t,e){var n,i;n=r,i=function(t){var e=Object.prototype.toString,n=Array.isArray||function(t){return"[object Array]"===e.call(t)};function i(t){return"function"==typeof t}function r(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function o(t,e){return null!=t&&"object"==typeof t&&e in t}var s=RegExp.prototype.test;var a=/\S/;function l(t){return!function(t,e){return s.call(t,e)}(a,t)}var u={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};var c=/\s*/,h=/\s+/,d=/\s*=/,p=/\s*\}/,f=/#|\^|\/|>|\{|&|=|!/;function g(t){this.string=t,this.tail=t,this.pos=0}function v(t,e){this.view=t,this.cache={".":this.view},this.parent=e}function y(){this.cache={}}g.prototype.eos=function(){return""===this.tail},g.prototype.scan=function(t){var e=this.tail.match(t);if(!e||0!==e.index)return"";var n=e[0];return this.tail=this.tail.substring(n.length),this.pos+=n.length,n},g.prototype.scanUntil=function(t){var e,n=this.tail.search(t);switch(n){case-1:e=this.tail,this.tail="";break;case 0:e="";break;default:e=this.tail.substring(0,n),this.tail=this.tail.substring(n)}return this.pos+=e.length,e},v.prototype.push=function(t){return new v(t,this)},v.prototype.lookup=function(t){var e,n=this.cache;if(n.hasOwnProperty(t))e=n[t];else{for(var r,s,a=this,l=!1;a;){if(t.indexOf(".")>0)for(e=a.view,r=t.split("."),s=0;null!=e&&s<r.length;)s===r.length-1&&(l=o(e,r[s])),e=e[r[s++]];else e=a.view[t],l=o(a.view,t);if(l)break;a=a.parent}n[t]=e}return i(e)&&(e=e.call(this.view)),e},y.prototype.clearCache=function(){this.cache={}},y.prototype.parse=function(e,i){var o=this.cache,s=o[e];return null==s&&(s=o[e]=function(e,i){if(!e)return[];var o,s,a,u=[],v=[],y=[],m=!1,b=!1;function _(){if(m&&!b)for(;y.length;)delete v[y.pop()];else y=[];m=!1,b=!1}function k(t){if("string"==typeof t&&(t=t.split(h,2)),!n(t)||2!==t.length)throw new Error("Invalid tags: "+t);o=new RegExp(r(t[0])+"\\s*"),s=new RegExp("\\s*"+r(t[1])),a=new RegExp("\\s*"+r("}"+t[1]))}k(i||t.tags);for(var w,S,x,E,T,P,C=new g(e);!C.eos();){if(w=C.pos,x=C.scanUntil(o))for(var O=0,I=x.length;O<I;++O)l(E=x.charAt(O))?y.push(v.length):b=!0,v.push(["text",E,w,w+1]),w+=1,"\n"===E&&_();if(!C.scan(o))break;if(m=!0,S=C.scan(f)||"name",C.scan(c),"="===S?(x=C.scanUntil(d),C.scan(d),C.scanUntil(s)):"{"===S?(x=C.scanUntil(a),C.scan(p),C.scanUntil(s),S="&"):x=C.scanUntil(s),!C.scan(s))throw new Error("Unclosed tag at "+C.pos);if(T=[S,x,w,C.pos],v.push(T),"#"===S||"^"===S)u.push(T);else if("/"===S){if(!(P=u.pop()))throw new Error('Unopened section "'+x+'" at '+w);if(P[1]!==x)throw new Error('Unclosed section "'+P[1]+'" at '+w)}else"name"===S||"{"===S||"&"===S?b=!0:"="===S&&k(x)}if(P=u.pop())throw new Error('Unclosed section "'+P[1]+'" at '+C.pos);return function(t){for(var e,n=[],i=n,r=[],o=0,s=t.length;o<s;++o)switch((e=t[o])[0]){case"#":case"^":i.push(e),r.push(e),i=e[4]=[];break;case"/":r.pop()[5]=e[2],i=r.length>0?r[r.length-1][4]:n;break;default:i.push(e)}return n}(function(t){for(var e,n,i=[],r=0,o=t.length;r<o;++r)(e=t[r])&&("text"===e[0]&&n&&"text"===n[0]?(n[1]+=e[1],n[3]=e[3]):(i.push(e),n=e));return i}(v))}(e,i)),s},y.prototype.render=function(t,e,n){var i=this.parse(t),r=e instanceof v?e:new v(e);return this.renderTokens(i,r,n,t)},y.prototype.renderTokens=function(t,e,n,i){for(var r,o,s,a="",l=0,u=t.length;l<u;++l)s=void 0,"#"===(o=(r=t[l])[0])?s=this.renderSection(r,e,n,i):"^"===o?s=this.renderInverted(r,e,n,i):">"===o?s=this.renderPartial(r,e,n,i):"&"===o?s=this.unescapedValue(r,e):"name"===o?s=this.escapedValue(r,e):"text"===o&&(s=this.rawValue(r)),void 0!==s&&(a+=s);return a},y.prototype.renderSection=function(t,e,r,o){var s=this,a="",l=e.lookup(t[1]);if(l){if(n(l))for(var u=0,c=l.length;u<c;++u)a+=this.renderTokens(t[4],e.push(l[u]),r,o);else if("object"==typeof l||"string"==typeof l||"number"==typeof l)a+=this.renderTokens(t[4],e.push(l),r,o);else if(i(l)){if("string"!=typeof o)throw new Error("Cannot use higher-order sections without the original template");null!=(l=l.call(e.view,o.slice(t[3],t[5]),function(t){return s.render(t,e,r)}))&&(a+=l)}else a+=this.renderTokens(t[4],e,r,o);return a}},y.prototype.renderInverted=function(t,e,i,r){var o=e.lookup(t[1]);if(!o||n(o)&&0===o.length)return this.renderTokens(t[4],e,i,r)},y.prototype.renderPartial=function(t,e,n){if(n){var r=i(n)?n(t[1]):n[t[1]];return null!=r?this.renderTokens(this.parse(r),e,n,r):void 0}},y.prototype.unescapedValue=function(t,e){var n=e.lookup(t[1]);if(null!=n)return n},y.prototype.escapedValue=function(e,n){var i=n.lookup(e[1]);if(null!=i)return t.escape(i)},y.prototype.rawValue=function(t){return t[1]},t.name="mustache.js",t.version="2.3.0",t.tags=["{{","}}"];var m=new y;return t.clearCache=function(){return m.clearCache()},t.parse=function(t,e){return m.parse(t,e)},t.render=function(t,e,i){if("string"!=typeof t)throw new TypeError('Invalid template! Template should be a "string" but "'+(n(r=t)?"array":typeof r)+'" was given as the first argument for mustache#render(template, view, partials)');var r;return m.render(t,e,i)},t.to_html=function(e,n,r,o){var s=t.render(e,n,r);if(!i(o))return s;o(s)},t.escape=function(t){return String(t).replace(/[&<>"'`=\/]/g,function(t){return u[t]})},t.Scanner=g,t.Context=v,t.Writer=y,t},e&&"string"!=typeof e.nodeName?i(e):(n.Mustache={},i(n.Mustache))});c=p,h={"paged_publication.hotspot_picker.header":"Which offer did you mean?","incito_publication.product_picker.header":"Which product?"};var f={t:function(t,e){var n,i;return i=null!=(n=h[t])?n:"",c.render(i,e)},update:function(t){var e,n;for(e in t)n=t[e],h[e]=n}},g=function(t){return"object"==typeof t?null!==t:"function"==typeof t},v=function(t){if(!g(t))throw TypeError(t+" is not an object!");return t},y=function(t){try{return!!t()}catch(t){return!0}},m=!y(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}),b=o(function(t){var e=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=e)}),_=b.document,k=g(_)&&g(_.createElement),w=!m&&!y(function(){return 7!=Object.defineProperty((t="div",k?_.createElement(t):{}),"a",{get:function(){return 7}}).a;var t}),S=Object.defineProperty,x={f:m?Object.defineProperty:function(t,e,n){if(v(t),e=function(t,e){if(!g(t))return t;var n,i;if(e&&"function"==typeof(n=t.toString)&&!g(i=n.call(t)))return i;if("function"==typeof(n=t.valueOf)&&!g(i=n.call(t)))return i;if(!e&&"function"==typeof(n=t.toString)&&!g(i=n.call(t)))return i;throw TypeError("Can't convert object to primitive value")}(e,!0),v(n),w)try{return S(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},E=m?function(t,e,n){return x.f(t,e,function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}(1,n))}:function(t,e,n){return t[e]=n,t},T={}.hasOwnProperty,P=function(t,e){return T.call(t,e)},C=0,O=Math.random(),I=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++C+O).toString(36))},A=o(function(t){var e=t.exports={version:"2.5.3"};"number"==typeof __e&&(__e=e)}),L=(A.version,o(function(t){var e=I("src"),n=Function.toString,i=(""+n).split("toString");A.inspectSource=function(t){return n.call(t)},(t.exports=function(t,n,r,o){var s="function"==typeof r;s&&(P(r,"name")||E(r,"name",n)),t[n]!==r&&(s&&(P(r,e)||E(r,e,t[n]?""+t[n]:i.join(String(n)))),t===b?t[n]=r:o?t[n]?t[n]=r:E(t,n,r):(delete t[n],E(t,n,r)))})(Function.prototype,"toString",function(){return"function"==typeof this&&this[e]||n.call(this)})})),N=function(t){if(null==t)throw TypeError("Can't call method on  "+t);return t},R=b["__core-js_shared__"]||(b["__core-js_shared__"]={}),M=function(t){return R[t]||(R[t]={})},D=o(function(t){var e=M("wks"),n=b.Symbol,i="function"==typeof n;(t.exports=function(t){return e[t]||(e[t]=i&&n[t]||(i?n:I)("Symbol."+t))}).store=e}),z=function(t,e,n){var i=D(t),r=n(N,i,""[t]),o=r[0],s=r[1];y(function(){var e={};return e[i]=function(){return 7},7!=""[t](e)})&&(L(String.prototype,t,o),E(RegExp.prototype,i,2==e?function(t,e){return s.call(t,this,e)}:function(t){return s.call(t,this)}))};z("replace",2,function(t,e,n){return[function(i,r){var o=t(this),s=null==i?void 0:i[e];return void 0!==s?s.call(i,o,r):n.call(String(o),i,r)},n]});var j=x.f,F=Function.prototype,U=/^\s*function ([^ (]*)/;"name"in F||m&&j(F,"name",{configurable:!0,get:function(){try{return(""+this).match(U)[1]}catch(t){return""}}});var q,H,W=o(function(t){var e,n,i=t.exports={};function r(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function s(t){if(e===setTimeout)return setTimeout(t,0);if((e===r||!e)&&setTimeout)return e=setTimeout,setTimeout(t,0);try{return e(t,0)}catch(n){try{return e.call(null,t,0)}catch(n){return e.call(this,t,0)}}}!function(){try{e="function"==typeof setTimeout?setTimeout:r}catch(t){e=r}try{n="function"==typeof clearTimeout?clearTimeout:o}catch(t){n=o}}();var a,l=[],u=!1,c=-1;function h(){u&&a&&(u=!1,a.length?l=a.concat(l):c=-1,l.length&&d())}function d(){if(!u){var t=s(h);u=!0;for(var e=l.length;e;){for(a=l,l=[];++c<e;)a&&a[c].run();c=-1,e=l.length}a=null,u=!1,function(t){if(n===clearTimeout)return clearTimeout(t);if((n===o||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(t);try{n(t)}catch(e){try{return n.call(null,t)}catch(e){return n.call(this,t)}}}(t)}}function p(t,e){this.fun=t,this.array=e}function f(){}i.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];l.push(new p(t,e)),1!==l.length||u||s(d)},p.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=f,i.addListener=f,i.once=f,i.off=f,i.removeListener=f,i.removeAllListeners=f,i.emit=f,i.prependListener=f,i.prependOnceListener=f,i.listeners=function(t){return[]},i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}});q=W;var V,B,X,Y=H={isBrowser:function(){return void 0!==q&&q.browser},isNode:function(){return!H.isBrowser()},error:function(e,n){var i,r;if(e.message=e.message||null,"string"==typeof n)e.message=n;else if("object"===t(n)&&null!=n){for(i in n)r=n[i],e[i]=r;null!=n.message&&(e.message=n.message),null==n.code&&null==n.message||(e.code=n.code||n.name),null!=n.stack&&(e.stack=n.stack)}return e.name=n&&n.name||e.name||e.code||"Error",e.time=new Date,e},uuid:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e;return e=16*Math.random()|0,("x"===t?e:3&e|8).toString(16)})},getQueryParam:function(t,e){var n,i;return n=e||window.location.href,(i=new RegExp("[?&]"+t+"=([^&#]*)","i").exec(n))?i[1]:void 0},formatQueryParams:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.keys(t).map(function(e){return e+"="+encodeURIComponent(t[e])}).join("&")},getRandomNumberBetween:function(t,e){return Math.floor(Math.random()*e)+t},getOS:function(){var t,e;return t=null,(e=window.navigator.userAgent).indexOf("Windows")>-1?t="Windows":e.indexOf("Mac")>-1?t="macOS":e.indexOf("X11")>-1?t="unix":e.indexOf("Linux")>-1?t="Linux":e.indexOf("iOS")>-1?t="iOS":e.indexOf("Android")>-1&&(t="Android"),t},getDeviceCategory:function(){var t;return t="desktop","iPod"===navigator.platform||"iPhone"===navigator.platform?t="mobile":"iPad"===navigator.platform?t="tablet":("Android"===navigator.platform||/android/gi.test(navigator.userAgent))&&(t=/tablet/gi.test(navigator.userAgent)?"tablet":"mobile"),t},getPointer:function(){var t;return t="fine",matchMedia("(pointer:coarse)").matches&&(t="coarse"),t},getOrientation:function(t,e){return t===e?"quadratic":t>e?"horizontal":"vertical"},getScreenDimensions:function(){var t,e,n;return{density:t=null!=(n=window.devicePixelRatio)?n:1,logical:e={width:window.screen.width,height:window.screen.height},physical:{width:Math.round(e.width*t),height:Math.round(e.height*t)}}},getUtcOffsetSeconds:function(){var t,e,n;return e=new Date,n=(t=new Date(e.getFullYear(),0,1,0,0,0,0)).toGMTString(),(t-new Date(n.substring(0,n.lastIndexOf(" ")-1)))/1e3},getUtcDstOffsetSeconds:function(){return 60*(new Date).getTimezoneOffset()*-1},getColorBrightness:function(t){var e,n,i,r,o;for(t=t.replace("#",""),e=parseInt((e+"").replace(/[^a-f0-9]/gi,""),16),n=[],r=0,o=0;o<3;)i=parseInt(t.substring(2*o,2),16),n[o]=i,i>0&&(r+=i),++o;return r<=381?"dark":"light"},btoa:function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}(function(t){return H.isBrowser()?btoa(t):(null,(t instanceof Buffer?t:new Buffer(t.toString(),"binary")).toString("base64"))}),chunk:function(t,e){var n;for(n=[];t.length;)n.push(t.splice(0,e));return n},throttle:function(t){var e,n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:250,r=arguments.length>2?arguments[2]:void 0;return n=void 0,e=void 0,function(){var o,s,a;s=r||this,a=(new Date).getTime(),o=arguments,n&&a<n+i?(clearTimeout(e),e=setTimeout(function(){n=a,t.apply(s,o)},i)):(n=a,t.apply(s,o))}},loadImage:function(t,e){var n;return(n=new Image).onload=function(){return e(null,n.width,n.height)},n.onerror=function(){return e(new Error)},n.src=t,n},distance:function(t,e,n,i){var r,o,s,a,l;return o=Math.PI*t/180,s=Math.PI*n/180,l=e-i,a=Math.PI*l/180,r=Math.sin(o)*Math.sin(s)+Math.cos(o)*Math.cos(s)*Math.cos(a),r=1.609344*(r=60*(r=180*(r=Math.acos(r))/Math.PI)*1.1515)*1e3},isElementInViewport:function(t){var e,n,i,r,o,s,a,l,u,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return u=(i=t.getBoundingClientRect()).top-(null!=(r=c.top)?r:0),n=i.left-(null!=(o=c.left)?o:0),l=i.right+(null!=(s=c.right)?s:0),e=i.bottom+(null!=(a=c.bottom)?a:0),u>=0&&n>=0&&e<=window.innerHeight&&l<=window.innerWidth},async:{parallel:function(t,e){var n,i,r,o;for(i=t.length,n=[],r=0,o=function(t){return function(){var r,o;for(o=[],r=0,i--;r<arguments.length;)o.push(arguments[r]),r++;n[t]=o,0===i&&e(n)}};r<t.length;)t[r](o(r)),r++}}};B=f,X=Y,(V=new d).set({locale:"en_US",coreUrl:"https://api.etilbudsavis.dk",graphUrl:"https://graph.service.shopgun.com",eventsTrackUrl:"https://events.service.shopgun.com/track",eventsPulseUrl:"wss://events.service.shopgun.com/pulse",assetsFileUploadUrl:"https://assets.service.shopgun.com/upload"});var G={config:V,translations:B,util:X},K=G;var $={key:"sgn-",storage:function(){var t;try{return(t=window.localStorage)["".concat("sgn-","test-storage")]="foobar",delete t["".concat("sgn-","test-storage")],t}catch(t){return{}}}(),get:function(t){try{return JSON.parse(this.storage["".concat("sgn-").concat(t)])}catch(t){}},set:function(t,e){try{this.storage["".concat("sgn-").concat(t)]=JSON.stringify(e)}catch(t){}return this}};var Z,J={key:"sgn-",storage:function(){var t;try{return(t=window.sessionStorage)["".concat("sgn-","test-storage")]="foobar",delete t["".concat("sgn-","test-storage")],t}catch(t){return{}}}(),get:function(t){try{return JSON.parse(this.storage["".concat("sgn-").concat(t)])}catch(t){}},set:function(t,e){try{this.storage["".concat("sgn-").concat(t)]=JSON.stringify(e)}catch(t){}return this}},Q={}.toString,tt=function(t){return Q.call(t).slice(8,-1)},et=D("match"),nt=function(t){var e;return g(t)&&(void 0!==(e=t[et])?!!e:"RegExp"==tt(t))};z("split",2,function(t,e,n){var i=nt,r=n,o=[].push;if("c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length){var s=void 0===/()??/.exec("")[1];n=function(t,e){var n=String(this);if(void 0===t&&0===e)return[];if(!i(t))return r.call(n,t,e);var a,l,u,c,h,d=[],p=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),f=0,g=void 0===e?4294967295:e>>>0,v=new RegExp(t.source,p+"g");for(s||(a=new RegExp("^"+v.source+"$(?!\\s)",p));(l=v.exec(n))&&!((u=l.index+l[0].length)>f&&(d.push(n.slice(f,l.index)),!s&&l.length>1&&l[0].replace(a,function(){for(h=1;h<arguments.length-2;h++)void 0===arguments[h]&&(l[h]=void 0)}),l.length>1&&l.index<n.length&&o.apply(d,l.slice(1)),c=l[0].length,f=u,d.length>=g));)v.lastIndex===l.index&&v.lastIndex++;return f===n.length?!c&&v.test("")||d.push(""):d.push(n.slice(f)),d.length>g?d.slice(0,g):d}}else"0".split(void 0,0).length&&(n=function(t,e){return void 0===t&&0===e?[]:r.call(this,t,e)});return[function(i,r){var o=t(this),s=null==i?void 0:i[e];return void 0!==s?s.call(i,o,r):n.call(String(o),i,r)},n]}),Z=K;var it,rt={get:function(t){var e,n,i,r,o,s;if(!Z.util.isNode()){try{for(o="".concat("sgn-").concat(t,"="),e=document.cookie.split(";"),i=0,r=e.length;i<r;i++)0===(n=e[i].trim()).indexOf(o)&&(s=n.substring(o.length,n.length));s=JSON.parse(s)}catch(t){s={}}return s}},set:function(t,e){var n,i;if(!Z.util.isNode())try{365,n=new Date,i=JSON.stringify(e),n.setTime(n.getTime()+31536e6),document.cookie="".concat("sgn-").concat(t,"=").concat(i,";expires=").concat(n.toUTCString(),";path=/")}catch(t){}}};it=K;var ot;ot=K;var st,at,lt,ut,ct={fileUpload:function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0,i=arguments.length>2?arguments[2]:void 0;if(null==e.file)throw new Error("File is not defined");t=ot.config.get("assetsFileUploadUrl"),ot.request({method:"post",url:t,headers:{Accept:"application/json"},formData:{file:e.file},timeout:36e5},function(t,e){null!=t?n(ot.util.error(new Error("Request error"),{code:"RequestError"})):200===e.statusCode?n(null,JSON.parse(e.body)):n(ot.util.error(new Error("Request error"),{code:"RequestError",statusCode:e.statusCode}))},function(t,e){"function"==typeof i&&i({progress:t/e,loaded:t,total:e})})}};st=K,at=$,ut=(lt=function(){var t;return t=at.get("event-tracker-pool"),!1===Array.isArray(t)&&(t=[]),t})(),at.set("event-tracker-pool",[]);try{window.addEventListener("unload",function(){ut=ut.concat(lt()),at.set("event-tracker-pool",ut)},!1)}catch(t){}var ht,dt,pt=function(){var t=function(){function t(){var n,i,r,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};for(n in e(this,t),i=this.defaultOptions)r=i[n],this[n]=o[n]||r;this.dispatching=!1,this.session={id:st.util.uuid()},this.client={trackId:this.trackId,id:st.client.id},this.view={path:[],previousPath:[],uri:null},this.location={},this.application={},this.identity={},this.interval=setInterval(this.dispatch.bind(this),this.dispatchInterval)}return i(t,[{key:"trackEvent",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"1.0.0";if("string"!=typeof t)throw st.util.error(new Error("Event type is required"));if(null!=this.trackId){for(ut.push({id:st.util.uuid(),type:t,version:n,recordedAt:(new Date).toISOString(),sentAt:null,client:{id:this.client.id,trackId:this.client.trackId},context:this.getContext(),properties:e});this.getPoolSize()>this.poolLimit;)ut.shift();return this}}},{key:"identify",value:function(t){return this.identity.id=t,this}},{key:"setLocation",value:function(){var t,e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.location.determinedAt=new Date(n.timestamp).toISOString(),this.location.latitude=n.latitude,this.location.longitude=n.longitude,this.location.altitude=n.altitude,this.location.accuracy={horizontal:null!=(t=n.accuracy)?t.horizontal:void 0,vertical:null!=(e=n.accuracy)?e.vertical:void 0},this.location.speed=n.speed,this.location.floor=n.floor,this}},{key:"setApplication",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.application.name=t.name,this.application.version=t.version,this.application.build=t.build,this}},{key:"setView",value:function(t){return this.view.previousPath=this.view.path,!0===Array.isArray(t)&&(this.view.path=t),this.view.uri=window.location.href,this}},{key:"getView",value:function(){var t;return t={},this.view.path.length>0&&(t.path=this.view.path),this.view.previousPath.length>0&&(t.previousPath=this.view.previousPath),null!=this.view.uri&&(t.uri=this.view.uri),t}},{key:"getContext",value:function(){var t,e,n,i,r,o,s,a;return a=st.util.getScreenDimensions(),r=st.util.getOS(),n={userAgent:window.navigator.userAgent,locale:navigator.language,timeZone:{utcOffsetSeconds:st.util.getUtcOffsetSeconds(),utcDstOffsetSeconds:st.util.getUtcDstOffsetSeconds()},device:{screen:{width:a.physical.width,height:a.physical.height,density:a.density}},session:{id:this.session.id},view:this.getView()},t={name:this.application.name,version:this.application.version,build:this.application.build},e={source:st.util.getQueryParam("utm_source"),medium:st.util.getQueryParam("utm_medium"),name:st.util.getQueryParam("utm_campaign"),term:st.util.getQueryParam("utm_term"),content:st.util.getQueryParam("utm_content")},i={determinedAt:this.location.determinedAt,latitude:this.location.latitude,longitude:this.location.longitude,altitude:this.location.altitude,speed:this.location.speed,floor:this.location.floor,accuracy:{horizontal:null!=(o=this.location.accuracy)?o.horizontal:void 0,vertical:null!=(s=this.location.accuracy)?s.vertical:void 0}},null!=r&&(n.os={name:r}),document.referrer.length>0&&(n.session.referrer=document.referrer),["name","version","build"].forEach(function(e){"string"==typeof t[e]&&0!==t[e].length||delete t[e]}),Object.keys(t).length>0&&(n.application=t),["source","medium","name","term","content"].forEach(function(t){"string"==typeof e[t]&&0!==e[t].length||delete e[t]}),Object.keys(e).length>0&&(n.campaign=e),["latitude","longitude","altitude","speed","floor"].forEach(function(t){"number"!=typeof i[t]&&delete i[t]}),"number"!=typeof i.accuracy.horizontal&&delete i.accuracy.horizontal,"number"!=typeof i.accuracy.vertical&&delete i.accuracy.vertical,0===Object.keys(i.accuracy).length&&delete i.accuracy,"string"==typeof i.determinedAt&&0!==i.determinedAt.length||delete i.determinedAt,Object.keys(i).length>0&&(n.location=i),null!=this.identity.id&&(n.personId=this.identity.id),n}},{key:"getPoolSize",value:function(){return ut.length}},{key:"dispatch",value:function(){var t,e,n=this;if(!0!==this.dispatching&&0!==this.getPoolSize())return!0===this.dryRun?ut.splice(0,this.dispatchLimit):(t=ut.slice(0,this.dispatchLimit),e=0,this.dispatching=!0,this.ship(t,function(t,i){n.dispatching=!1,null==t&&(i.events.forEach(function(t){"validation_error"===t.status||"ack"===t.status?ut=ut.filter(function(e){return e.id!==t.id}):e++}),n.getPoolSize()>=n.dispatchLimit&&0===e&&n.dispatch())}),this)}},{key:"ship",value:function(){var t,e,n,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=arguments.length>1?arguments[1]:void 0;return t=new XMLHttpRequest,n=st.config.get("eventsTrackUrl"),e={events:i.map(function(t){return t.sentAt=(new Date).toISOString(),t})},t.open("POST",n),t.setRequestHeader("Content-Type","application/json"),t.setRequestHeader("Accept","application/json"),t.timeout=2e4,t.onload=function(){if(200===t.status)try{r(null,JSON.parse(t.responseText))}catch(t){r(st.util.error(new Error("Could not parse JSON")))}else r(st.util.error(new Error("Server did not accept request")))},t.onerror=function(){r(st.util.error(new Error("Could not perform network request")))},t.send(JSON.stringify(e)),this}}]),t}();return t.prototype.defaultOptions={trackId:null,dispatchInterval:3e3,dispatchLimit:100,poolLimit:1e3,dryRun:!1},t}.call(r);ht=l,dt=function(){function t(){e(this,t),this.destroyed=!1,this.connection=this.connect()}return i(t,[{key:"destroy",value:function(){return this.destroyed=!0,this.connection.close(),this}},{key:"connect",value:function(){var t;return(t=new WebSocket(SGN.config.get("eventsPulseUrl"))).onopen=this.onOpen.bind(this),t.onmessage=this.onMessage.bind(this),t.onerror=this.onError.bind(this),t.onclose=this.onClose.bind(this),t}},{key:"onOpen",value:function(){this.trigger("open")}},{key:"onMessage",value:function(t){try{this.trigger("event",JSON.parse(t.data))}catch(t){}}},{key:"onError",value:function(){}},{key:"onClose",value:function(){var t=this;!1===this.destroyed&&setTimeout(function(){t.connection=t.connect()},2e3)}}]),t}(),ht.mixin(dt);var ft,gt,vt={Tracker:pt,Pulse:dt};ft=K,gt=function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return t={},e.map(function(e){var n,i,r;n=(i=e.split("; ")[0].split("="))[0],r=i[1],t[n]=r}),t};var yt,mt,bt={request:function(){var t,e,n,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;n=ft.config.get("graphUrl"),t=ft.config.get("appKey"),e=ft.config.get("authToken"),i={method:"post",url:n,timeout:12e3,json:!0,headers:{},body:{query:i.query,operationName:i.operationName,variables:i.variables}},null!=t&&(i.headers.Authorization="Basic "+ft.util.btoa("app-key:".concat(t))),ft.util.isNode()&&null!=e?i.cookies=[{key:"shopgun-auth-token",value:e,url:n}]:ft.util.isBrowser()&&(i.useCookies=!0),ft.request(i,function(t,e){var n,i;null!=t?r(ft.util.error(new Error("Graph request error"),{code:"GraphRequestError"})):(ft.util.isNode()&&(n=gt(null!=(i=e.headers)?i["set-cookie"]:void 0)["shopgun-auth-token"],ft.config.get("authToken")!==n&&ft.config.set("authToken",n)),200===e.statusCode?r(null,e.body):r(ft.util.error(new Error("Graph API error"),{code:"GraphAPIError",statusCode:e.statusCode})))})}};yt=K;var _t,kt,wt,St,xt,Et,Tt=mt=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;yt.CoreKit.session.ensure(function(i){var r,o,s,a,l,u,c,h,d,p,f,g,v;return null!=i?e(i):(v=null!=(d=t.url)?d:"",l=null!=(p=t.headers)?p:{},u="boolean"!=typeof t.json||t.json,g=yt.config.get("coreSessionToken"),s=yt.config.get("coreSessionClientId"),o=yt.config.get("appVersion"),r=yt.config.get("appSecret"),c=yt.config.get("locale"),h=null!=(f=t.qs)?f:{},a=t.geolocation,l["X-Token"]=g,null!=r&&(l["X-Signature"]=yt.CoreKit.session.sign(r,g)),null!=c&&(h.r_locale=c),null!=o&&(h.api_av=o),null!=s&&(h.client_id=s),null!=a&&(null!=a.latitude&&null==h.r_lat&&(h.r_lat=a.latitude),null!=a.longitude&&null==h.r_lng&&(h.r_lng=a.longitude),null!=a.radius&&null==h.r_radius&&(h.r_radius=a.radius),null!=a.sensor&&null==h.r_sensor&&(h.r_sensor=a.sensor)),yt.request({method:t.method,url:yt.config.get("coreUrl")+v,qs:h,body:t.body,formData:t.formData,headers:l,json:u,useCookies:!1},function(i,r){var o,s;null!=i?e(yt.util.error(new Error("Core request error"),{code:"CoreRequestError"})):(g=yt.config.get("coreSessionToken"),(s=r.headers["x-token"])&&g!==s&&yt.CoreKit.session.saveToken(s),r.statusCode>=200&&r.statusCode<300||304===r.statusCode?e(null,r.body):0!==n||null==r.body||1101!==(o=r.body.code)&&1107!==o&&1108!==o?e(yt.util.error(new Error("Core API error"),{code:"CoreAPIError",statusCode:r.statusCode}),r.body):(yt.config.set({coreSessionToken:void 0}),mt(t,e,++n)))}))})},Pt=o(function(t){!function(e){var n={bytesToHex:function(t){return function(t){return t.map(function(t){return e=t.toString(16),n=2,e.length>n?e:Array(n-e.length+1).join("0")+e;var e,n}).join("")}(t)},hexToBytes:function(t){if(t.length%2==1)throw new Error("hexToBytes can't have a string with an odd number of characters.");return 0===t.indexOf("0x")&&(t=t.slice(2)),t.match(/../g).map(function(t){return parseInt(t,16)})}};t.exports?t.exports=n:e.convertHex=n}(r)}),Ct=o(function(t){var e,n;e=r,(n={bytesToString:function(t){return t.map(function(t){return String.fromCharCode(t)}).join("")},stringToBytes:function(t){return t.split("").map(function(t){return t.charCodeAt(0)})}}).UTF8={bytesToString:function(t){return decodeURIComponent(escape(n.bytesToString(t)))},stringToBytes:function(t){return n.stringToBytes(unescape(encodeURIComponent(t)))}},t.exports?t.exports=n:e.convertString=n}),Ot=o(function(t){!function(e){var n={};t.exports?(n.bytesToHex=Pt.bytesToHex,n.convertString=Ct,t.exports=l):(n.bytesToHex=e.convertHex.bytesToHex,n.convertString=e.convertString,e.sha256=l);var i=[];!function(){function t(t){for(var e=Math.sqrt(t),n=2;n<=e;n++)if(!(t%n))return!1;return!0}function e(t){return 4294967296*(t-(0|t))|0}for(var n=2,r=0;r<64;)t(n)&&(i[r]=e(Math.pow(n,1/3)),r++),n++}();var r=function(t){for(var e=[],n=0,i=0;n<t.length;n++,i+=8)e[i>>>5]|=t[n]<<24-i%32;return e},o=function(t){for(var e=[],n=0;n<32*t.length;n+=8)e.push(t[n>>>5]>>>24-n%32&255);return e},s=[],a=function(t,e,n){for(var r=t[0],o=t[1],a=t[2],l=t[3],u=t[4],c=t[5],h=t[6],d=t[7],p=0;p<64;p++){if(p<16)s[p]=0|e[n+p];else{var f=s[p-15],g=(f<<25|f>>>7)^(f<<14|f>>>18)^f>>>3,v=s[p-2],y=(v<<15|v>>>17)^(v<<13|v>>>19)^v>>>10;s[p]=g+s[p-7]+y+s[p-16]}var m=r&o^r&a^o&a,b=(r<<30|r>>>2)^(r<<19|r>>>13)^(r<<10|r>>>22),_=d+((u<<26|u>>>6)^(u<<21|u>>>11)^(u<<7|u>>>25))+(u&c^~u&h)+i[p]+s[p];d=h,h=c,c=u,u=l+_|0,l=a,a=o,o=r,r=_+(b+m)|0}t[0]=t[0]+r|0,t[1]=t[1]+o|0,t[2]=t[2]+a|0,t[3]=t[3]+l|0,t[4]=t[4]+u|0,t[5]=t[5]+c|0,t[6]=t[6]+h|0,t[7]=t[7]+d|0};function l(t,e){t.constructor===String&&(t=n.convertString.UTF8.stringToBytes(t));var i=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],s=r(t),l=8*t.length;s[l>>5]|=128<<24-l%32,s[15+(l+64>>9<<4)]=l;for(var u=0;u<s.length;u+=16)a(i,s,u);var c=o(i);return e&&e.asBytes?c:e&&e.asString?n.convertString.bytesToString(c):n.bytesToHex(c)}l.x2=function(t,e){return l(l(t,{asBytes:!0}),e)}}(r)});_t=K,Et=Ot,wt=rt,kt=[],St=!1;var It={request:Tt,session:xt={ttl:5184e3,saveToken:function(t){if(!t)throw new Error("No token provided for saving");_t.config.set({coreSessionToken:t}),xt.saveCookie()},saveClientId:function(t){_t.config.set({coreSessionClientId:t}),xt.saveCookie()},saveCookie:function(){wt.set("session",{token:_t.config.get("coreSessionToken"),client_id:_t.config.get("coreSessionClientId")})},create:function(t){_t.request({method:"post",url:_t.config.get("coreUrl")+"/v2/sessions",json:!0,qs:{api_key:_t.config.get("appKey"),token_ttl:xt.ttl}},function(e,n){null!=e?t(e):201===n.statusCode?(xt.saveToken(n.body.token),xt.saveClientId(n.body.client_id),t(e,n.body)):t(new Error("Could not create session"))})},update:function(t){var e,n,i;n={},i=_t.config.get("coreSessionToken"),e=_t.config.get("appSecret"),n["X-Token"]=i,null!=e&&(n["X-Signature"]=xt.sign(e,i)),_t.request({url:_t.config.get("coreUrl")+"/v2/sessions",headers:n,json:!0},function(e,n){null!=e?t(e):200===n.statusCode?(xt.saveToken(n.body.token),xt.saveClientId(n.body.client_id),t(e,n.body)):t(new Error("Could not update session"))})},renew:function(t){var e,n,i;n={},i=_t.config.get("coreSessionToken"),e=_t.config.get("appSecret"),n["X-Token"]=i,null!=e&&(n["X-Signature"]=xt.sign(e,i)),_t.request({method:"put",url:_t.config.get("coreUrl")+"/v2/sessions",headers:n,json:!0},function(e,n){null!=e?t(e):200===n.statusCode?(xt.saveToken(n.body.token),xt.saveClientId(n.body.client_id),t(e,n.body)):t(new Error("Could not renew session"))})},ensure:function(t){var e,n;n=kt.length,e=function(t){kt=kt.filter(function(e){return e(t),!1})},kt.push(t),0===n&&(null==_t.config.get("coreSessionToken")?xt.create(e):!1===St?(St=!0,xt.renew(function(t){null!=t?xt.create(e):e()})):e())},sign:function(t,e){return Et([t,e].join(""))}}},At=function(t,e,n){if(function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!")}(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,i){return t.call(e,n,i)};case 3:return function(n,i,r){return t.call(e,n,i,r)}}return function(){return t.apply(e,arguments)}},Lt=function(t,e,n){var i,r,o,s,a=t&Lt.F,l=t&Lt.G,u=t&Lt.S,c=t&Lt.P,h=t&Lt.B,d=l?b:u?b[e]||(b[e]={}):(b[e]||{}).prototype,p=l?A:A[e]||(A[e]={}),f=p.prototype||(p.prototype={});for(i in l&&(n=e),n)o=((r=!a&&d&&void 0!==d[i])?d:n)[i],s=h&&r?At(o,b):c&&"function"==typeof o?At(Function.call,o):o,d&&L(d,i,o,t&Lt.U),p[i]!=o&&E(p,i,s),c&&f[i]!=o&&(f[i]=o)};b.core=A,Lt.F=1,Lt.G=2,Lt.S=4,Lt.P=8,Lt.B=16,Lt.W=32,Lt.U=64,Lt.R=128;var Nt=Lt,Rt=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==tt(t)?t.split(""):Object(t)},Mt=Math.ceil,Dt=Math.floor,zt=Math.min,jt=function(t){return t>0?zt(function(t){return isNaN(t=+t)?0:(t>0?Dt:Mt)(t)}(t),9007199254740991):0},Ft=Array.isArray||function(t){return"Array"==tt(t)},Ut=D("species"),qt=function(t,e){return new(function(t){var e;return Ft(t)&&("function"!=typeof(e=t.constructor)||e!==Array&&!Ft(e.prototype)||(e=void 0),g(e)&&null===(e=e[Ut])&&(e=void 0)),void 0===e?Array:e}(t))(e)},Ht=D("unscopables"),Wt=Array.prototype;null==Wt[Ht]&&E(Wt,Ht,{});var Vt,Bt,Xt,Yt,Gt,Kt,$t,Zt,Jt,Qt,te=(Xt=1==(Vt=5),Yt=2==Vt,Gt=3==Vt,Kt=4==Vt,$t=6==Vt,Zt=5==Vt||$t,Jt=Bt||qt,function(t,e,n){for(var i,r,o=Object(N(t)),s=Rt(o),a=At(e,n,3),l=jt(s.length),u=0,c=Xt?Jt(t,l):Yt?Jt(t,0):void 0;l>u;u++)if((Zt||u in s)&&(r=a(i=s[u],u,o),Vt))if(Xt)c[u]=r;else if(r)switch(Vt){case 3:return!0;case 5:return i;case 6:return u;case 2:c.push(i)}else if(Kt)return!1;return $t?-1:Gt||Kt?Kt:c}),ee=!0;"find"in[]&&Array(1).find(function(){ee=!1}),Nt(Nt.P+Nt.F*ee,"Array",{find:function(t){return te(this,t,arguments.length>1?arguments[1]:void 0)}}),Qt="find",Wt[Ht][Qt]=!0;var ne,ie,re,oe,se,ae,le,ue,ce,he,de,pe,fe=o(function(t,e){t.exports=function(){var t=function(t){return"object"==typeof t?null!==t:"function"==typeof t},e=function(e){if(!t(e))throw TypeError(e+" is not an object!");return e},n=function(t){try{return!!t()}catch(t){return!0}},i=!n(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a});function r(t,e){return t(e={exports:{}},e.exports),e.exports}var o=r(function(t){var e=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=e)}),s=o.document,a=t(s)&&t(s.createElement),l=!i&&!n(function(){return 7!=Object.defineProperty((t="div",a?s.createElement(t):{}),"a",{get:function(){return 7}}).a;var t}),u=Object.defineProperty,c={f:i?Object.defineProperty:function(n,i,r){if(e(n),i=function(e,n){if(!t(e))return e;var i,r;if(n&&"function"==typeof(i=e.toString)&&!t(r=i.call(e)))return r;if("function"==typeof(i=e.valueOf)&&!t(r=i.call(e)))return r;if(!n&&"function"==typeof(i=e.toString)&&!t(r=i.call(e)))return r;throw TypeError("Can't convert object to primitive value")}(i,!0),e(r),l)try{return u(n,i,r)}catch(t){}if("get"in r||"set"in r)throw TypeError("Accessors not supported!");return"value"in r&&(n[i]=r.value),n}},h=i?function(t,e,n){return c.f(t,e,function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}(1,n))}:function(t,e,n){return t[e]=n,t},d={}.hasOwnProperty,p=function(t,e){return d.call(t,e)},f=0,g=Math.random(),v=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++f+g).toString(36))},y=r(function(t){var e=t.exports={version:"2.5.1"};"number"==typeof __e&&(__e=e)}),m=(y.version,r(function(t){var e=v("src"),n=Function.toString,i=(""+n).split("toString");y.inspectSource=function(t){return n.call(t)},(t.exports=function(t,n,r,s){var a="function"==typeof r;a&&(p(r,"name")||h(r,"name",n)),t[n]!==r&&(a&&(p(r,e)||h(r,e,t[n]?""+t[n]:i.join(String(n)))),t===o?t[n]=r:s?t[n]?t[n]=r:h(t,n,r):(delete t[n],h(t,n,r)))})(Function.prototype,"toString",function(){return"function"==typeof this&&this[e]||n.call(this)})})),b=function(t){if(null==t)throw TypeError("Can't call method on  "+t);return t},_=o["__core-js_shared__"]||(o["__core-js_shared__"]={}),k=function(t){return _[t]||(_[t]={})},w=r(function(t){var e=k("wks"),n=o.Symbol,i="function"==typeof n,r=t.exports=function(t){return e[t]||(e[t]=i&&n[t]||(i?n:v)("Symbol."+t))};r.store=e}),S=function(t,e,i){var r=w(t),o=i(b,r,""[t]),s=o[0],a=o[1];n(function(){var e={};return e[r]=function(){return 7},7!=""[t](e)})&&(m(String.prototype,t,s),h(RegExp.prototype,r,2==e?function(t,e){return a.call(t,this,e)}:function(t){return a.call(t,this)}))},x={}.toString,E=function(t){return x.call(t).slice(8,-1)},T=w("match"),P=function(e){var n;return t(e)&&(void 0!==(n=e[T])?!!n:"RegExp"==E(e))};function C(t){return(C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function O(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function I(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function A(t,e,n){return e&&I(t.prototype,e),n&&I(t,n),t}S("split",2,function(t,e,n){var i=P,r=n,o=[].push;if("c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length){var s=void 0===/()??/.exec("")[1];n=function(t,e){var n=String(this);if(void 0===t&&0===e)return[];if(!i(t))return r.call(n,t,e);var a,l,u,c,h,d=[],p=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),f=0,g=void 0===e?4294967295:e>>>0,v=new RegExp(t.source,p+"g");for(s||(a=new RegExp("^"+v.source+"$(?!\\s)",p));(l=v.exec(n))&&!((u=l.index+l[0].length)>f&&(d.push(n.slice(f,l.index)),!s&&l.length>1&&l[0].replace(a,function(){for(h=1;h<arguments.length-2;h++)void 0===arguments[h]&&(l[h]=void 0)}),l.length>1&&l.index<n.length&&o.apply(d,l.slice(1)),c=l[0].length,f=u,d.length>=g));)v.lastIndex===l.index&&v.lastIndex++;return f===n.length?!c&&v.test("")||d.push(""):d.push(n.slice(f)),d.length>g?d.slice(0,g):d}}else"0".split(void 0,0).length&&(n=function(t,e){return void 0===t&&0===e?[]:r.call(this,t,e)});return[function(i,r){var o=t(this),s=null==i?void 0:i[e];return void 0!==s?s.call(i,o,r):n.call(String(o),i,r)},n]});var L=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t},N=function(t,e,n){if(L(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,i){return t.call(e,n,i)};case 3:return function(n,i,r){return t.call(e,n,i,r)}}return function(){return t.apply(e,arguments)}},R=function(t,e,n){var i,r,s,a,l=t&R.F,u=t&R.G,c=t&R.S,d=t&R.P,p=t&R.B,f=u?o:c?o[e]||(o[e]={}):(o[e]||{}).prototype,g=u?y:y[e]||(y[e]={}),v=g.prototype||(g.prototype={});for(i in u&&(n=e),n)r=!l&&f&&void 0!==f[i],s=(r?f:n)[i],a=p&&r?N(s,o):d&&"function"==typeof s?N(Function.call,s):s,f&&m(f,i,s,t&R.U),g[i]!=s&&h(g,i,a),d&&v[i]!=s&&(v[i]=s)};o.core=y,R.F=1,R.G=2,R.S=4,R.P=8,R.B=16,R.W=32,R.U=64,R.R=128;var M,D,z=R,j=function(t){return Object(b(t))},F=[].sort,U=[1,2,3];z(z.P+z.F*(n(function(){U.sort(void 0)})||!n(function(){U.sort(null)})||!((M=F)&&n(function(){D?M.call(null,function(){},1):M.call(null)}))),"Array",{sort:function(t){return void 0===t?F.call(j(this)):F.call(j(this),L(t))}});var q,H,W=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==E(t)?t.split(""):Object(t)},V=function(t){return W(b(t))},B=Math.ceil,X=Math.floor,Y=function(t){return isNaN(t=+t)?0:(t>0?X:B)(t)},G=Math.min,K=Math.max,$=Math.min,Z=k("keys"),J=(H=!1,function(t,e,n){var i,r,o=V(t),s=(i=o.length)>0?G(Y(i),9007199254740991):0,a=function(t,e){return(t=Y(t))<0?K(t+e,0):$(t,e)}(n,s);if(H&&e!=e){for(;s>a;)if((r=o[a++])!=r)return!0}else for(;s>a;a++)if((H||a in o)&&o[a]===e)return H||a||0;return!H&&-1}),Q=Z[q="IE_PROTO"]||(Z[q]=v(q)),tt="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","),et=Object.keys||function(t){return function(t,e){var n,i=V(t),r=0,o=[];for(n in i)n!=Q&&p(i,n)&&o.push(n);for(;e.length>r;)p(i,n=e[r++])&&(~J(o,n)||o.push(n));return o}(t,tt)},nt={f:Object.getOwnPropertySymbols},it={f:{}.propertyIsEnumerable},rt=Object.assign,ot=!rt||n(function(){var t={},e={},n=Symbol(),i="abcdefghijklmnopqrst";return t[n]=7,i.split("").forEach(function(t){e[t]=t}),7!=rt({},t)[n]||Object.keys(rt({},e)).join("")!=i})?function(t,e){for(var n=j(t),i=arguments.length,r=1,o=nt.f,s=it.f;i>r;)for(var a,l=W(arguments[r++]),u=o?et(l).concat(o(l)):et(l),c=u.length,h=0;c>h;)s.call(l,a=u[h++])&&(n[a]=l[a]);return n}:rt;z(z.S+z.F,"Object",{assign:ot}),S("replace",2,function(t,e,n){return[function(i,r){var o=t(this),s=null==i?void 0:i[e];return void 0!==s?s.call(i,o,r):n.call(String(o),i,r)},n]});var st,at=["","webkit","Moz","MS","ms","o"],lt="function",ut=Math.round,ct=Math.abs,ht=Date.now;function dt(t,e,n){return setTimeout(bt(t,n),e)}function pt(t,e,n){return!!Array.isArray(t)&&(ft(t,n[e],n),!0)}function ft(t,e,n){var i;if(t)if(t.forEach)t.forEach(e,n);else if(void 0!==t.length)for(i=0;i<t.length;)e.call(n,t[i],i,t),i++;else for(i in t)t.hasOwnProperty(i)&&e.call(n,t[i],i,t)}function gt(t,e,n){var i="DEPRECATED METHOD: "+e+"\n"+n+" AT \n";return function(){var e=new Error("get-stack-trace"),n=e&&e.stack?e.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",r=window.console&&(window.console.warn||window.console.log);return r&&r.call(window.console,i,n),t.apply(this,arguments)}}st="function"!=typeof Object.assign?function(t){if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),n=1;n<arguments.length;n++){var i=arguments[n];if(null!=i)for(var r in i)i.hasOwnProperty(r)&&(e[r]=i[r])}return e}:Object.assign;var vt=gt(function(t,e,n){for(var i=Object.keys(e),r=0;r<i.length;)(!n||n&&void 0===t[i[r]])&&(t[i[r]]=e[i[r]]),r++;return t},"extend","Use `assign`."),yt=gt(function(t,e){return vt(t,e,!0)},"merge","Use `assign`.");function mt(t,e,n){var i,r=e.prototype;(i=t.prototype=Object.create(r)).constructor=t,i._super=r,n&&st(i,n)}function bt(t,e){return function(){return t.apply(e,arguments)}}function _t(t,e){return C(t)==lt?t.apply(e&&e[0]||void 0,e):t}function kt(t,e){return void 0===t?e:t}function wt(t,e,n){ft(Tt(e),function(e){t.addEventListener(e,n,!1)})}function St(t,e,n){ft(Tt(e),function(e){t.removeEventListener(e,n,!1)})}function xt(t,e){for(;t;){if(t==e)return!0;t=t.parentNode}return!1}function Et(t,e){return t.indexOf(e)>-1}function Tt(t){return t.trim().split(/\s+/g)}function Pt(t,e,n){if(t.indexOf&&!n)return t.indexOf(e);for(var i=0;i<t.length;){if(n&&t[i][n]==e||!n&&t[i]===e)return i;i++}return-1}function Ct(t){return Array.prototype.slice.call(t,0)}function Ot(t,e,n){for(var i=[],r=[],o=0;o<t.length;){var s=e?t[o][e]:t[o];Pt(r,s)<0&&i.push(t[o]),r[o]=s,o++}return n&&(i=e?i.sort(function(t,n){return t[e]>n[e]}):i.sort()),i}function It(t,e){for(var n,i,r=e[0].toUpperCase()+e.slice(1),o=0;o<at.length;){if(n=at[o],(i=n?n+r:e)in t)return i;o++}}var At=1;function Lt(t){var e=t.ownerDocument||t;return e.defaultView||e.parentWindow||window}var Nt=/mobile|tablet|ip(ad|hone|od)|android/i,Rt=function(){return"ontouchstart"in window},Mt=function(){return void 0!==It(window,"PointerEvent")},Dt=function(){return Rt()&&Nt.test(navigator.userAgent)},zt=25,jt=1,Ft=2,Ut=4,qt=8,Ht=1,Wt=2,Vt=4,Bt=8,Xt=16,Yt=Wt|Vt,Gt=Bt|Xt,Kt=Yt|Gt,$t=["x","y"],Zt=["clientX","clientY"];function Jt(t,e){var n=this;this.manager=t,this.callback=e,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(e){_t(t.options.enable,[t])&&n.handler(e)},this.init()}function Qt(t,e,n){var i=n.pointers.length,r=n.changedPointers.length,o=e&jt&&i-r==0,s=e&(Ut|qt)&&i-r==0;n.isFirst=!!o,n.isFinal=!!s,o&&(t.session={}),n.eventType=e,function(t,e){var n=t.session,i=e.pointers,r=i.length;n.firstInput||(n.firstInput=te(e)),r>1&&!n.firstMultiple?n.firstMultiple=te(e):1===r&&(n.firstMultiple=!1);var o=n.firstInput,s=n.firstMultiple,a=s?s.center:o.center,l=e.center=ee(i);e.timeStamp=ht(),e.deltaTime=e.timeStamp-o.timeStamp,e.angle=oe(a,l),e.distance=re(a,l),function(t,e){var n=e.center,i=t.offsetDelta||{},r=t.prevDelta||{},o=t.prevInput||{};e.eventType!==jt&&o.eventType!==Ut||(r=t.prevDelta={x:o.deltaX||0,y:o.deltaY||0},i=t.offsetDelta={x:n.x,y:n.y}),e.deltaX=r.x+(n.x-i.x),e.deltaY=r.y+(n.y-i.y)}(n,e),e.offsetDirection=ie(e.deltaX,e.deltaY);var u,c,h=ne(e.deltaTime,e.deltaX,e.deltaY);e.overallVelocityX=h.x,e.overallVelocityY=h.y,e.overallVelocity=ct(h.x)>ct(h.y)?h.x:h.y,e.scale=s?(u=s.pointers,re((c=i)[0],c[1],Zt)/re(u[0],u[1],Zt)):1,e.rotation=s?function(t,e){return oe(e[1],e[0],Zt)+oe(t[1],t[0],Zt)}(s.pointers,i):0,e.maxPointers=n.prevInput?e.pointers.length>n.prevInput.maxPointers?e.pointers.length:n.prevInput.maxPointers:e.pointers.length,function(t,e){var n,i,r,o,s=t.lastInterval||e,a=e.timeStamp-s.timeStamp;if(e.eventType!=qt&&(a>zt||void 0===s.velocity)){var l=e.deltaX-s.deltaX,u=e.deltaY-s.deltaY,c=ne(a,l,u);i=c.x,r=c.y,n=ct(c.x)>ct(c.y)?c.x:c.y,o=ie(l,u),t.lastInterval=e}else n=s.velocity,i=s.velocityX,r=s.velocityY,o=s.direction;e.velocity=n,e.velocityX=i,e.velocityY=r,e.direction=o}(n,e);var d=t.element;xt(e.srcEvent.target,d)&&(d=e.srcEvent.target),e.target=d}(t,n),t.emit("hammer.input",n),t.recognize(n),t.session.prevInput=n}function te(t){for(var e=[],n=0;n<t.pointers.length;)e[n]={clientX:ut(t.pointers[n].clientX),clientY:ut(t.pointers[n].clientY)},n++;return{timeStamp:ht(),pointers:e,center:ee(e),deltaX:t.deltaX,deltaY:t.deltaY}}function ee(t){var e=t.length;if(1===e)return{x:ut(t[0].clientX),y:ut(t[0].clientY)};for(var n=0,i=0,r=0;r<e;)n+=t[r].clientX,i+=t[r].clientY,r++;return{x:ut(n/e),y:ut(i/e)}}function ne(t,e,n){return{x:e/t||0,y:n/t||0}}function ie(t,e){return t===e?Ht:ct(t)>=ct(e)?t<0?Wt:Vt:e<0?Bt:Xt}function re(t,e,n){n||(n=$t);var i=e[n[0]]-t[n[0]],r=e[n[1]]-t[n[1]];return Math.sqrt(i*i+r*r)}function oe(t,e,n){n||(n=$t);var i=e[n[0]]-t[n[0]],r=e[n[1]]-t[n[1]];return 180*Math.atan2(r,i)/Math.PI}Jt.prototype={handler:function(){},init:function(){this.evEl&&wt(this.element,this.evEl,this.domHandler),this.evTarget&&wt(this.target,this.evTarget,this.domHandler),this.evWin&&wt(Lt(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&St(this.element,this.evEl,this.domHandler),this.evTarget&&St(this.target,this.evTarget,this.domHandler),this.evWin&&St(Lt(this.element),this.evWin,this.domHandler)}};var se={mousedown:jt,mousemove:Ft,mouseup:Ut},ae="mousedown",le="mousemove mouseup";function ue(){this.evEl=ae,this.evWin=le,this.pressed=!1,Jt.apply(this,arguments)}mt(ue,Jt,{handler:function(t){var e=se[t.type];e&jt&&0===t.button&&(this.pressed=!0),e&Ft&&1!==t.which&&(e=Ut),this.pressed&&(e&Ut&&(this.pressed=!1),this.callback(this.manager,e,{pointers:[t],changedPointers:[t],pointerType:"mouse",srcEvent:t}))}});var ce={pointerdown:jt,pointermove:Ft,pointerup:Ut,pointercancel:qt,pointerout:qt},he={2:"touch",3:"pen",4:"mouse",5:"kinect"},de="pointerdown",pe="pointermove pointerup pointercancel";function fe(){this.evEl=de,this.evWin=pe,Jt.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}"undefined"!=typeof window&&window.MSPointerEvent&&!window.PointerEvent&&(de="MSPointerDown",pe="MSPointerMove MSPointerUp MSPointerCancel"),mt(fe,Jt,{handler:function(t){var e=this.store,n=!1,i=t.type.toLowerCase().replace("ms",""),r=ce[i],o=he[t.pointerType]||t.pointerType,s="touch"==o,a=Pt(e,t.pointerId,"pointerId");r&jt&&(0===t.button||s)?a<0&&(e.push(t),a=e.length-1):r&(Ut|qt)&&(n=!0),a<0||(e[a]=t,this.callback(this.manager,r,{pointers:e,changedPointers:[t],pointerType:o,srcEvent:t}),n&&e.splice(a,1))}});var ge={touchstart:jt,touchmove:Ft,touchend:Ut,touchcancel:qt},ve="touchstart",ye="touchstart touchmove touchend touchcancel";function me(){this.evTarget=ve,this.evWin=ye,this.started=!1,Jt.apply(this,arguments)}mt(me,Jt,{handler:function(t){var e=ge[t.type];if(e===jt&&(this.started=!0),this.started){var n=function(t,e){var n=Ct(t.touches),i=Ct(t.changedTouches);return e&(Ut|qt)&&(n=Ot(n.concat(i),"identifier",!0)),[n,i]}.call(this,t,e);e&(Ut|qt)&&n[0].length-n[1].length==0&&(this.started=!1),this.callback(this.manager,e,{pointers:n[0],changedPointers:n[1],pointerType:"touch",srcEvent:t})}}});var be={touchstart:jt,touchmove:Ft,touchend:Ut,touchcancel:qt},_e="touchstart touchmove touchend touchcancel";function ke(){this.evTarget=_e,this.targetIds={},Jt.apply(this,arguments)}mt(ke,Jt,{handler:function(t){var e=be[t.type],n=function(t,e){var n=Ct(t.touches),i=this.targetIds;if(e&(jt|Ft)&&1===n.length)return i[n[0].identifier]=!0,[n,n];var r,o,s=Ct(t.changedTouches),a=[],l=this.target;if(o=n.filter(function(t){return xt(t.target,l)}),e===jt)for(r=0;r<o.length;)i[o[r].identifier]=!0,r++;for(r=0;r<s.length;)i[s[r].identifier]&&a.push(s[r]),e&(Ut|qt)&&delete i[s[r].identifier],r++;return a.length?[Ot(o.concat(a),"identifier",!0),a]:void 0}.call(this,t,e);n&&this.callback(this.manager,e,{pointers:n[0],changedPointers:n[1],pointerType:"touch",srcEvent:t})}});var we=2500,Se=25;function xe(){Jt.apply(this,arguments);var t=bt(this.handler,this);this.touch=new ke(this.manager,t),this.mouse=new ue(this.manager,t),this.primaryTouch=null,this.lastTouches=[]}function Ee(t){var e=t.changedPointers[0];if(e.identifier===this.primaryTouch){var n={x:e.clientX,y:e.clientY};this.lastTouches.push(n);var i=this.lastTouches;setTimeout(function(){var t=i.indexOf(n);t>-1&&i.splice(t,1)},we)}}mt(xe,Jt,{handler:function(t,e,n){var i="touch"==n.pointerType,r="mouse"==n.pointerType;if(!(r&&n.sourceCapabilities&&n.sourceCapabilities.firesTouchEvents)){if(i)(function(t,e){t&jt?(this.primaryTouch=e.changedPointers[0].identifier,Ee.call(this,e)):t&(Ut|qt)&&Ee.call(this,e)}).call(this,e,n);else if(r&&function(t){for(var e=t.srcEvent.clientX,n=t.srcEvent.clientY,i=0;i<this.lastTouches.length;i++){var r=this.lastTouches[i],o=Math.abs(e-r.x),s=Math.abs(n-r.y);if(o<=Se&&s<=Se)return!0}return!1}.call(this,n))return;this.callback(t,e,n)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var Te=function(){return It(document.createElement("div").style,"touchAction")},Pe=function(){return void 0!==Te()},Ce="auto",Oe="manipulation",Ie="none",Ae="pan-x",Le="pan-y";function Ne(t,e){this.manager=t,this.set(e)}function Re(){if(!Pe())return!1;var t={};return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(e){t[e]=!window.CSS||!window.CSS.supports||window.CSS.supports("touch-action",e)}),t}Ne.prototype={set:function(t){"compute"==t&&(t=this.compute());var e=Re();Pe()&&this.manager.element.style&&e[t]&&(this.manager.element.style[Te()]=t),this.actions=t.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var t=[];return ft(this.manager.recognizers,function(e){_t(e.options.enable,[e])&&(t=t.concat(e.getTouchAction()))}),function(t){if(Et(t,Ie))return Ie;var e=Et(t,Ae),n=Et(t,Le);return e&&n?Ie:e||n?e?Ae:Le:Et(t,Oe)?Oe:Ce}(t.join(" "))},preventDefaults:function(t){var e=t.srcEvent,n=t.offsetDirection;if(this.manager.session.prevented)e.preventDefault();else{var i=this.actions,r=Re(),o=Et(i,Ie)&&!r[Ie],s=Et(i,Le)&&!r[Le],a=Et(i,Ae)&&!r[Ae];if(o){var l=1===t.pointers.length,u=t.distance<2,c=t.deltaTime<250;if(l&&u&&c)return}if(!a||!s)return o||s&&n&Yt||a&&n&Gt?this.preventSrc(e):void 0}},preventSrc:function(t){this.manager.session.prevented=!0,t.preventDefault()}};var Me=1,De=2,ze=4,je=8,Fe=je,Ue=16;function qe(t){this.options=st({},this.defaults,t||{}),this.id=At++,this.manager=null,this.options.enable=kt(this.options.enable,!0),this.state=Me,this.simultaneous={},this.requireFail=[]}function He(t){return t&Ue?"cancel":t&je?"end":t&ze?"move":t&De?"start":""}function We(t){return t==Xt?"down":t==Bt?"up":t==Wt?"left":t==Vt?"right":""}function Ve(t,e){var n=e.manager;return n?n.get(t):t}function Be(){qe.apply(this,arguments)}function Xe(){Be.apply(this,arguments),this.pX=null,this.pY=null}function Ye(){Be.apply(this,arguments)}function Ge(){qe.apply(this,arguments),this._timer=null,this._input=null}function Ke(){Be.apply(this,arguments)}function $e(){Be.apply(this,arguments)}function Ze(){qe.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function Je(t,e){return(e=e||{}).recognizers=kt(e.recognizers,Je.defaults.preset),new Qe(t,e)}function Qe(t,e){var n;this.options=st({},Je.defaults,e||{}),this.options.inputTarget=this.options.inputTarget||t,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=t,this.input=new((n=this).options.inputClass||(Mt()?fe:Dt()?ke:Rt()?xe:ue))(n,Qt),this.touchAction=new Ne(this,this.options.touchAction),tn(this,!0),ft(this.options.recognizers,function(t){var e=this.add(new t[0](t[1]));t[2]&&e.recognizeWith(t[2]),t[3]&&e.requireFailure(t[3])},this)}function tn(t,e){var n,i=t.element;i.style&&(ft(t.options.cssProps,function(r,o){n=It(i.style,o),e?(t.oldCssProps[n]=i.style[n],i.style[n]=r):i.style[n]=t.oldCssProps[n]||""}),e||(t.oldCssProps={}))}qe.prototype={defaults:{},set:function(t){return st(this.options,t),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(t){if(pt(t,"recognizeWith",this))return this;var e=this.simultaneous;return t=Ve(t,this),e[t.id]||(e[t.id]=t,t.recognizeWith(this)),this},dropRecognizeWith:function(t){return pt(t,"dropRecognizeWith",this)?this:(t=Ve(t,this),delete this.simultaneous[t.id],this)},requireFailure:function(t){if(pt(t,"requireFailure",this))return this;var e=this.requireFail;return t=Ve(t,this),-1===Pt(e,t)&&(e.push(t),t.requireFailure(this)),this},dropRequireFailure:function(t){if(pt(t,"dropRequireFailure",this))return this;t=Ve(t,this);var e=Pt(this.requireFail,t);return e>-1&&this.requireFail.splice(e,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(t){return!!this.simultaneous[t.id]},emit:function(t){var e=this,n=this.state;function i(n){e.manager.emit(n,t)}n<je&&i(e.options.event+He(n)),i(e.options.event),t.additionalEvent&&i(t.additionalEvent),n>=je&&i(e.options.event+He(n))},tryEmit:function(t){if(this.canEmit())return this.emit(t);this.state=32},canEmit:function(){for(var t=0;t<this.requireFail.length;){if(!(this.requireFail[t].state&(32|Me)))return!1;t++}return!0},recognize:function(t){var e=st({},t);if(!_t(this.options.enable,[this,e]))return this.reset(),void(this.state=32);this.state&(Fe|Ue|32)&&(this.state=Me),this.state=this.process(e),this.state&(De|ze|je|Ue)&&this.tryEmit(e)},process:function(t){},getTouchAction:function(){},reset:function(){}},mt(Be,qe,{defaults:{pointers:1},attrTest:function(t){var e=this.options.pointers;return 0===e||t.pointers.length===e},process:function(t){var e=this.state,n=t.eventType,i=e&(De|ze),r=this.attrTest(t);return i&&(n&qt||!r)?e|Ue:i||r?n&Ut?e|je:e&De?e|ze:De:32}}),mt(Xe,Be,{defaults:{event:"pan",threshold:10,pointers:1,direction:Kt},getTouchAction:function(){var t=this.options.direction,e=[];return t&Yt&&e.push(Le),t&Gt&&e.push(Ae),e},directionTest:function(t){var e=this.options,n=!0,i=t.distance,r=t.direction,o=t.deltaX,s=t.deltaY;return r&e.direction||(e.direction&Yt?(r=0===o?Ht:o<0?Wt:Vt,n=o!=this.pX,i=Math.abs(t.deltaX)):(r=0===s?Ht:s<0?Bt:Xt,n=s!=this.pY,i=Math.abs(t.deltaY))),t.direction=r,n&&i>e.threshold&&r&e.direction},attrTest:function(t){return Be.prototype.attrTest.call(this,t)&&(this.state&De||!(this.state&De)&&this.directionTest(t))},emit:function(t){this.pX=t.deltaX,this.pY=t.deltaY;var e=We(t.direction);e&&(t.additionalEvent=this.options.event+e),this._super.emit.call(this,t)}}),mt(Ye,Be,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[Ie]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.scale-1)>this.options.threshold||this.state&De)},emit:function(t){if(1!==t.scale){var e=t.scale<1?"in":"out";t.additionalEvent=this.options.event+e}this._super.emit.call(this,t)}}),mt(Ge,qe,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[Ce]},process:function(t){var e=this.options,n=t.pointers.length===e.pointers,i=t.distance<e.threshold,r=t.deltaTime>e.time;if(this._input=t,!i||!n||t.eventType&(Ut|qt)&&!r)this.reset();else if(t.eventType&jt)this.reset(),this._timer=dt(function(){this.state=Fe,this.tryEmit()},e.time,this);else if(t.eventType&Ut)return Fe;return 32},reset:function(){clearTimeout(this._timer)},emit:function(t){this.state===Fe&&(t&&t.eventType&Ut?this.manager.emit(this.options.event+"up",t):(this._input.timeStamp=ht(),this.manager.emit(this.options.event,this._input)))}}),mt(Ke,Be,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[Ie]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.rotation)>this.options.threshold||this.state&De)}}),mt($e,Be,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:Yt|Gt,pointers:1},getTouchAction:function(){return Xe.prototype.getTouchAction.call(this)},attrTest:function(t){var e,n=this.options.direction;return n&(Yt|Gt)?e=t.overallVelocity:n&Yt?e=t.overallVelocityX:n&Gt&&(e=t.overallVelocityY),this._super.attrTest.call(this,t)&&n&t.offsetDirection&&t.distance>this.options.threshold&&t.maxPointers==this.options.pointers&&ct(e)>this.options.velocity&&t.eventType&Ut},emit:function(t){var e=We(t.offsetDirection);e&&this.manager.emit(this.options.event+e,t),this.manager.emit(this.options.event,t)}}),mt(Ze,qe,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[Oe]},process:function(t){var e=this.options,n=t.pointers.length===e.pointers,i=t.distance<e.threshold,r=t.deltaTime<e.time;if(this.reset(),t.eventType&jt&&0===this.count)return this.failTimeout();if(i&&r&&n){if(t.eventType!=Ut)return this.failTimeout();var o=!this.pTime||t.timeStamp-this.pTime<e.interval,s=!this.pCenter||re(this.pCenter,t.center)<e.posThreshold;this.pTime=t.timeStamp,this.pCenter=t.center,s&&o?this.count+=1:this.count=1,this._input=t;var a=this.count%e.taps;if(0===a)return this.hasRequireFailures()?(this._timer=dt(function(){this.state=Fe,this.tryEmit()},e.interval,this),De):Fe}return 32},failTimeout:function(){return this._timer=dt(function(){this.state=32},this.options.interval,this),32},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==Fe&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),Je.VERSION="2.0.7",Je.defaults={domEvents:!1,touchAction:"compute",enable:!0,inputTarget:null,inputClass:null,preset:[[Ke,{enable:!1}],[Ye,{enable:!1},["rotate"]],[$e,{direction:Yt}],[Xe,{direction:Yt},["swipe"]],[Ze],[Ze,{event:"doubletap",taps:2},["tap"]],[Ge]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},Qe.prototype={set:function(t){return st(this.options,t),t.touchAction&&this.touchAction.update(),t.inputTarget&&(this.input.destroy(),this.input.target=t.inputTarget,this.input.init()),this},stop:function(t){this.session.stopped=t?2:1},recognize:function(t){var e=this.session;if(!e.stopped){var n;this.touchAction.preventDefaults(t);var i=this.recognizers,r=e.curRecognizer;(!r||r&&r.state&Fe)&&(r=e.curRecognizer=null);for(var o=0;o<i.length;)n=i[o],2===e.stopped||r&&n!=r&&!n.canRecognizeWith(r)?n.reset():n.recognize(t),!r&&n.state&(De|ze|je)&&(r=e.curRecognizer=n),o++}},get:function(t){if(t instanceof qe)return t;for(var e=this.recognizers,n=0;n<e.length;n++)if(e[n].options.event==t)return e[n];return null},add:function(t){if(pt(t,"add",this))return this;var e=this.get(t.options.event);return e&&this.remove(e),this.recognizers.push(t),t.manager=this,this.touchAction.update(),t},remove:function(t){if(pt(t,"remove",this))return this;if(t=this.get(t)){var e=this.recognizers,n=Pt(e,t);-1!==n&&(e.splice(n,1),this.touchAction.update())}return this},on:function(t,e){if(void 0!==t&&void 0!==e){var n=this.handlers;return ft(Tt(t),function(t){n[t]=n[t]||[],n[t].push(e)}),this}},off:function(t,e){if(void 0!==t){var n=this.handlers;return ft(Tt(t),function(t){e?n[t]&&n[t].splice(Pt(n[t],e),1):delete n[t]}),this}},emit:function(t,e){this.options.domEvents&&function(t,e){var n=document.createEvent("Event");n.initEvent(t,!0,!0),n.gesture=e,e.target.dispatchEvent(n)}(t,e);var n=this.handlers[t]&&this.handlers[t].slice();if(n&&n.length){e.type=t,e.preventDefault=function(){e.srcEvent.preventDefault()};for(var i=0;i<n.length;)n[i](e),i++}},destroy:function(){this.element&&tn(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},st(Je,{INPUT_START:jt,INPUT_MOVE:Ft,INPUT_END:Ut,INPUT_CANCEL:qt,STATE_POSSIBLE:Me,STATE_BEGAN:De,STATE_CHANGED:ze,STATE_ENDED:je,STATE_RECOGNIZED:Fe,STATE_CANCELLED:Ue,STATE_FAILED:32,DIRECTION_NONE:Ht,DIRECTION_LEFT:Wt,DIRECTION_RIGHT:Vt,DIRECTION_UP:Bt,DIRECTION_DOWN:Xt,DIRECTION_HORIZONTAL:Yt,DIRECTION_VERTICAL:Gt,DIRECTION_ALL:Kt,Manager:Qe,Input:Jt,TouchAction:Ne,TouchInput:ke,MouseInput:ue,PointerEventInput:fe,TouchMouseInput:xe,SingleTouchInput:me,Recognizer:qe,AttrRecognizer:Be,Tap:Ze,Pan:Xe,Swipe:$e,Pinch:Ye,Rotate:Ke,Press:Ge,on:wt,off:St,each:ft,merge:yt,extend:vt,assign:st,inherit:mt,bindFn:bt,prefixed:It});var en,nn,rn,on,sn,an=Je,ln=r(function(t){var e=function(){};e.prototype={bind:function(t,e){this._events=this._events||{},this._events[t]=this._events[t]||[],this._events[t].push(e)},unbind:function(t,e){this._events=this._events||{},t in this._events!=0&&this._events[t].splice(this._events[t].indexOf(e),1)},trigger:function(t){if(this._events=this._events||{},t in this._events!=0)for(var e=0;e<this._events[t].length;e++)this._events[t][e].apply(this,Array.prototype.slice.call(arguments,1))}},e.mixin=function(t){for(var n=["bind","unbind","trigger"],i=0;i<n.length;i++)t.prototype[n[i]]=e.prototype[n[i]]},"exports"in t&&(t.exports=e)}),un=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};O(this,t),this.el=e,this.options=n,this.visibility="gone",this.positioned=!1,this.active=!1,this.id=this.options.id,this.type=this.options.type,this.pageIds=this.options.pageIds,this.width=this.options.width,this.left=this.options.left,this.maxZoomScale=this.options.maxZoomScale}return A(t,[{key:"isZoomable",value:function(){return this.getMaxZoomScale()>1&&"false"!==this.getEl().getAttribute("data-zoomable")}},{key:"isScrollable",value:function(){return this.getEl().classList.contains("verso--scrollable")}},{key:"getEl",value:function(){return this.el}},{key:"getOverlayEls",value:function(){return this.getEl().querySelectorAll(".verso__overlay")}},{key:"getPageEls",value:function(){return this.getEl().querySelectorAll(".verso__page")}},{key:"getRect",value:function(){return this.getEl().getBoundingClientRect()}},{key:"getContentRect",value:function(){var t,e,n,i,r,o,s,a,l,u,c,h,d,p,f;for(u={top:null,left:null,right:null,bottom:null,width:null,height:null},c=this.getPageEls(),e=0,n=c.length;e<n;e++)a=c[e],t=a.getBoundingClientRect(),o=a.offsetTop,i=a.offsetLeft,s=o-t.top,r=i-t.left,((l={top:t.top+s,left:t.left+r,right:t.right+r,bottom:t.bottom+s,width:t.width,height:t.height}).top<u.top||null==u.top)&&(u.top=l.top),(l.left<u.left||null==u.left)&&(u.left=l.left),(l.right>u.right||null==u.right)&&(u.right=l.right),(l.bottom>u.bottom||null==u.bottom)&&(u.bottom=l.bottom);return u.top=null!=(h=u.top)?h:0,u.left=null!=(d=u.left)?d:0,u.right=null!=(p=u.right)?p:0,u.bottom=null!=(f=u.bottom)?f:0,u.width=u.right-u.left,u.height=u.bottom-u.top,u}},{key:"getId",value:function(){return this.id}},{key:"getType",value:function(){return this.type}},{key:"getPageIds",value:function(){return this.pageIds}},{key:"getWidth",value:function(){return this.width}},{key:"getLeft",value:function(){return this.left}},{key:"getMaxZoomScale",value:function(){return this.maxZoomScale}},{key:"getVisibility",value:function(){return this.visibility}},{key:"setVisibility",value:function(t){return this.visibility!==t&&(this.getEl().style.display="visible"===t?"block":"none",this.visibility=t),this}},{key:"position",value:function(){return!1===this.positioned&&(this.getEl().style.left="".concat(this.getLeft(),"%"),this.positioned=!0),this}},{key:"activate",value:function(){this.active=!0,this.getEl().setAttribute("data-active",this.active)}},{key:"deactivate",value:function(){this.active=!1,this.getEl().setAttribute("data-active",this.active)}}]),t}(),cn=function(){function t(e){O(this,t),this.el=e,this.run=0}return A(t,[{key:"animate",value:function(){var t,e,n,i,r,o,s,a,l,u,c,h,d,p=this,f=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},g=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};return h=null!=(n=f.x)?n:0,d=null!=(i=f.y)?i:0,l=null!=(r=f.scale)?r:1,e=null!=(o=f.easing)?o:"ease-out",t=null!=(s=f.duration)?s:0,a=++this.run,u="translate3d(".concat(h,", ").concat(d,", 0px) scale3d(").concat(l,", ").concat(l,", 1)"),this.el.style.transform===u?g():t>0?(c=function(){a===p.run&&(p.el.removeEventListener("transitionend",c),p.el.style.transition="none",g())},this.el.addEventListener("transitionend",c,!1),this.el.style.transition="transform ".concat(e," ").concat(t,"ms"),this.el.style.transform=u):(this.el.style.transition="none",this.el.style.transform=u,g()),this}}]),t}();return nn=an,rn=ln,on=un,en=cn,sn=function(){function t(e){var n,i,r,o,s,a,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};O(this,t),this.el=e,this.options=l,this.swipeVelocity=null!=(n=this.options.swipeVelocity)?n:.3,this.swipeThreshold=null!=(i=this.options.swipeThreshold)?i:10,this.navigationDuration=null!=(r=this.options.navigationDuration)?r:240,this.navigationPanDuration=null!=(o=this.options.navigationPanDuration)?o:200,this.zoomDuration=null!=(s=this.options.zoomDuration)?s:200,this.doubleTapDelay=null!=(a=this.options.doubleTapDelay)?a:300,this.position=-1,this.pinching=!1,this.panning=!1,this.transform={left:0,top:0,scale:1},this.startTransform={left:0,top:0,scale:1},this.tap={count:0,delay:this.doubleTapDelay},this.scrollerEl=this.el.querySelector(".verso__scroller"),this.pageSpreadEls=this.el.querySelectorAll(".verso__page-spread"),this.pageSpreads=this.traversePageSpreads(this.pageSpreadEls),this.pageIds=this.buildPageIds(this.pageSpreads),this.animation=new en(this.scrollerEl),this.hammer=new nn.Manager(this.scrollerEl,{touchAction:"none",enable:!1,inputClass:this.getHammerInputClass()}),this.hammer.add(new nn.Pan({threshold:5,direction:nn.DIRECTION_ALL})),this.hammer.add(new nn.Tap({event:"singletap",interval:0})),this.hammer.add(new nn.Pinch),this.hammer.add(new nn.Press({time:500})),this.hammer.on("panstart",this.onPanStart.bind(this)),this.hammer.on("panmove",this.onPanMove.bind(this)),this.hammer.on("panend",this.onPanEnd.bind(this)),this.hammer.on("pancancel",this.onPanEnd.bind(this)),this.hammer.on("singletap",this.onSingletap.bind(this)),this.hammer.on("pinchstart",this.onPinchStart.bind(this)),this.hammer.on("pinchmove",this.onPinchMove.bind(this)),this.hammer.on("pinchend",this.onPinchEnd.bind(this)),this.hammer.on("pinchcancel",this.onPinchEnd.bind(this)),this.hammer.on("press",this.onPress.bind(this)),this.scrollerEl.addEventListener("contextmenu",this.onContextmenu.bind(this))}return A(t,[{key:"start",value:function(){var t,e;return t=null!=(e=this.getPageSpreadPositionFromPageId(this.options.pageId))?e:0,this.hammer.set({enable:!0}),this.navigateTo(t,{duration:0}),this.resizeListener=this.onResize.bind(this),this.touchStartListener=this.onTouchStart.bind(this),this.touchEndListener=this.onTouchEnd.bind(this),this.el.addEventListener("touchstart",this.touchStartListener,!1),this.el.addEventListener("touchend",this.touchEndListener,!1),window.addEventListener("resize",this.resizeListener,!1),this}},{key:"destroy",value:function(){return this.hammer.destroy(),this.el.removeEventListener("touchstart",this.touchStartListener),this.el.removeEventListener("touchend",this.touchEndListener),window.removeEventListener("resize",this.resizeListener),this}},{key:"first",value:function(t){return this.navigateTo(0,t)}},{key:"prev",value:function(t){return this.navigateTo(this.getPosition()-1,t)}},{key:"next",value:function(t){return this.navigateTo(this.getPosition()+1,t)}},{key:"last",value:function(t){return this.navigateTo(this.getPageSpreadCount()-1,t)}},{key:"navigateTo",value:function(t){var e,n,i,r,o,s,a,l,u,c=this,h=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t<0||t>this.getPageSpreadCount()-1||(r=this.getPosition(),i=this.getPageSpreadFromPosition(r),e=this.getPageSpreadFromPosition(t),n=this.getCarouselFromPageSpread(e),u=null!=(s=h.velocity)?s:1,o=null!=(a=h.duration)?a:this.navigationDuration,o/=Math.abs(u),l=e.isScrollable()?"pan-y":"none",null!=i&&i.deactivate(),e.activate(),n.visible.forEach(function(t){return t.position().setVisibility("visible")}),this.hammer.set({touchAction:l}),this.transform.left=this.getLeftTransformFromPageSpread(t,e),this.setPosition(t),this.transform.scale>1&&(this.transform.top=0,this.transform.scale=1,this.trigger("zoomedOut",{position:r})),this.trigger("beforeNavigation",{currentPosition:r,newPosition:t}),this.animation.animate({x:"".concat(this.transform.left,"%"),duration:o},function(){(n=c.getCarouselFromPageSpread(c.getActivePageSpread())).gone.forEach(function(t){return t.setVisibility("gone")}),c.trigger("afterNavigation",{newPosition:c.getPosition(),previousPosition:r})}))}},{key:"getPosition",value:function(){return this.position}},{key:"setPosition",value:function(t){return this.position=t,this}},{key:"getLeftTransformFromPageSpread",value:function(t,e){var n;return n=0,t===this.getPageSpreadCount()-1?n=100-e.getWidth()-e.getLeft():t>0&&(n=(100-e.getWidth())/2-e.getLeft()),n}},{key:"getCarouselFromPageSpread",value:function(t){var e;return e={visible:[],gone:[]},this.pageSpreads.forEach(function(n){var i;i=!1,n.getLeft()<=t.getLeft()?n.getLeft()+n.getWidth()>t.getLeft()-100&&(i=!0):n.getLeft()-n.getWidth()<t.getLeft()+100&&(i=!0),!0===i?e.visible.push(n):e.gone.push(n)}),e}},{key:"traversePageSpreads",value:function(t){var e,n,i,r,o,s,a,l,u,c,h;for(u=[],r=0,i=0,o=t.length;i<o;i++)n=(e=t[i]).getAttribute("data-id"),c=e.getAttribute("data-type"),a=null!=(a=e.getAttribute("data-page-ids"))?a.split(",").map(function(t){return t}):[],s=null!=(s=e.getAttribute("data-max-zoom-scale"))?+s:1,h=e.getAttribute("data-width"),l=new on(e,{id:n,type:c,pageIds:a,maxZoomScale:s,width:h=null!=h?+h:100,left:r}),r+=h,u.push(l);return u}},{key:"buildPageIds",value:function(t){var e;return e={},t.forEach(function(t,n){t.options.pageIds.forEach(function(n){e[n]=t})}),e}},{key:"isCoordinateInsideElement",value:function(t,e,n){var i;return t>=(i=n.getBoundingClientRect()).left&&t<=i.right&&e>=i.top&&e<=i.bottom}},{key:"getCoordinateInfo",value:function(t,e,n){var i,r,o,s,a,l,u,c,h,d;for(r={x:t-=this.el.offsetLeft,y:e-=this.el.offsetTop,contentX:0,contentY:0,pageX:0,pageY:0,overlayEls:[],pageEl:null,isInsideContentX:!1,isInsideContentY:!1,isInsideContent:!1},i=n.getContentRect(),c=n.getOverlayEls(),d=n.getPageEls(),o=0,a=c.length;o<a;o++)u=c[o],this.isCoordinateInsideElement(t,e,u)&&r.overlayEls.push(u);for(s=0,l=d.length;s<l;s++)if(h=d[s],this.isCoordinateInsideElement(t,e,h)){r.pageEl=h;break}return r.contentX=(t-i.left)/Math.max(1,i.width),r.contentY=(e-i.top)/Math.max(1,i.height),null!=r.pageEl&&(r.isInsideContentX=r.contentX>=0&&r.contentX<=1,r.isInsideContentY=r.contentY>=0&&r.contentY<=1,r.isInsideContent=r.isInsideContentX&&r.isInsideContentY),r}},{key:"getPageSpreadCount",value:function(){return this.pageSpreads.length}},{key:"getActivePageSpread",value:function(){return this.getPageSpreadFromPosition(this.getPosition())}},{key:"getPageSpreadFromPosition",value:function(t){return this.pageSpreads[t]}},{key:"getPageSpreadPositionFromPageId",value:function(t){var e,n,i,r;for(e=n=0,i=(r=this.pageSpreads).length;n<i;e=++n)if(r[e].options.pageIds.indexOf(t)>-1)return e}},{key:"getPageSpreadBounds",value:function(t){var e,n;return n=t.getRect(),{left:((e=t.getContentRect()).left-n.left)/n.width*100,top:(e.top-n.top)/n.height*100,width:e.width/n.width*100,height:e.height/n.height*100,pageSpreadRect:n,pageSpreadContentRect:e}}},{key:"clipCoordinate",value:function(t,e,n,i){return n*e<100?t=i*-e+50-n*e/2:(t=Math.min(t,i*-e),t=Math.max(t,i*-e-n*e+100)),t}},{key:"zoomTo",value:function(){var t,e,n,i,r,o,s,a,l,u,c=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},h=arguments.length>1?arguments[1]:void 0;a=c.scale,i=this.transform.scale,t=this.getActivePageSpread(),r=this.getPageSpreadBounds(t),n=(e=t.getLeft())*i,l=null!=(o=c.x)?o:0,u=null!=(s=c.y)?s:0,1!==a?(l-=r.pageSpreadRect.left,u-=r.pageSpreadRect.top,l=l/(r.pageSpreadRect.width/i)*100,u=u/(r.pageSpreadRect.height/i)*100,l=this.transform.left+n+l-l*a/i,u=this.transform.top+u-u*a/i,!1!==c.bounds&&a>1&&(l=this.clipCoordinate(l,a,r.width,r.left),u=this.clipCoordinate(u,a,r.height,r.top))):(l=0,u=0),l-=e*a,this.transform.left=l,this.transform.top=u,this.transform.scale=a,this.animation.animate({x:"".concat(l,"%"),y:"".concat(u,"%"),scale:a,easing:c.easing,duration:c.duration},h)}},{key:"refresh",value:function(){return this.pageSpreadEls=this.el.querySelectorAll(".verso__page-spread"),this.pageSpreads=this.traversePageSpreads(this.pageSpreadEls),this.pageIds=this.buildPageIds(this.pageSpreads),this}},{key:"getHammerInputClass",value:function(){return"ontouchstart"in window&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent)?nn.TouchInput:null}},{key:"onPanStart",value:function(t){var e,n;(this.transform.scale>1||t.direction===nn.DIRECTION_LEFT||t.direction===nn.DIRECTION_RIGHT)&&(n=t.center.x,e=this.scrollerEl.offsetWidth,n>30&&n<e-30&&(this.startTransform.left=this.transform.left,this.startTransform.top=this.transform.top,this.panning=!0,this.trigger("panStart")))}},{key:"onPanMove",value:function(t){var e,n,i,r,o,s;!0!==this.pinching&&!1!==this.panning&&(this.transform.scale>1?(n=(e=this.getActivePageSpread()).getLeft()*this.transform.scale,i=this.getPageSpreadBounds(e),r=this.transform.scale,o=this.startTransform.left+n+t.deltaX/this.scrollerEl.offsetWidth*100,s=this.startTransform.top+t.deltaY/this.scrollerEl.offsetHeight*100,o=this.clipCoordinate(o,r,i.width,i.left),s=this.clipCoordinate(s,r,i.height,i.top),o-=n,this.transform.left=o,this.transform.top=s,this.animation.animate({x:"".concat(o,"%"),y:"".concat(s,"%"),scale:r,easing:"linear"})):(o=this.transform.left+t.deltaX/this.scrollerEl.offsetWidth*100,this.animation.animate({x:"".concat(o,"%"),easing:"linear"})))}},{key:"onPanEnd",value:function(t){var e,n;!1!==this.panning&&(this.panning=!1,this.trigger("panEnd"),1===this.transform.scale&&!1===this.pinching&&(e=this.getPosition(),n=t.overallVelocityX,Math.abs(n)>=this.swipeVelocity&&Math.abs(t.deltaX)>=this.swipeThreshold&&(t.offsetDirection===nn.DIRECTION_LEFT?this.next({velocity:n,duration:this.navigationPanDuration}):t.offsetDirection===nn.DIRECTION_RIGHT&&this.prev({velocity:n,duration:this.navigationPanDuration})),e===this.getPosition()&&(this.animation.animate({x:"".concat(this.transform.left,"%"),duration:this.navigationPanDuration}),this.trigger("attemptedNavigation",{position:this.getPosition()}))))}},{key:"onPinchStart",value:function(t){this.getActivePageSpread().isZoomable()&&(this.pinching=!0,this.el.setAttribute("data-pinching",!0),this.startTransform.scale=this.transform.scale)}},{key:"onPinchMove",value:function(t){!1!==this.pinching&&this.zoomTo({x:t.center.x,y:t.center.y,scale:this.startTransform.scale*t.scale,bounds:!1,easing:"linear"})}},{key:"onPinchEnd",value:function(t){var e,n,i,r=this;!1!==this.pinching&&(e=this.getActivePageSpread().getMaxZoomScale(),i=Math.max(1,Math.min(this.transform.scale,e)),n=this.getPosition(),1===this.startTransform.scale&&i>1?this.trigger("zoomedIn",{position:n}):this.startTransform.scale>1&&1===i&&this.trigger("zoomedOut",{position:n}),this.zoomTo({x:t.center.x,y:t.center.y,scale:i,duration:this.zoomDuration},function(){r.pinching=!1,r.el.setAttribute("data-pinching",!1)}))}},{key:"onPress",value:function(t){this.trigger("pressed",this.getCoordinateInfo(t.center.x,t.center.y,this.getActivePageSpread()))}},{key:"onContextmenu",value:function(t){return t.preventDefault(),this.trigger("contextmenu",this.getCoordinateInfo(t.clientX,t.clientY,this.getActivePageSpread())),!1}},{key:"onSingletap",value:function(t){var e,n,i,r,o,s,a,l=this;e=this.getActivePageSpread(),n=this.getCoordinateInfo(t.center.x,t.center.y,e),clearTimeout(this.tap.timeout),1===this.tap.count?(this.tap.count=0,this.trigger("doubleClicked",n),e.isZoomable()&&(i=e.getMaxZoomScale(),o=(a=this.transform.scale>1)?1:i,s=a?"zoomedOut":"zoomedIn",r=this.getPosition(),this.zoomTo({x:t.center.x,y:t.center.y,scale:o,duration:this.zoomDuration},function(){l.trigger(s,{position:r})}))):(this.tap.count++,this.tap.timeout=setTimeout(function(){l.tap.count=0,l.trigger("clicked",n)},this.tap.delay))}},{key:"onTouchStart",value:function(t){this.getActivePageSpread().isScrollable()||t.preventDefault()}},{key:"onTouchEnd",value:function(t){this.getActivePageSpread().isScrollable()||t.preventDefault()}},{key:"onResize",value:function(){var t,e;this.transform.scale>1&&(e=this.getPosition(),t=this.getActivePageSpread(),this.transform.left=this.getLeftTransformFromPageSpread(e,t),this.transform.top=0,this.transform.scale=1,this.zoomTo({x:this.transform.left,y:this.transform.top,scale:this.transform.scale,duration:0}),this.trigger("zoomedOut",{position:e}))}}]),t}(),rn.mixin(sn),sn}()});ne=l,re=K,ie=function(){function t(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e(this,t),this.options=n,this.contentsRendered=!1,this.hotspotsRendered=!1,this.el=this.renderEl()}return i(t,[{key:"getId",value:function(){return this.options.id}},{key:"getEl",value:function(){return this.el}},{key:"getPages",value:function(){return this.options.pages}},{key:"renderEl",value:function(){var t,e;return t=document.createElement("div"),e=this.getPages().map(function(t){return t.id}),t.className="verso__page-spread sgn-pp__page-spread",t.setAttribute("data-id",this.getId()),t.setAttribute("data-type","page"),t.setAttribute("data-width",this.options.width),t.setAttribute("data-page-ids",e.join(",")),t.setAttribute("data-max-zoom-scale",this.options.maxZoomScale),t.setAttribute("data-zoomable",!1),t}},{key:"renderContents",value:function(){var t,e,n,i,r,o=this;return e=this.getId(),t=this.getEl(),r=this.getPages(),i=r.length,n=0,r.forEach(function(s,a){var l,u,c;l=s.images.medium,c=document.createElement("div"),u=document.createElement("div"),c.className="sgn-pp__page verso__page",null!=s.id&&c.setAttribute("data-id",s.id),2===i&&(c.className+=0===a?" verso-page--verso":" verso-page--recto"),c.appendChild(u),t.appendChild(c),u.className="sgn-pp-page__loader",u.innerHTML="<span>".concat(s.label,"</span>"),re.util.loadImage(l,function(a,h,d){var p;null==a?(p=++n===i,c.style.backgroundImage="url(".concat(l,")"),c.setAttribute("data-width",h),c.setAttribute("data-height",d),c.innerHTML="&nbsp;",p&&t.setAttribute("data-zoomable",!0),o.trigger("pageLoaded",{pageSpreadId:e,page:s}),p&&o.trigger("pagesLoaded",{pageSpreadId:e,pages:r})):u.innerHTML="<span>!</span>"})}),this.contentsRendered=!0,this}},{key:"clearContents",value:function(t,e){return this.el.innerHTML="",this.contentsRendered=!1,this}},{key:"zoomIn",value:function(){var t,e,n=this;t=[].slice.call(this.el.querySelectorAll(".sgn-pp__page")),e=this.getPages(),t.forEach(function(t){var i,r,o;i=t.getAttribute("data-id"),o=e.find(function(t){return t.id===i}),r=o.images.large,re.util.loadImage(r,function(e){null==e&&"true"===n.el.getAttribute("data-active")&&(t.setAttribute("data-image",t.style.backgroundImage),t.style.backgroundImage="url(".concat(r,")"))})})}},{key:"zoomOut",value:function(){[].slice.call(this.el.querySelectorAll(".sgn-pp__page[data-image]")).forEach(function(t){t.style.backgroundImage=t.getAttribute("data-image"),t.removeAttribute("data-image")})}}]),t}(),ne.mixin(ie),oe=l,se=ie,le=K,ae=function(){function t(n){e(this,t),this.options=n,this.collection=[],this.ids={}}return i(t,[{key:"get",value:function(t){return this.ids[t]}},{key:"getFrag",value:function(){var t;return t=document.createDocumentFragment(),this.collection.forEach(function(e){return t.appendChild(e.el)}),t}},{key:"update",value:function(){var t,e,n,i,r,o,s,a,l=this,u=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"single";return o=[],e={},s=this.options.pages.slice(),a=this.options.width,i=this.options.maxZoomScale,"single"===u?s.forEach(function(t){return o.push([t])}):(t=s.shift(),n=s.length%2==1?s.pop():null,r=le.util.chunk(s,2),null!=t&&o.push([t]),r.forEach(function(t){return o.push(t.map(function(t){return t}))}),null!=n&&o.push([n])),this.collection=o.map(function(t,n){var r,o;return r="".concat(u,"-").concat(n),(o=new se({width:a,maxZoomScale:i,pages:t,id:r})).bind("pageLoaded",function(t){return l.trigger("pageLoaded",t)}),o.bind("pagesLoaded",function(t){return l.trigger("pagesLoaded",t)}),e[r]=o,o}),this.ids=e,this}}]),t}(),oe.mixin(ae),ue=l,pe=fe,ce=ae,de=K,he=function(){var t=function(){function t(n){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e(this,t),this.options=this.makeOptions(i,this.defaults),this.pageId=this.getOption("pageId"),this.els={root:n,pages:n.querySelector(".sgn-pp__pages"),verso:n.querySelector(".verso")},this.pageMode=this.getPageMode(),this.pageSpreads=new ce({pages:this.getOption("pages"),maxZoomScale:this.getOption("pageSpreadMaxZoomScale"),width:this.getOption("pageSpreadWidth")}),this.pageSpreads.bind("pageLoaded",this.pageLoaded.bind(this)),this.pageSpreads.bind("pagesLoaded",this.pagesLoaded.bind(this)),this.setColor(this.getOption("color")),this.els.pages.parentNode.insertBefore(this.pageSpreads.update(this.pageMode).getFrag(),this.els.pages),this.verso=this.createVerso(),this.bind("started",this.start.bind(this)),this.bind("destroyed",this.destroy.bind(this))}return i(t,[{key:"start",value:function(){this.getVerso().start(),this.visibilityChangeListener=this.visibilityChange.bind(this),this.resizeListener=de.util.throttle(this.resize,this.getOption("resizeDelay"),this),this.unloadListener=this.unload.bind(this),document.addEventListener("visibilitychange",this.visibilityChangeListener,!1),window.addEventListener("resize",this.resizeListener,!1),window.addEventListener("beforeunload",this.unloadListener,!1),this.els.root.setAttribute("data-started",""),this.els.root.setAttribute("tabindex","-1"),this.els.root.focus()}},{key:"destroy",value:function(){var t,e,n,i,r;for(i=(r=this.getVerso()).el.querySelectorAll(".sgn-pp__page-spread"),this.els.root.removeAttribute("data-started"),this.els.root.removeAttribute("data-idle"),this.els.root.removeAttribute("data-navigating"),this.els.root.removeAttribute("data-color-brightness"),this.els.root.removeAttribute("data-zoomed-in"),this.els.root.style.backgroundColor="#ffffff",t=0,e=i.length;t<e;t++)(n=i[t]).parentNode.removeChild(n);r.destroy(),document.removeEventListener("visibilitychange",this.visibilityChangeListener,!1),window.removeEventListener("resize",this.resizeListener,!1),window.removeEventListener("beforeunload",this.unloadListener,!1)}},{key:"makeOptions",value:function(t,e){var n,i,r;for(n in i={},t)t[n],i[n]=null!=(r=t[n])?r:e[n];return i}},{key:"getOption",value:function(t){return this.options[t]}},{key:"setColor",value:function(t){this.els.root.setAttribute("data-color-brightness",de.util.getColorBrightness(t)),this.els.root.style.backgroundColor=t}},{key:"createVerso",value:function(){var t;return(t=new pe(this.els.verso,{pageId:this.pageId})).pageSpreads.forEach(this.overridePageSpreadContentRect.bind(this)),t.bind("beforeNavigation",this.beforeNavigation.bind(this)),t.bind("afterNavigation",this.afterNavigation.bind(this)),t.bind("attemptedNavigation",this.attemptedNavigation.bind(this)),t.bind("clicked",this.clicked.bind(this)),t.bind("doubleClicked",this.doubleClicked.bind(this)),t.bind("pressed",this.pressed.bind(this)),t.bind("contextmenu",this.contextmenu.bind(this)),t.bind("panStart",this.panStart.bind(this)),t.bind("panEnd",this.panEnd.bind(this)),t.bind("zoomedIn",this.zoomedIn.bind(this)),t.bind("zoomedOut",this.zoomedOut.bind(this)),t}},{key:"getVerso",value:function(){return this.verso}},{key:"getContentRect",value:function(t){var e,n,i,r,o,s,a,l,u,c,h;return c={top:0,left:0,right:0,bottom:0,width:0,height:0},s=(a=t.getPageEls())[0],(o=a.length)?(h=this.getVerso().transform.scale,u=s.offsetWidth*o*h,n=(e=l=s.offsetHeight*h)/(r=+s.getAttribute("data-height")/(+s.getAttribute("data-width")*o)),e=(n=Math.min(u,n))*r,i=s.getBoundingClientRect(),c.width=n,c.height=e,c.top=i.top+(l-e)/2,c.left=i.left+(u-n)/2,c.right=c.width+c.left,c.bottom=c.height+c.top,c):c}},{key:"formatProgressLabel",value:function(t){var e,n,i,r,o;return n=(r=null!=(o=null!=t?t.options.pages:void 0)?o:[]).map(function(t){return t.id}),i=r.map(function(t){return t.label}),e=this.getOption("pages").length,n.length>0?i.join("-")+" / "+e:null}},{key:"renderPageSpreads",value:function(){var t=this;return this.getVerso().pageSpreads.forEach(function(e){var n,i;i=e.getVisibility(),null!=(n=t.pageSpreads.get(e.getId()))&&("visible"===i&&!1===n.contentsRendered&&setTimeout(n.renderContents.bind(n),0),"gone"===i&&!0===n.contentsRendered&&setTimeout(n.clearContents.bind(n),0))}),this}},{key:"findPage",value:function(t){return this.getOption("pages").find(function(e){return e.id===t})}},{key:"pageLoaded",value:function(t){this.trigger("pageLoaded",t)}},{key:"pagesLoaded",value:function(t){this.trigger("pagesLoaded",t)}},{key:"beforeNavigation",value:function(t){var e,n,i,r,o,s,a,l;r=t.newPosition,l=(a=this.getVerso()).getPageSpreadFromPosition(r),n=this.pageSpreads.get(l.getId()),i=a.getPageSpreadCount(),e=a.pageSpreadEls[t.newPosition],o=r/(i-1)*100,s=this.formatProgressLabel(n),this.els.root.setAttribute("data-navigating",!0),this.renderPageSpreads(),this.resetIdleTimer(),this.startIdleTimer(),this.trigger("beforeNavigation",{verso:t,pageSpread:n,newSpreadEl:e,progress:o,progressLabel:s,pageSpreadCount:i,newPositionIsEnd:t.newPosition+1===i})}},{key:"afterNavigation",value:function(t){var e,n,i,r,o,s;r=t.newPosition,s=(o=this.getVerso()).getPageSpreadFromPosition(r),n=this.pageSpreads.get(s.getId()),i=o.getPageSpreadCount(),e=o.pageSpreadEls[t.newPosition],this.els.root.setAttribute("data-navigating",!1),this.trigger("afterNavigation",{verso:t,pageSpread:n,pageSpreadCount:i,newSpreadEl:e,newPositionIsEnd:t.newPosition+1===i})}},{key:"attemptedNavigation",value:function(t){this.trigger("attemptedNavigation",{verso:t})}},{key:"clicked",value:function(t){var e,n;t.isInsideContent&&(n=t.pageEl.getAttribute("data-id"),e=this.findPage(n),this.trigger("clicked",{verso:t,page:e}))}},{key:"doubleClicked",value:function(t){var e,n;t.isInsideContent&&(n=t.pageEl.getAttribute("data-id"),e=this.findPage(n),this.trigger("doubleClicked",{verso:t,page:e}))}},{key:"pressed",value:function(t){var e,n;t.isInsideContent&&(n=t.pageEl.getAttribute("data-id"),e=this.findPage(n),this.trigger("pressed",{verso:t,page:e}))}},{key:"contextmenu",value:function(t){var e,n;t.isInsideContent&&(n=t.pageEl.getAttribute("data-id"),e=this.findPage(n),this.trigger("contextmenu",{verso:t,page:e}))}},{key:"panStart",value:function(){this.resetIdleTimer(),this.trigger("panStart",{scale:this.getVerso().transform.scale})}},{key:"panEnd",value:function(){this.startIdleTimer(),this.trigger("panEnd")}},{key:"zoomedIn",value:function(t){var e,n,i;n=t.position,i=this.getVerso().getPageSpreadFromPosition(n),null!=(e=this.pageSpreads.get(i.getId()))&&e.zoomIn(),this.els.root.setAttribute("data-zoomed-in",!0),this.trigger("zoomedIn",{verso:t,pageSpread:e})}},{key:"zoomedOut",value:function(t){var e,n,i;n=t.position,i=this.getVerso().getPageSpreadFromPosition(n),null!=(e=this.pageSpreads.get(i.getId()))&&e.zoomOut(),this.els.root.setAttribute("data-zoomed-in",!1),this.trigger("zoomedOut",{verso:t,pageSpread:e})}},{key:"getPageMode",value:function(){var t,e;return null==(t=this.getOption("pageMode"))&&(e=this.els.root.offsetWidth,t=this.els.root.offsetHeight/e<.8?"double":"single"),t}},{key:"resetIdleTimer",value:function(){return clearTimeout(this.idleTimeout),this.els.root.setAttribute("data-idle",!1),this}},{key:"startIdleTimer",value:function(){var t=this;return this.idleTimeout=setTimeout(function(){t.els.root.setAttribute("data-idle",!0)},this.getOption("idleDelay")),this}},{key:"switchPageMode",value:function(t){var e,n,i,r,o,s;if(this.pageMode===t)return this;for(i=(s=this.getVerso()).getPageSpreadFromPosition(s.getPosition()).getPageIds(),o=this.getVerso().el.querySelectorAll(".sgn-pp__page-spread"),this.pageMode=t,this.pageSpreads.update(this.pageMode),e=0,n=o.length;e<n;e++)(r=o[e]).parentNode.removeChild(r);return this.els.pages.parentNode.insertBefore(this.pageSpreads.getFrag(),this.els.pages),s.refresh(),s.navigateTo(s.getPageSpreadPositionFromPageId(i[0]),{duration:0}),s.pageSpreads.forEach(this.overridePageSpreadContentRect.bind(this)),this}},{key:"overridePageSpreadContentRect",value:function(t){var e=this;if("page"===t.getType())return t.getContentRect=function(){return e.getContentRect(t)}}},{key:"visibilityChange",value:function(){var t,e;e=this.getVerso().getPageSpreadFromPosition(this.getVerso().getPosition()),t=!0===document.hidden?"disappeared":"appeared",this.trigger(t,{pageSpread:this.pageSpreads.get(e.id)})}},{key:"resize",value:function(){var t;t=this.getPageMode(),null==this.getOption("pageMode")&&t!==this.pageMode?this.switchPageMode(t):this.trigger("resized")}},{key:"unload",value:function(){this.trigger("disappeared")}}]),t}();return t.prototype.defaults={pages:[],pageSpreadWidth:100,pageSpreadMaxZoomScale:2.3,idleDelay:1e3,resizeDelay:400,color:"#ffffff"},t}.call(r),ue.mixin(he);var ge,ve,ye,me=he;ge=l,ve=p,ye=function(){function t(){e(this,t),this.currentPageSpreadId=null,this.pageSpreadsLoaded={},this.cache={},this.bind("hotspotsReceived",this.hotspotsReceived.bind(this)),this.bind("afterNavigation",this.afterNavigation.bind(this)),this.bind("pagesLoaded",this.pagesLoaded.bind(this)),this.bind("resized",this.resized.bind(this))}return i(t,[{key:"renderHotspots",value:function(t){var e,n,i,r,o,s,a,l,u,c,h,d,p;for(r=document.createDocumentFragment(),n=t.versoPageSpread.getContentRect(),a=(h=t.pageSpread.getEl()).querySelectorAll(".sgn-pp__hotspot"),e=h.getBoundingClientRect(),l=0,c=a.length;l<c;l++)(s=a[l]).parentNode.removeChild(s);for(u in p=t.hotspots)o=p[u],d=this.getPosition(t.pages,t.ratio,o),i=this.renderHotspot(o,d,n,e),r.appendChild(i);return h.appendChild(r),this}},{key:"renderHotspot",value:function(t,e,n,i){var r,o,s,a,l,u;return r=document.createElement("div"),l=Math.round(n.height/100*e.top),s=Math.round(n.width/100*e.left),u=Math.round(n.width/100*e.width),o=Math.round(n.height/100*e.height),l+=Math.round(n.top),s+=Math.round(n.left),l-=i.top,s-=i.left,r.className="sgn-pp__hotspot verso__overlay",null!=t.id&&r.setAttribute("data-id",t.id),null!=t.type&&r.setAttribute("data-type",t.type),r.innerHTML=ve.render(null!=(a=t.template)?a:"",t),r.style.top="".concat(l,"px"),r.style.left="".concat(s,"px"),r.style.width="".concat(u,"px"),r.style.height="".concat(o,"px"),r}},{key:"getPosition",value:function(t,e,n){var i,r,o,s,a,l;for(a in o=null,s=null,i=null,r=null,l=t.map(function(t){return t.pageNumber}),n.locations)-1!==l.indexOf(+a)&&n.locations[a].forEach(function(e){var n,u;if(n=e[0],u=e[1],t[1]&&l[1]===+a&&(n+=1),n/=t.length,null==o&&(o=i=n,s=r=u),n<o&&(o=n),n>i&&(i=n),u<s&&(s=u),u>r)return r=u});return{top:s/e*100,left:100*o,width:100*(i-o),height:(r-s)/e*100}}},{key:"requestHotspots",value:function(t,e){this.trigger("hotspotsRequested",{id:t,pages:e})}},{key:"hotspotsReceived",value:function(t){var e;e=t.pageSpread.getId(),this.setCache(e,t),this.renderHotspots(t)}},{key:"getCache",value:function(t){return this.cache[t]}},{key:"setCache",value:function(t,e){return this.cache[t]=e,this}},{key:"afterNavigation",value:function(t){var e;null!=t.pageSpread&&(e=t.pageSpread.getId(),this.currentPageSpreadId=e,this.pageSpreadsLoaded[e]&&this.requestHotspots(e,t.pageSpread.getPages()))}},{key:"pagesLoaded",value:function(t){this.pageSpreadsLoaded[t.pageSpreadId]=!0,this.currentPageSpreadId===t.pageSpreadId&&this.requestHotspots(t.pageSpreadId,t.pages)}},{key:"resized",value:function(t){var e;null!=(e=this.getCache(this.currentPageSpreadId))&&this.renderHotspots(e)}}]),t}(),ge.mixin(ye);var be,_e,ke,we,Se=ye,xe={ESC:27,ARROW_RIGHT:39,ARROW_LEFT:37,SPACE:32,NUMBER_ONE:49};be=l,ke=K,we=xe,_e=function(){function t(n){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e(this,t),this.options=i,this.els={root:n,progress:n.querySelector(".sgn-pp__progress"),progressBar:n.querySelector(".sgn-pp-progress__bar"),progressLabel:n.querySelector(".sgn-pp__progress-label"),prevControl:n.querySelector(".sgn-pp__control[data-direction=prev]"),nextControl:n.querySelector(".sgn-pp__control[data-direction=next]"),close:n.querySelector(".sgn-pp--close")},this.keyDownListener=ke.util.throttle(this.keyDown,150,this),!0===this.options.keyboard&&this.els.root.addEventListener("keydown",this.keyDownListener,!1),null!=this.els.prevControl&&this.els.prevControl.addEventListener("click",this.prevClicked.bind(this),!1),null!=this.els.nextControl&&this.els.nextControl.addEventListener("click",this.nextClicked.bind(this),!1),null!=this.els.close&&this.els.close.addEventListener("click",this.closeClicked.bind(this),!1),this.bind("beforeNavigation",this.beforeNavigation.bind(this))}return i(t,[{key:"destroy",value:function(){this.els.root.removeEventListener("keydown",this.keyDownListener)}},{key:"beforeNavigation",value:function(t){var e;e="string"==typeof t.progressLabel&&t.progressLabel.length>0,null!=this.els.progress&&null!=this.els.progressBar&&(this.els.progressBar.style.width="".concat(t.progress,"%"),!0===e?this.els.progress.classList.remove("sgn-pp--hidden"):this.els.progress.classList.add("sgn-pp--hidden")),null!=this.els.progressLabel&&(!0===e?(this.els.progressLabel.textContent=t.progressLabel,this.els.progressLabel.classList.remove("sgn-pp--hidden")):this.els.progressLabel.classList.add("sgn-pp--hidden")),null!=this.els.prevControl&&(0===t.verso.newPosition?this.els.prevControl.classList.add("sgn-pp--hidden"):this.els.prevControl.classList.remove("sgn-pp--hidden")),null!=this.els.nextControl&&(t.verso.newPosition===t.pageSpreadCount-1?this.els.nextControl.classList.add("sgn-pp--hidden"):this.els.nextControl.classList.remove("sgn-pp--hidden"))}},{key:"prevClicked",value:function(t){t.preventDefault(),this.trigger("prev")}},{key:"nextClicked",value:function(t){t.preventDefault(),this.trigger("next")}},{key:"closeClicked",value:function(t){t.preventDefault(),this.trigger("close")}},{key:"keyDown",value:function(t){var e;e=t.keyCode,we.ARROW_LEFT===e?this.trigger("prev",{duration:0}):we.ARROW_RIGHT===e||we.SPACE===e?this.trigger("next",{duration:0}):we.NUMBER_ONE===e&&this.trigger("first",{duration:0})}}]),t}(),be.mixin(_e);var Ee,Te,Pe,Ce,Oe,Ie,Ae,Le,Ne,Re,Me=_e;Ee=l,Te=function(){function t(){e(this,t),this.doubleClicked=this.doubleClicked.bind(this),this.hidden=!0,this.pageSpread=null,this.bind("appeared",this.appeared.bind(this)),this.bind("disappeared",this.disappeared.bind(this)),this.bind("beforeNavigation",this.beforeNavigation.bind(this)),this.bind("afterNavigation",this.afterNavigation.bind(this)),this.bind("attemptedNavigation",this.attemptedNavigation.bind(this)),this.bind("clicked",this.clicked.bind(this)),this.bind("doubleClicked",this.doubleClicked.bind(this)),this.bind("pressed",this.pressed.bind(this)),this.bind("panStart",this.panStart.bind(this)),this.bind("zoomedIn",this.zoomedIn.bind(this)),this.bind("zoomedOut",this.zoomedOut.bind(this)),this.bind("destroyed",this.destroy.bind(this))}return i(t,[{key:"destroy",value:function(){this.pageSpreadDisappeared()}},{key:"trackEvent",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.trigger("trackEvent",{type:t,properties:e})}},{key:"trackOpened",value:function(t){return this.trackEvent("paged-publication-opened",t),this}},{key:"trackPageClicked",value:function(t){return this.trackEvent("paged-publication-page-clicked",t),this}},{key:"trackPageDoubleClicked",value:function(t){return this.trackEvent("paged-publication-page-double-clicked",t),this}},{key:"trackPageLongPressed",value:function(t){return this.trackEvent("paged-publication-page-long-pressed",t),this}},{key:"trackPageHotspotsClicked",value:function(t){return this.trackEvent("paged-publication-page-hotspots-clicked",t),this}},{key:"trackPageSpreadAppeared",value:function(t){return this.trackEvent("paged-publication-page-spread-appeared",t),this}},{key:"trackPageSpreadDisappeared",value:function(t){return this.trackEvent("paged-publication-page-spread-disappeared",t),this}},{key:"trackPageSpreadZoomedIn",value:function(t){return this.trackEvent("paged-publication-page-spread-zoomed-in",t),this}},{key:"trackPageSpreadZoomedOut",value:function(t){return this.trackEvent("paged-publication-page-spread-zoomed-out",t),this}},{key:"appeared",value:function(t){this.pageSpreadAppeared(t.pageSpread)}},{key:"disappeared",value:function(){this.pageSpreadDisappeared()}},{key:"beforeNavigation",value:function(){this.pageSpreadDisappeared()}},{key:"afterNavigation",value:function(t){this.pageSpreadAppeared(t.pageSpread)}},{key:"attemptedNavigation",value:function(t){this.pageSpreadAppeared(t.pageSpread)}},{key:"clicked",value:function(t){var e;null!=t.page&&(e={pageNumber:t.page.pageNumber,x:t.verso.pageX,y:t.verso.pageY},this.trackPageClicked({pagedPublicationPage:e}),t.verso.overlayEls.length>0&&this.trackPageHotspotsClicked({pagedPublicationPage:e}))}},{key:"doubleClicked",value:function(t){null!=t.page&&this.trackPageDoubleClicked({pagedPublicationPage:{pageNumber:t.page.pageNumber,x:t.verso.pageX,y:t.verso.pageY}})}},{key:"pressed",value:function(t){null!=t.page&&this.trackPageLongPressed({pagedPublicationPage:{pageNumber:t.page.pageNumber,x:t.verso.pageX,y:t.verso.pageY}})}},{key:"panStart",value:function(t){1===t.scale&&this.pageSpreadDisappeared()}},{key:"zoomedIn",value:function(t){null!=t.pageSpread&&this.trackPageSpreadZoomedIn({pagedPublicationPageSpread:{pageNumbers:t.pageSpread.getPages().map(function(t){return t.pageNumber})}})}},{key:"zoomedOut",value:function(t){null!=t.pageSpread&&this.trackPageSpreadZoomedOut({pagedPublicationPageSpread:{pageNumbers:t.pageSpread.getPages().map(function(t){return t.pageNumber})}})}},{key:"pageSpreadAppeared",value:function(t){null!=t&&!0===this.hidden&&(this.pageSpread=t,this.trackPageSpreadAppeared({pagedPublicationPageSpread:{pageNumbers:t.getPages().map(function(t){return t.pageNumber})}}),this.hidden=!1)}},{key:"pageSpreadDisappeared",value:function(){null!=this.pageSpread&&!1===this.hidden&&(this.trackPageSpreadDisappeared({pagedPublicationPageSpread:{pageNumbers:this.pageSpread.getPages().map(function(t){return t.pageNumber})}}),this.hidden=!0,this.pageSpread=null)}}]),t}(),Ee.mixin(Te),Ae=l,Le=K,Ce=me,Ie=Se,Pe=Me,Oe=Te,Ne=function(){function t(n){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e(this,t),this.el=n,this.options=i,this._core=new Ce(this.el,{id:this.options.id,pages:this.options.pages,pageSpreadWidth:this.options.pageSpreadWidth,pageSpreadMaxZoomScale:this.options.pageSpreadMaxZoomScale,pageId:this.options.pageId,idleDelay:this.options.idleDelay,resizeDelay:this.options.resizeDelay,color:this.options.color}),this._hotspots=new Ie,this._controls=new Pe(this.el,{keyboard:this.options.keyboard}),this._eventTracking=new Oe,this.viewSession=Le.util.uuid(),this.hotspots=null,this.hotspotQueue=[],this.popover=null,this._setupEventListeners()}return i(t,[{key:"start",value:function(){return this._eventTracking.trackOpened(),this._core.trigger("started"),this}},{key:"destroy",value:function(){return this._core.trigger("destroyed"),this._hotspots.trigger("destroyed"),this._controls.trigger("destroyed"),this._eventTracking.trigger("destroyed"),this.trigger("destroyed"),this}},{key:"navigateTo",value:function(t,e){return this.navigateToIndex(t,e),this}},{key:"navigateToIndex",value:function(t,e){return this._core.getVerso().navigateTo(t,e),this}},{key:"navigateToPageId",value:function(t,e){var n;return n=this._core.getVerso().getPageSpreadPositionFromPageId(t),this._core.getVerso().navigateTo(n,e)}},{key:"first",value:function(t){return this._core.getVerso().first(t),this}},{key:"prev",value:function(t){return this._core.getVerso().prev(t),this}},{key:"next",value:function(t){return this._core.getVerso().next(t),this}},{key:"last",value:function(t){return this._core.getVerso().last(t),this}},{key:"_trackEvent",value:function(t){var e,n,i,r,o,s;for(n in o=t.type,"legacy",i={pagedPublication:{id:["legacy",this.options.id],ownedBy:["legacy",this.options.ownedBy]}},e=this.options.eventTracker,r=t.properties)s=r[n],i[n]=s;null!=e&&e.trackEvent(o,i)}},{key:"_setupEventListeners",value:function(){var t=this;this._eventTracking.bind("trackEvent",function(e){t._trackEvent(e)}),this._controls.bind("prev",function(e){t.prev(e)}),this._controls.bind("next",function(e){t.next(e)}),this._controls.bind("first",function(e){t.first(e)}),this._controls.bind("last",function(e){t.last(e)}),this._controls.bind("close",function(e){t.destroy(e)}),this._hotspots.bind("hotspotsRequested",function(e){t.trigger("hotspotsRequested",e)}),this._core.bind("appeared",function(e){t._eventTracking.trigger("appeared",e),t.trigger("appeared",e)}),this._core.bind("disappeared",function(e){t._eventTracking.trigger("disappeared",e),t.trigger("disappeared",e)}),this._core.bind("beforeNavigation",function(e){t._eventTracking.trigger("beforeNavigation",e),t._controls.trigger("beforeNavigation",e),t.trigger("beforeNavigation",e)}),this._core.bind("afterNavigation",function(e){t._eventTracking.trigger("afterNavigation",e),t._hotspots.trigger("afterNavigation",e),t.trigger("afterNavigation",e)}),this._core.bind("attemptedNavigation",function(e){t._eventTracking.trigger("attemptedNavigation",e),t.trigger("attemptedNavigation",e)}),this._core.bind("clicked",function(e){t._eventTracking.trigger("clicked",e),t.trigger("clicked",e)}),this._core.bind("doubleClicked",function(e){t._eventTracking.trigger("doubleClicked",e),t.trigger("doubleClicked",e)}),this._core.bind("contextmenu",function(e){t.trigger("contextmenu",e)}),this._core.bind("pressed",function(e){t._eventTracking.trigger("pressed",e),t.trigger("pressed",e)}),this._core.bind("panStart",function(e){t._eventTracking.trigger("panStart",e),t.trigger("panStart",e)}),this._core.bind("zoomedIn",function(e){t._eventTracking.trigger("zoomedIn",e),t.trigger("zoomedIn",e)}),this._core.bind("zoomedOut",function(e){t._eventTracking.trigger("zoomedOut",e),t.trigger("zoomedOut",e)}),this._core.bind("pageLoaded",function(e){t._eventTracking.trigger("pageLoaded",e),t.trigger("pageLoaded",e)}),this._core.bind("pagesLoaded",function(e){t._hotspots.trigger("pagesLoaded",e),t.trigger("pagesLoaded",e)}),this._core.bind("resized",function(e){t._hotspots.trigger("resized"),t.trigger("resized",e)}),this.bind("hotspotsRequested",this.hotspotsRequested.bind(this)),this.bind("beforeNavigation",this.beforeNavigation.bind(this)),this.bind("clicked",this.clicked.bind(this)),this.bind("contextmenu",this.contextmenu.bind(this)),this.bind("pressed",this.pressed.bind(this))}},{key:"pickHotspot",value:function(t,e){var n,i=this;null!=this.hotspots&&(null!=this.popover&&(this.popover.destroy(),this.popover=null),1===(n=t.verso.overlayEls.map(function(t){return i.hotspots[t.getAttribute("data-id")]})).length?e(n[0]):n.length>1&&(this.popover=Le.CoreUIKit.singleChoicePopover({el:this.el,header:Le.translations.t("paged_publication.hotspot_picker.header"),x:t.verso.x,y:t.verso.y,items:n.filter(function(t){return"offer"===t.type}).map(function(t){return{id:t.id,title:t.offer.heading,subtitle:t.offer.pricing.currency+""+t.offer.pricing.price}})},function(t){e(i.hotspots[t.id])})))}},{key:"processHotspotQueue",value:function(){var t=this;null!=this.hotspots&&(this.hotspotQueue=this.hotspotQueue.filter(function(e){var n,i,r,o,s,a,l,u,c;for(o in i={},c=t._core.getVerso().pageSpreads.find(function(t){return t.getId()===e.id}),l=t.hotspots)if(n=l[o],null==i[o])for(r=0,s=(u=e.pages).length;r<s;r++)if(a=u[r],null!=n.locations[a.pageNumber]){i[o]={type:n.type,id:n.id,locations:n.locations};break}return t._hotspots.trigger("hotspotsReceived",{pageSpread:t._core.pageSpreads.get(e.id),versoPageSpread:c,ratio:t.options.hotspotRatio,pages:e.pages,hotspots:i}),!1}))}},{key:"hotspotsRequested",value:function(t){this.hotspotQueue.push(t),this.processHotspotQueue()}},{key:"applyHotspots",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.hotspots=t,this.processHotspotQueue()}},{key:"beforeNavigation",value:function(){null!=this.popover&&this.popover.destroy()}},{key:"clicked",value:function(t){var e=this;this.pickHotspot(t,function(t){e.trigger("hotspotClicked",t)})}},{key:"contextmenu",value:function(t){var e=this;this.pickHotspot(t,function(t){e.trigger("hotspotContextmenu",t)})}},{key:"pressed",value:function(t){var e=this;this.pickHotspot(t,function(t){e.trigger("hotspotPressed",t)})}}]),t}(),Ae.mixin(Ne),Re=G;var De,ze,je,Fe={Viewer:Ne,Bootstrapper:function(){function t(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e(this,t),this.options=n}return i(t,[{key:"createViewer",value:function(t){return new Re.PagedPublicationKit.Viewer(this.options.el,{id:this.options.id,ownedBy:t.details.dealer_id,color:"#"+t.details.branding.pageflip.color,hotspotRatio:t.details.dimensions.height,keyboard:!0,pageId:this.options.pageId,eventTracker:this.options.eventTracker,pages:this.transformPages(t.pages)})}},{key:"transformPages",value:function(t){return t.map(function(t,e){var n;return{id:"page"+(n=e+1),label:n+"",pageNumber:n,images:{medium:t.view,large:t.zoom}}})}},{key:"applyHotspots",value:function(t,e){var n;n={},e.forEach(function(t){return n[t.id]=t}),t.applyHotspots(n)}},{key:"fetch",value:function(t){Re.util.async.parallel([this.fetchDetails.bind(this),this.fetchPages.bind(this)],function(e){var n;null!=(n={details:e[0][1],pages:e[1][1]}).details&&null!=n.pages?t(null,n):t(new Error)})}},{key:"fetchDetails",value:function(t){Re.CoreKit.request({url:"/v2/catalogs/".concat(this.options.id)},t)}},{key:"fetchPages",value:function(t){Re.CoreKit.request({url:"/v2/catalogs/".concat(this.options.id,"/pages")},t)}},{key:"fetchHotspots",value:function(t){Re.CoreKit.request({url:"/v2/catalogs/".concat(this.options.id,"/hotspots")},t)}}]),t}()},Ue=o(function(t,e){t.exports=function(){function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function i(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),t}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function s(t,e){if(e&&("object"==typeof e||"function"==typeof e))return e;if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var a=function(t){return"object"==typeof t?null!==t:"function"==typeof t},l=function(t){if(!a(t))throw TypeError(t+" is not an object!");return t},u=function(t){try{return!!t()}catch(t){return!0}},c=!u(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}),h="undefined"!=typeof window?window:void 0!==r?r:"undefined"!=typeof self?self:{};function d(t,e){return t(e={exports:{}},e.exports),e.exports}var p=d(function(t){var e=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=e)}),f=p.document,g=a(f)&&a(f.createElement),v=function(t){return g?f.createElement(t):{}},y=!c&&!u(function(){return 7!=Object.defineProperty(v("div"),"a",{get:function(){return 7}}).a}),m=function(t,e){if(!a(t))return t;var n,i;if(e&&"function"==typeof(n=t.toString)&&!a(i=n.call(t)))return i;if("function"==typeof(n=t.valueOf)&&!a(i=n.call(t)))return i;if(!e&&"function"==typeof(n=t.toString)&&!a(i=n.call(t)))return i;throw TypeError("Can't convert object to primitive value")},b=Object.defineProperty,_={f:c?Object.defineProperty:function(t,e,n){if(l(t),e=m(e,!0),l(n),y)try{return b(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},k=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},w=c?function(t,e,n){return _.f(t,e,k(1,n))}:function(t,e,n){return t[e]=n,t},S={}.hasOwnProperty,x=function(t,e){return S.call(t,e)},E=0,T=Math.random(),P=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++E+T).toString(36))},C=d(function(t){var e=t.exports={version:"2.5.3"};"number"==typeof __e&&(__e=e)}),O=(C.version,d(function(t){var e=P("src"),n=Function.toString,i=(""+n).split("toString");C.inspectSource=function(t){return n.call(t)},(t.exports=function(t,n,r,o){var s="function"==typeof r;s&&(x(r,"name")||w(r,"name",n)),t[n]!==r&&(s&&(x(r,e)||w(r,e,t[n]?""+t[n]:i.join(String(n)))),t===p?t[n]=r:o?t[n]?t[n]=r:w(t,n,r):(delete t[n],w(t,n,r)))})(Function.prototype,"toString",function(){return"function"==typeof this&&this[e]||n.call(this)})})),I=function(t){if(null==t)throw TypeError("Can't call method on  "+t);return t},A=p["__core-js_shared__"]||(p["__core-js_shared__"]={}),L=function(t){return A[t]||(A[t]={})},N=d(function(t){var e=L("wks"),n=p.Symbol,i="function"==typeof n,r=t.exports=function(t){return e[t]||(e[t]=i&&n[t]||(i?n:P)("Symbol."+t))};r.store=e}),R=function(t,e,n){var i=N(t),r=n(I,i,""[t]),o=r[0],s=r[1];u(function(){var e={};return e[i]=function(){return 7},7!=""[t](e)})&&(O(String.prototype,t,o),w(RegExp.prototype,i,2==e?function(t,e){return s.call(t,this,e)}:function(t){return s.call(t,this)}))};R("replace",2,function(t,e,n){return[function(i,r){var o=t(this),s=null==i?void 0:i[e];return void 0!==s?s.call(i,o,r):n.call(String(o),i,r)},n]});var M=function(t,e,n){if(function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!")}(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,i){return t.call(e,n,i)};case 3:return function(n,i,r){return t.call(e,n,i,r)}}return function(){return t.apply(e,arguments)}},D=function(t,e,n){var i,r,o,s,a=t&D.F,l=t&D.G,u=t&D.S,c=t&D.P,h=t&D.B,d=l?p:u?p[e]||(p[e]={}):(p[e]||{}).prototype,f=l?C:C[e]||(C[e]={}),g=f.prototype||(f.prototype={});for(i in l&&(n=e),n)r=!a&&d&&void 0!==d[i],o=(r?d:n)[i],s=h&&r?M(o,p):c&&"function"==typeof o?M(Function.call,o):o,d&&O(d,i,o,t&D.U),f[i]!=o&&w(f,i,s),c&&g[i]!=o&&(g[i]=o)};p.core=C,D.F=1,D.G=2,D.S=4,D.P=8,D.B=16,D.W=32,D.U=64,D.R=128;var z,j=D,F=d(function(t){var e=P("meta"),n=_.f,i=0,r=Object.isExtensible||function(){return!0},o=!u(function(){return r(Object.preventExtensions({}))}),s=function(t){n(t,e,{value:{i:"O"+ ++i,w:{}}})},l=t.exports={KEY:e,NEED:!1,fastKey:function(t,n){if(!a(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!x(t,e)){if(!r(t))return"F";if(!n)return"E";s(t)}return t[e].i},getWeak:function(t,n){if(!x(t,e)){if(!r(t))return!0;if(!n)return!1;s(t)}return t[e].w},onFreeze:function(t){return o&&l.NEED&&r(t)&&!x(t,e)&&s(t),t}}}),U=(F.KEY,F.NEED,F.fastKey,F.getWeak,F.onFreeze,_.f),q=N("toStringTag"),H=function(t,e,n){t&&!x(t=n?t:t.prototype,q)&&U(t,q,{configurable:!0,value:e})},W={f:N},V=_.f,B=function(t){var e=C.Symbol||(C.Symbol=p.Symbol||{});"_"==t.charAt(0)||t in e||V(e,t,{value:W.f(t)})},X={}.toString,Y=function(t){return X.call(t).slice(8,-1)},G=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==Y(t)?t.split(""):Object(t)},K=function(t){return G(I(t))},$=Math.ceil,Z=Math.floor,J=function(t){return isNaN(t=+t)?0:(t>0?Z:$)(t)},Q=Math.min,tt=Math.max,et=Math.min,nt=L("keys"),it=function(t){return nt[t]||(nt[t]=P(t))},rt=(z=!1,function(t,e,n){var i,r,o=K(t),s=(i=o.length)>0?Q(J(i),9007199254740991):0,a=function(t,e){return(t=J(t))<0?tt(t+e,0):et(t,e)}(n,s);if(z&&e!=e){for(;s>a;)if((r=o[a++])!=r)return!0}else for(;s>a;a++)if((z||a in o)&&o[a]===e)return z||a||0;return!z&&-1}),ot=it("IE_PROTO"),st=function(t,e){var n,i=K(t),r=0,o=[];for(n in i)n!=ot&&x(i,n)&&o.push(n);for(;e.length>r;)x(i,n=e[r++])&&(~rt(o,n)||o.push(n));return o},at="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","),lt=Object.keys||function(t){return st(t,at)},ut={f:Object.getOwnPropertySymbols},ct={f:{}.propertyIsEnumerable},ht=Array.isArray||function(t){return"Array"==Y(t)},dt=c?Object.defineProperties:function(t,e){l(t);for(var n,i=lt(e),r=i.length,o=0;r>o;)_.f(t,n=i[o++],e[n]);return t},pt=p.document,ft=pt&&pt.documentElement,gt=it("IE_PROTO"),vt=function(){},yt=function(){var t,e=v("iframe"),n=at.length;for(e.style.display="none",ft.appendChild(e),e.src="javascript:",(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),yt=t.F;n--;)delete yt.prototype[at[n]];return yt()},mt=Object.create||function(t,e){var n;return null!==t?(vt.prototype=l(t),n=new vt,vt.prototype=null,n[gt]=t):n=yt(),void 0===e?n:dt(n,e)},bt=at.concat("length","prototype"),_t={f:Object.getOwnPropertyNames||function(t){return st(t,bt)}},kt=_t.f,wt={}.toString,St="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],xt={f:function(t){return St&&"[object Window]"==wt.call(t)?function(t){try{return kt(t)}catch(t){return St.slice()}}(t):kt(K(t))}},Et=Object.getOwnPropertyDescriptor,Tt={f:c?Et:function(t,e){if(t=K(t),e=m(e,!0),y)try{return Et(t,e)}catch(t){}if(x(t,e))return k(!ct.f.call(t,e),t[e])}},Pt=F.KEY,Ct=Tt.f,Ot=_.f,It=xt.f,At=p.Symbol,Lt=p.JSON,Nt=Lt&&Lt.stringify,Rt=N("_hidden"),Mt=N("toPrimitive"),Dt={}.propertyIsEnumerable,zt=L("symbol-registry"),jt=L("symbols"),Ft=L("op-symbols"),Ut=Object.prototype,qt="function"==typeof At,Ht=p.QObject,Wt=!Ht||!Ht.prototype||!Ht.prototype.findChild,Vt=c&&u(function(){return 7!=mt(Ot({},"a",{get:function(){return Ot(this,"a",{value:7}).a}})).a})?function(t,e,n){var i=Ct(Ut,e);i&&delete Ut[e],Ot(t,e,n),i&&t!==Ut&&Ot(Ut,e,i)}:Ot,Bt=function(t){var e=jt[t]=mt(At.prototype);return e._k=t,e},Xt=qt&&"symbol"==typeof At.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof At},Yt=function(t,e,n){return t===Ut&&Yt(Ft,e,n),l(t),e=m(e,!0),l(n),x(jt,e)?(n.enumerable?(x(t,Rt)&&t[Rt][e]&&(t[Rt][e]=!1),n=mt(n,{enumerable:k(0,!1)})):(x(t,Rt)||Ot(t,Rt,k(1,{})),t[Rt][e]=!0),Vt(t,e,n)):Ot(t,e,n)},Gt=function(t,e){l(t);for(var n,i=function(t){var e=lt(t),n=ut.f;if(n)for(var i,r=n(t),o=ct.f,s=0;r.length>s;)o.call(t,i=r[s++])&&e.push(i);return e}(e=K(e)),r=0,o=i.length;o>r;)Yt(t,n=i[r++],e[n]);return t},Kt=function(t){var e=Dt.call(this,t=m(t,!0));return!(this===Ut&&x(jt,t)&&!x(Ft,t))&&(!(e||!x(this,t)||!x(jt,t)||x(this,Rt)&&this[Rt][t])||e)},$t=function(t,e){if(t=K(t),e=m(e,!0),t!==Ut||!x(jt,e)||x(Ft,e)){var n=Ct(t,e);return!n||!x(jt,e)||x(t,Rt)&&t[Rt][e]||(n.enumerable=!0),n}},Zt=function(t){for(var e,n=It(K(t)),i=[],r=0;n.length>r;)x(jt,e=n[r++])||e==Rt||e==Pt||i.push(e);return i},Jt=function(t){for(var e,n=t===Ut,i=It(n?Ft:K(t)),r=[],o=0;i.length>o;)!x(jt,e=i[o++])||n&&!x(Ut,e)||r.push(jt[e]);return r};qt||(O((At=function(){if(this instanceof At)throw TypeError("Symbol is not a constructor!");var t=P(arguments.length>0?arguments[0]:void 0),e=function(n){this===Ut&&e.call(Ft,n),x(this,Rt)&&x(this[Rt],t)&&(this[Rt][t]=!1),Vt(this,t,k(1,n))};return c&&Wt&&Vt(Ut,t,{configurable:!0,set:e}),Bt(t)}).prototype,"toString",function(){return this._k}),Tt.f=$t,_.f=Yt,_t.f=xt.f=Zt,ct.f=Kt,ut.f=Jt,c&&O(Ut,"propertyIsEnumerable",Kt,!0),W.f=function(t){return Bt(N(t))}),j(j.G+j.W+j.F*!qt,{Symbol:At});for(var Qt="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),te=0;Qt.length>te;)N(Qt[te++]);for(var ee=lt(N.store),ne=0;ee.length>ne;)B(ee[ne++]);j(j.S+j.F*!qt,"Symbol",{for:function(t){return x(zt,t+="")?zt[t]:zt[t]=At(t)},keyFor:function(t){if(!Xt(t))throw TypeError(t+" is not a symbol!");for(var e in zt)if(zt[e]===t)return e},useSetter:function(){Wt=!0},useSimple:function(){Wt=!1}}),j(j.S+j.F*!qt,"Object",{create:function(t,e){return void 0===e?mt(t):Gt(mt(t),e)},defineProperty:Yt,defineProperties:Gt,getOwnPropertyDescriptor:$t,getOwnPropertyNames:Zt,getOwnPropertySymbols:Jt}),Lt&&j(j.S+j.F*(!qt||u(function(){var t=At();return"[null]"!=Nt([t])||"{}"!=Nt({a:t})||"{}"!=Nt(Object(t))})),"JSON",{stringify:function(t){for(var e,n,i=[t],r=1;arguments.length>r;)i.push(arguments[r++]);if(n=e=i[1],(a(e)||void 0!==t)&&!Xt(t))return ht(e)||(e=function(t,e){if("function"==typeof n&&(e=n.call(this,t,e)),!Xt(e))return e}),i[1]=e,Nt.apply(Lt,i)}}),At.prototype[Mt]||w(At.prototype,Mt,At.prototype.valueOf),H(At,"Symbol"),H(Math,"Math",!0),H(p.JSON,"JSON",!0);var ie=Object.assign,re=!ie||u(function(){var t={},e={},n=Symbol(),i="abcdefghijklmnopqrst";return t[n]=7,i.split("").forEach(function(t){e[t]=t}),7!=ie({},t)[n]||Object.keys(ie({},e)).join("")!=i})?function(t,e){for(var n=Object(I(t)),i=arguments.length,r=1,o=ut.f,s=ct.f;i>r;)for(var a,l=G(arguments[r++]),u=o?lt(l).concat(o(l)):lt(l),c=u.length,h=0;c>h;)s.call(l,a=u[h++])&&(n[a]=l[a]);return n}:ie;j(j.S+j.F,"Object",{assign:re});var oe,se,ae,le=d(function(e,n){var i,r,o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},s="function"==typeof Symbol&&"symbol"===t(Symbol.iterator)?function(e){return t(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":t(e)};i=h,r=function(){var t=function(t,e){return t.getAttribute("data-"+e)},e=function(e){return e.filter(function(e){return!t(e,"was-processed")})},n=function(e,n){var i=n.data_src,r=n.data_srcset,o=e.tagName,s=t(e,i);if("IMG"===o){!function(e,n){var i=n.data_srcset,r=e.parentNode;if("PICTURE"===r.tagName)for(var o,s=0;o=r.children[s];s+=1)if("SOURCE"===o.tagName){var a=t(o,i);a&&o.setAttribute("srcset",a)}}(e,n);var a=t(e,r);return a&&e.setAttribute("srcset",a),void(s&&e.setAttribute("src",s))}"IFRAME"!==o?s&&(e.style.backgroundImage='url("'+s+'")'):s&&e.setAttribute("src",s)},i=function(){return"classList"in document.createElement("p")},r=function(t,e){i()?t.classList.add(e):t.className+=(t.className?" ":"")+e},s=function(t,e){t&&t(e)},a=function(t,e,n){t.removeEventListener("load",e),t.removeEventListener("error",n)},l=function(t,e,n){var o=t.target;!function(t,e){i()?t.classList.remove(e):t.className=t.className.replace(new RegExp("(^|\\s+)"+e+"(\\s+|$)")," ").replace(/^\s+/,"").replace(/\s+$/,"")}(o,n.class_loading),r(o,e?n.class_loaded:n.class_error),s(e?n.callback_load:n.callback_error,o)},u=function(t,e){s(e.callback_enter,t),["IMG","IFRAME"].indexOf(t.tagName)>-1&&(function(t,e){var n=function n(r){l(r,!0,e),a(t,n,i)},i=function i(r){l(r,!1,e),a(t,n,i)};t.addEventListener("load",n),t.addEventListener("error",i)}(t,e),r(t,e.class_loading)),n(t,e),function(t,e,n){t.setAttribute("data-"+e,n)}(t,"was-processed",!0),s(e.callback_set,t)},c=function(t,e){this._settings=o({},{elements_selector:"img",container:document,threshold:300,data_src:"src",data_srcset:"srcset",class_loading:"loading",class_loaded:"loaded",class_error:"error",callback_load:null,callback_error:null,callback_set:null,callback_enter:null},t),this._setObserver(),this.update(e)};return c.prototype={_setObserver:function(){var t=this;if("IntersectionObserver"in window){var n=this._settings;this._observer=new IntersectionObserver(function(i){i.forEach(function(e){if(e.isIntersecting||e.intersectionRatio>0){var i=e.target;u(i,n),t._observer.unobserve(i)}}),t._elements=e(t._elements)},{root:n.container===document?null:n.container,rootMargin:n.threshold+"px"})}},update:function(t){var n=this,i=this._settings,r=t||i.container.querySelectorAll(i.elements_selector);this._elements=e(Array.prototype.slice.call(r)),this._observer?this._elements.forEach(function(t){n._observer.observe(t)}):(this._elements.forEach(function(t){u(t,i)}),this._elements=e(this._elements))},destroy:function(){var t=this;this._observer&&(e(this._elements).forEach(function(e){t._observer.unobserve(e)}),this._observer=null),this._elements=null,this._settings=null}},c},"object"===s(n)?e.exports=r():i.LazyLoad=r()}),ue=d(function(e,n){var i,r,o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},s="function"==typeof Symbol&&"symbol"===t(Symbol.iterator)?function(e){return t(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":t(e)};i=h,r=function(){var t=function(t,e){t&&t(e)},e=function(t){return t.getBoundingClientRect().top+window.pageYOffset-t.ownerDocument.documentElement.clientTop},n=function(t){return t.getBoundingClientRect().left+window.pageXOffset-t.ownerDocument.documentElement.clientLeft},i=function(t,i,r){return!(function(t,n,i){return(n===window?window.innerHeight+window.pageYOffset:e(n)+n.offsetHeight)<=e(t)-i}(t,i,r)||function(t,n,i){return(n===window?window.pageYOffset:e(n))>=e(t)+i+t.offsetHeight}(t,i,r)||function(t,e,i){var r=window.innerWidth;return(e===window?r+window.pageXOffset:n(e)+r)<=n(t)-i}(t,i,r)||function(t,e,i){return(e===window?window.pageXOffset:n(e))>=n(t)+i+t.offsetWidth}(t,i,r))},r=function(t,e){return t.getAttribute("data-"+e)},s=function(t,e,n){return t.setAttribute("data-"+e,n)},a=function(t,e,n){var i=t.tagName,o=r(t,n);if("IMG"===i){!function(t,e){var n=t.parentNode;if("PICTURE"===n.tagName)for(var i=0;i<n.children.length;i++){var o=n.children[i];if("SOURCE"===o.tagName){var s=r(o,e);s&&o.setAttribute("srcset",s)}}}(t,e);var s=r(t,e);return s&&t.setAttribute("srcset",s),void(o&&t.setAttribute("src",o))}"IFRAME"!==i?o&&(t.style.backgroundImage='url("'+o+'")'):o&&t.setAttribute("src",o)},l=function(){return"classList"in document.createElement("p")},u=function(t,e){l()?t.classList.add(e):t.className+=(t.className?" ":"")+e},c=function(t,e){l()?t.classList.remove(e):t.className=t.className.replace(new RegExp("(^|\\s+)"+e+"(\\s+|$)")," ").replace(/^\s+/,"").replace(/\s+$/,"")},h=function(t){this._settings=o({},{elements_selector:"img",container:window,threshold:300,throttle:150,data_src:"src",data_srcset:"srcset",class_loading:"loading",class_loaded:"loaded",class_error:"error",class_initial:"initial",skip_invisible:!0,callback_load:null,callback_error:null,callback_set:null,callback_processed:null,callback_enter:null},t),this._queryOriginNode=this._settings.container===window?document:this._settings.container,this._previousLoopTime=0,this._loopTimeout=null,this._boundHandleScroll=this.handleScroll.bind(this),this._isFirstLoop=!0,window.addEventListener("resize",this._boundHandleScroll),this.update()};return h.prototype={_reveal:function(e){var n=this._settings,i=function i(){n&&(e.removeEventListener("load",r),e.removeEventListener("error",i),c(e,n.class_loading),u(e,n.class_error),t(n.callback_error,e))},r=function r(){n&&(c(e,n.class_loading),u(e,n.class_loaded),e.removeEventListener("load",r),e.removeEventListener("error",i),t(n.callback_load,e))};t(n.callback_enter,e),"IMG"!==e.tagName&&"IFRAME"!==e.tagName||(e.addEventListener("load",r),e.addEventListener("error",i),u(e,n.class_loading)),a(e,n.data_srcset,n.data_src),t(n.callback_set,e)},_loopThroughElements:function(){var e=this._settings,n=this._elements,r=n?n.length:0,o=void 0,a=[],l=this._isFirstLoop;for(o=0;o<r;o++){var c=n[o];e.skip_invisible&&null===c.offsetParent||(!("onscroll"in window)||/glebot/.test(navigator.userAgent)||i(c,e.container,e.threshold))&&(l&&u(c,e.class_initial),this._reveal(c),a.push(o),s(c,"was-processed",!0))}for(;a.length;)n.splice(a.pop(),1),t(e.callback_processed,n.length);0===r&&this._stopScrollHandler(),l&&(this._isFirstLoop=!1)},_purgeElements:function(){var t=this._elements,e=t.length,n=void 0,i=[];for(n=0;n<e;n++){var o=t[n];r(o,"was-processed")&&i.push(n)}for(;i.length>0;)t.splice(i.pop(),1)},_startScrollHandler:function(){this._isHandlingScroll||(this._isHandlingScroll=!0,this._settings.container.addEventListener("scroll",this._boundHandleScroll))},_stopScrollHandler:function(){this._isHandlingScroll&&(this._isHandlingScroll=!1,this._settings.container.removeEventListener("scroll",this._boundHandleScroll))},handleScroll:function(){var t=this._settings.throttle;if(0!==t){var e=Date.now(),n=t-(e-this._previousLoopTime);n<=0||n>t?(this._loopTimeout&&(clearTimeout(this._loopTimeout),this._loopTimeout=null),this._previousLoopTime=e,this._loopThroughElements()):this._loopTimeout||(this._loopTimeout=setTimeout(function(){this._previousLoopTime=Date.now(),this._loopTimeout=null,this._loopThroughElements()}.bind(this),n))}else this._loopThroughElements()},update:function(){this._elements=Array.prototype.slice.call(this._queryOriginNode.querySelectorAll(this._settings.elements_selector)),this._purgeElements(),this._loopThroughElements(),this._startScrollHandler()},destroy:function(){window.removeEventListener("resize",this._boundHandleScroll),this._loopTimeout&&(clearTimeout(this._loopTimeout),this._loopTimeout=null),this._stopScrollHandler(),this._elements=null,this._queryOriginNode=null,this._settings=null}},h},"object"===s(n)?e.exports=r():i.LazyLoad=r()}),ce=d(function(t){var e=function(){};e.prototype={bind:function(t,e){this._events=this._events||{},this._events[t]=this._events[t]||[],this._events[t].push(e)},unbind:function(t,e){this._events=this._events||{},t in this._events!=0&&this._events[t].splice(this._events[t].indexOf(e),1)},trigger:function(t){if(this._events=this._events||{},t in this._events!=0)for(var e=0;e<this._events[t].length;e++)this._events[t][e].apply(this,Array.prototype.slice.call(arguments,1))}},e.mixin=function(t){for(var n=["bind","unbind","trigger"],i=0;i<n.length;i++)t.prototype[n[i]]=e.prototype[n[i]]},"exports"in t&&(t.exports=e)}),he={formatUnit:function(t){return null==t?0:"number"==typeof t?"".concat(t,"px"):"string"==typeof t?t.replace("dp","px"):0},isDefinedStr:function(t){return"string"==typeof t&&t.length>0},escapeHTML:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}},de=[].indexOf;oe=ce,ae=he;var pe=se=function(){var t=function(){function t(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e(this,t),this.attrs=n,this.options=i,this.el=this.createElement(),this.setAttributes()}return i(t,[{key:"render",value:function(){return this}},{key:"createElement",value:function(){var t,e,n;return e=document.createElement(this.tagName),t=null!=(n=this.className)?n:"",e.className="incito__view "+t,e}},{key:"setAttributes",value:function(){var t,e,n,i,r,o,s,a,l;ae.isDefinedStr(this.attrs.id)&&this.el.setAttribute("data-id",this.attrs.id),ae.isDefinedStr(this.attrs.role)&&this.el.setAttribute("role",this.attrs.role),ae.isDefinedStr(this.attrs.accessibility_label)&&this.el.setAttribute("aria-label",this.attrs.accessibility_label),ae.isDefinedStr(this.attrs.title)&&this.el.setAttribute("title",this.attrs.title),ae.isDefinedStr(this.attrs.gravity)&&this.el.setAttribute("data-gravity",this.attrs.gravity),ae.isDefinedStr(this.attrs.link)?(this.el.setAttribute("data-link",""),this.setupCallbacks()):this.hasCallback()&&(this.el.setAttribute("data-callback",""),this.setupCallbacks()),"match_parent"===this.attrs.layout_width?this.el.style.width="100%":"wrap_content"===this.attrs.layout_width?this.el.style.display="inline-block":null!=this.attrs.layout_width&&(this.el.style.width=ae.formatUnit(this.attrs.layout_width)),"match_parent"===this.attrs.layout_height?this.el.style.height="100%":"wrap_content"===this.attrs.layout_height?this.el.style.height="auto":null!=this.attrs.layout_height&&(this.el.style.height=ae.formatUnit(this.attrs.layout_height)),null!=this.attrs.min_width&&(this.el.style.minWidth=ae.formatUnit(this.attrs.min_width)),null!=this.attrs.max_width&&(this.el.style.maxWidth=ae.formatUnit(this.attrs.max_width)),null!=this.attrs.min_height&&(this.el.style.minHeight=ae.formatUnit(this.attrs.min_height)),null!=this.attrs.max_height&&(this.el.style.maxHeight=ae.formatUnit(this.attrs.max_height)),null!=this.attrs.layout_top&&(this.el.style.top=ae.formatUnit(this.attrs.layout_top)),null!=this.attrs.layout_left&&(this.el.style.left=ae.formatUnit(this.attrs.layout_left)),null!=this.attrs.layout_right&&(this.el.style.right=ae.formatUnit(this.attrs.layout_right)),null!=this.attrs.layout_bottom&&(this.el.style.bottom=ae.formatUnit(this.attrs.layout_bottom)),ae.isDefinedStr(this.attrs.background_color)&&(this.el.style.backgroundColor=this.attrs.background_color),ae.isDefinedStr(this.attrs.background_image)&&(this.el.setAttribute("data-src",this.attrs.background_image),this.el.className+=" incito--lazyload"),"repeat_x"!==(t=this.attrs.background_tile_mode)&&"repeat_y"!==t&&"repeat"!==t||(this.el.style.backgroundRepeat=this.attrs.background_tile_mode.replace("_","-")),ae.isDefinedStr(this.attrs.background_image_position)&&(this.el.style.backgroundPosition=this.attrs.background_image_position.replace("_"," ")),"center_crop"===this.attrs.background_image_scale_type?this.el.style.backgroundSize="cover":"center_inside"===this.attrs.background_image_scale_type&&(this.el.style.backgroundSize="contain"),null!=this.attrs.layout_margin?this.el.style.margin=ae.formatUnit(this.attrs.layout_margin):(null!=this.attrs.layout_margin_top&&(this.el.style.marginTop=ae.formatUnit(this.attrs.layout_margin_top)),null!=this.attrs.layout_margin_left&&(this.el.style.marginLeft=ae.formatUnit(this.attrs.layout_margin_left)),null!=this.attrs.layout_margin_right&&(this.el.style.marginRight=ae.formatUnit(this.attrs.layout_margin_right)),null!=this.attrs.layout_margin_bottom&&(this.el.style.marginBottom=ae.formatUnit(this.attrs.layout_margin_bottom))),null!=this.attrs.padding?this.el.style.padding=ae.formatUnit(this.attrs.padding):(null!=this.attrs.padding_top&&(this.el.style.paddingTop=ae.formatUnit(this.attrs.padding_top)),null!=this.attrs.padding_left&&(this.el.style.paddingLeft=ae.formatUnit(this.attrs.padding_left)),null!=this.attrs.padding_right&&(this.el.style.paddingRight=ae.formatUnit(this.attrs.padding_right)),null!=this.attrs.padding_bottom&&(this.el.style.paddingBottom=ae.formatUnit(this.attrs.padding_bottom))),null!=this.attrs.corner_radius?this.el.style.borderRadius=ae.formatUnit(this.attrs.corner_radius):(null!=this.attrs.corner_top_left_radius&&(this.el.style.borderTopLeftRadius=ae.formatUnit(this.attrs.corner_top_left_radius)),null!=this.attrs.corner_top_right_radius&&(this.el.style.borderTopRightRadius=ae.formatUnit(this.attrs.corner_top_right_radius)),null!=this.attrs.corner_bottom_left_radius&&(this.el.style.borderBottomLeftRadius=ae.formatUnit(this.attrs.corner_bottom_left_radius)),null!=this.attrs.corner_bottom_right_radius&&(this.el.style.borderBottomRightRadius=ae.formatUnit(this.attrs.corner_bottom_right_radius))),!1===this.attrs.clip_children&&(this.el.style.overflow="visible"),null!=(s=this.getShadow())&&(this.el.style.boxShadow="".concat(s.dx,"px ").concat(s.dy,"px ").concat(s.radius,"px ").concat(s.color)),a=["solid","dotted","dashed"],null!=this.attrs.stroke_width&&(this.el.style.borderWidth=ae.formatUnit(this.attrs.stroke_width)),null!=this.attrs.stroke_color&&(this.el.style.borderColor=this.attrs.stroke_color),e=this.attrs.stroke_style,de.call(a,e)>=0&&(this.el.style.borderStyle=this.attrs.stroke_style),null!=this.attrs.stroke_top_width&&(this.el.style.borderTopWidth=ae.formatUnit(this.attrs.stroke_top_width)),null!=this.attrs.stroke_top_color&&(this.el.style.borderTopColor=this.attrs.stroke_top_color),n=this.attrs.stroke_top_style,de.call(a,n)>=0&&(this.el.style.borderTopStyle=this.attrs.stroke_top_style),null!=this.attrs.stroke_left_width&&(this.el.style.borderLeftWidth=ae.formatUnit(this.attrs.stroke_left_width)),null!=this.attrs.stroke_left_color&&(this.el.style.borderLeftColor=this.attrs.stroke_left_color),i=this.attrs.stroke_left_style,de.call(a,i)>=0&&(this.el.style.borderLeftStyle=this.attrs.stroke_left_style),null!=this.attrs.stroke_right_width&&(this.el.style.borderRightWidth=ae.formatUnit(this.attrs.stroke_right_width)),null!=this.attrs.stroke_right_color&&(this.el.style.borderRightColor=this.attrs.stroke_right_color),r=this.attrs.stroke_right_style,de.call(a,r)>=0&&(this.el.style.borderRightStyle=this.attrs.stroke_right_style),null!=this.attrs.stroke_bottom_width&&(this.el.style.borderBottomWidth=ae.formatUnit(this.attrs.stroke_bottom_width)),null!=this.attrs.stroke_bottom_color&&(this.el.style.borderBottomColor=this.attrs.stroke_bottom_color),o=this.attrs.stroke_bottom_style,de.call(a,o)>=0&&(this.el.style.borderBottomStyle=this.attrs.stroke_bottom_style),(l=this.getTransforms()).length>0&&(this.el.style.transform=l.join(" ")),Array.isArray(this.attrs.transform_origin)&&2===this.attrs.transform_origin.length&&(this.el.style.transformOrigin=[ae.formatUnit(this.attrs.transform_origin[0]),ae.formatUnit(this.attrs.transform_origin[1])].join(" "))}},{key:"getTransforms",value:function(){var t,e,n;return t=[],e=ae.formatUnit(this.attrs.transform_translate_x),n=ae.formatUnit(this.attrs.transform_translate_y),0!==e&&t.push("translateX(".concat(e,")")),0!==n&&t.push("translateY(".concat(n,")")),"number"==typeof this.attrs.transform_rotate&&0!==this.attrs.transform_rotate&&t.push("rotate(".concat(this.attrs.transform_rotate,"deg)")),"number"==typeof this.attrs.transform_scale&&1!==this.attrs.transform_scale&&t.push("scale(".concat(this.attrs.transform_scale,")")),t}},{key:"hasCallback",value:function(){return!!ae.isDefinedStr(this.attrs.onlongclick)||!!ae.isDefinedStr(this.attrs.onclick)||!!ae.isDefinedStr(this.attrs.oncontextclick)}},{key:"setupCallbacks",value:function(){var t,e,n,i,r,o,s,a,l=this;r={x:null,y:null},o=null,e=null,n=null,s=function(t,e){l.trigger(t,{originalEvent:e,el:l.el,incito:l.attrs})},t=function(t){t.stopPropagation(),r.x=t.clientX||t.touches[0].clientX,r.y=t.clientY||t.touches[0].clientY,o=(new Date).getTime(),3!==t.which&&2!==t.button&&ae.isDefinedStr(l.attrs.onlongclick)&&(n=setTimeout(function(){s(l.attrs.onlongclick,t)},500))},i=function(t){clearTimeout(n)},a=function(t){var i,a,u,c,h;t.stopPropagation(),c=t.clientX||t.changedTouches[0].clientX,h=t.clientY||t.changedTouches[0].clientY,a=Math.abs(c-r.x),u=Math.abs(h-r.y),e=(new Date).getTime(),i=e-o,clearTimeout(n),3!==t.which&&2!==t.button&&i<300&&a<20&&u<20&&(ae.isDefinedStr(l.attrs.onclick)?s(l.attrs.onclick,t):ae.isDefinedStr(l.attrs.link)&&window.open(l.attrs.link,"_blank"))},this.options.touchSupport&&!this.options.mouseSupport?(this.el.setAttribute("data-disable-user-select",""),this.el.ontouchstart=t,this.el.ontouchmove=i,this.el.ontouchend=a,this.el.ontouchcancel=a):(this.el.onmousedown=t,this.el.onmousemove=i,this.el.onmouseup=a),ae.isDefinedStr(this.attrs.oncontextclick)&&(this.el.oncontextmenu=function(t){return s(l.attrs.oncontextclick,t),!1})}},{key:"getShadow",value:function(){var t,e,n,i;if(ae.isDefinedStr(this.attrs.shadow_color))return e="number"==typeof this.attrs.shadow_dx?this.attrs.shadow_dx:0,n="number"==typeof this.attrs.shadow_dy?this.attrs.shadow_dy:0,i="number"==typeof this.attrs.shadow_radius?this.attrs.shadow_radius:0,t=this.attrs.shadow_color,{dx:e,dy:n,radius:i,color:t}}}]),t}();return t.prototype.tagName="div",t.prototype.className=null,t}.call(h);oe.mixin(se);var fe,ge,pe=se,ve=function(){function t(){e(this,t)}return i(t,[{key:"render",value:function(){return this.el=document.createDocumentFragment(),this}}]),t}(),ye=pe;fe=ye,ge=he;var me=function(){var t=function(t){function n(){return e(this,n),s(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return o(n,t),i(n,[{key:"render",value:function(){return ge.isDefinedStr(this.attrs.src)&&this.el.setAttribute("data-src",this.attrs.src),ge.isDefinedStr(this.attrs.label)?this.el.setAttribute("alt",this.attrs.label):this.el.setAttribute("alt",""),this}}]),n}(fe);return t.prototype.tagName="img",t.prototype.className="incito__image-view incito--lazyload",t}.call(h),be=_.f,_e=Function.prototype,ke=/^\s*function ([^ (]*)/;"name"in _e||c&&be(_e,"name",{configurable:!0,get:function(){try{return(""+this).match(ke)[1]}catch(t){return""}}});var we=N("match"),Se=function(t){var e;return a(t)&&(void 0!==(e=t[we])?!!e:"RegExp"==Y(t))};R("split",2,function(t,e,n){var i=Se,r=n,o=[].push;if("c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length){var s=void 0===/()??/.exec("")[1];n=function(t,e){var n=String(this);if(void 0===t&&0===e)return[];if(!i(t))return r.call(n,t,e);var a,l,u,c,h,d=[],p=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),f=0,g=void 0===e?4294967295:e>>>0,v=new RegExp(t.source,p+"g");for(s||(a=new RegExp("^"+v.source+"$(?!\\s)",p));(l=v.exec(n))&&!((u=l.index+l[0].length)>f&&(d.push(n.slice(f,l.index)),!s&&l.length>1&&l[0].replace(a,function(){for(h=1;h<arguments.length-2;h++)void 0===arguments[h]&&(l[h]=void 0)}),l.length>1&&l.index<n.length&&o.apply(d,l.slice(1)),c=l[0].length,f=u,d.length>=g));)v.lastIndex===l.index&&v.lastIndex++;return f===n.length?!c&&v.test("")||d.push(""):d.push(n.slice(f)),d.length>g?d.slice(0,g):d}}else"0".split(void 0,0).length&&(n=function(t,e){return void 0===t&&0===e?[]:r.call(this,t,e)});return[function(i,r){var o=t(this),s=null==i?void 0:i[e];return void 0!==s?s.call(i,o,r):n.call(String(o),i,r)},n]});var xe,Ee,Te=[].indexOf;xe=ye,Ee=he;var Pe,Ce,Oe,Ie=function(){var t=function(t){function n(){return e(this,n),s(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return o(n,t),i(n,[{key:"render",value:function(){var t,e,n,i,r;return r=(this.attrs.text_style||"").split("|"),n=this.attrs.text,Array.isArray(this.attrs.spans)&&this.attrs.spans.length>0?(t=this.parseSpans(n,this.attrs.spans),n=(n=t.map(function(t){var e;return e=Ee.escapeHTML(t.text||""),null!=t.span&&"link"===t.span.name&&null!=t.span.url?'<a href="'+encodeURI(t.span.url)+'" rel="external" target="_blank">'+e+"</a>":null!=t.span&&null!=t.span.name?'<span data-name="'+t.span.name+'">'+e+"</span>":e})).join("")):n=Ee.escapeHTML(n),this.attrs.text_prevent_widow?this.el.innerHTML=n.replace(/\&nbsp;([^\s]+)$/," $1").replace(/\s([^\s]+)\s*$/,"&nbsp;$1"):this.el.innerHTML=n,Array.isArray(this.attrs.font_family)&&this.attrs.font_family.length>0&&(this.el.style.fontFamily=this.attrs.font_family.join(", ")),null!=this.attrs.text_size&&(this.el.style.fontSize="".concat(this.attrs.text_size,"px")),null!=this.attrs.line_spacing_multiplier&&(this.el.style.lineHeight=this.attrs.line_spacing_multiplier),null!=this.attrs.text_color&&(this.el.style.color=this.attrs.text_color),Te.call(r,"bold")>=0&&(this.el.style.fontWeight="bold"),Te.call(r,"italic")>=0&&(this.el.style.fontStyle="italic"),null!=(i=this.getTextShadow())&&(this.el.style.textShadow="".concat(i.dx,"px ").concat(i.dy,"px ").concat(i.radius,"px ").concat(i.color)),"left"===this.attrs.text_alignment?this.el.style.textAlign="left":"center"===this.attrs.text_alignment?this.el.style.textAlign="center":"right"===this.attrs.text_alignment&&(this.el.style.textAlign="right"),"condensed"!==(e=this.attrs.font_stretch)&&"normal"!==e&&"expanded"!==e||(this.el.style.fontStretch=this.attrs.font_stretch),!0===this.attrs.single_line||1===this.attrs.max_lines?this.el.setAttribute("data-single-line",!0):"number"==typeof this.attrs.max_lines&&(this.el.style.display="-webkit-box",this.el.style.webkitLineClamp=this.attrs.max_lines,this.el.style.webkitBoxOrient="vertical"),!0===this.attrs.text_all_caps&&(this.el.style.textTransform="uppercase"),this}},{key:"parseSpans",value:function(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return e=[],0===n.length?e.push({text:t}):n[0].start>0&&e.push({text:t.slice(0,n[0].start)}),n.forEach(function(i,r){var o,s;s=i.start,o=i.end,e.push({text:t.slice(s,o),span:i}),r===n.length-1?o<t.length&&e.push({text:t.slice(o,t.length)}):o<n[r+1].start&&e.push({text:t.slice(o,n[r+1].start)})}),e}},{key:"getTextShadow",value:function(){var t,e,n,i;if(Ee.isDefinedStr(this.attrs.text_shadow_color))return e="number"==typeof this.attrs.text_shadow_dx?this.attrs.text_shadow_dx:0,n="number"==typeof this.attrs.text_shadow_dy?this.attrs.text_shadow_dy:0,i="number"==typeof this.attrs.text_shadow_radius?this.attrs.text_shadow_radius:0,t=this.attrs.text_shadow_color,{dx:e,dy:n,radius:i,color:t}}}]),n}(xe);return t.prototype.tagName="p",t.prototype.className="incito__text-view",t}.call(h),Ae=[].indexOf;Pe=ye,Oe=he,Ce=["www.youtube.com","www.vimeo.com","video.twentythree.net"];var Le,Ne,Re=function(){var t=function(t){function n(){return e(this,n),s(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return o(n,t),i(n,[{key:"render",value:function(){return this.el.addEventListener("incito-lazyload",this.renderIframe.bind(this)),this}},{key:"renderIframe",value:function(){var t,e,n;return Oe.isDefinedStr(this.attrs.src)&&(t=document.createElement("iframe"),(e=document.createElement("a")).setAttribute("href",this.attrs.src),n=e.hostname,Ae.call(Ce,n)>=0&&(t.setAttribute("src",this.attrs.src),this.el.appendChild(t))),this}}]),n}(Pe);return t.prototype.className="incito__video-embed-view incito--lazyload",t}.call(h);Le=ye,Ne=he;var Me,De=function(){var t=function(t){function n(){return e(this,n),s(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return o(n,t),i(n,[{key:"render",value:function(){if(Ne.isDefinedStr(this.attrs.src))return this.el.addEventListener("incito-lazyload",this.renderVideo.bind(this)),!0===this.attrs.autoplay&&this.el.setAttribute("autoplay",""),!0===this.attrs.loop&&this.el.setAttribute("loop",""),!0===this.attrs.controls&&this.el.setAttribute("controls",""),this.el.setAttribute("muted","true"),this.el.setAttribute("preload","metadata"),this.el.setAttribute("playsinline",""),this}},{key:"renderVideo",value:function(){var t;return(t=document.createElement("source")).setAttribute("src",this.attrs.src),t.setAttribute("type",this.attrs.mime),this.el.appendChild(t),this}}]),n}(Le);return t.prototype.className="incito__video-view incito--lazyload",t.prototype.tagName="video",t}.call(h);Me=ye;var ze,je=function(){var t=function(t){function n(){return e(this,n),s(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return o(n,t),i(n,[{key:"render",value:function(){return this}}]),n}(Me);return t.prototype.className="incito__linear-layout-view",t}.call(h);ze=ye;var Fe,Ue,qe,He,We,Ve,Be=function(){var t=function(t){function n(){return e(this,n),s(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return o(n,t),i(n,[{key:"render",value:function(){return this}}]),n}(ze);return t.prototype.className="incito__absolute-layout-view",t}.call(h),Xe=[].indexOf;Fe=ye,Ve=he,qe=["stretch","center","flex-start","flex-end","baseline"],Ue=["stretch","center","flex-start","flex-end","space-between","space-around","initial","inherit"],We=["flex-start","flex-end","center","space-between","space-around"],He=["row","column"];var Ye,Ge,Ke,$e,Ze,Je,Qe,tn,en,nn,rn,on,sn,an,ln=function(){var t=function(t){function n(){return e(this,n),s(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return o(n,t),i(n,[{key:"render",value:function(){var t,e,n,i;return t=this.attrs.layout_flex_align_items,Xe.call(qe,t)>=0&&(this.el.style.alignItems=this.attrs.layout_flex_align_items,this.el.style.msAlignItems=this.attrs.layout_flex_align_items),e=this.attrs.layout_flex_align_content,Xe.call(Ue,e)>=0&&(this.el.style.alignContent=this.attrs.layout_flex_align_content,this.el.style.msAlignContent=this.attrs.layout_flex_align_content),n=this.attrs.layout_flex_justify_content,Xe.call(We,n)>=0&&(this.el.style.justifyContent=this.attrs.layout_flex_justify_content,this.el.style.msFlexPack=this.attrs.layout_flex_justify_content),i=this.attrs.layout_flex_direction,Xe.call(He,i)>=0&&(this.el.style.flexDirection=this.attrs.layout_flex_direction,this.el.style.msFlexDirection=this.attrs.layout_flex_direction),"number"==typeof this.attrs.layout_flex_shrink&&(this.el.style.flexShrink=this.attrs.layout_flex_shrink,this.el.style.msFlexShrink=this.attrs.layout_flex_shrink),"number"==typeof this.attrs.layout_flex_grow&&(this.el.style.flexGrow=this.attrs.layout_flex_grow,this.el.style.msFlexGrow=this.attrs.layout_flex_grow),null!=this.attrs.layout_flex_basis&&(this.el.style.flexBasis=Ve.parseUnit(this.attrs.layout_flex_basis),this.el.style.msFlexBasis=Ve.parseUnit(this.attrs.layout_flex_basis)),this}}]),n}(Fe);return t.prototype.className="incito__flex-layout-view",t}.call(h);return Je=le,Qe=ue,en=ce,an=he,sn=ye,Ke=ve,$e=me,nn=Ie,rn=Re,on=De,tn=je,Ye=Be,Ge=ln,Ze=function(){function t(n){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e(this,t),this.containerEl=n,this.options=i,this.el=document.createElement("div"),this.touchSupport="ontouchend"in document,this.mouseSupport=!("matchMedia"in window)||window.matchMedia("(pointer: fine)").matches}return i(t,[{key:"start",value:function(){var t;return t=this.options.incito||{},this.el.className="incito",null!=t.locale&&this.el.setAttribute("lang",t.locale),this.loadFonts(t.font_assets),this.applyTheme(t.theme),this.render(this.el,t.root_view),this.containerEl.appendChild(this.el),this.lazyLoader=this.createLazyLoader(),this}},{key:"destroy",value:function(){this.containerEl.removeChild(this.el),null!=this.lazyload&&this.lazyload.destroy(),this.trigger("destroyed")}},{key:"render",value:function(t){var e,n,i,r,o,s=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e=null,o=a.view_name,e=null!=(n={View:sn,FragView:Ke,ImageView:$e,TextView:nn,VideoEmbedView:rn,VideoView:on,LinearLayout:tn,AbsoluteLayout:Ye,FlexLayout:Ge}[o])?n:sn,r=new e(a,{touchSupport:this.touchSupport,mouseSupport:this.mouseSupport}),i=r.trigger,r.trigger=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];i.apply(r,e),s.trigger.apply(s,e)},r.render(),Array.isArray(a.child_views)&&a.child_views.forEach(function(t){s.render(r.el,t)}),t.appendChild(r.el),r.el}},{key:"applyTheme",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Array.isArray(t.font_family)&&(this.el.style.fontFamily=t.font_family.join(", ")),an.isDefinedStr(t.background_color)&&(this.el.style.backgroundColor=t.background_color),an.isDefinedStr(t.text_color)&&(this.el.style.color=t.text_color),"number"==typeof t.line_spacing_multiplier&&(this.el.style.lineHeight=t.line_spacing_multiplier)}},{key:"loadFonts",value:function(){var t,e,n,i,r,o,s,a,l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if("FontFace"in window)for(e in l)s=(a=l[e]).src.map(function(t){return"url(".concat(t[1],")")}).join(", "),t=new FontFace(e,s,{style:null!=(n=a.style)?n:"normal",weight:null!=(i=a.weight)?i:"normal"}),document.fonts.add(t),t.load();else{for(e in r=document.createElement("style"),l)s=(a=l[e]).src.map(function(t){return"url('".concat(t[1],"') format('").concat(t[0],"')")}).join(", "),o="@font-face {\n    font-family: '".concat(e,"';\n    src: ").concat(s,";\n}"),r.appendChild(document.createTextNode(o));document.head.appendChild(r)}}},{key:"createLazyLoader",value:function(){return new("IntersectionObserver"in window?Je:Qe)({elements_selector:".incito .incito--lazyload",threshold:1e3,callback_enter:function(t){var e;e=null,"function"==typeof CustomEvent?e=new CustomEvent("incito-lazyload"):(e=document.createEvent("CustomEvent")).initCustomEvent("incito-lazyload",!1,!1,void 0),t.dispatchEvent(e)}})}}]),t}(),en.mixin(Ze),Ze}()});De=Ue,ze=l,je=function(){function t(n){var i,r,o=this,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e(this,t),this.el=n,this.options=s,i=new De(this.el,{incito:this.options.incito}),r=i.trigger,i.trigger=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];r.apply(i,e),o.trigger.apply(o,e)},i.bind("view_clicked",function(t){"offer"===t.incito.role&&o._trackEvent({type:"x-incito-publication-offer-clicked",properties:{ipid:o.options.id,id:t.incito.id}})}),this.incito=i}return i(t,[{key:"start",value:function(){return this.incito.start(),this._trackEvent({type:"x-incito-publication-opened",properties:{id:this.options.id}}),this}},{key:"destroy",value:function(){this.incito.destroy()}},{key:"_trackEvent",value:function(t){var e,n,i,r,o,s;for(n in o=t.type,i={id:this.options.id},e=this.options.eventTracker,r=t.properties)s=r[n],i[n]=s;if(null!=e)return e.trackEvent(o,i)}}]),t}(),ze.mixin(je);var qe,He,We,Ve,Be=je,Xe=function(){function t(n){var i=this;e(this,t),this.viewer=n,this.progressEl=this.viewer.el.querySelector(".sgn-incito__progress"),this.scrollListener=this.scroll.bind(this),null!=this.progressEl&&(window.addEventListener("scroll",this.scrollListener,!1),this.viewer.bind("destroyed",function(){window.removeEventListener("scroll",i.scrollListener)}))}return i(t,[{key:"scroll",value:function(){var t,e,n,i;n=window.scrollY,i=window.innerHeight,t=document.body.clientHeight,e=Math.round((n+i)/t*100),n<300?this.progressEl.style.opacity=0:n>=t-i?(this.progressEl.textContent="100%",this.progressEl.style.opacity=1):(this.progressEl.textContent="".concat(e," %"),this.progressEl.style.opacity=1)}}]),t}(),Ye="query GetIncitoPublication($id: ID!, $deviceCategory: DeviceCategory!, $orientation: Orientation!, $pixelRatio: Float!, $pointer: Pointer!, $maxWidth: Int!, $versionsSupported: [String!]!) {\n  node(id: $id) {\n    ... on IncitoPublication {\n      id\n      incito(deviceCategory: $deviceCategory, orientation: $orientation, pixelRatio: $pixelRatio, pointer: $pointer, maxWidth: $maxWidth, versionsSupported: $versionsSupported)\n    }\n  }\n}",Ge=Object.freeze({default:Ye});Ve=Y,He=G,qe=Xe,We=Ge?Ye:Ge;var Ke,$e,Ze,Je,Qe,tn,en={Viewer:Be,Bootstrapper:function(){function t(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e(this,t),this.options=n,this.deviceCategory=this.getDeviceCategory(),this.pixelRatio=this.getPixelRatio(),this.pointer=this.getPointer(),this.orientation=this.getOrientation(),this.maxWidth=this.getMaxWidth(),this.versionsSupported=["1.0.0"],this.storageKey="incito-".concat(this.options.id)}return i(t,[{key:"getDeviceCategory",value:function(){return Ve.getDeviceCategory()}},{key:"getPixelRatio",value:function(){return window.devicePixelRatio||1}},{key:"getPointer",value:function(){return Ve.getPointer()}},{key:"getOrientation",value:function(){var t;return"quadratic"===(t=Ve.getOrientation(screen.width,screen.height))&&(t="horizontal"),t}},{key:"getMaxWidth",value:function(){return 90===Math.abs(window.orientation)?Math.min(this.options.el.offsetWidth,screen.width):this.options.el.offsetWidth}},{key:"fetch",value:function(t){var e,n=this;if(null!=(e=He.storage.session.get(this.storageKey))&&null!=e.response&&e.width===this.maxWidth)return t(null,e.response);He.GraphKit.request({query:We,operationName:"GetIncitoPublication",variables:{id:this.options.id,deviceCategory:"DEVICE_CATEGORY_"+this.deviceCategory.toUpperCase(),pixelRatio:this.pixelRatio,pointer:"POINTER_"+this.pointer.toUpperCase(),orientation:"ORIENTATION_"+this.orientation.toUpperCase(),maxWidth:this.maxWidth,versionsSupported:this.versionsSupported}},function(e,i){null!=e?t(e):i.errors&&i.errors.length>0?t(Ve.error(new Error,"graph request contained errors")):(t(null,i),He.storage.session.set(n.storageKey,{width:n.maxWidth,response:i}))})}},{key:"createViewer",value:function(t){var e;if(null==t.incito)throw Ve.error(new Error,"you need to supply valid Incito to create a viewer");return e=new He.IncitoPublicationKit.Viewer(this.options.el,{id:this.options.id,incito:t.incito,eventTracker:this.options.eventTracker}),new qe(e),e}}]),t}()},nn=function(){function t(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e(this,t),this.options=n,this.el=document.createElement("div"),this.el.className="sgn-offer-details",this.el.setAttribute("tabindex",-1),this.el.appendChild(this.options.contentEl),this.resizeListener=this.resize.bind(this),this.position()}return i(t,[{key:"appendTo",value:function(t){return t.appendChild(this.el),this.el.offsetWidth,this.show(),this}},{key:"show",value:function(){return this.el.className+=" in",window.addEventListener("resize",this.resizeListener,!1),this}},{key:"destroy",value:function(){window.removeEventListener("resize",this.resizeListener),this.el.parentNode.removeChild(this.el)}},{key:"position",value:function(){var t,e,n,i;e=this.options.anchorEl.getBoundingClientRect(),n=window.pageYOffset+e.top+this.options.anchorEl.offsetHeight,t=window.pageXOffset+e.left,i=this.options.anchorEl.offsetWidth,this.el.style.top=n+"px",this.el.style.left=t+"px",this.el.style.width=i+"px"}},{key:"resize",value:function(){this.position()}}]),t}(),rn=o(function(t){!function(){var e,n=0,i=0,r={},o={};function s(t,i,r){return"_root"==i?r:t!==r?function(t){return e||(e=t.matches?t.matches:t.webkitMatchesSelector?t.webkitMatchesSelector:t.mozMatchesSelector?t.mozMatchesSelector:t.msMatchesSelector?t.msMatchesSelector:t.oMatchesSelector?t.oMatchesSelector:c.matchesSelector)}(t).call(t,i)?t:t.parentNode?(n++,s(t.parentNode,i,r)):void 0:void 0}function a(t,e,n,i){r[t.id]||(r[t.id]={}),r[t.id][e]||(r[t.id][e]={}),r[t.id][e][n]||(r[t.id][e][n]=[]),r[t.id][e][n].push(i)}function l(t,e,n,i){if(r[t.id])if(e)if(i||n)if(i){if(r[t.id][e][n])for(var o=0;o<r[t.id][e][n].length;o++)if(r[t.id][e][n][o]===i){r[t.id][e][n].splice(o,1);break}}else delete r[t.id][e][n];else r[t.id][e]={};else for(var s in r[t.id])r[t.id].hasOwnProperty(s)&&(r[t.id][s]={})}function u(t,e,i,u){if(this.element){t instanceof Array||(t=[t]),i||"function"!=typeof e||(i=e,e="_root");var h,d=this.id;for(h=0;h<t.length;h++)u?l(this,t[h],e,i):(r[d]&&r[d][t[h]]||c.addEvent(this,t[h],p(t[h])),a(this,t[h],e,i));return this}function p(t){return function(e){!function(t,e,i){if(r[t][i]){var a,l,u=e.target||e.srcElement,h={},d=0,p=0;for(a in n=0,r[t][i])r[t][i].hasOwnProperty(a)&&(l=s(u,a,o[t].element))&&c.matchesEvent(i,o[t].element,l,"_root"==a,e)&&(n++,r[t][i][a].match=l,h[n]=r[t][i][a]);for(e.stopPropagation=function(){e.cancelBubble=!0},d=0;d<=n;d++)if(h[d])for(p=0;p<h[d].length;p++){if(!1===h[d][p].call(h[d].match,e))return void c.cancel(e);if(e.cancelBubble)return}}}(d,e,t)}}}function c(t,e){if(!(this instanceof c)){for(var n in o)if(o[n].element===t)return o[n];return o[++i]=new c(t,i),o[i]}this.element=t,this.id=e}c.prototype.on=function(t,e,n){return u.call(this,t,e,n)},c.prototype.off=function(t,e,n){return u.call(this,t,e,n,!0)},c.matchesSelector=function(){},c.cancel=function(t){t.preventDefault(),t.stopPropagation()},c.addEvent=function(t,e,n){var i="blur"==e||"focus"==e;t.element.addEventListener(e,n,i)},c.matchesEvent=function(){return!0},t.exports&&(t.exports=c),window.Gator=c}()});$e=l,Ke=rn,Ze=p,Qe=xe,tn='<div class="sgn-popover__background" data-close></div>\n<div class="sgn-popover__menu">\n    {{#header}}\n        <div class="sgn-popover__header">{{header}}</div>\n    {{/header}}\n    <div class="sgn-popover__content">\n        <ul>\n            {{#singleChoiceItems}}\n                <li data-index="{{index}}">\n                    <p class="sgn-popover-item__title">{{item.title}}</p>\n                    {{#item.subtitle}}\n                        <p class="sgn-popover-item__subtitle">{{item.subtitle}}</p>\n                    {{/item.subtitle}}\n                </li>\n            {{/singleChoiceItems}}\n        </ul>\n    </div>\n</div>',Je=function(){function t(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e(this,t),this.options=n,this.el=document.createElement("div"),this.backgroundEl=document.createElement("div"),this.resizeListener=this.resize.bind(this),this.scrollListener=this.scroll.bind(this)}return i(t,[{key:"render",value:function(){var t,e,n;return null!=(e=this.options.width)?e:100,t=this.options.header,null!=this.options.template&&(tn=this.options.template),this.trigger.bind(this),n={header:t,singleChoiceItems:this.options.singleChoiceItems.map(function(t,e){return{item:t,index:e}})},this.el.className="sgn-popover",this.el.setAttribute("tabindex",-1),this.el.innerHTML=Ze.render(tn,n),this.position(),this.addEventListeners(),this}},{key:"destroy",value:function(){Ke(this.el).off(),window.removeEventListener("resize",this.resizeListener),window.removeEventListener("scroll",this.scrollListener),null!=this.el.parentNode&&(this.el.parentNode.removeChild(this.el),this.trigger("destroyed"))}},{key:"position",value:function(){var t,e,n,i,r,o,s,a;s=this.options.y,n=this.options.x,a=(i=this.el.querySelector(".sgn-popover__menu")).offsetWidth,e=i.offsetHeight,o=this.el.parentNode.offsetWidth,r=this.el.parentNode.offsetHeight,s-=(t=this.el.parentNode.getBoundingClientRect()).top,n-=t.left,s-=window.pageYOffset,n-=window.pageXOffset,i.style.top=s+e>r?r-e+"px":s+"px",i.style.left=n+a>o?o-a+"px":n+"px"}},{key:"addEventListeners",value:function(){var t,e=this;t=this.trigger.bind(this),this.el.addEventListener("keyup",this.keyUp.bind(this)),Ke(this.el).on("click","[data-index]",function(e){e.preventDefault(),e.stopPropagation(),t("selected",{index:+this.getAttribute("data-index")})}),Ke(this.el).on("click","[data-close]",function(t){t.preventDefault(),t.stopPropagation(),e.destroy()}),Ke(this.el).on("click",".sgn-popover__menu",function(t){t.stopPropagation()}),window.addEventListener("resize",this.resizeListener,!1),window.addEventListener("scroll",this.scrollListener,!1)}},{key:"keyUp",value:function(t){t.keyCode===Qe.ESC&&this.destroy()}},{key:"resize",value:function(){this.destroy()}},{key:"scroll",value:function(){this.destroy()}}]),t}(),$e.mixin(Je);var on;on=Je;var sn,an,ln,un,cn,hn,dn={OfferDetails:nn,Popover:Je,singleChoicePopover:function(t,e){var n,i;return n=t.items,i=null,1===n.length?e(n[0]):n.length>1&&((i=new on({header:t.header,x:t.x,y:t.y,singleChoiceItems:n})).bind("selected",function(t){e(n[t.index]),i.destroy()}),i.bind("destroyed",function(){t.el.focus()}),t.el.appendChild(i.el),i.render().el.focus()),{destroy:function(){null!=i&&i.destroy()}}}};return(sn=K).storage={local:$,session:J,cookie:rt},sn.request=function(){var t,e,n,i,r,o,s,a,l,u,c,h,d,p=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},f=arguments.length>1?arguments[1]:void 0,g=arguments.length>2?arguments[2]:void 0;for(e in i=new XMLHttpRequest,o=null!=(a=p.method)?a:"get",h=p.url,n=null!=(l=p.headers)?l:{},null!=p.qs&&(s=it.util.formatQueryParams(p.qs),-1===h.indexOf("?")?h+="?"+s:h+="&"+s),i.open(o.toUpperCase(),h),null!=p.timeout&&(i.timeout=p.timeout),!0===p.useCookies&&(i.withCredentials=!0),!0===p.json&&(n["Content-Type"]="application/json",n.Accept="application/json"),u=p.headers)null!=(d=u[e])&&i.setRequestHeader(e,d);if(i.addEventListener("load",function(){var t;n=(n=i.getAllResponseHeaders().split("\r\n")).reduce(function(t,e,n){var i;return t[(i=e.split(": "))[0].toLowerCase()]=i[1],t},{}),t=i.responseText,!0===p.json&&(t=JSON.parse(t)),f(null,{statusCode:i.status,headers:n,body:t})}),i.addEventListener("error",function(){f(new Error)}),i.addEventListener("timeout",function(){f(new Error)}),i.addEventListener("progress",function(t){t.lengthComputable&&"function"==typeof g&&g(t.loaded,t.total)}),null!=p.formData){for(r in t=new FormData,c=p.formData)d=c[r],t.append(r,d);i.send(t)}else null!=p.body?!0===p.json?i.send(JSON.stringify(p.body)):i.send(p.body):i.send()},sn.AssetsKit=ct,sn.EventsKit=vt,sn.GraphKit=bt,sn.CoreKit=It,sn.PagedPublicationKit=Fe,sn.IncitoPublicationKit=en,sn.CoreUIKit=dn,"object"===t(cn=sn.storage.cookie.get("session"))&&sn.config.set({coreSessionToken:cn.token,coreSessionClientId:cn.client_id}),sn.client=function(){var t,e;return(t=null==(e=null!=(e=sn.storage.local.get("client-id"))?e.data:void 0))&&(e=sn.util.uuid(),sn.storage.local.set("client-id",e)),{firstOpen:t,id:e}}(),sn.config.bind("change",function(t){var e;null!=(e=t.eventTracker)&&(!0===sn.client.firstOpen&&e.trackEvent("first-client-session-opened",{},"1.0.0"),e.trackEvent("client-session-opened",{},"1.0.0"))}),null!=(un=document.getElementById("sgn-sdk"))&&(an=un.getAttribute("data-app-key"),hn=un.getAttribute("data-track-id"),ln={},null!=an&&(ln.appKey=an),null!=hn&&(ln.eventTracker=new sn.EventsKit.Tracker({trackId:hn})),sn.config.set(ln)),sn});
//# sourceMappingURL=sgn-sdk.min.js.map
