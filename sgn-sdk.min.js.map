{"version":3,"file":"sgn-sdk.min.js","sources":["../lib/coffeescript/config.coffee","../node_modules/microevent/microevent.js","../lib/coffeescript/translations.coffee","../node_modules/mustache/mustache.js","../lib/coffeescript/util.coffee","../node_modules/process/browser.js","../lib/coffeescript/core.coffee","../lib/coffeescript/sgn.coffee","../lib/coffeescript/storage/client-local.coffee","../lib/coffeescript/storage/client-cookie.coffee","../lib/coffeescript/request/browser.coffee","../lib/coffeescript/kits/assets/file-upload.coffee","../lib/coffeescript/kits/events/tracker.coffee","../lib/coffeescript/kits/events/pulse.coffee","../lib/coffeescript/kits/graph/request.coffee","../lib/coffeescript/kits/events/index.coffee","../lib/coffeescript/kits/core/request.coffee","../lib/coffeescript/kits/core/session.coffee","../node_modules/convert-hex/convert-hex.js","../node_modules/convert-string/convert-string.js","../node_modules/sha256/lib/sha256.js","../lib/coffeescript/kits/core/index.coffee","../lib/coffeescript/kits/paged-publication/page-spread.coffee","../lib/coffeescript/kits/paged-publication/page-spreads.coffee","../lib/coffeescript/kits/paged-publication/core.coffee","../node_modules/verso-browser/dist/verso.js","../lib/coffeescript/kits/paged-publication/hotspots.coffee","../lib/coffeescript/kits/paged-publication/templates/hotspot.coffee","../lib/coffeescript/kits/paged-publication/controls.coffee","../lib/coffeescript/key-codes.coffee","../lib/coffeescript/kits/paged-publication/event-tracking.coffee","../lib/coffeescript/kits/paged-publication/viewer.coffee","../lib/coffeescript/kits/paged-publication/hotspot-picker.coffee","../lib/coffeescript/kits/paged-publication/bootstrapper.coffee","../node_modules/gator/gator.js","../lib/coffeescript/kits/paged-publication/templates/hotspot-picker.coffee","../lib/coffeescript/kits/incito-publication/viewer.coffee","../lib/coffeescript/kits/paged-publication/index.coffee","../node_modules/incito-browser/dist/incito.js","../lib/coffeescript/kits/incito-publication/bootstrapper.coffee","../lib/coffeescript/browser.coffee","../lib/coffeescript/kits/incito-publication/index.coffee"],"sourcesContent":["MicroEvent = require 'microevent'\nConfig = class Config\n    keys: [\n        'appVersion',\n        'appKey',\n        'appSecret',\n        'authToken',\n        'eventTracker',\n        'locale',\n        'coreSessionToken',\n        'coreSessionClientId',\n        'coreUrl',\n        'graphUrl',\n        'eventsTrackUrl',\n        'eventsPulseUrl',\n        'assetsFileUploadUrl'\n    ]\n\n    constructor: ->\n        @attrs = {}\n\n        return\n\n    set: (config = {}) ->\n        changedAttributes = {}\n\n        for key, value of config\n            if key in @keys\n                @attrs[key] = value\n                changedAttributes[key] = value\n\n        @trigger 'change', changedAttributes\n\n        return\n\n    get: (option) ->\n        @attrs[option]\n\nMicroEvent.mixin Config\n\nmodule.exports = Config\n","/**\n * MicroEvent - to make any js object an event emitter (server or browser)\n * \n * - pure javascript - server compatible, browser compatible\n * - dont rely on the browser doms\n * - super simple - you get it immediatly, no mistery, no magic involved\n *\n * - create a MicroEventDebug with goodies to debug\n *   - make it safer to use\n*/\n\nvar MicroEvent\t= function(){}\nMicroEvent.prototype\t= {\n\tbind\t: function(event, fct){\n\t\tthis._events = this._events || {};\n\t\tthis._events[event] = this._events[event]\t|| [];\n\t\tthis._events[event].push(fct);\n\t},\n\tunbind\t: function(event, fct){\n\t\tthis._events = this._events || {};\n\t\tif( event in this._events === false  )\treturn;\n\t\tthis._events[event].splice(this._events[event].indexOf(fct), 1);\n\t},\n\ttrigger\t: function(event /* , args... */){\n\t\tthis._events = this._events || {};\n\t\tif( event in this._events === false  )\treturn;\n\t\tfor(var i = 0; i < this._events[event].length; i++){\n\t\t\tthis._events[event][i].apply(this, Array.prototype.slice.call(arguments, 1))\n\t\t}\n\t}\n};\n\n/**\n * mixin will delegate all MicroEvent.js function in the destination object\n *\n * - require('MicroEvent').mixin(Foobar) will make Foobar able to use MicroEvent\n *\n * @param {Object} the object which will support MicroEvent\n*/\nMicroEvent.mixin\t= function(destObject){\n\tvar props\t= ['bind', 'unbind', 'trigger'];\n\tfor(var i = 0; i < props.length; i ++){\n\t\tdestObject.prototype[props[i]]\t= MicroEvent.prototype[props[i]];\n\t}\n}\n\n// export in common js\nif( typeof module !== \"undefined\" && ('exports' in module)){\n\tmodule.exports\t= MicroEvent\n}\n","Mustache = require 'mustache'\npairs =\n    'paged_publication.hotspot_picker.header': 'Which offer did you mean?'\n\nmodule.exports =\n    t: (key, view) ->\n        template = pairs[key] ? ''\n\n        Mustache.render template, view\n\n    update: (translations) ->\n        for key, value of translations\n            pairs[key] = value\n\n        return\n","/*!\n * mustache.js - Logic-less {{mustache}} templates with JavaScript\n * http://github.com/janl/mustache.js\n */\n\n/*global define: false Mustache: true*/\n\n(function defineMustache (global, factory) {\n  if (typeof exports === 'object' && exports && typeof exports.nodeName !== 'string') {\n    factory(exports); // CommonJS\n  } else if (typeof define === 'function' && define.amd) {\n    define(['exports'], factory); // AMD\n  } else {\n    global.Mustache = {};\n    factory(global.Mustache); // script, wsh, asp\n  }\n}(this, function mustacheFactory (mustache) {\n\n  var objectToString = Object.prototype.toString;\n  var isArray = Array.isArray || function isArrayPolyfill (object) {\n    return objectToString.call(object) === '[object Array]';\n  };\n\n  function isFunction (object) {\n    return typeof object === 'function';\n  }\n\n  /**\n   * More correct typeof string handling array\n   * which normally returns typeof 'object'\n   */\n  function typeStr (obj) {\n    return isArray(obj) ? 'array' : typeof obj;\n  }\n\n  function escapeRegExp (string) {\n    return string.replace(/[\\-\\[\\]{}()*+?.,\\\\\\^$|#\\s]/g, '\\\\$&');\n  }\n\n  /**\n   * Null safe way of checking whether or not an object,\n   * including its prototype, has a given property\n   */\n  function hasProperty (obj, propName) {\n    return obj != null && typeof obj === 'object' && (propName in obj);\n  }\n\n  // Workaround for https://issues.apache.org/jira/browse/COUCHDB-577\n  // See https://github.com/janl/mustache.js/issues/189\n  var regExpTest = RegExp.prototype.test;\n  function testRegExp (re, string) {\n    return regExpTest.call(re, string);\n  }\n\n  var nonSpaceRe = /\\S/;\n  function isWhitespace (string) {\n    return !testRegExp(nonSpaceRe, string);\n  }\n\n  var entityMap = {\n    '&': '&amp;',\n    '<': '&lt;',\n    '>': '&gt;',\n    '\"': '&quot;',\n    \"'\": '&#39;',\n    '/': '&#x2F;',\n    '`': '&#x60;',\n    '=': '&#x3D;'\n  };\n\n  function escapeHtml (string) {\n    return String(string).replace(/[&<>\"'`=\\/]/g, function fromEntityMap (s) {\n      return entityMap[s];\n    });\n  }\n\n  var whiteRe = /\\s*/;\n  var spaceRe = /\\s+/;\n  var equalsRe = /\\s*=/;\n  var curlyRe = /\\s*\\}/;\n  var tagRe = /#|\\^|\\/|>|\\{|&|=|!/;\n\n  /**\n   * Breaks up the given `template` string into a tree of tokens. If the `tags`\n   * argument is given here it must be an array with two string values: the\n   * opening and closing tags used in the template (e.g. [ \"<%\", \"%>\" ]). Of\n   * course, the default is to use mustaches (i.e. mustache.tags).\n   *\n   * A token is an array with at least 4 elements. The first element is the\n   * mustache symbol that was used inside the tag, e.g. \"#\" or \"&\". If the tag\n   * did not contain a symbol (i.e. {{myValue}}) this element is \"name\". For\n   * all text that appears outside a symbol this element is \"text\".\n   *\n   * The second element of a token is its \"value\". For mustache tags this is\n   * whatever else was inside the tag besides the opening symbol. For text tokens\n   * this is the text itself.\n   *\n   * The third and fourth elements of the token are the start and end indices,\n   * respectively, of the token in the original template.\n   *\n   * Tokens that are the root node of a subtree contain two more elements: 1) an\n   * array of tokens in the subtree and 2) the index in the original template at\n   * which the closing tag for that section begins.\n   */\n  function parseTemplate (template, tags) {\n    if (!template)\n      return [];\n\n    var sections = [];     // Stack to hold section tokens\n    var tokens = [];       // Buffer to hold the tokens\n    var spaces = [];       // Indices of whitespace tokens on the current line\n    var hasTag = false;    // Is there a {{tag}} on the current line?\n    var nonSpace = false;  // Is there a non-space char on the current line?\n\n    // Strips all whitespace tokens array for the current line\n    // if there was a {{#tag}} on it and otherwise only space.\n    function stripSpace () {\n      if (hasTag && !nonSpace) {\n        while (spaces.length)\n          delete tokens[spaces.pop()];\n      } else {\n        spaces = [];\n      }\n\n      hasTag = false;\n      nonSpace = false;\n    }\n\n    var openingTagRe, closingTagRe, closingCurlyRe;\n    function compileTags (tagsToCompile) {\n      if (typeof tagsToCompile === 'string')\n        tagsToCompile = tagsToCompile.split(spaceRe, 2);\n\n      if (!isArray(tagsToCompile) || tagsToCompile.length !== 2)\n        throw new Error('Invalid tags: ' + tagsToCompile);\n\n      openingTagRe = new RegExp(escapeRegExp(tagsToCompile[0]) + '\\\\s*');\n      closingTagRe = new RegExp('\\\\s*' + escapeRegExp(tagsToCompile[1]));\n      closingCurlyRe = new RegExp('\\\\s*' + escapeRegExp('}' + tagsToCompile[1]));\n    }\n\n    compileTags(tags || mustache.tags);\n\n    var scanner = new Scanner(template);\n\n    var start, type, value, chr, token, openSection;\n    while (!scanner.eos()) {\n      start = scanner.pos;\n\n      // Match any text between tags.\n      value = scanner.scanUntil(openingTagRe);\n\n      if (value) {\n        for (var i = 0, valueLength = value.length; i < valueLength; ++i) {\n          chr = value.charAt(i);\n\n          if (isWhitespace(chr)) {\n            spaces.push(tokens.length);\n          } else {\n            nonSpace = true;\n          }\n\n          tokens.push([ 'text', chr, start, start + 1 ]);\n          start += 1;\n\n          // Check for whitespace on the current line.\n          if (chr === '\\n')\n            stripSpace();\n        }\n      }\n\n      // Match the opening tag.\n      if (!scanner.scan(openingTagRe))\n        break;\n\n      hasTag = true;\n\n      // Get the tag type.\n      type = scanner.scan(tagRe) || 'name';\n      scanner.scan(whiteRe);\n\n      // Get the tag value.\n      if (type === '=') {\n        value = scanner.scanUntil(equalsRe);\n        scanner.scan(equalsRe);\n        scanner.scanUntil(closingTagRe);\n      } else if (type === '{') {\n        value = scanner.scanUntil(closingCurlyRe);\n        scanner.scan(curlyRe);\n        scanner.scanUntil(closingTagRe);\n        type = '&';\n      } else {\n        value = scanner.scanUntil(closingTagRe);\n      }\n\n      // Match the closing tag.\n      if (!scanner.scan(closingTagRe))\n        throw new Error('Unclosed tag at ' + scanner.pos);\n\n      token = [ type, value, start, scanner.pos ];\n      tokens.push(token);\n\n      if (type === '#' || type === '^') {\n        sections.push(token);\n      } else if (type === '/') {\n        // Check section nesting.\n        openSection = sections.pop();\n\n        if (!openSection)\n          throw new Error('Unopened section \"' + value + '\" at ' + start);\n\n        if (openSection[1] !== value)\n          throw new Error('Unclosed section \"' + openSection[1] + '\" at ' + start);\n      } else if (type === 'name' || type === '{' || type === '&') {\n        nonSpace = true;\n      } else if (type === '=') {\n        // Set the tags for the next time around.\n        compileTags(value);\n      }\n    }\n\n    // Make sure there are no open sections when we're done.\n    openSection = sections.pop();\n\n    if (openSection)\n      throw new Error('Unclosed section \"' + openSection[1] + '\" at ' + scanner.pos);\n\n    return nestTokens(squashTokens(tokens));\n  }\n\n  /**\n   * Combines the values of consecutive text tokens in the given `tokens` array\n   * to a single token.\n   */\n  function squashTokens (tokens) {\n    var squashedTokens = [];\n\n    var token, lastToken;\n    for (var i = 0, numTokens = tokens.length; i < numTokens; ++i) {\n      token = tokens[i];\n\n      if (token) {\n        if (token[0] === 'text' && lastToken && lastToken[0] === 'text') {\n          lastToken[1] += token[1];\n          lastToken[3] = token[3];\n        } else {\n          squashedTokens.push(token);\n          lastToken = token;\n        }\n      }\n    }\n\n    return squashedTokens;\n  }\n\n  /**\n   * Forms the given array of `tokens` into a nested tree structure where\n   * tokens that represent a section have two additional items: 1) an array of\n   * all tokens that appear in that section and 2) the index in the original\n   * template that represents the end of that section.\n   */\n  function nestTokens (tokens) {\n    var nestedTokens = [];\n    var collector = nestedTokens;\n    var sections = [];\n\n    var token, section;\n    for (var i = 0, numTokens = tokens.length; i < numTokens; ++i) {\n      token = tokens[i];\n\n      switch (token[0]) {\n        case '#':\n        case '^':\n          collector.push(token);\n          sections.push(token);\n          collector = token[4] = [];\n          break;\n        case '/':\n          section = sections.pop();\n          section[5] = token[2];\n          collector = sections.length > 0 ? sections[sections.length - 1][4] : nestedTokens;\n          break;\n        default:\n          collector.push(token);\n      }\n    }\n\n    return nestedTokens;\n  }\n\n  /**\n   * A simple string scanner that is used by the template parser to find\n   * tokens in template strings.\n   */\n  function Scanner (string) {\n    this.string = string;\n    this.tail = string;\n    this.pos = 0;\n  }\n\n  /**\n   * Returns `true` if the tail is empty (end of string).\n   */\n  Scanner.prototype.eos = function eos () {\n    return this.tail === '';\n  };\n\n  /**\n   * Tries to match the given regular expression at the current position.\n   * Returns the matched text if it can match, the empty string otherwise.\n   */\n  Scanner.prototype.scan = function scan (re) {\n    var match = this.tail.match(re);\n\n    if (!match || match.index !== 0)\n      return '';\n\n    var string = match[0];\n\n    this.tail = this.tail.substring(string.length);\n    this.pos += string.length;\n\n    return string;\n  };\n\n  /**\n   * Skips all text until the given regular expression can be matched. Returns\n   * the skipped string, which is the entire tail if no match can be made.\n   */\n  Scanner.prototype.scanUntil = function scanUntil (re) {\n    var index = this.tail.search(re), match;\n\n    switch (index) {\n      case -1:\n        match = this.tail;\n        this.tail = '';\n        break;\n      case 0:\n        match = '';\n        break;\n      default:\n        match = this.tail.substring(0, index);\n        this.tail = this.tail.substring(index);\n    }\n\n    this.pos += match.length;\n\n    return match;\n  };\n\n  /**\n   * Represents a rendering context by wrapping a view object and\n   * maintaining a reference to the parent context.\n   */\n  function Context (view, parentContext) {\n    this.view = view;\n    this.cache = { '.': this.view };\n    this.parent = parentContext;\n  }\n\n  /**\n   * Creates a new context using the given view with this context\n   * as the parent.\n   */\n  Context.prototype.push = function push (view) {\n    return new Context(view, this);\n  };\n\n  /**\n   * Returns the value of the given name in this context, traversing\n   * up the context hierarchy if the value is absent in this context's view.\n   */\n  Context.prototype.lookup = function lookup (name) {\n    var cache = this.cache;\n\n    var value;\n    if (cache.hasOwnProperty(name)) {\n      value = cache[name];\n    } else {\n      var context = this, names, index, lookupHit = false;\n\n      while (context) {\n        if (name.indexOf('.') > 0) {\n          value = context.view;\n          names = name.split('.');\n          index = 0;\n\n          /**\n           * Using the dot notion path in `name`, we descend through the\n           * nested objects.\n           *\n           * To be certain that the lookup has been successful, we have to\n           * check if the last object in the path actually has the property\n           * we are looking for. We store the result in `lookupHit`.\n           *\n           * This is specially necessary for when the value has been set to\n           * `undefined` and we want to avoid looking up parent contexts.\n           **/\n          while (value != null && index < names.length) {\n            if (index === names.length - 1)\n              lookupHit = hasProperty(value, names[index]);\n\n            value = value[names[index++]];\n          }\n        } else {\n          value = context.view[name];\n          lookupHit = hasProperty(context.view, name);\n        }\n\n        if (lookupHit)\n          break;\n\n        context = context.parent;\n      }\n\n      cache[name] = value;\n    }\n\n    if (isFunction(value))\n      value = value.call(this.view);\n\n    return value;\n  };\n\n  /**\n   * A Writer knows how to take a stream of tokens and render them to a\n   * string, given a context. It also maintains a cache of templates to\n   * avoid the need to parse the same template twice.\n   */\n  function Writer () {\n    this.cache = {};\n  }\n\n  /**\n   * Clears all cached templates in this writer.\n   */\n  Writer.prototype.clearCache = function clearCache () {\n    this.cache = {};\n  };\n\n  /**\n   * Parses and caches the given `template` and returns the array of tokens\n   * that is generated from the parse.\n   */\n  Writer.prototype.parse = function parse (template, tags) {\n    var cache = this.cache;\n    var tokens = cache[template];\n\n    if (tokens == null)\n      tokens = cache[template] = parseTemplate(template, tags);\n\n    return tokens;\n  };\n\n  /**\n   * High-level method that is used to render the given `template` with\n   * the given `view`.\n   *\n   * The optional `partials` argument may be an object that contains the\n   * names and templates of partials that are used in the template. It may\n   * also be a function that is used to load partial templates on the fly\n   * that takes a single argument: the name of the partial.\n   */\n  Writer.prototype.render = function render (template, view, partials) {\n    var tokens = this.parse(template);\n    var context = (view instanceof Context) ? view : new Context(view);\n    return this.renderTokens(tokens, context, partials, template);\n  };\n\n  /**\n   * Low-level method that renders the given array of `tokens` using\n   * the given `context` and `partials`.\n   *\n   * Note: The `originalTemplate` is only ever used to extract the portion\n   * of the original template that was contained in a higher-order section.\n   * If the template doesn't use higher-order sections, this argument may\n   * be omitted.\n   */\n  Writer.prototype.renderTokens = function renderTokens (tokens, context, partials, originalTemplate) {\n    var buffer = '';\n\n    var token, symbol, value;\n    for (var i = 0, numTokens = tokens.length; i < numTokens; ++i) {\n      value = undefined;\n      token = tokens[i];\n      symbol = token[0];\n\n      if (symbol === '#') value = this.renderSection(token, context, partials, originalTemplate);\n      else if (symbol === '^') value = this.renderInverted(token, context, partials, originalTemplate);\n      else if (symbol === '>') value = this.renderPartial(token, context, partials, originalTemplate);\n      else if (symbol === '&') value = this.unescapedValue(token, context);\n      else if (symbol === 'name') value = this.escapedValue(token, context);\n      else if (symbol === 'text') value = this.rawValue(token);\n\n      if (value !== undefined)\n        buffer += value;\n    }\n\n    return buffer;\n  };\n\n  Writer.prototype.renderSection = function renderSection (token, context, partials, originalTemplate) {\n    var self = this;\n    var buffer = '';\n    var value = context.lookup(token[1]);\n\n    // This function is used to render an arbitrary template\n    // in the current context by higher-order sections.\n    function subRender (template) {\n      return self.render(template, context, partials);\n    }\n\n    if (!value) return;\n\n    if (isArray(value)) {\n      for (var j = 0, valueLength = value.length; j < valueLength; ++j) {\n        buffer += this.renderTokens(token[4], context.push(value[j]), partials, originalTemplate);\n      }\n    } else if (typeof value === 'object' || typeof value === 'string' || typeof value === 'number') {\n      buffer += this.renderTokens(token[4], context.push(value), partials, originalTemplate);\n    } else if (isFunction(value)) {\n      if (typeof originalTemplate !== 'string')\n        throw new Error('Cannot use higher-order sections without the original template');\n\n      // Extract the portion of the original template that the section contains.\n      value = value.call(context.view, originalTemplate.slice(token[3], token[5]), subRender);\n\n      if (value != null)\n        buffer += value;\n    } else {\n      buffer += this.renderTokens(token[4], context, partials, originalTemplate);\n    }\n    return buffer;\n  };\n\n  Writer.prototype.renderInverted = function renderInverted (token, context, partials, originalTemplate) {\n    var value = context.lookup(token[1]);\n\n    // Use JavaScript's definition of falsy. Include empty arrays.\n    // See https://github.com/janl/mustache.js/issues/186\n    if (!value || (isArray(value) && value.length === 0))\n      return this.renderTokens(token[4], context, partials, originalTemplate);\n  };\n\n  Writer.prototype.renderPartial = function renderPartial (token, context, partials) {\n    if (!partials) return;\n\n    var value = isFunction(partials) ? partials(token[1]) : partials[token[1]];\n    if (value != null)\n      return this.renderTokens(this.parse(value), context, partials, value);\n  };\n\n  Writer.prototype.unescapedValue = function unescapedValue (token, context) {\n    var value = context.lookup(token[1]);\n    if (value != null)\n      return value;\n  };\n\n  Writer.prototype.escapedValue = function escapedValue (token, context) {\n    var value = context.lookup(token[1]);\n    if (value != null)\n      return mustache.escape(value);\n  };\n\n  Writer.prototype.rawValue = function rawValue (token) {\n    return token[1];\n  };\n\n  mustache.name = 'mustache.js';\n  mustache.version = '2.3.0';\n  mustache.tags = [ '{{', '}}' ];\n\n  // All high-level mustache.* functions use this writer.\n  var defaultWriter = new Writer();\n\n  /**\n   * Clears all cached templates in the default writer.\n   */\n  mustache.clearCache = function clearCache () {\n    return defaultWriter.clearCache();\n  };\n\n  /**\n   * Parses and caches the given template in the default writer and returns the\n   * array of tokens it contains. Doing this ahead of time avoids the need to\n   * parse templates on the fly as they are rendered.\n   */\n  mustache.parse = function parse (template, tags) {\n    return defaultWriter.parse(template, tags);\n  };\n\n  /**\n   * Renders the `template` with the given `view` and `partials` using the\n   * default writer.\n   */\n  mustache.render = function render (template, view, partials) {\n    if (typeof template !== 'string') {\n      throw new TypeError('Invalid template! Template should be a \"string\" ' +\n                          'but \"' + typeStr(template) + '\" was given as the first ' +\n                          'argument for mustache#render(template, view, partials)');\n    }\n\n    return defaultWriter.render(template, view, partials);\n  };\n\n  // This is here for backwards compatibility with 0.4.x.,\n  /*eslint-disable */ // eslint wants camel cased function name\n  mustache.to_html = function to_html (template, view, partials, send) {\n    /*eslint-enable*/\n\n    var result = mustache.render(template, view, partials);\n\n    if (isFunction(send)) {\n      send(result);\n    } else {\n      return result;\n    }\n  };\n\n  // Export the escaping function so that the user may override it.\n  // See https://github.com/janl/mustache.js/issues/244\n  mustache.escape = escapeHtml;\n\n  // Export these mainly for testing, but also for advanced usage.\n  mustache.Scanner = Scanner;\n  mustache.Context = Context;\n  mustache.Writer = Writer;\n\n  return mustache;\n}));\n","process = require 'process'\n\nutil =\n    isBrowser: ->\n        typeof process isnt 'undefined' and process.browser\n\n    isNode: ->\n        not util.isBrowser()\n\n    error: (err, options) ->\n        err.message = err.message or null\n\n        if typeof options is 'string'\n            err.message = options\n        else if typeof options is 'object' and options?\n            for key, value of options\n                err[key] = value\n\n            err.message = options.message if options.message?\n            err.code = options.code or options.name if options.code? or options.message?\n            err.stack = options.stack if options.stack?\n\n        err.name = options and options.name or err.name or err.code or 'Error'\n        err.time = new Date()\n\n        err\n\n    uuid: ->\n        'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace /[xy]/g, (c) ->\n            r = Math.random() * 16 | 0\n            v = if c is 'x' then r else (r & 0x3|0x8)\n\n            v.toString 16\n\n    getQueryParam: (field, url) ->\n        href = if url then url else window.location.href\n        reg = new RegExp '[?&]' + field + '=([^&#]*)', 'i'\n        string = reg.exec href\n\n        if string then string[1] else undefined\n\n    formatQueryParams: (queryParams = {}) ->\n        Object\n            .keys queryParams\n            .map (key) -> key + '=' + encodeURIComponent(queryParams[key])\n            .join '&'\n\n    getRandomNumberBetween: (from, to) ->\n        Math.floor(Math.random() * to) + from\n\n    getOS: ->\n        name = null\n        ua = window.navigator.userAgent\n\n        if ua.indexOf('Windows') > -1\n            name = 'Windows'\n        else if ua.indexOf('Mac') > -1\n            name = 'macOS'\n        else if ua.indexOf('X11') > -1\n            name = 'unix'\n        else if ua.indexOf('Linux') > -1\n            name = 'Linux'\n        else if ua.indexOf('iOS') > -1\n            name = 'iOS'\n        else if ua.indexOf('Android') > -1\n            name = 'Android'\n\n        name\n    \n    getDeviceCategory: ->\n        deviceCategory = 'desktop'\n\n        if navigator.platform is 'iPod' or navigator.platform is 'iPhone'\n            deviceCategory = 'mobile'\n        else if navigator.platform is 'iPad'\n            deviceCategory = 'tablet'\n        else if navigator.platform is 'Android'\n            if /tablet/gi.test(navigator.userAgent)\n                deviceCategory = 'tablet'\n            else\n                deviceCategory = 'mobile'\n\n        deviceCategory\n    \n    getPointer: ->\n        pointer = 'fine'\n\n        pointer = 'coarse' if matchMedia('(pointer:coarse)').matches\n\n        pointer\n    \n    getOrientation: (width, height) ->\n        if width is height\n            'quadratic'\n        else if width > height\n            'horizontal'\n        else\n            'vertical'\n\n    getScreenDimensions: ->\n        density = window.devicePixelRatio ? 1\n        logical =\n            width: window.screen.width\n            height: window.screen.height\n        physical =\n            width: Math.round logical.width * density\n            height: Math.round logical.height * density\n\n        density: density\n        logical: logical\n        physical: physical\n\n    getUtcOffsetSeconds: ->\n        now = new Date()\n        jan1 = new Date now.getFullYear(), 0, 1, 0, 0, 0, 0\n        tmp = jan1.toGMTString()\n        jan2 = new Date tmp.substring(0, tmp.lastIndexOf(' ') - 1)\n        stdTimeOffset = (jan1 - jan2) / 1000\n\n        stdTimeOffset\n\n    getUtcDstOffsetSeconds: ->\n        new Date().getTimezoneOffset() * 60 * -1\n\n    getColorBrightness: (color) ->\n        color = color.replace '#', ''\n        hex = parseInt (hex + '').replace(/[^a-f0-9]/gi, ''), 16\n        rgb = []\n        sum = 0\n        x = 0\n\n        while x < 3\n            s = parseInt(color.substring(2 * x, 2), 16)\n            rgb[x] = s\n\n            sum += s if s > 0\n\n            ++x\n\n        if sum <= 381 then 'dark' else 'light'\n\n    btoa: (str) ->\n        if util.isBrowser()\n            btoa str\n        else\n            buffer = null\n\n            if str instanceof Buffer\n                buffer = str\n            else\n                buffer = new Buffer str.toString(), 'binary'\n\n            buffer.toString 'base64'\n\n    find: (arr, fn) ->\n        for item in arr\n            return item if fn(item) is true\n\n    chunk: (arr, size) ->\n        results = []\n\n        while arr.length\n            results.push arr.splice(0, size)\n\n        results\n\n    throttle: (fn, threshold = 250, scope) ->\n        last = undefined\n        deferTimer = undefined\n\n        ->\n            context = scope or @\n            now = new Date().getTime()\n            args = arguments\n\n            if last and now < last + threshold\n                clearTimeout deferTimer\n\n                deferTimer = setTimeout ->\n                    last = now\n                    \n                    fn.apply context, args\n                \n                    return\n                , threshold\n            else\n                last = now\n                fn.apply context, args\n\n            return\n\n    loadImage: (src, callback) ->\n        img = new Image()\n\n        img.onload = -> callback null, img.width, img.height\n        img.onerror = -> callback new Error()\n        img.src = src\n\n        img\n\n    distance: (lat1, lng1, lat2, lng2) ->\n        radlat1 = Math.PI * lat1 / 180\n        radlat2 = Math.PI * lat2 / 180\n        theta = lng1 - lng2\n        radtheta = Math.PI * theta / 180\n        dist = Math.sin(radlat1) * Math.sin(radlat2) + Math.cos(radlat1) * Math.cos(radlat2) * Math.cos(radtheta)\n        dist = Math.acos(dist)\n        dist = dist * 180 / Math.PI\n        dist = dist * 60 * 1.1515\n        dist = dist * 1.609344 * 1000\n\n        dist\n\n    async:\n        parallel: (asyncCalls, sharedCallback) ->\n            counter = asyncCalls.length\n            allResults = []\n            k = 0\n\n            makeCallback = (index) ->\n                ->\n                    results = []\n                    i = 0\n\n                    counter--\n\n                    while i < arguments.length\n                        results.push arguments[i]\n                        i++\n\n                    allResults[index] = results\n\n                    sharedCallback allResults if counter is 0\n\n                    return\n\n            while k < asyncCalls.length\n                asyncCalls[k] makeCallback(k)\n                k++\n\n            return\n\nmodule.exports = util\n","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","Config = require './config'\ntranslations = require './translations'\nutil = require './util'\nconfig = new Config()\n\n# Set default values.\nconfig.set\n    locale: 'en_US'\n    coreUrl: 'https://api.etilbudsavis.dk'\n    graphUrl: 'https://graph.service.shopgun.com'\n    eventsTrackUrl: 'https://events.service.shopgun.com/track'\n    eventsPulseUrl: 'wss://events.service.shopgun.com/pulse'\n    assetsFileUploadUrl: 'https://assets.service.shopgun.com/upload'\n\nmodule.exports =\n    config: config\n\n    translations: translations\n\n    util: util\n","module.exports = require './core'\n","SGN = require '../sgn'\nprefixKey = 'sgn-'\n\nmodule.exports =\n    key: 'sgn-'\n\n    storage: do ->\n        try\n            storage = window.localStorage\n\n            storage[\"#{prefixKey}test-storage\"] = 'foobar'\n            delete storage[\"#{prefixKey}test-storage\"]\n\n            storage\n        catch\n            {}\n\n    get: (key) ->\n        try\n            JSON.parse @storage[\"#{prefixKey}#{key}\"]\n\n    set: (key, value) ->\n        try\n            @storage[\"#{prefixKey}#{key}\"] = JSON.stringify value\n\n        @\n","SGN = require '../sgn'\nprefixKey = 'sgn-'\n\nmodule.exports =\n    get: (key) ->\n        return if SGN.util.isNode()\n\n        try\n            name = \"#{prefixKey}#{key}=\"\n            ca = document.cookie.split ';'\n\n            for c in ca\n                ct = c.trim()\n\n                value = ct.substring(name.length, ct.length) if ct.indexOf(name) is 0\n\n            value = JSON.parse value\n        catch err\n            value = {}\n\n        value\n\n    set: (key, value) ->\n        return if SGN.util.isNode()\n\n        try\n            days = 365\n            date = new Date()\n            str = JSON.stringify value\n\n            date.setTime date.getTime() + days * 24 * 60 * 60 * 1000\n\n            document.cookie = \"#{prefixKey}#{key}=#{str};expires=#{date.toUTCString()};path=/\"\n        catch err\n\n        return\n\n\n","SGN = require '../sgn'\n\nmodule.exports = (options = {}, callback, progressCallback) ->\n    http = new XMLHttpRequest()\n    method = options.method ? 'get'\n    url = options.url\n    headers = options.headers ? {}\n\n    if options.qs?\n        queryParams = SGN.util.formatQueryParams options.qs\n\n        if url.indexOf('?') is -1\n            url += '?' + queryParams\n        else\n            url += '&' + queryParams\n\n    http.open method.toUpperCase(), url\n    http.timeout = options.timeout if options.timeout?\n    http.withCredentials = true if options.useCookies is true\n\n    if options.json is true\n        headers['Content-Type'] = 'application/json'\n        headers['Accept'] = 'application/json'\n\n    for header, value of options.headers\n        http.setRequestHeader header, value\n\n    http.addEventListener 'load', ->\n        headers = http.getAllResponseHeaders().split '\\r\\n'\n        headers = headers.reduce (acc, current, i) ->\n            parts = current.split ': '\n\n            acc[parts[0].toLowerCase()] = parts[1]\n\n            acc\n        , {}\n        body = http.responseText\n\n        body = JSON.parse body if options.json is true\n\n        callback null,\n            statusCode: http.status\n            headers: headers\n            body: body\n\n        return\n    http.addEventListener 'error', ->\n        callback new Error()\n\n        return\n    http.addEventListener 'timeout', ->\n        callback new Error()\n\n        return\n    http.addEventListener 'progress', (e) ->\n        if e.lengthComputable and typeof progressCallback is 'function'\n            progressCallback e.loaded, e.total\n\n        return\n\n    if options.formData?\n        formData = new FormData()\n\n        for key, value of options.formData\n            formData.append key, value\n\n        http.send formData\n    else if options.body?\n        if options.json is true\n            http.send JSON.stringify(options.body)\n        else\n            http.send options.body\n    else\n        http.send()\n\n    return\n","SGN = require '../../sgn'\n\nmodule.exports = (options = {}, callback, progressCallback) ->\n    throw new Error('File is not defined') if not options.file?\n\n    url = SGN.config.get 'assetsFileUploadUrl'\n    formData = file: options.file\n    formData = file: value: options.file, options: contentType: options.contentType if options.contentType?\n    timeout = 1000 * 60 * 60\n\n    SGN.request\n        method: 'post'\n        url: url\n        headers:\n            'Content-Type': options.contentType\n            'Accept': 'application/json'\n        formData: formData\n        timeout: timeout\n    , (err, data) ->\n        if err?\n            callback SGN.util.error(new Error('Request error'),\n                code: 'RequestError'\n            )\n        else\n            if data.statusCode is 200\n                callback null, JSON.parse(data.body)\n            else\n                callback SGN.util.error(new Error('Request error'),\n                    code: 'RequestError'\n                    statusCode: data.statusCode\n                )\n\n        return\n    , (loaded, total) ->\n        if typeof progressCallback is 'function'\n            progressCallback\n                progress: loaded / total\n                loaded: loaded\n                total: total\n\n        return\n\n    return\n","SGN = require '../../sgn'\nclientLocalStorage = require '../../storage/client-local'\ngetPool = ->\n    data = clientLocalStorage.get 'event-tracker-pool'\n    data = [] if Array.isArray(data) is false\n\n    data\npool = getPool()\n\nclientLocalStorage.set 'event-tracker-pool', []\n\ntry\n    window.addEventListener 'unload', ->\n        pool = pool.concat getPool()\n\n        clientLocalStorage.set 'event-tracker-pool', pool\n\n        return\n    , false\n\nmodule.exports = class Tracker\n    defaultOptions:\n        trackId: null\n        dispatchInterval: 3000\n        dispatchLimit: 100\n        poolLimit: 1000\n        dryRun: false\n\n    constructor: (options = {}) ->\n        for key, value of @defaultOptions\n            @[key] = options[key] or value\n\n        @dispatching = false\n        @session =\n            id: SGN.util.uuid()\n        @client =\n            trackId: @trackId\n            id: SGN.client.id\n        @view =\n            path: []\n            previousPath: []\n            uri: null\n        @location = {}\n        @application = {}\n        @identity = {}\n\n        # Dispatch events periodically.\n        @interval = setInterval @dispatch.bind(@), @dispatchInterval\n\n        return\n\n    trackEvent: (type, properties = {}, version = '1.0.0') ->\n        throw SGN.util.error(new Error('Event type is required')) if typeof type isnt 'string'\n        return if not @trackId?\n\n        pool.push\n            id: SGN.util.uuid()\n            type: type\n            version: version\n            recordedAt: new Date().toISOString()\n            sentAt: null\n            client:\n                id: @client.id\n                trackId: @client.trackId\n            context: @getContext()\n            properties: properties\n\n        pool.shift() while @getPoolSize() > @poolLimit\n\n        @\n\n    identify: (id) ->\n        @identity.id = id\n\n        @\n\n    setLocation: (location = {}) ->\n        @location.determinedAt = new Date(location.timestamp).toISOString()\n        @location.latitude = location.latitude\n        @location.longitude = location.longitude\n        @location.altitude = location.altitude\n        @location.accuracy =\n            horizontal: location.accuracy?.horizontal\n            vertical: location.accuracy?.vertical\n        @location.speed = location.speed\n        @location.floor = location.floor\n\n        @\n\n    setApplication: (application = {}) ->\n        @application.name = application.name\n        @application.version = application.version\n        @application.build = application.build\n\n        @\n\n    setView: (path) ->\n        @view.previousPath = @view.path\n        @view.path = path if Array.isArray(path) is true\n        @view.uri = window.location.href\n\n        @\n\n    getView: ->\n        view = {}\n\n        view.path = @view.path if @view.path.length > 0\n        view.previousPath = @view.previousPath if @view.previousPath.length > 0\n        view.uri = @view.uri if @view.uri?\n\n        view\n\n    getContext: ->\n        screenDimensions = SGN.util.getScreenDimensions()\n        os = SGN.util.getOS()\n        context =\n            userAgent: window.navigator.userAgent\n            locale: navigator.language\n            timeZone:\n                utcOffsetSeconds: SGN.util.getUtcOffsetSeconds()\n                utcDstOffsetSeconds: SGN.util.getUtcDstOffsetSeconds()\n            device:\n                screen:\n                    width: screenDimensions.physical.width\n                    height: screenDimensions.physical.height\n                    density: screenDimensions.density\n            session:\n                id: @session.id\n            view: @getView()\n        application =\n            name: @application.name\n            version: @application.version\n            build: @application.build\n        campaign =\n            source: SGN.util.getQueryParam 'utm_source'\n            medium: SGN.util.getQueryParam 'utm_medium'\n            name: SGN.util.getQueryParam 'utm_campaign'\n            term: SGN.util.getQueryParam 'utm_term'\n            content: SGN.util.getQueryParam 'utm_content'\n        loc =\n            determinedAt: @location.determinedAt\n            latitude: @location.latitude\n            longitude: @location.longitude\n            altitude: @location.altitude\n            speed: @location.speed\n            floor: @location.floor\n            accuracy:\n                horizontal: @location.accuracy?.horizontal\n                vertical: @location.accuracy?.vertical\n\n        # Operating system.\n        context.os = name: os if os?\n\n        # Session referrer.\n        context.session.referrer = document.referrer if document.referrer.length > 0\n\n        # Application.\n        ['name', 'version', 'build'].forEach (key) ->\n            delete application[key] if typeof application[key] isnt 'string' or application[key].length is 0\n            return\n        context.application = application if Object.keys(application).length > 0\n\n        # Campaign.\n        ['source', 'medium', 'name', 'term', 'content'].forEach (key) ->\n            delete campaign[key] if typeof campaign[key] isnt 'string' or campaign[key].length is 0\n            return\n        context.campaign = campaign if Object.keys(campaign).length > 0\n\n        # Location.\n        ['latitude', 'longitude', 'altitude', 'speed', 'floor'].forEach (key) ->\n            delete loc[key] if typeof loc[key] isnt 'number'\n            return\n        delete loc.accuracy.horizontal if typeof loc.accuracy.horizontal isnt 'number'\n        delete loc.accuracy.vertical if typeof loc.accuracy.vertical isnt 'number'\n        delete loc.accuracy if Object.keys(loc.accuracy).length is 0\n        delete loc.determinedAt if typeof loc.determinedAt isnt 'string' or loc.determinedAt.length is 0\n        context.location = loc if Object.keys(loc).length > 0\n\n        # Person identifier.\n        context.personId = @identity.id if @identity.id?\n\n        context\n\n    getPoolSize: ->\n        pool.length\n\n    dispatch: ->\n        return if @dispatching is true or @getPoolSize() is 0\n        return pool.splice(0, @dispatchLimit) if @dryRun is true\n\n        events = pool.slice 0, @dispatchLimit\n        nacks = 0\n\n        @dispatching = true\n\n        @ship events, (err, response) =>\n            @dispatching = false\n\n            if not err?\n                response.events.forEach (resEvent) ->\n                    if resEvent.status is 'validation_error' or resEvent.status is 'ack'\n                        pool = pool.filter (poolEvent) -> poolEvent.id isnt resEvent.id\n                    else if 'nack'\n                        nacks++\n\n                    return\n\n                # Keep dispatching until the pool size reaches a sane level.\n                @dispatch() if @getPoolSize() >= @dispatchLimit and nacks is 0\n\n            return\n\n        @\n\n    ship: (events = [], callback) ->\n        http = new XMLHttpRequest()\n        url = SGN.config.get 'eventsTrackUrl'\n        payload = events: events.map (event) ->\n            event.sentAt = new Date().toISOString()\n\n            event\n\n        http.open 'POST', url\n        http.setRequestHeader 'Content-Type', 'application/json'\n        http.setRequestHeader 'Accept', 'application/json'\n        http.timeout = 1000 * 20\n        http.onload = ->\n            if http.status is 200\n                try\n                    callback null, JSON.parse(http.responseText)\n                catch err\n                    callback SGN.util.error(new Error('Could not parse JSON'))\n            else\n                callback SGN.util.error(new Error('Server did not accept request'))\n\n            return\n        http.onerror = ->\n            callback SGN.util.error(new Error('Could not perform network request'))\n\n            return\n        http.send JSON.stringify(payload)\n\n        @\n","MicroEvent = require 'microevent'\n\nclass Pulse\n    constructor: ->\n        @destroyed = false\n        @connection = @connect()\n\n        return\n\n    destroy: ->\n        @destroyed = true\n\n        @connection.close()\n\n        @\n\n    connect: ->\n        connection = new WebSocket SGN.config.get('eventsPulseUrl')\n\n        connection.onopen = @onOpen.bind @\n        connection.onmessage = @onMessage.bind @\n        connection.onerror = @onError.bind @\n        connection.onclose = @onClose.bind @\n\n        connection\n\n    onOpen: ->\n        @trigger 'open'\n\n        return\n\n    onMessage: (e) ->\n        try\n            @trigger 'event', JSON.parse(e.data)\n\n        return\n\n    onError: ->\n        return\n\n    onClose: ->\n        if @destroyed is false\n            setTimeout =>\n                @connection = @connect()\n\n                return\n            , 2000\n\n        return\n\nMicroEvent.mixin Pulse\n\nmodule.exports = Pulse\n","SGN = require '../../sgn'\n\nparseCookies = (cookies = []) ->\n    parsedCookies = {}\n\n    cookies.map (cookie) ->\n        parts = cookie.split '; '\n        keyValuePair = parts[0].split '='\n        key = keyValuePair[0]\n        value = keyValuePair[1]\n\n        parsedCookies[key] = value\n\n        return\n    \n    parsedCookies\n\nmodule.exports = (options = {}, callback) ->\n    url = SGN.config.get 'graphUrl'\n    timeout = 1000 * 12\n    appKey = SGN.config.get 'appKey'\n    authToken = SGN.config.get 'authToken'\n    authTokenCookieName = 'shopgun-auth-token'\n    options =\n        method: 'post'\n        url: url\n        timeout: timeout\n        json: true\n        headers: {}\n        body:\n            query: options.query\n            operationName: options.operationName\n            variables: options.variables\n\n    # Apply authorization header when app key is provided to avoid rate limiting.\n    options.headers.Authorization = 'Basic ' + SGN.util.btoa(\"app-key:#{appKey}\") if appKey?\n\n    # Set cookies manually in node.js.\n    if SGN.util.isNode() and authToken?\n        options.cookies = [\n            key: authTokenCookieName\n            value: authToken\n            url: url\n        ]\n    else if SGN.util.isBrowser()\n        options.useCookies = true\n\n    SGN.request options, (err, data) ->\n        if err?\n            callback SGN.util.error(new Error('Graph request error'),\n                code: 'GraphRequestError'\n            )\n        else\n            # Update auth token as it might have changed.\n            if SGN.util.isNode()\n                cookies = parseCookies data.headers?['set-cookie']\n                authCookie = cookies[authTokenCookieName]\n\n                if SGN.config.get('authToken') isnt authCookie\n                    SGN.config.set 'authToken', authCookie\n\n            if data.statusCode is 200\n                callback null, data.body\n            else\n                callback SGN.util.error(new Error('Graph API error'),\n                    code: 'GraphAPIError'\n                    statusCode: data.statusCode\n                )\n\n        return\n\n    return\n\n\n","module.exports =\n    Tracker: require './tracker'\n\n    Pulse: require './pulse'\n","SGN = require '../../sgn'\n\nrequest = (options = {}, callback = ->, runs = 0) ->\n    SGN.CoreKit.session.ensure (err) ->\n        return callback err if err?\n\n        url = options.url ? ''\n        headers = options.headers ? {}\n        token = SGN.config.get 'coreSessionToken'\n        clientId = SGN.config.get 'coreSessionClientId'\n        appVersion = SGN.config.get 'appVersion'\n        appSecret = SGN.config.get 'appSecret'\n        locale = SGN.config.get 'locale'\n        qs = options.qs ? {}\n        geo = options.geolocation\n\n        headers['X-Token'] = token\n        headers['X-Signature'] = SGN.CoreKit.session.sign appSecret, token if appSecret?\n\n        qs.r_locale = locale if locale?\n        qs.api_av = appVersion if appVersion?\n        qs.client_id = clientId if clientId?\n\n        if geo?\n            qs.r_lat = geo.latitude if geo.latitude? and not qs.r_lat?\n            qs.r_lng = geo.longitude if geo.longitude? and not qs.r_lng?\n            qs.r_radius = geo.radius if geo.radius? and not qs.r_radius?\n            qs.r_sensor = geo.sensor if geo.sensor? and not qs.r_sensor?\n\n        SGN.request\n            method: options.method\n            url: SGN.config.get('coreUrl') + url\n            qs: qs\n            body: options.body\n            formData: options.formData\n            headers: headers\n            json: true\n            useCookies: false\n        , (err, data) ->\n            if err?\n                callback SGN.util.error(new Error('Core request error'),\n                    code: 'CoreRequestError'\n                )\n            else\n                token = SGN.config.get 'coreSessionToken'\n                responseToken = data.headers['x-token']\n\n                SGN.CoreKit.session.saveToken responseToken if responseToken and token isnt responseToken\n\n                if data.statusCode >= 200 and data.statusCode < 300 or data.statusCode is 304\n                    callback null, data.body\n                else\n                    if runs is 0 and data.body? and data.body.code in [1101, 1107, 1108]\n                        SGN.config.set coreSessionToken: undefined\n\n                        request options, callback, ++runs\n                    else\n                        callback SGN.util.error(new Error('Core API error'),\n                            code: 'CoreAPIError'\n                            statusCode: data.statusCode\n                        ), data.body\n\n            return\n\n    return\n\nmodule.exports = request\n","SGN = require '../../sgn'\nsha256 = require 'sha256'\nclientCookieStorage = require '../../storage/client-cookie'\ncallbackQueue = []\nrenewed = false\n\nsession =\n    ttl: 1 * 60 * 60 * 24 * 60\n\n    saveToken: (token) ->\n        throw new Error('No token provided for saving') if not token\n\n        SGN.config.set coreSessionToken: token\n\n        session.saveCookie()\n\n        return\n\n    saveClientId: (clientId) ->\n        SGN.config.set coreSessionClientId: clientId\n\n        session.saveCookie()\n\n        return\n\n    saveCookie: ->\n        clientCookieStorage.set 'session',\n            token: SGN.config.get 'coreSessionToken'\n            client_id: SGN.config.get 'coreSessionClientId'\n\n        return\n\n    create: (callback) ->\n        SGN.request\n            method: 'post'\n            url: SGN.config.get('coreUrl') + '/v2/sessions'\n            json: true\n            qs:\n                api_key: SGN.config.get 'appKey'\n                token_ttl: session.ttl\n        , (err, data) ->\n            if err?\n                callback err\n            else if data.statusCode is 201\n                session.saveToken data.body.token\n                session.saveClientId data.body.client_id\n\n                callback err, data.body\n            else\n                callback new Error('Could not create session')\n\n            return\n\n        return\n    \n    update: (callback) ->\n        headers = {}\n        token = SGN.config.get 'coreSessionToken'\n        appSecret = SGN.config.get 'appSecret'\n\n        headers['X-Token'] = token\n        headers['X-Signature'] = session.sign appSecret, token if appSecret?\n\n        SGN.request\n            url: SGN.config.get('coreUrl') + '/v2/sessions'\n            headers: headers\n            json: true\n        , (err, data) ->\n            if err?\n                callback err\n            else if data.statusCode is 200\n                session.saveToken data.body.token\n                session.saveClientId data.body.client_id\n\n                callback err, data.body\n            else\n                callback new Error('Could not update session')\n\n            return\n\n        return\n\n    renew: (callback) ->\n        headers = {}\n        token = SGN.config.get 'coreSessionToken'\n        appSecret = SGN.config.get 'appSecret'\n\n        headers['X-Token'] = token\n        headers['X-Signature'] = session.sign appSecret, token if appSecret?\n\n        SGN.request\n            method: 'put'\n            url: SGN.config.get('coreUrl') + '/v2/sessions'\n            headers: headers\n            json: true\n        , (err, data) ->\n            if err?\n                callback err\n            else if data.statusCode is 200\n                session.saveToken data.body.token\n                session.saveClientId data.body.client_id\n\n                callback err, data.body\n            else\n                callback new Error('Could not renew session')\n\n            return\n\n        return\n\n    ensure: (callback) ->\n        queueCount = callbackQueue.length\n        complete = (err) ->\n            callbackQueue = callbackQueue.filter (fn) ->\n                fn err\n\n                false\n\n            return\n\n        callbackQueue.push callback\n\n        if queueCount is 0\n            if not SGN.config.get('coreSessionToken')?\n                session.create complete\n            else if renewed is false\n                renewed = true\n                session.renew (err) ->\n                    if err?\n                        session.create complete\n                    else\n                        complete()\n                    \n                    return\n            else\n                complete()\n\n        return\n\n    sign: (appSecret, token) ->\n        sha256 [appSecret, token].join('')\n\nmodule.exports = session\n","!function(globals) {\n'use strict'\n\nvar convertHex = {\n  bytesToHex: function(bytes) {\n    /*if (typeof bytes.byteLength != 'undefined') {\n      var newBytes = []\n\n      if (typeof bytes.buffer != 'undefined')\n        bytes = new DataView(bytes.buffer)\n      else\n        bytes = new DataView(bytes)\n\n      for (var i = 0; i < bytes.byteLength; ++i) {\n        newBytes.push(bytes.getUint8(i))\n      }\n      bytes = newBytes\n    }*/\n    return arrBytesToHex(bytes)\n  },\n  hexToBytes: function(hex) {\n    if (hex.length % 2 === 1) throw new Error(\"hexToBytes can't have a string with an odd number of characters.\")\n    if (hex.indexOf('0x') === 0) hex = hex.slice(2)\n    return hex.match(/../g).map(function(x) { return parseInt(x,16) })\n  }\n}\n\n\n// PRIVATE\n\nfunction arrBytesToHex(bytes) {\n  return bytes.map(function(x) { return padLeft(x.toString(16),2) }).join('')\n}\n\nfunction padLeft(orig, len) {\n  if (orig.length > len) return orig\n  return Array(len - orig.length + 1).join('0') + orig\n}\n\n\nif (typeof module !== 'undefined' && module.exports) { //CommonJS\n  module.exports = convertHex\n} else {\n  globals.convertHex = convertHex\n}\n\n}(this);","!function(globals) {\n'use strict'\n\nvar convertString = {\n  bytesToString: function(bytes) {\n    return bytes.map(function(x){ return String.fromCharCode(x) }).join('')\n  },\n  stringToBytes: function(str) {\n    return str.split('').map(function(x) { return x.charCodeAt(0) })\n  }\n}\n\n//http://hossa.in/2012/07/20/utf-8-in-javascript.html\nconvertString.UTF8 = {\n   bytesToString: function(bytes) {\n    return decodeURIComponent(escape(convertString.bytesToString(bytes)))\n  },\n  stringToBytes: function(str) {\n   return convertString.stringToBytes(unescape(encodeURIComponent(str)))\n  }\n}\n\nif (typeof module !== 'undefined' && module.exports) { //CommonJS\n  module.exports = convertString\n} else {\n  globals.convertString = convertString\n}\n\n}(this);","!function(globals) {\n'use strict'\n\nvar _imports = {}\n\nif (typeof module !== 'undefined' && module.exports) { //CommonJS\n  _imports.bytesToHex = require('convert-hex').bytesToHex\n  _imports.convertString = require('convert-string')\n  module.exports = sha256\n} else {\n  _imports.bytesToHex = globals.convertHex.bytesToHex\n  _imports.convertString = globals.convertString\n  globals.sha256 = sha256\n}\n\n/*\nCryptoJS v3.1.2\ncode.google.com/p/crypto-js\n(c) 2009-2013 by Jeff Mott. All rights reserved.\ncode.google.com/p/crypto-js/wiki/License\n*/\n\n// Initialization round constants tables\nvar K = []\n\n// Compute constants\n!function () {\n  function isPrime(n) {\n    var sqrtN = Math.sqrt(n);\n    for (var factor = 2; factor <= sqrtN; factor++) {\n      if (!(n % factor)) return false\n    }\n\n    return true\n  }\n\n  function getFractionalBits(n) {\n    return ((n - (n | 0)) * 0x100000000) | 0\n  }\n\n  var n = 2\n  var nPrime = 0\n  while (nPrime < 64) {\n    if (isPrime(n)) {\n      K[nPrime] = getFractionalBits(Math.pow(n, 1 / 3))\n      nPrime++\n    }\n\n    n++\n  }\n}()\n\nvar bytesToWords = function (bytes) {\n  var words = []\n  for (var i = 0, b = 0; i < bytes.length; i++, b += 8) {\n    words[b >>> 5] |= bytes[i] << (24 - b % 32)\n  }\n  return words\n}\n\nvar wordsToBytes = function (words) {\n  var bytes = []\n  for (var b = 0; b < words.length * 32; b += 8) {\n    bytes.push((words[b >>> 5] >>> (24 - b % 32)) & 0xFF)\n  }\n  return bytes\n}\n\n// Reusable object\nvar W = []\n\nvar processBlock = function (H, M, offset) {\n  // Working variables\n  var a = H[0], b = H[1], c = H[2], d = H[3]\n  var e = H[4], f = H[5], g = H[6], h = H[7]\n\n    // Computation\n  for (var i = 0; i < 64; i++) {\n    if (i < 16) {\n      W[i] = M[offset + i] | 0\n    } else {\n      var gamma0x = W[i - 15]\n      var gamma0  = ((gamma0x << 25) | (gamma0x >>> 7))  ^\n                    ((gamma0x << 14) | (gamma0x >>> 18)) ^\n                    (gamma0x >>> 3)\n\n      var gamma1x = W[i - 2];\n      var gamma1  = ((gamma1x << 15) | (gamma1x >>> 17)) ^\n                    ((gamma1x << 13) | (gamma1x >>> 19)) ^\n                    (gamma1x >>> 10)\n\n      W[i] = gamma0 + W[i - 7] + gamma1 + W[i - 16];\n    }\n\n    var ch  = (e & f) ^ (~e & g);\n    var maj = (a & b) ^ (a & c) ^ (b & c);\n\n    var sigma0 = ((a << 30) | (a >>> 2)) ^ ((a << 19) | (a >>> 13)) ^ ((a << 10) | (a >>> 22));\n    var sigma1 = ((e << 26) | (e >>> 6)) ^ ((e << 21) | (e >>> 11)) ^ ((e << 7)  | (e >>> 25));\n\n    var t1 = h + sigma1 + ch + K[i] + W[i];\n    var t2 = sigma0 + maj;\n\n    h = g;\n    g = f;\n    f = e;\n    e = (d + t1) | 0;\n    d = c;\n    c = b;\n    b = a;\n    a = (t1 + t2) | 0;\n  }\n\n  // Intermediate hash value\n  H[0] = (H[0] + a) | 0;\n  H[1] = (H[1] + b) | 0;\n  H[2] = (H[2] + c) | 0;\n  H[3] = (H[3] + d) | 0;\n  H[4] = (H[4] + e) | 0;\n  H[5] = (H[5] + f) | 0;\n  H[6] = (H[6] + g) | 0;\n  H[7] = (H[7] + h) | 0;\n}\n\nfunction sha256(message, options) {;\n  if (message.constructor === String) {\n    message = _imports.convertString.UTF8.stringToBytes(message);\n  }\n\n  var H =[ 0x6A09E667, 0xBB67AE85, 0x3C6EF372, 0xA54FF53A,\n           0x510E527F, 0x9B05688C, 0x1F83D9AB, 0x5BE0CD19 ];\n\n  var m = bytesToWords(message);\n  var l = message.length * 8;\n\n  m[l >> 5] |= 0x80 << (24 - l % 32);\n  m[((l + 64 >> 9) << 4) + 15] = l;\n\n  for (var i=0 ; i<m.length; i += 16) {\n    processBlock(H, m, i);\n  }\n\n  var digestbytes = wordsToBytes(H);\n  return options && options.asBytes ? digestbytes :\n         options && options.asString ? _imports.convertString.bytesToString(digestbytes) :\n         _imports.bytesToHex(digestbytes)\n}\n\nsha256.x2 = function(message, options) {\n  return sha256(sha256(message, { asBytes:true }), options)\n}\n\n}(this);\n","SGN = require '../../sgn'\nrequest = require './request'\nsession = require './session'\n\nmodule.exports =\n    request: request\n\n    session: session\n","MicroEvent = require 'microevent'\nSGN = require '../../sgn'\n\nclass PagedPublicationPageSpread\n    constructor: (@options = {}) ->\n        @contentsRendered = false\n        @hotspotsRendered = false\n        @el = @renderEl()\n\n        return\n\n    getId: ->\n        @options.id\n\n    getEl: ->\n        @el\n\n    getPages: ->\n        @options.pages\n\n    renderEl: ->\n        el = document.createElement 'div'\n        pageIds = @getPages().map (page) -> page.id\n\n        el.className = 'verso__page-spread sgn-pp__page-spread'\n\n        el.setAttribute 'data-id', @getId()\n        el.setAttribute 'data-type', 'page'\n        el.setAttribute 'data-width', @options.width\n        el.setAttribute 'data-page-ids', pageIds.join(',')\n        el.setAttribute 'data-max-zoom-scale', @options.maxZoomScale\n        el.setAttribute 'data-zoomable', false\n\n        el\n\n    renderContents: ->\n        id = @getId()\n        el = @getEl()\n        pages = @getPages()\n        pageCount = pages.length\n        imageLoads = 0\n\n        pages.forEach (page, i) =>\n            image = page.images.medium\n            pageEl = document.createElement 'div'\n            loaderEl = document.createElement 'div'\n\n            pageEl.className = 'sgn-pp__page verso__page'\n            pageEl.setAttribute('data-id', page.id) if page.id?\n\n            if pageCount is 2\n                pageEl.className += if i is 0 then ' verso-page--verso' else ' verso-page--recto'\n\n            pageEl.appendChild loaderEl\n            el.appendChild pageEl\n\n            loaderEl.className = 'sgn-pp-page__loader'\n            loaderEl.innerHTML = \"<span>#{page.label}</span>\"\n\n            SGN.util.loadImage image, (err, width, height) =>\n                if not err?\n                    isComplete = ++imageLoads is pageCount\n\n                    pageEl.style.backgroundImage = \"url(#{image})\"\n                    pageEl.setAttribute 'data-width', width\n                    pageEl.setAttribute 'data-height', height\n                    pageEl.innerHTML = '&nbsp;'\n\n                    el.setAttribute('data-zoomable', true) if isComplete\n\n                    @trigger 'pageLoaded', pageSpreadId: id, page: page\n                    @trigger 'pagesLoaded', pageSpreadId: id, pages: pages if isComplete\n                else\n                    loaderEl.innerHTML = '<span>!</span>'\n\n                return\n\n            return\n\n        @contentsRendered = true\n\n        @\n\n    clearContents: (pageSpread, versoPageSpread) ->\n        @el.innerHTML = ''\n        @contentsRendered = false\n\n        @\n\n    zoomIn: ->\n        pageEls = [].slice.call @el.querySelectorAll('.sgn-pp__page')\n        pages = @getPages()\n\n        pageEls.forEach (pageEl) =>\n            id = pageEl.getAttribute 'data-id'\n            page = SGN.util.find pages, (page) -> page.id is id\n            image = page.images.large\n\n            SGN.util.loadImage image, (err) =>\n                if not err? and @el.getAttribute('data-active') is 'true'\n                    pageEl.setAttribute 'data-image', pageEl.style.backgroundImage\n                    pageEl.style.backgroundImage = \"url(#{image})\"\n\n                return\n\n            return\n\n        return\n\n    zoomOut: ->\n        pageEls = [].slice.call @el.querySelectorAll('.sgn-pp__page[data-image]')\n\n        pageEls.forEach (pageEl) ->\n            pageEl.style.backgroundImage = pageEl.getAttribute 'data-image'\n            \n            pageEl.removeAttribute 'data-image'\n\n            return\n\n        return\n\nMicroEvent.mixin PagedPublicationPageSpread\n\nmodule.exports = PagedPublicationPageSpread\n","MicroEvent = require 'microevent'\nPageSpread = require './page-spread'\nSGN = require '../../sgn'\n\nclass PagedPublicationPageSpreads\n    constructor: (@options) ->\n        @collection = []\n        @ids = {}\n\n        return\n\n    get: (id) ->\n        @ids[id]\n\n    getFrag: ->\n        frag = document.createDocumentFragment()\n\n        @collection.forEach (pageSpread) -> frag.appendChild pageSpread.el\n\n        frag\n\n    update: (pageMode = 'single') ->\n        pageSpreads = []\n        ids = {}\n        pages = @options.pages.slice()\n        width = @options.width\n        maxZoomScale = @options.maxZoomScale\n\n        if pageMode is 'single'\n            pages.forEach (page) -> pageSpreads.push [page]\n        else\n            firstPage = pages.shift()\n            lastPage = if pages.length % 2 is 1 then pages.pop() else null\n            midstPageSpreads = SGN.util.chunk pages, 2\n\n            pageSpreads.push [firstPage] if firstPage?\n            midstPageSpreads.forEach (midstPages) -> pageSpreads.push midstPages.map (page) -> page\n            pageSpreads.push [lastPage] if lastPage?\n\n        @collection = pageSpreads.map (pages, i) =>\n            id = \"#{pageMode}-#{i}\"\n            pageSpread = new PageSpread\n                width: width\n                maxZoomScale: maxZoomScale\n                pages: pages\n                id: id\n\n            pageSpread.bind 'pageLoaded', (e) => @trigger 'pageLoaded', e\n            pageSpread.bind 'pagesLoaded', (e) => @trigger 'pagesLoaded', e\n\n            ids[id] = pageSpread\n\n            pageSpread\n        @ids = ids\n\n        @\n\nMicroEvent.mixin PagedPublicationPageSpreads\n\nmodule.exports = PagedPublicationPageSpreads\n","MicroEvent = require 'microevent'\nVerso = require 'verso-browser'\nPageSpreads = require './page-spreads'\nclientLocalStorage = require '../../storage/client-local'\nSGN = require '../../sgn'\n\nclass PagedPublicationCore\n    defaults:\n        pages: []\n        pageSpreadWidth: 100\n        pageSpreadMaxZoomScale: 2.3\n        idleDelay: 1000\n        resizeDelay: 400\n        color: '#ffffff'\n\n    constructor: (el, options = {}) ->\n        @options = @makeOptions options, @defaults\n        @pageId = @getOption 'pageId'\n        @els =\n            root: el\n            pages: el.querySelector '.sgn-pp__pages'\n            verso: el.querySelector '.verso'\n        @pageMode = @getPageMode()\n        @pageSpreads = new PageSpreads\n            pages: @getOption 'pages'\n            maxZoomScale: @getOption 'pageSpreadMaxZoomScale'\n            width: @getOption 'pageSpreadWidth'\n\n        @pageSpreads.bind 'pageLoaded', @pageLoaded.bind(@)\n        @pageSpreads.bind 'pagesLoaded', @pagesLoaded.bind(@)\n\n        @setColor @getOption('color')\n\n        # It's important to insert the page spreads before instantiating Verso.\n        @els.pages.parentNode.insertBefore @pageSpreads.update(@pageMode).getFrag(), @els.pages\n\n        @verso = @createVerso()\n\n        @bind 'started', @start.bind(@)\n        @bind 'destroyed', @destroy.bind(@)\n\n        return\n\n    start: ->\n        @getVerso().start()\n\n        @visibilityChangeListener = @visibilityChange.bind @\n        @resizeListener = SGN.util.throttle @resize, @getOption('resizeDelay'), @\n        @unloadListener = @unload.bind @\n\n        document.addEventListener 'visibilitychange', @visibilityChangeListener, false\n        window.addEventListener 'resize', @resizeListener, false\n        window.addEventListener 'beforeunload', @unloadListener, false\n\n        @els.root.setAttribute 'data-started', ''\n        @els.root.setAttribute 'tabindex', '-1'\n        @els.root.focus()\n\n        return\n\n    destroy: ->\n        verso = @getVerso()\n        pageSpreadEls = verso.el.querySelectorAll '.sgn-pp__page-spread'\n\n        @els.root.removeAttribute 'data-started'\n        @els.root.removeAttribute 'data-idle'\n        @els.root.removeAttribute 'data-navigating'\n        @els.root.removeAttribute 'data-color-brightness'\n        @els.root.removeAttribute 'data-zoomed-in'\n\n        @els.root.style.backgroundColor = '#ffffff'\n\n        pageSpreadEl.parentNode.removeChild pageSpreadEl for pageSpreadEl in pageSpreadEls\n\n        verso.destroy()\n\n        document.removeEventListener 'visibilitychange', @visibilityChangeListener, false\n        window.removeEventListener 'resize', @resizeListener, false\n        window.removeEventListener 'beforeunload', @unloadListener, false\n\n        return\n\n    makeOptions: (options, defaults) ->\n        opts = {}\n\n        opts[key] = options[key] ? defaults[key] for key, value of options\n\n        opts\n\n    getOption: (key) ->\n        @options[key]\n\n    setColor: (color) ->\n        @els.root.setAttribute 'data-color-brightness', SGN.util.getColorBrightness(color)\n        @els.root.style.backgroundColor = color\n\n        return\n\n    createVerso: ->\n        verso = new Verso @els.verso, pageId: @pageId\n\n        verso.pageSpreads.forEach @overridePageSpreadContentRect.bind(@)\n\n        verso.bind 'beforeNavigation', @beforeNavigation.bind(@)\n        verso.bind 'afterNavigation', @afterNavigation.bind(@)\n        verso.bind 'attemptedNavigation', @attemptedNavigation.bind(@)\n        verso.bind 'clicked', @clicked.bind(@)\n        verso.bind 'doubleClicked', @doubleClicked.bind(@)\n        verso.bind 'pressed', @pressed.bind(@)\n        verso.bind 'contextmenu', @contextmenu.bind(@)\n        verso.bind 'panStart', @panStart.bind(@)\n        verso.bind 'panEnd', @panEnd.bind(@)\n        verso.bind 'zoomedIn', @zoomedIn.bind(@)\n        verso.bind 'zoomedOut', @zoomedOut.bind(@)\n\n        verso\n\n    getVerso: ->\n        @verso\n\n    getContentRect: (pageSpread) ->\n        rect =\n            top: 0\n            left: 0\n            right: 0\n            bottom: 0\n            width: 0\n            height: 0\n        pageEls = pageSpread.getPageEls()\n        pageEl = pageEls[0]\n        pageCount = pageEls.length\n\n        return rect if not pageCount\n        \n        scale = @getVerso().transform.scale\n        pageWidth = pageEl.offsetWidth * pageCount * scale\n        pageHeight = pageEl.offsetHeight * scale\n        imageRatio = +pageEl.getAttribute('data-height') / (+pageEl.getAttribute('data-width') * pageCount)\n        actualHeight = pageHeight\n        actualWidth = actualHeight / imageRatio\n        actualWidth = Math.min pageWidth, actualWidth\n        actualHeight = actualWidth * imageRatio\n        clientRect = pageEl.getBoundingClientRect()\n\n        rect.width = actualWidth\n        rect.height = actualHeight\n        rect.top = clientRect.top + (pageHeight - actualHeight) / 2\n        rect.left = clientRect.left + (pageWidth - actualWidth) / 2\n        rect.right = rect.width + rect.left\n        rect.bottom = rect.height + rect.top\n\n        rect\n\n    formatProgressLabel: (pageSpread) ->\n        pages = pageSpread?.options.pages ? []\n        pageIds = pages.map (page) -> page.id\n        pageLabels = pages.map (page) -> page.label\n        pageCount = @getOption('pages').length\n        label = if pageIds.length > 0 then pageLabels.join('-') + ' / ' + pageCount else null\n\n        label\n\n    renderPageSpreads: ->\n        @getVerso().pageSpreads.forEach (pageSpread) =>\n            visibility = pageSpread.getVisibility()\n            match = @pageSpreads.get pageSpread.getId()\n\n            if match?\n                if visibility is 'visible' and match.contentsRendered is false\n                    setTimeout match.renderContents.bind(match), 0\n                if visibility is 'gone' and match.contentsRendered is true\n                    setTimeout match.clearContents.bind(match), 0\n\n            return\n\n        @\n\n    findPage: (pageId) ->\n        SGN.util.find @getOption('pages'), (page) -> page.id is pageId\n\n    pageLoaded: (e) ->\n        @trigger 'pageLoaded', e\n\n        return\n\n    pagesLoaded: (e) ->\n        @trigger 'pagesLoaded', e\n\n        return\n\n    beforeNavigation: (e) ->\n        position = e.newPosition\n        theVerso = @getVerso()\n        versoPageSpread = theVerso.getPageSpreadFromPosition position\n        pageSpread = @pageSpreads.get versoPageSpread.getId()\n        pageSpreadCount = theVerso.getPageSpreadCount()\n        newSpreadEl = theVerso.pageSpreadEls[e.newPosition]\n        progress = position / (pageSpreadCount - 1) * 100\n        progressLabel = @formatProgressLabel pageSpread\n\n        @els.root.setAttribute 'data-navigating', true\n\n        @renderPageSpreads()\n        @resetIdleTimer()\n        @startIdleTimer()\n        @trigger 'beforeNavigation',\n            verso: e\n            pageSpread: pageSpread\n            newSpreadEl: newSpreadEl\n            progress: progress\n            progressLabel: progressLabel\n            pageSpreadCount: pageSpreadCount\n            newPositionIsEnd: e.newPosition + 1 == pageSpreadCount\n\n        return\n\n    afterNavigation: (e) ->\n        position = e.newPosition\n        theVerso = @getVerso()\n        versoPageSpread = theVerso.getPageSpreadFromPosition position\n        pageSpread = @pageSpreads.get versoPageSpread.getId()\n        pageSpreadCount = theVerso.getPageSpreadCount()\n        newSpreadEl = theVerso.pageSpreadEls[e.newPosition]\n\n        @els.root.setAttribute 'data-navigating', false\n\n        @trigger 'afterNavigation',\n            verso: e\n            pageSpread: pageSpread\n            pageSpreadCount: pageSpreadCount\n            newSpreadEl: newSpreadEl\n            newPositionIsEnd: e.newPosition + 1 == pageSpreadCount\n\n        return\n\n    attemptedNavigation: (e) ->\n        @trigger 'attemptedNavigation', verso: e\n\n        return\n\n    clicked: (e) ->\n        if e.isInsideContent\n            pageId = e.pageEl.getAttribute 'data-id'\n            page = @findPage pageId\n\n            @trigger 'clicked', verso: e, page: page\n\n        return\n\n    doubleClicked: (e) ->\n        if e.isInsideContent\n            pageId = e.pageEl.getAttribute 'data-id'\n            page = @findPage pageId\n\n            @trigger 'doubleClicked', verso: e, page: page\n\n        return\n\n    pressed: (e) ->\n        if e.isInsideContent\n            pageId = e.pageEl.getAttribute 'data-id'\n            page = @findPage pageId\n\n            @trigger 'pressed', verso: e, page: page\n\n        return\n\n    contextmenu: (e) ->\n        if e.isInsideContent\n            pageId = e.pageEl.getAttribute 'data-id'\n            page = @findPage pageId\n\n            @trigger 'contextmenu', verso: e, page: page\n\n        return\n\n    panStart: ->\n        @resetIdleTimer()\n        @trigger 'panStart', scale: @getVerso().transform.scale\n\n        return\n\n    panEnd: ->\n        @startIdleTimer()\n        @trigger 'panEnd'\n\n        return\n\n    zoomedIn: (e) ->\n        position = e.position\n        versoPageSpread = @getVerso().getPageSpreadFromPosition position\n        pageSpread = @pageSpreads.get versoPageSpread.getId()\n\n        pageSpread.zoomIn() if pageSpread?\n\n        @els.root.setAttribute 'data-zoomed-in', true\n        @trigger 'zoomedIn', verso: e, pageSpread: pageSpread\n\n        return\n\n    zoomedOut: (e) ->\n        position = e.position\n        versoPageSpread = @getVerso().getPageSpreadFromPosition position\n        pageSpread = @pageSpreads.get versoPageSpread.getId()\n\n        pageSpread.zoomOut() if pageSpread?\n\n        @els.root.setAttribute 'data-zoomed-in', false\n        @trigger 'zoomedOut', verso: e, pageSpread: pageSpread\n\n        return\n\n    getPageMode: ->\n        pageMode = @getOption 'pageMode'\n\n        if not pageMode?\n            width = @els.root.offsetWidth\n            height = @els.root.offsetHeight\n\n            pageMode = if height / width < 0.8 then 'double' else 'single'\n\n        pageMode\n\n    resetIdleTimer: ->\n        clearTimeout @idleTimeout\n\n        @els.root.setAttribute 'data-idle', false\n\n        @\n\n    startIdleTimer: ->\n        @idleTimeout = setTimeout =>\n            @els.root.setAttribute 'data-idle', true\n\n            return\n        , @getOption('idleDelay')\n\n        @\n\n    switchPageMode: (pageMode) ->\n        return @ if @pageMode is pageMode\n\n        verso = @getVerso()\n        pageIds = verso.getPageSpreadFromPosition(verso.getPosition()).getPageIds()\n        pageSpreadEls = @getVerso().el.querySelectorAll '.sgn-pp__page-spread'\n\n        @pageMode = pageMode\n\n        @pageSpreads.update @pageMode\n\n        pageSpreadEl.parentNode.removeChild pageSpreadEl for pageSpreadEl in pageSpreadEls\n        @els.pages.parentNode.insertBefore @pageSpreads.getFrag(), @els.pages\n\n        verso.refresh()\n        verso.navigateTo verso.getPageSpreadPositionFromPageId(pageIds[0]), duration: 0\n        verso.pageSpreads.forEach @overridePageSpreadContentRect.bind(@)\n\n        @\n\n    overridePageSpreadContentRect: (pageSpread) ->\n        if pageSpread.getType() is 'page'\n            pageSpread.getContentRect = => @getContentRect pageSpread\n\n    visibilityChange: ->\n        pageSpread = @getVerso().getPageSpreadFromPosition @getVerso().getPosition()\n        eventName = if document.hidden is true then 'disappeared' else 'appeared'\n\n        @trigger eventName, pageSpread: @pageSpreads.get(pageSpread.id)\n\n        return\n\n    resize: ->\n        pageMode = @getPageMode()\n\n        if not @getOption('pageMode')? and pageMode isnt @pageMode\n            @switchPageMode pageMode\n        else\n            @trigger 'resized'\n\n        return\n\n    unload: ->\n        @trigger 'disappeared'\n\n        return\n\nMicroEvent.mixin PagedPublicationCore\n\nmodule.exports = PagedPublicationCore\n","(function(f){if(typeof exports===\"object\"&&typeof module!==\"undefined\"){module.exports=f()}else if(typeof define===\"function\"&&define.amd){define([],f)}else{var g;if(typeof window!==\"undefined\"){g=window}else if(typeof global!==\"undefined\"){g=global}else if(typeof self!==\"undefined\"){g=self}else{g=this}g.Verso = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(_dereq_,module,exports){\n'use strict';\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Animation;\n\nmodule.exports = Animation = function () {\n  function Animation(el) {\n    _classCallCheck(this, Animation);\n\n    this.el = el;\n    this.run = 0;\n    return;\n  }\n\n  _createClass(Animation, [{\n    key: 'animate',\n    value: function animate() {\n      var _this = this;\n\n      var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var callback = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : function () {};\n\n      var duration, easing, ref, ref1, ref2, ref3, ref4, run, scale, transform, _transitionEnd, x, y;\n      x = (ref = options.x) != null ? ref : 0;\n      y = (ref1 = options.y) != null ? ref1 : 0;\n      scale = (ref2 = options.scale) != null ? ref2 : 1;\n      easing = (ref3 = options.easing) != null ? ref3 : 'ease-out';\n      duration = (ref4 = options.duration) != null ? ref4 : 0;\n      run = ++this.run;\n      transform = 'translate3d(' + x + ', ' + y + ', 0px) scale3d(' + scale + ', ' + scale + ', 1)';\n      if (this.el.style.transform === transform) {\n        callback();\n      } else if (duration > 0) {\n        _transitionEnd = function transitionEnd() {\n          if (run !== _this.run) {\n            return;\n          }\n          _this.el.removeEventListener('transitionend', _transitionEnd);\n          _this.el.style.transition = 'none';\n          callback();\n        };\n        this.el.addEventListener('transitionend', _transitionEnd, false);\n        this.el.style.transition = 'transform ' + easing + ' ' + duration + 'ms';\n        this.el.style.transform = transform;\n      } else {\n        this.el.style.transition = 'none';\n        this.el.style.transform = transform;\n        callback();\n      }\n      return this;\n    }\n  }]);\n\n  return Animation;\n}();\n\n},{}],2:[function(_dereq_,module,exports){\n'use strict';\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar PageSpread;\n\nmodule.exports = PageSpread = function () {\n  function PageSpread(el) {\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    _classCallCheck(this, PageSpread);\n\n    this.el = el;\n    this.options = options;\n    this.visibility = 'gone';\n    this.positioned = false;\n    this.active = false;\n    this.id = this.options.id;\n    this.type = this.options.type;\n    this.pageIds = this.options.pageIds;\n    this.width = this.options.width;\n    this.left = this.options.left;\n    this.maxZoomScale = this.options.maxZoomScale;\n    return;\n  }\n\n  _createClass(PageSpread, [{\n    key: 'isZoomable',\n    value: function isZoomable() {\n      return this.getMaxZoomScale() > 1 && this.getEl().getAttribute('data-zoomable') !== 'false';\n    }\n  }, {\n    key: 'isScrollable',\n    value: function isScrollable() {\n      return this.getEl().classList.contains('verso--scrollable');\n    }\n  }, {\n    key: 'getEl',\n    value: function getEl() {\n      return this.el;\n    }\n  }, {\n    key: 'getOverlayEls',\n    value: function getOverlayEls() {\n      return this.getEl().querySelectorAll('.verso__overlay');\n    }\n  }, {\n    key: 'getPageEls',\n    value: function getPageEls() {\n      return this.getEl().querySelectorAll('.verso__page');\n    }\n  }, {\n    key: 'getRect',\n    value: function getRect() {\n      return this.getEl().getBoundingClientRect();\n    }\n  }, {\n    key: 'getContentRect',\n    value: function getContentRect() {\n      var boundingClientRect, i, len, offsetLeft, offsetLeftDelta, offsetTop, offsetTopDelta, pageEl, pageRect, rect, ref, ref1, ref2, ref3, ref4;\n      rect = {\n        top: null,\n        left: null,\n        right: null,\n        bottom: null,\n        width: null,\n        height: null\n      };\n      ref = this.getPageEls();\n      for (i = 0, len = ref.length; i < len; i++) {\n        pageEl = ref[i];\n        boundingClientRect = pageEl.getBoundingClientRect();\n        offsetTop = pageEl.offsetTop;\n        offsetLeft = pageEl.offsetLeft;\n        offsetTopDelta = offsetTop - boundingClientRect.top;\n        offsetLeftDelta = offsetLeft - boundingClientRect.left;\n        pageRect = {\n          top: boundingClientRect.top + offsetTopDelta,\n          left: boundingClientRect.left + offsetLeftDelta,\n          right: boundingClientRect.right + offsetLeftDelta,\n          bottom: boundingClientRect.bottom + offsetTopDelta,\n          width: boundingClientRect.width,\n          height: boundingClientRect.height\n        };\n        if (pageRect.top < rect.top || rect.top == null) {\n          rect.top = pageRect.top;\n        }\n        if (pageRect.left < rect.left || rect.left == null) {\n          rect.left = pageRect.left;\n        }\n        if (pageRect.right > rect.right || rect.right == null) {\n          rect.right = pageRect.right;\n        }\n        if (pageRect.bottom > rect.bottom || rect.bottom == null) {\n          rect.bottom = pageRect.bottom;\n        }\n      }\n      rect.top = (ref1 = rect.top) != null ? ref1 : 0;\n      rect.left = (ref2 = rect.left) != null ? ref2 : 0;\n      rect.right = (ref3 = rect.right) != null ? ref3 : 0;\n      rect.bottom = (ref4 = rect.bottom) != null ? ref4 : 0;\n      rect.width = rect.right - rect.left;\n      rect.height = rect.bottom - rect.top;\n      return rect;\n    }\n  }, {\n    key: 'getId',\n    value: function getId() {\n      return this.id;\n    }\n  }, {\n    key: 'getType',\n    value: function getType() {\n      return this.type;\n    }\n  }, {\n    key: 'getPageIds',\n    value: function getPageIds() {\n      return this.pageIds;\n    }\n  }, {\n    key: 'getWidth',\n    value: function getWidth() {\n      return this.width;\n    }\n  }, {\n    key: 'getLeft',\n    value: function getLeft() {\n      return this.left;\n    }\n  }, {\n    key: 'getMaxZoomScale',\n    value: function getMaxZoomScale() {\n      return this.maxZoomScale;\n    }\n  }, {\n    key: 'getVisibility',\n    value: function getVisibility() {\n      return this.visibility;\n    }\n  }, {\n    key: 'setVisibility',\n    value: function setVisibility(visibility) {\n      if (this.visibility !== visibility) {\n        this.getEl().style.display = visibility === 'visible' ? 'block' : 'none';\n        this.visibility = visibility;\n      }\n      return this;\n    }\n  }, {\n    key: 'position',\n    value: function position() {\n      if (this.positioned === false) {\n        this.getEl().style.left = this.getLeft() + '%';\n        this.positioned = true;\n      }\n      return this;\n    }\n  }, {\n    key: 'activate',\n    value: function activate() {\n      this.active = true;\n      this.getEl().setAttribute('data-active', this.active);\n    }\n  }, {\n    key: 'deactivate',\n    value: function deactivate() {\n      this.active = false;\n      this.getEl().setAttribute('data-active', this.active);\n    }\n  }]);\n\n  return PageSpread;\n}();\n\n},{}],3:[function(_dereq_,module,exports){\n'use strict';\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Animation, Hammer, MicroEvent, PageSpread, Verso;\n\nHammer = _dereq_('hammerjs');\n\nMicroEvent = _dereq_('microevent');\n\nPageSpread = _dereq_('./page_spread');\n\nAnimation = _dereq_('./animation');\n\nVerso = function () {\n  function Verso(el1) {\n    var options1 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    _classCallCheck(this, Verso);\n\n    var ref, ref1, ref2, ref3, ref4, ref5;\n    this.el = el1;\n    this.options = options1;\n    this.swipeVelocity = (ref = this.options.swipeVelocity) != null ? ref : 0.3;\n    this.swipeThreshold = (ref1 = this.options.swipeThreshold) != null ? ref1 : 10;\n    this.navigationDuration = (ref2 = this.options.navigationDuration) != null ? ref2 : 240;\n    this.navigationPanDuration = (ref3 = this.options.navigationPanDuration) != null ? ref3 : 200;\n    this.zoomDuration = (ref4 = this.options.zoomDuration) != null ? ref4 : 200;\n    this.doubleTapDelay = (ref5 = this.options.doubleTapDelay) != null ? ref5 : 250;\n    this.position = -1;\n    this.pinching = false;\n    this.panning = false;\n    this.transform = {\n      left: 0,\n      top: 0,\n      scale: 1\n    };\n    this.startTransform = {\n      left: 0,\n      top: 0,\n      scale: 1\n    };\n    this.tap = {\n      count: 0,\n      delay: this.doubleTapDelay\n    };\n    this.scrollerEl = this.el.querySelector('.verso__scroller');\n    this.pageSpreadEls = this.el.querySelectorAll('.verso__page-spread');\n    this.pageSpreads = this.traversePageSpreads(this.pageSpreadEls);\n    this.pageIds = this.buildPageIds(this.pageSpreads);\n    this.animation = new Animation(this.scrollerEl);\n    this.hammer = new Hammer.Manager(this.scrollerEl, {\n      touchAction: 'none',\n      enable: false,\n      inputClass: this.getHammerInputClass()\n    });\n    this.hammer.add(new Hammer.Pan({\n      threshold: 5,\n      direction: Hammer.DIRECTION_ALL\n    }));\n    this.hammer.add(new Hammer.Tap({\n      event: 'singletap',\n      interval: 0\n    }));\n    this.hammer.add(new Hammer.Pinch());\n    this.hammer.add(new Hammer.Press({\n      time: 500\n    }));\n    this.hammer.on('panstart', this.onPanStart.bind(this));\n    this.hammer.on('panmove', this.onPanMove.bind(this));\n    this.hammer.on('panend', this.onPanEnd.bind(this));\n    this.hammer.on('pancancel', this.onPanEnd.bind(this));\n    this.hammer.on('singletap', this.onSingletap.bind(this));\n    this.hammer.on('pinchstart', this.onPinchStart.bind(this));\n    this.hammer.on('pinchmove', this.onPinchMove.bind(this));\n    this.hammer.on('pinchend', this.onPinchEnd.bind(this));\n    this.hammer.on('pinchcancel', this.onPinchEnd.bind(this));\n    this.hammer.on('press', this.onPress.bind(this));\n    this.scrollerEl.addEventListener('contextmenu', this.onContextmenu.bind(this));\n    return;\n  }\n\n  _createClass(Verso, [{\n    key: 'start',\n    value: function start() {\n      var pageId, ref;\n      pageId = (ref = this.getPageSpreadPositionFromPageId(this.options.pageId)) != null ? ref : 0;\n      this.hammer.set({\n        enable: true\n      });\n      this.navigateTo(pageId, {\n        duration: 0\n      });\n      this.resizeListener = this.onResize.bind(this);\n      this.touchStartListener = this.onTouchStart.bind(this);\n      this.touchEndListener = this.onTouchEnd.bind(this);\n      this.el.addEventListener('touchstart', this.touchStartListener, false);\n      this.el.addEventListener('touchend', this.touchEndListener, false);\n      window.addEventListener('resize', this.resizeListener, false);\n      return this;\n    }\n  }, {\n    key: 'destroy',\n    value: function destroy() {\n      this.hammer.destroy();\n      this.el.removeEventListener('touchstart', this.touchStartListener);\n      this.el.removeEventListener('touchend', this.touchEndListener);\n      window.removeEventListener('resize', this.resizeListener);\n      return this;\n    }\n  }, {\n    key: 'first',\n    value: function first(options) {\n      return this.navigateTo(0, options);\n    }\n  }, {\n    key: 'prev',\n    value: function prev(options) {\n      return this.navigateTo(this.getPosition() - 1, options);\n    }\n  }, {\n    key: 'next',\n    value: function next(options) {\n      return this.navigateTo(this.getPosition() + 1, options);\n    }\n  }, {\n    key: 'last',\n    value: function last(options) {\n      return this.navigateTo(this.getPageSpreadCount() - 1, options);\n    }\n  }, {\n    key: 'navigateTo',\n    value: function navigateTo(position) {\n      var _this = this;\n\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n      var activePageSpread, carousel, currentPageSpread, currentPosition, duration, ref, ref1, touchAction, velocity;\n      if (position < 0 || position > this.getPageSpreadCount() - 1) {\n        return;\n      }\n      currentPosition = this.getPosition();\n      currentPageSpread = this.getPageSpreadFromPosition(currentPosition);\n      activePageSpread = this.getPageSpreadFromPosition(position);\n      carousel = this.getCarouselFromPageSpread(activePageSpread);\n      velocity = (ref = options.velocity) != null ? ref : 1;\n      duration = (ref1 = options.duration) != null ? ref1 : this.navigationDuration;\n      duration = duration / Math.abs(velocity);\n      touchAction = activePageSpread.isScrollable() ? 'pan-y' : 'none';\n      if (currentPageSpread != null) {\n        currentPageSpread.deactivate();\n      }\n      activePageSpread.activate();\n      carousel.visible.forEach(function (pageSpread) {\n        return pageSpread.position().setVisibility('visible');\n      });\n      this.hammer.set({\n        touchAction: touchAction\n      });\n      this.transform.left = this.getLeftTransformFromPageSpread(position, activePageSpread);\n      this.setPosition(position);\n      if (this.transform.scale > 1) {\n        this.transform.top = 0;\n        this.transform.scale = 1;\n        this.trigger('zoomedOut', {\n          position: currentPosition\n        });\n      }\n      this.trigger('beforeNavigation', {\n        currentPosition: currentPosition,\n        newPosition: position\n      });\n      this.animation.animate({\n        x: this.transform.left + '%',\n        duration: duration\n      }, function () {\n        carousel = _this.getCarouselFromPageSpread(_this.getActivePageSpread());\n        carousel.gone.forEach(function (pageSpread) {\n          return pageSpread.setVisibility('gone');\n        });\n        _this.trigger('afterNavigation', {\n          newPosition: _this.getPosition(),\n          previousPosition: currentPosition\n        });\n      });\n    }\n  }, {\n    key: 'getPosition',\n    value: function getPosition() {\n      return this.position;\n    }\n  }, {\n    key: 'setPosition',\n    value: function setPosition(position) {\n      this.position = position;\n      return this;\n    }\n  }, {\n    key: 'getLeftTransformFromPageSpread',\n    value: function getLeftTransformFromPageSpread(position, pageSpread) {\n      var left;\n      left = 0;\n      if (position === this.getPageSpreadCount() - 1) {\n        left = 100 - pageSpread.getWidth() - pageSpread.getLeft();\n      } else if (position > 0) {\n        left = (100 - pageSpread.getWidth()) / 2 - pageSpread.getLeft();\n      }\n      return left;\n    }\n  }, {\n    key: 'getCarouselFromPageSpread',\n    value: function getCarouselFromPageSpread(pageSpreadSubject) {\n      var carousel;\n      carousel = {\n        visible: [],\n        gone: []\n      };\n      // Identify the page spreads that should be a part of the carousel.\n      this.pageSpreads.forEach(function (pageSpread) {\n        var visible;\n        visible = false;\n        if (pageSpread.getLeft() <= pageSpreadSubject.getLeft()) {\n          if (pageSpread.getLeft() + pageSpread.getWidth() > pageSpreadSubject.getLeft() - 100) {\n            visible = true;\n          }\n        } else {\n          if (pageSpread.getLeft() - pageSpread.getWidth() < pageSpreadSubject.getLeft() + 100) {\n            visible = true;\n          }\n        }\n        if (visible === true) {\n          carousel.visible.push(pageSpread);\n        } else {\n          carousel.gone.push(pageSpread);\n        }\n      });\n      return carousel;\n    }\n  }, {\n    key: 'traversePageSpreads',\n    value: function traversePageSpreads(els) {\n      var el, id, j, left, len, maxZoomScale, pageIds, pageSpread, pageSpreads, type, width;\n      pageSpreads = [];\n      left = 0;\n      for (j = 0, len = els.length; j < len; j++) {\n        el = els[j];\n        id = el.getAttribute('data-id');\n        type = el.getAttribute('data-type');\n        pageIds = el.getAttribute('data-page-ids');\n        pageIds = pageIds != null ? pageIds.split(',').map(function (i) {\n          return i;\n        }) : [];\n        maxZoomScale = el.getAttribute('data-max-zoom-scale');\n        maxZoomScale = maxZoomScale != null ? +maxZoomScale : 1;\n        width = el.getAttribute('data-width');\n        width = width != null ? +width : 100;\n        pageSpread = new PageSpread(el, {\n          id: id,\n          type: type,\n          pageIds: pageIds,\n          maxZoomScale: maxZoomScale,\n          width: width,\n          left: left\n        });\n        left += width;\n        pageSpreads.push(pageSpread);\n      }\n      return pageSpreads;\n    }\n  }, {\n    key: 'buildPageIds',\n    value: function buildPageIds(pageSpreads) {\n      var pageIds;\n      pageIds = {};\n      pageSpreads.forEach(function (pageSpread, i) {\n        pageSpread.options.pageIds.forEach(function (pageId) {\n          pageIds[pageId] = pageSpread;\n        });\n      });\n      return pageIds;\n    }\n  }, {\n    key: 'isCoordinateInsideElement',\n    value: function isCoordinateInsideElement(x, y, el) {\n      var rect;\n      rect = el.getBoundingClientRect();\n      return x >= rect.left && x <= rect.right && y >= rect.top && y <= rect.bottom;\n    }\n  }, {\n    key: 'getCoordinateInfo',\n    value: function getCoordinateInfo(x, y, pageSpread) {\n      var contentRect, info, j, k, len, len1, overlayEl, overlayEls, pageEl, pageEls;\n      x -= this.el.offsetLeft;\n      y -= this.el.offsetTop;\n      info = {\n        x: x,\n        y: y,\n        contentX: 0,\n        contentY: 0,\n        pageX: 0,\n        pageY: 0,\n        overlayEls: [],\n        pageEl: null,\n        isInsideContentX: false,\n        isInsideContentY: false,\n        isInsideContent: false\n      };\n      contentRect = pageSpread.getContentRect();\n      overlayEls = pageSpread.getOverlayEls();\n      pageEls = pageSpread.getPageEls();\n      for (j = 0, len = overlayEls.length; j < len; j++) {\n        overlayEl = overlayEls[j];\n        if (this.isCoordinateInsideElement(x, y, overlayEl)) {\n          info.overlayEls.push(overlayEl);\n        }\n      }\n      for (k = 0, len1 = pageEls.length; k < len1; k++) {\n        pageEl = pageEls[k];\n        if (this.isCoordinateInsideElement(x, y, pageEl)) {\n          info.pageEl = pageEl;\n          break;\n        }\n      }\n      info.contentX = (x - contentRect.left) / Math.max(1, contentRect.width);\n      info.contentY = (y - contentRect.top) / Math.max(1, contentRect.height);\n      if (info.pageEl != null) {\n        info.isInsideContentX = info.contentX >= 0 && info.contentX <= 1;\n        info.isInsideContentY = info.contentY >= 0 && info.contentY <= 1;\n        info.isInsideContent = info.isInsideContentX && info.isInsideContentY;\n      }\n      return info;\n    }\n  }, {\n    key: 'getPageSpreadCount',\n    value: function getPageSpreadCount() {\n      return this.pageSpreads.length;\n    }\n  }, {\n    key: 'getActivePageSpread',\n    value: function getActivePageSpread() {\n      return this.getPageSpreadFromPosition(this.getPosition());\n    }\n  }, {\n    key: 'getPageSpreadFromPosition',\n    value: function getPageSpreadFromPosition(position) {\n      return this.pageSpreads[position];\n    }\n  }, {\n    key: 'getPageSpreadPositionFromPageId',\n    value: function getPageSpreadPositionFromPageId(pageId) {\n      var idx, j, len, pageSpread, ref;\n      ref = this.pageSpreads;\n      for (idx = j = 0, len = ref.length; j < len; idx = ++j) {\n        pageSpread = ref[idx];\n        if (pageSpread.options.pageIds.indexOf(pageId) > -1) {\n          return idx;\n        }\n      }\n    }\n  }, {\n    key: 'getPageSpreadBounds',\n    value: function getPageSpreadBounds(pageSpread) {\n      var pageSpreadContentRect, pageSpreadRect;\n      pageSpreadRect = pageSpread.getRect();\n      pageSpreadContentRect = pageSpread.getContentRect();\n      return {\n        left: (pageSpreadContentRect.left - pageSpreadRect.left) / pageSpreadRect.width * 100,\n        top: (pageSpreadContentRect.top - pageSpreadRect.top) / pageSpreadRect.height * 100,\n        width: pageSpreadContentRect.width / pageSpreadRect.width * 100,\n        height: pageSpreadContentRect.height / pageSpreadRect.height * 100,\n        pageSpreadRect: pageSpreadRect,\n        pageSpreadContentRect: pageSpreadContentRect\n      };\n    }\n  }, {\n    key: 'clipCoordinate',\n    value: function clipCoordinate(coordinate, scale, size, offset) {\n      if (size * scale < 100) {\n        coordinate = offset * -scale + 50 - size * scale / 2;\n      } else {\n        coordinate = Math.min(coordinate, offset * -scale);\n        coordinate = Math.max(coordinate, offset * -scale - size * scale + 100);\n      }\n      return coordinate;\n    }\n  }, {\n    key: 'zoomTo',\n    value: function zoomTo() {\n      var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var callback = arguments[1];\n\n      var activePageSpread, carouselOffset, carouselScaledOffset, curScale, pageSpreadBounds, ref, ref1, scale, x, y;\n      scale = options.scale;\n      curScale = this.transform.scale;\n      activePageSpread = this.getActivePageSpread();\n      pageSpreadBounds = this.getPageSpreadBounds(activePageSpread);\n      carouselOffset = activePageSpread.getLeft();\n      carouselScaledOffset = carouselOffset * curScale;\n      x = (ref = options.x) != null ? ref : 0;\n      y = (ref1 = options.y) != null ? ref1 : 0;\n      if (scale !== 1) {\n        x -= pageSpreadBounds.pageSpreadRect.left;\n        y -= pageSpreadBounds.pageSpreadRect.top;\n        x = x / (pageSpreadBounds.pageSpreadRect.width / curScale) * 100;\n        y = y / (pageSpreadBounds.pageSpreadRect.height / curScale) * 100;\n        x = this.transform.left + carouselScaledOffset + x - x * scale / curScale;\n        y = this.transform.top + y - y * scale / curScale;\n        // Make sure the animation doesn't exceed the content bounds.\n        if (options.bounds !== false && scale > 1) {\n          x = this.clipCoordinate(x, scale, pageSpreadBounds.width, pageSpreadBounds.left);\n          y = this.clipCoordinate(y, scale, pageSpreadBounds.height, pageSpreadBounds.top);\n        }\n      } else {\n        x = 0;\n        y = 0;\n      }\n      // Account for the page spreads left of the active one.\n      x -= carouselOffset * scale;\n      this.transform.left = x;\n      this.transform.top = y;\n      this.transform.scale = scale;\n      this.animation.animate({\n        x: x + '%',\n        y: y + '%',\n        scale: scale,\n        easing: options.easing,\n        duration: options.duration\n      }, callback);\n    }\n  }, {\n    key: 'refresh',\n    value: function refresh() {\n      this.pageSpreadEls = this.el.querySelectorAll('.verso__page-spread');\n      this.pageSpreads = this.traversePageSpreads(this.pageSpreadEls);\n      this.pageIds = this.buildPageIds(this.pageSpreads);\n      return this;\n    }\n  }, {\n    key: 'getHammerInputClass',\n    value: function getHammerInputClass() {\n      var mobileRegex, supportTouch;\n      mobileRegex = /mobile|tablet|ip(ad|hone|od)|android/i;\n      supportTouch = 'ontouchstart' in window;\n      if (supportTouch && mobileRegex.test(navigator.userAgent)) {\n        return Hammer.TouchInput;\n      } else {\n        return null;\n      }\n    }\n\n    //#############\n    /* Events */\n    //#############\n\n  }, {\n    key: 'onPanStart',\n    value: function onPanStart(e) {\n      var edgeThreshold, width, x;\n      // Only allow panning if zoomed in or doing a horizontal pan.\n      // This ensures vertical scrolling works for scrollable page spreads.\n      if (this.transform.scale > 1 || e.direction === Hammer.DIRECTION_LEFT || e.direction === Hammer.DIRECTION_RIGHT) {\n        x = e.center.x;\n        edgeThreshold = 30;\n        width = this.scrollerEl.offsetWidth;\n        // Prevent panning when edge-swiping on iOS.\n        if (x > edgeThreshold && x < width - edgeThreshold) {\n          this.startTransform.left = this.transform.left;\n          this.startTransform.top = this.transform.top;\n          this.panning = true;\n          this.trigger('panStart');\n        }\n      }\n    }\n  }, {\n    key: 'onPanMove',\n    value: function onPanMove(e) {\n      var activePageSpread, carouselOffset, carouselScaledOffset, pageSpreadBounds, scale, x, y;\n      if (this.pinching === true || this.panning === false) {\n        return;\n      }\n      if (this.transform.scale > 1) {\n        activePageSpread = this.getActivePageSpread();\n        carouselOffset = activePageSpread.getLeft();\n        carouselScaledOffset = carouselOffset * this.transform.scale;\n        pageSpreadBounds = this.getPageSpreadBounds(activePageSpread);\n        scale = this.transform.scale;\n        x = this.startTransform.left + carouselScaledOffset + e.deltaX / this.scrollerEl.offsetWidth * 100;\n        y = this.startTransform.top + e.deltaY / this.scrollerEl.offsetHeight * 100;\n        x = this.clipCoordinate(x, scale, pageSpreadBounds.width, pageSpreadBounds.left);\n        y = this.clipCoordinate(y, scale, pageSpreadBounds.height, pageSpreadBounds.top);\n        x -= carouselScaledOffset;\n        this.transform.left = x;\n        this.transform.top = y;\n        this.animation.animate({\n          x: x + '%',\n          y: y + '%',\n          scale: scale,\n          easing: 'linear'\n        });\n      } else {\n        x = this.transform.left + e.deltaX / this.scrollerEl.offsetWidth * 100;\n        this.animation.animate({\n          x: x + '%',\n          easing: 'linear'\n        });\n      }\n    }\n  }, {\n    key: 'onPanEnd',\n    value: function onPanEnd(e) {\n      var position, velocity;\n      if (this.panning === false) {\n        return;\n      }\n      this.panning = false;\n      this.trigger('panEnd');\n      if (this.transform.scale === 1 && this.pinching === false) {\n        position = this.getPosition();\n        velocity = e.overallVelocityX;\n        if (Math.abs(velocity) >= this.swipeVelocity) {\n          if (Math.abs(e.deltaX) >= this.swipeThreshold) {\n            if (e.offsetDirection === Hammer.DIRECTION_LEFT) {\n              this.next({\n                velocity: velocity,\n                duration: this.navigationPanDuration\n              });\n            } else if (e.offsetDirection === Hammer.DIRECTION_RIGHT) {\n              this.prev({\n                velocity: velocity,\n                duration: this.navigationPanDuration\n              });\n            }\n          }\n        }\n        if (position === this.getPosition()) {\n          this.animation.animate({\n            x: this.transform.left + '%',\n            duration: this.navigationPanDuration\n          });\n          this.trigger('attemptedNavigation', {\n            position: this.getPosition()\n          });\n        }\n      }\n    }\n  }, {\n    key: 'onPinchStart',\n    value: function onPinchStart(e) {\n      if (!this.getActivePageSpread().isZoomable()) {\n        return;\n      }\n      this.pinching = true;\n      this.el.setAttribute('data-pinching', true);\n      this.startTransform.scale = this.transform.scale;\n    }\n  }, {\n    key: 'onPinchMove',\n    value: function onPinchMove(e) {\n      if (this.pinching === false) {\n        return;\n      }\n      this.zoomTo({\n        x: e.center.x,\n        y: e.center.y,\n        scale: this.startTransform.scale * e.scale,\n        bounds: false,\n        easing: 'linear'\n      });\n    }\n  }, {\n    key: 'onPinchEnd',\n    value: function onPinchEnd(e) {\n      var _this2 = this;\n\n      var activePageSpread, maxZoomScale, position, scale;\n      if (this.pinching === false) {\n        return;\n      }\n      activePageSpread = this.getActivePageSpread();\n      maxZoomScale = activePageSpread.getMaxZoomScale();\n      scale = Math.max(1, Math.min(this.transform.scale, maxZoomScale));\n      position = this.getPosition();\n      if (this.startTransform.scale === 1 && scale > 1) {\n        this.trigger('zoomedIn', {\n          position: position\n        });\n      } else if (this.startTransform.scale > 1 && scale === 1) {\n        this.trigger('zoomedOut', {\n          position: position\n        });\n      }\n      this.zoomTo({\n        x: e.center.x,\n        y: e.center.y,\n        scale: scale,\n        duration: this.zoomDuration\n      }, function () {\n        _this2.pinching = false;\n        _this2.el.setAttribute('data-pinching', false);\n      });\n    }\n  }, {\n    key: 'onPress',\n    value: function onPress(e) {\n      this.trigger('pressed', this.getCoordinateInfo(e.center.x, e.center.y, this.getActivePageSpread()));\n    }\n  }, {\n    key: 'onContextmenu',\n    value: function onContextmenu(e) {\n      e.preventDefault();\n      this.trigger('contextmenu', this.getCoordinateInfo(e.clientX, e.clientY, this.getActivePageSpread()));\n      return false;\n    }\n  }, {\n    key: 'onSingletap',\n    value: function onSingletap(e) {\n      var _this3 = this;\n\n      var activePageSpread, coordinateInfo, maxZoomScale, position, scale, zoomEvent, zoomedIn;\n      activePageSpread = this.getActivePageSpread();\n      coordinateInfo = this.getCoordinateInfo(e.center.x, e.center.y, activePageSpread);\n      clearTimeout(this.tap.timeout);\n      if (this.tap.count === 1) {\n        this.tap.count = 0;\n        this.trigger('doubleClicked', coordinateInfo);\n        if (activePageSpread.isZoomable()) {\n          maxZoomScale = activePageSpread.getMaxZoomScale();\n          zoomedIn = this.transform.scale > 1;\n          scale = zoomedIn ? 1 : maxZoomScale;\n          zoomEvent = zoomedIn ? 'zoomedOut' : 'zoomedIn';\n          position = this.getPosition();\n          this.zoomTo({\n            x: e.center.x,\n            y: e.center.y,\n            scale: scale,\n            duration: this.zoomDuration\n          }, function () {\n            _this3.trigger(zoomEvent, {\n              position: position\n            });\n          });\n        }\n      } else {\n        this.tap.count++;\n        this.tap.timeout = setTimeout(function () {\n          _this3.tap.count = 0;\n          _this3.trigger('clicked', coordinateInfo);\n        }, this.tap.delay);\n      }\n    }\n  }, {\n    key: 'onTouchStart',\n    value: function onTouchStart(e) {\n      if (!this.getActivePageSpread().isScrollable()) {\n        e.preventDefault();\n      }\n    }\n  }, {\n    key: 'onTouchEnd',\n    value: function onTouchEnd(e) {\n      if (!this.getActivePageSpread().isScrollable()) {\n        e.preventDefault();\n      }\n    }\n  }, {\n    key: 'onResize',\n    value: function onResize() {\n      var activePageSpread, position;\n      if (this.transform.scale > 1) {\n        position = this.getPosition();\n        activePageSpread = this.getActivePageSpread();\n        this.transform.left = this.getLeftTransformFromPageSpread(position, activePageSpread);\n        this.transform.top = 0;\n        this.transform.scale = 1;\n        this.zoomTo({\n          x: this.transform.left,\n          y: this.transform.top,\n          scale: this.transform.scale,\n          duration: 0\n        });\n        this.trigger('zoomedOut', {\n          position: position\n        });\n      }\n    }\n  }]);\n\n  return Verso;\n}();\n\nMicroEvent.mixin(Verso);\n\nmodule.exports = Verso;\n\n},{\"./animation\":1,\"./page_spread\":2,\"hammerjs\":4,\"microevent\":5}],4:[function(_dereq_,module,exports){\n/*! Hammer.JS - v2.0.7 - 2016-04-22\n * http://hammerjs.github.io/\n *\n * Copyright (c) 2016 Jorik Tangelder;\n * Licensed under the MIT license */\n(function(window, document, exportName, undefined) {\n  'use strict';\n\nvar VENDOR_PREFIXES = ['', 'webkit', 'Moz', 'MS', 'ms', 'o'];\nvar TEST_ELEMENT = document.createElement('div');\n\nvar TYPE_FUNCTION = 'function';\n\nvar round = Math.round;\nvar abs = Math.abs;\nvar now = Date.now;\n\n/**\n * set a timeout with a given scope\n * @param {Function} fn\n * @param {Number} timeout\n * @param {Object} context\n * @returns {number}\n */\nfunction setTimeoutContext(fn, timeout, context) {\n    return setTimeout(bindFn(fn, context), timeout);\n}\n\n/**\n * if the argument is an array, we want to execute the fn on each entry\n * if it aint an array we don't want to do a thing.\n * this is used by all the methods that accept a single and array argument.\n * @param {*|Array} arg\n * @param {String} fn\n * @param {Object} [context]\n * @returns {Boolean}\n */\nfunction invokeArrayArg(arg, fn, context) {\n    if (Array.isArray(arg)) {\n        each(arg, context[fn], context);\n        return true;\n    }\n    return false;\n}\n\n/**\n * walk objects and arrays\n * @param {Object} obj\n * @param {Function} iterator\n * @param {Object} context\n */\nfunction each(obj, iterator, context) {\n    var i;\n\n    if (!obj) {\n        return;\n    }\n\n    if (obj.forEach) {\n        obj.forEach(iterator, context);\n    } else if (obj.length !== undefined) {\n        i = 0;\n        while (i < obj.length) {\n            iterator.call(context, obj[i], i, obj);\n            i++;\n        }\n    } else {\n        for (i in obj) {\n            obj.hasOwnProperty(i) && iterator.call(context, obj[i], i, obj);\n        }\n    }\n}\n\n/**\n * wrap a method with a deprecation warning and stack trace\n * @param {Function} method\n * @param {String} name\n * @param {String} message\n * @returns {Function} A new function wrapping the supplied method.\n */\nfunction deprecate(method, name, message) {\n    var deprecationMessage = 'DEPRECATED METHOD: ' + name + '\\n' + message + ' AT \\n';\n    return function() {\n        var e = new Error('get-stack-trace');\n        var stack = e && e.stack ? e.stack.replace(/^[^\\(]+?[\\n$]/gm, '')\n            .replace(/^\\s+at\\s+/gm, '')\n            .replace(/^Object.<anonymous>\\s*\\(/gm, '{anonymous}()@') : 'Unknown Stack Trace';\n\n        var log = window.console && (window.console.warn || window.console.log);\n        if (log) {\n            log.call(window.console, deprecationMessage, stack);\n        }\n        return method.apply(this, arguments);\n    };\n}\n\n/**\n * extend object.\n * means that properties in dest will be overwritten by the ones in src.\n * @param {Object} target\n * @param {...Object} objects_to_assign\n * @returns {Object} target\n */\nvar assign;\nif (typeof Object.assign !== 'function') {\n    assign = function assign(target) {\n        if (target === undefined || target === null) {\n            throw new TypeError('Cannot convert undefined or null to object');\n        }\n\n        var output = Object(target);\n        for (var index = 1; index < arguments.length; index++) {\n            var source = arguments[index];\n            if (source !== undefined && source !== null) {\n                for (var nextKey in source) {\n                    if (source.hasOwnProperty(nextKey)) {\n                        output[nextKey] = source[nextKey];\n                    }\n                }\n            }\n        }\n        return output;\n    };\n} else {\n    assign = Object.assign;\n}\n\n/**\n * extend object.\n * means that properties in dest will be overwritten by the ones in src.\n * @param {Object} dest\n * @param {Object} src\n * @param {Boolean} [merge=false]\n * @returns {Object} dest\n */\nvar extend = deprecate(function extend(dest, src, merge) {\n    var keys = Object.keys(src);\n    var i = 0;\n    while (i < keys.length) {\n        if (!merge || (merge && dest[keys[i]] === undefined)) {\n            dest[keys[i]] = src[keys[i]];\n        }\n        i++;\n    }\n    return dest;\n}, 'extend', 'Use `assign`.');\n\n/**\n * merge the values from src in the dest.\n * means that properties that exist in dest will not be overwritten by src\n * @param {Object} dest\n * @param {Object} src\n * @returns {Object} dest\n */\nvar merge = deprecate(function merge(dest, src) {\n    return extend(dest, src, true);\n}, 'merge', 'Use `assign`.');\n\n/**\n * simple class inheritance\n * @param {Function} child\n * @param {Function} base\n * @param {Object} [properties]\n */\nfunction inherit(child, base, properties) {\n    var baseP = base.prototype,\n        childP;\n\n    childP = child.prototype = Object.create(baseP);\n    childP.constructor = child;\n    childP._super = baseP;\n\n    if (properties) {\n        assign(childP, properties);\n    }\n}\n\n/**\n * simple function bind\n * @param {Function} fn\n * @param {Object} context\n * @returns {Function}\n */\nfunction bindFn(fn, context) {\n    return function boundFn() {\n        return fn.apply(context, arguments);\n    };\n}\n\n/**\n * let a boolean value also be a function that must return a boolean\n * this first item in args will be used as the context\n * @param {Boolean|Function} val\n * @param {Array} [args]\n * @returns {Boolean}\n */\nfunction boolOrFn(val, args) {\n    if (typeof val == TYPE_FUNCTION) {\n        return val.apply(args ? args[0] || undefined : undefined, args);\n    }\n    return val;\n}\n\n/**\n * use the val2 when val1 is undefined\n * @param {*} val1\n * @param {*} val2\n * @returns {*}\n */\nfunction ifUndefined(val1, val2) {\n    return (val1 === undefined) ? val2 : val1;\n}\n\n/**\n * addEventListener with multiple events at once\n * @param {EventTarget} target\n * @param {String} types\n * @param {Function} handler\n */\nfunction addEventListeners(target, types, handler) {\n    each(splitStr(types), function(type) {\n        target.addEventListener(type, handler, false);\n    });\n}\n\n/**\n * removeEventListener with multiple events at once\n * @param {EventTarget} target\n * @param {String} types\n * @param {Function} handler\n */\nfunction removeEventListeners(target, types, handler) {\n    each(splitStr(types), function(type) {\n        target.removeEventListener(type, handler, false);\n    });\n}\n\n/**\n * find if a node is in the given parent\n * @method hasParent\n * @param {HTMLElement} node\n * @param {HTMLElement} parent\n * @return {Boolean} found\n */\nfunction hasParent(node, parent) {\n    while (node) {\n        if (node == parent) {\n            return true;\n        }\n        node = node.parentNode;\n    }\n    return false;\n}\n\n/**\n * small indexOf wrapper\n * @param {String} str\n * @param {String} find\n * @returns {Boolean} found\n */\nfunction inStr(str, find) {\n    return str.indexOf(find) > -1;\n}\n\n/**\n * split string on whitespace\n * @param {String} str\n * @returns {Array} words\n */\nfunction splitStr(str) {\n    return str.trim().split(/\\s+/g);\n}\n\n/**\n * find if a array contains the object using indexOf or a simple polyFill\n * @param {Array} src\n * @param {String} find\n * @param {String} [findByKey]\n * @return {Boolean|Number} false when not found, or the index\n */\nfunction inArray(src, find, findByKey) {\n    if (src.indexOf && !findByKey) {\n        return src.indexOf(find);\n    } else {\n        var i = 0;\n        while (i < src.length) {\n            if ((findByKey && src[i][findByKey] == find) || (!findByKey && src[i] === find)) {\n                return i;\n            }\n            i++;\n        }\n        return -1;\n    }\n}\n\n/**\n * convert array-like objects to real arrays\n * @param {Object} obj\n * @returns {Array}\n */\nfunction toArray(obj) {\n    return Array.prototype.slice.call(obj, 0);\n}\n\n/**\n * unique array with objects based on a key (like 'id') or just by the array's value\n * @param {Array} src [{id:1},{id:2},{id:1}]\n * @param {String} [key]\n * @param {Boolean} [sort=False]\n * @returns {Array} [{id:1},{id:2}]\n */\nfunction uniqueArray(src, key, sort) {\n    var results = [];\n    var values = [];\n    var i = 0;\n\n    while (i < src.length) {\n        var val = key ? src[i][key] : src[i];\n        if (inArray(values, val) < 0) {\n            results.push(src[i]);\n        }\n        values[i] = val;\n        i++;\n    }\n\n    if (sort) {\n        if (!key) {\n            results = results.sort();\n        } else {\n            results = results.sort(function sortUniqueArray(a, b) {\n                return a[key] > b[key];\n            });\n        }\n    }\n\n    return results;\n}\n\n/**\n * get the prefixed property\n * @param {Object} obj\n * @param {String} property\n * @returns {String|Undefined} prefixed\n */\nfunction prefixed(obj, property) {\n    var prefix, prop;\n    var camelProp = property[0].toUpperCase() + property.slice(1);\n\n    var i = 0;\n    while (i < VENDOR_PREFIXES.length) {\n        prefix = VENDOR_PREFIXES[i];\n        prop = (prefix) ? prefix + camelProp : property;\n\n        if (prop in obj) {\n            return prop;\n        }\n        i++;\n    }\n    return undefined;\n}\n\n/**\n * get a unique id\n * @returns {number} uniqueId\n */\nvar _uniqueId = 1;\nfunction uniqueId() {\n    return _uniqueId++;\n}\n\n/**\n * get the window object of an element\n * @param {HTMLElement} element\n * @returns {DocumentView|Window}\n */\nfunction getWindowForElement(element) {\n    var doc = element.ownerDocument || element;\n    return (doc.defaultView || doc.parentWindow || window);\n}\n\nvar MOBILE_REGEX = /mobile|tablet|ip(ad|hone|od)|android/i;\n\nvar SUPPORT_TOUCH = ('ontouchstart' in window);\nvar SUPPORT_POINTER_EVENTS = prefixed(window, 'PointerEvent') !== undefined;\nvar SUPPORT_ONLY_TOUCH = SUPPORT_TOUCH && MOBILE_REGEX.test(navigator.userAgent);\n\nvar INPUT_TYPE_TOUCH = 'touch';\nvar INPUT_TYPE_PEN = 'pen';\nvar INPUT_TYPE_MOUSE = 'mouse';\nvar INPUT_TYPE_KINECT = 'kinect';\n\nvar COMPUTE_INTERVAL = 25;\n\nvar INPUT_START = 1;\nvar INPUT_MOVE = 2;\nvar INPUT_END = 4;\nvar INPUT_CANCEL = 8;\n\nvar DIRECTION_NONE = 1;\nvar DIRECTION_LEFT = 2;\nvar DIRECTION_RIGHT = 4;\nvar DIRECTION_UP = 8;\nvar DIRECTION_DOWN = 16;\n\nvar DIRECTION_HORIZONTAL = DIRECTION_LEFT | DIRECTION_RIGHT;\nvar DIRECTION_VERTICAL = DIRECTION_UP | DIRECTION_DOWN;\nvar DIRECTION_ALL = DIRECTION_HORIZONTAL | DIRECTION_VERTICAL;\n\nvar PROPS_XY = ['x', 'y'];\nvar PROPS_CLIENT_XY = ['clientX', 'clientY'];\n\n/**\n * create new input type manager\n * @param {Manager} manager\n * @param {Function} callback\n * @returns {Input}\n * @constructor\n */\nfunction Input(manager, callback) {\n    var self = this;\n    this.manager = manager;\n    this.callback = callback;\n    this.element = manager.element;\n    this.target = manager.options.inputTarget;\n\n    // smaller wrapper around the handler, for the scope and the enabled state of the manager,\n    // so when disabled the input events are completely bypassed.\n    this.domHandler = function(ev) {\n        if (boolOrFn(manager.options.enable, [manager])) {\n            self.handler(ev);\n        }\n    };\n\n    this.init();\n\n}\n\nInput.prototype = {\n    /**\n     * should handle the inputEvent data and trigger the callback\n     * @virtual\n     */\n    handler: function() { },\n\n    /**\n     * bind the events\n     */\n    init: function() {\n        this.evEl && addEventListeners(this.element, this.evEl, this.domHandler);\n        this.evTarget && addEventListeners(this.target, this.evTarget, this.domHandler);\n        this.evWin && addEventListeners(getWindowForElement(this.element), this.evWin, this.domHandler);\n    },\n\n    /**\n     * unbind the events\n     */\n    destroy: function() {\n        this.evEl && removeEventListeners(this.element, this.evEl, this.domHandler);\n        this.evTarget && removeEventListeners(this.target, this.evTarget, this.domHandler);\n        this.evWin && removeEventListeners(getWindowForElement(this.element), this.evWin, this.domHandler);\n    }\n};\n\n/**\n * create new input type manager\n * called by the Manager constructor\n * @param {Hammer} manager\n * @returns {Input}\n */\nfunction createInputInstance(manager) {\n    var Type;\n    var inputClass = manager.options.inputClass;\n\n    if (inputClass) {\n        Type = inputClass;\n    } else if (SUPPORT_POINTER_EVENTS) {\n        Type = PointerEventInput;\n    } else if (SUPPORT_ONLY_TOUCH) {\n        Type = TouchInput;\n    } else if (!SUPPORT_TOUCH) {\n        Type = MouseInput;\n    } else {\n        Type = TouchMouseInput;\n    }\n    return new (Type)(manager, inputHandler);\n}\n\n/**\n * handle input events\n * @param {Manager} manager\n * @param {String} eventType\n * @param {Object} input\n */\nfunction inputHandler(manager, eventType, input) {\n    var pointersLen = input.pointers.length;\n    var changedPointersLen = input.changedPointers.length;\n    var isFirst = (eventType & INPUT_START && (pointersLen - changedPointersLen === 0));\n    var isFinal = (eventType & (INPUT_END | INPUT_CANCEL) && (pointersLen - changedPointersLen === 0));\n\n    input.isFirst = !!isFirst;\n    input.isFinal = !!isFinal;\n\n    if (isFirst) {\n        manager.session = {};\n    }\n\n    // source event is the normalized value of the domEvents\n    // like 'touchstart, mouseup, pointerdown'\n    input.eventType = eventType;\n\n    // compute scale, rotation etc\n    computeInputData(manager, input);\n\n    // emit secret event\n    manager.emit('hammer.input', input);\n\n    manager.recognize(input);\n    manager.session.prevInput = input;\n}\n\n/**\n * extend the data with some usable properties like scale, rotate, velocity etc\n * @param {Object} manager\n * @param {Object} input\n */\nfunction computeInputData(manager, input) {\n    var session = manager.session;\n    var pointers = input.pointers;\n    var pointersLength = pointers.length;\n\n    // store the first input to calculate the distance and direction\n    if (!session.firstInput) {\n        session.firstInput = simpleCloneInputData(input);\n    }\n\n    // to compute scale and rotation we need to store the multiple touches\n    if (pointersLength > 1 && !session.firstMultiple) {\n        session.firstMultiple = simpleCloneInputData(input);\n    } else if (pointersLength === 1) {\n        session.firstMultiple = false;\n    }\n\n    var firstInput = session.firstInput;\n    var firstMultiple = session.firstMultiple;\n    var offsetCenter = firstMultiple ? firstMultiple.center : firstInput.center;\n\n    var center = input.center = getCenter(pointers);\n    input.timeStamp = now();\n    input.deltaTime = input.timeStamp - firstInput.timeStamp;\n\n    input.angle = getAngle(offsetCenter, center);\n    input.distance = getDistance(offsetCenter, center);\n\n    computeDeltaXY(session, input);\n    input.offsetDirection = getDirection(input.deltaX, input.deltaY);\n\n    var overallVelocity = getVelocity(input.deltaTime, input.deltaX, input.deltaY);\n    input.overallVelocityX = overallVelocity.x;\n    input.overallVelocityY = overallVelocity.y;\n    input.overallVelocity = (abs(overallVelocity.x) > abs(overallVelocity.y)) ? overallVelocity.x : overallVelocity.y;\n\n    input.scale = firstMultiple ? getScale(firstMultiple.pointers, pointers) : 1;\n    input.rotation = firstMultiple ? getRotation(firstMultiple.pointers, pointers) : 0;\n\n    input.maxPointers = !session.prevInput ? input.pointers.length : ((input.pointers.length >\n        session.prevInput.maxPointers) ? input.pointers.length : session.prevInput.maxPointers);\n\n    computeIntervalInputData(session, input);\n\n    // find the correct target\n    var target = manager.element;\n    if (hasParent(input.srcEvent.target, target)) {\n        target = input.srcEvent.target;\n    }\n    input.target = target;\n}\n\nfunction computeDeltaXY(session, input) {\n    var center = input.center;\n    var offset = session.offsetDelta || {};\n    var prevDelta = session.prevDelta || {};\n    var prevInput = session.prevInput || {};\n\n    if (input.eventType === INPUT_START || prevInput.eventType === INPUT_END) {\n        prevDelta = session.prevDelta = {\n            x: prevInput.deltaX || 0,\n            y: prevInput.deltaY || 0\n        };\n\n        offset = session.offsetDelta = {\n            x: center.x,\n            y: center.y\n        };\n    }\n\n    input.deltaX = prevDelta.x + (center.x - offset.x);\n    input.deltaY = prevDelta.y + (center.y - offset.y);\n}\n\n/**\n * velocity is calculated every x ms\n * @param {Object} session\n * @param {Object} input\n */\nfunction computeIntervalInputData(session, input) {\n    var last = session.lastInterval || input,\n        deltaTime = input.timeStamp - last.timeStamp,\n        velocity, velocityX, velocityY, direction;\n\n    if (input.eventType != INPUT_CANCEL && (deltaTime > COMPUTE_INTERVAL || last.velocity === undefined)) {\n        var deltaX = input.deltaX - last.deltaX;\n        var deltaY = input.deltaY - last.deltaY;\n\n        var v = getVelocity(deltaTime, deltaX, deltaY);\n        velocityX = v.x;\n        velocityY = v.y;\n        velocity = (abs(v.x) > abs(v.y)) ? v.x : v.y;\n        direction = getDirection(deltaX, deltaY);\n\n        session.lastInterval = input;\n    } else {\n        // use latest velocity info if it doesn't overtake a minimum period\n        velocity = last.velocity;\n        velocityX = last.velocityX;\n        velocityY = last.velocityY;\n        direction = last.direction;\n    }\n\n    input.velocity = velocity;\n    input.velocityX = velocityX;\n    input.velocityY = velocityY;\n    input.direction = direction;\n}\n\n/**\n * create a simple clone from the input used for storage of firstInput and firstMultiple\n * @param {Object} input\n * @returns {Object} clonedInputData\n */\nfunction simpleCloneInputData(input) {\n    // make a simple copy of the pointers because we will get a reference if we don't\n    // we only need clientXY for the calculations\n    var pointers = [];\n    var i = 0;\n    while (i < input.pointers.length) {\n        pointers[i] = {\n            clientX: round(input.pointers[i].clientX),\n            clientY: round(input.pointers[i].clientY)\n        };\n        i++;\n    }\n\n    return {\n        timeStamp: now(),\n        pointers: pointers,\n        center: getCenter(pointers),\n        deltaX: input.deltaX,\n        deltaY: input.deltaY\n    };\n}\n\n/**\n * get the center of all the pointers\n * @param {Array} pointers\n * @return {Object} center contains `x` and `y` properties\n */\nfunction getCenter(pointers) {\n    var pointersLength = pointers.length;\n\n    // no need to loop when only one touch\n    if (pointersLength === 1) {\n        return {\n            x: round(pointers[0].clientX),\n            y: round(pointers[0].clientY)\n        };\n    }\n\n    var x = 0, y = 0, i = 0;\n    while (i < pointersLength) {\n        x += pointers[i].clientX;\n        y += pointers[i].clientY;\n        i++;\n    }\n\n    return {\n        x: round(x / pointersLength),\n        y: round(y / pointersLength)\n    };\n}\n\n/**\n * calculate the velocity between two points. unit is in px per ms.\n * @param {Number} deltaTime\n * @param {Number} x\n * @param {Number} y\n * @return {Object} velocity `x` and `y`\n */\nfunction getVelocity(deltaTime, x, y) {\n    return {\n        x: x / deltaTime || 0,\n        y: y / deltaTime || 0\n    };\n}\n\n/**\n * get the direction between two points\n * @param {Number} x\n * @param {Number} y\n * @return {Number} direction\n */\nfunction getDirection(x, y) {\n    if (x === y) {\n        return DIRECTION_NONE;\n    }\n\n    if (abs(x) >= abs(y)) {\n        return x < 0 ? DIRECTION_LEFT : DIRECTION_RIGHT;\n    }\n    return y < 0 ? DIRECTION_UP : DIRECTION_DOWN;\n}\n\n/**\n * calculate the absolute distance between two points\n * @param {Object} p1 {x, y}\n * @param {Object} p2 {x, y}\n * @param {Array} [props] containing x and y keys\n * @return {Number} distance\n */\nfunction getDistance(p1, p2, props) {\n    if (!props) {\n        props = PROPS_XY;\n    }\n    var x = p2[props[0]] - p1[props[0]],\n        y = p2[props[1]] - p1[props[1]];\n\n    return Math.sqrt((x * x) + (y * y));\n}\n\n/**\n * calculate the angle between two coordinates\n * @param {Object} p1\n * @param {Object} p2\n * @param {Array} [props] containing x and y keys\n * @return {Number} angle\n */\nfunction getAngle(p1, p2, props) {\n    if (!props) {\n        props = PROPS_XY;\n    }\n    var x = p2[props[0]] - p1[props[0]],\n        y = p2[props[1]] - p1[props[1]];\n    return Math.atan2(y, x) * 180 / Math.PI;\n}\n\n/**\n * calculate the rotation degrees between two pointersets\n * @param {Array} start array of pointers\n * @param {Array} end array of pointers\n * @return {Number} rotation\n */\nfunction getRotation(start, end) {\n    return getAngle(end[1], end[0], PROPS_CLIENT_XY) + getAngle(start[1], start[0], PROPS_CLIENT_XY);\n}\n\n/**\n * calculate the scale factor between two pointersets\n * no scale is 1, and goes down to 0 when pinched together, and bigger when pinched out\n * @param {Array} start array of pointers\n * @param {Array} end array of pointers\n * @return {Number} scale\n */\nfunction getScale(start, end) {\n    return getDistance(end[0], end[1], PROPS_CLIENT_XY) / getDistance(start[0], start[1], PROPS_CLIENT_XY);\n}\n\nvar MOUSE_INPUT_MAP = {\n    mousedown: INPUT_START,\n    mousemove: INPUT_MOVE,\n    mouseup: INPUT_END\n};\n\nvar MOUSE_ELEMENT_EVENTS = 'mousedown';\nvar MOUSE_WINDOW_EVENTS = 'mousemove mouseup';\n\n/**\n * Mouse events input\n * @constructor\n * @extends Input\n */\nfunction MouseInput() {\n    this.evEl = MOUSE_ELEMENT_EVENTS;\n    this.evWin = MOUSE_WINDOW_EVENTS;\n\n    this.pressed = false; // mousedown state\n\n    Input.apply(this, arguments);\n}\n\ninherit(MouseInput, Input, {\n    /**\n     * handle mouse events\n     * @param {Object} ev\n     */\n    handler: function MEhandler(ev) {\n        var eventType = MOUSE_INPUT_MAP[ev.type];\n\n        // on start we want to have the left mouse button down\n        if (eventType & INPUT_START && ev.button === 0) {\n            this.pressed = true;\n        }\n\n        if (eventType & INPUT_MOVE && ev.which !== 1) {\n            eventType = INPUT_END;\n        }\n\n        // mouse must be down\n        if (!this.pressed) {\n            return;\n        }\n\n        if (eventType & INPUT_END) {\n            this.pressed = false;\n        }\n\n        this.callback(this.manager, eventType, {\n            pointers: [ev],\n            changedPointers: [ev],\n            pointerType: INPUT_TYPE_MOUSE,\n            srcEvent: ev\n        });\n    }\n});\n\nvar POINTER_INPUT_MAP = {\n    pointerdown: INPUT_START,\n    pointermove: INPUT_MOVE,\n    pointerup: INPUT_END,\n    pointercancel: INPUT_CANCEL,\n    pointerout: INPUT_CANCEL\n};\n\n// in IE10 the pointer types is defined as an enum\nvar IE10_POINTER_TYPE_ENUM = {\n    2: INPUT_TYPE_TOUCH,\n    3: INPUT_TYPE_PEN,\n    4: INPUT_TYPE_MOUSE,\n    5: INPUT_TYPE_KINECT // see https://twitter.com/jacobrossi/status/480596438489890816\n};\n\nvar POINTER_ELEMENT_EVENTS = 'pointerdown';\nvar POINTER_WINDOW_EVENTS = 'pointermove pointerup pointercancel';\n\n// IE10 has prefixed support, and case-sensitive\nif (window.MSPointerEvent && !window.PointerEvent) {\n    POINTER_ELEMENT_EVENTS = 'MSPointerDown';\n    POINTER_WINDOW_EVENTS = 'MSPointerMove MSPointerUp MSPointerCancel';\n}\n\n/**\n * Pointer events input\n * @constructor\n * @extends Input\n */\nfunction PointerEventInput() {\n    this.evEl = POINTER_ELEMENT_EVENTS;\n    this.evWin = POINTER_WINDOW_EVENTS;\n\n    Input.apply(this, arguments);\n\n    this.store = (this.manager.session.pointerEvents = []);\n}\n\ninherit(PointerEventInput, Input, {\n    /**\n     * handle mouse events\n     * @param {Object} ev\n     */\n    handler: function PEhandler(ev) {\n        var store = this.store;\n        var removePointer = false;\n\n        var eventTypeNormalized = ev.type.toLowerCase().replace('ms', '');\n        var eventType = POINTER_INPUT_MAP[eventTypeNormalized];\n        var pointerType = IE10_POINTER_TYPE_ENUM[ev.pointerType] || ev.pointerType;\n\n        var isTouch = (pointerType == INPUT_TYPE_TOUCH);\n\n        // get index of the event in the store\n        var storeIndex = inArray(store, ev.pointerId, 'pointerId');\n\n        // start and mouse must be down\n        if (eventType & INPUT_START && (ev.button === 0 || isTouch)) {\n            if (storeIndex < 0) {\n                store.push(ev);\n                storeIndex = store.length - 1;\n            }\n        } else if (eventType & (INPUT_END | INPUT_CANCEL)) {\n            removePointer = true;\n        }\n\n        // it not found, so the pointer hasn't been down (so it's probably a hover)\n        if (storeIndex < 0) {\n            return;\n        }\n\n        // update the event in the store\n        store[storeIndex] = ev;\n\n        this.callback(this.manager, eventType, {\n            pointers: store,\n            changedPointers: [ev],\n            pointerType: pointerType,\n            srcEvent: ev\n        });\n\n        if (removePointer) {\n            // remove from the store\n            store.splice(storeIndex, 1);\n        }\n    }\n});\n\nvar SINGLE_TOUCH_INPUT_MAP = {\n    touchstart: INPUT_START,\n    touchmove: INPUT_MOVE,\n    touchend: INPUT_END,\n    touchcancel: INPUT_CANCEL\n};\n\nvar SINGLE_TOUCH_TARGET_EVENTS = 'touchstart';\nvar SINGLE_TOUCH_WINDOW_EVENTS = 'touchstart touchmove touchend touchcancel';\n\n/**\n * Touch events input\n * @constructor\n * @extends Input\n */\nfunction SingleTouchInput() {\n    this.evTarget = SINGLE_TOUCH_TARGET_EVENTS;\n    this.evWin = SINGLE_TOUCH_WINDOW_EVENTS;\n    this.started = false;\n\n    Input.apply(this, arguments);\n}\n\ninherit(SingleTouchInput, Input, {\n    handler: function TEhandler(ev) {\n        var type = SINGLE_TOUCH_INPUT_MAP[ev.type];\n\n        // should we handle the touch events?\n        if (type === INPUT_START) {\n            this.started = true;\n        }\n\n        if (!this.started) {\n            return;\n        }\n\n        var touches = normalizeSingleTouches.call(this, ev, type);\n\n        // when done, reset the started state\n        if (type & (INPUT_END | INPUT_CANCEL) && touches[0].length - touches[1].length === 0) {\n            this.started = false;\n        }\n\n        this.callback(this.manager, type, {\n            pointers: touches[0],\n            changedPointers: touches[1],\n            pointerType: INPUT_TYPE_TOUCH,\n            srcEvent: ev\n        });\n    }\n});\n\n/**\n * @this {TouchInput}\n * @param {Object} ev\n * @param {Number} type flag\n * @returns {undefined|Array} [all, changed]\n */\nfunction normalizeSingleTouches(ev, type) {\n    var all = toArray(ev.touches);\n    var changed = toArray(ev.changedTouches);\n\n    if (type & (INPUT_END | INPUT_CANCEL)) {\n        all = uniqueArray(all.concat(changed), 'identifier', true);\n    }\n\n    return [all, changed];\n}\n\nvar TOUCH_INPUT_MAP = {\n    touchstart: INPUT_START,\n    touchmove: INPUT_MOVE,\n    touchend: INPUT_END,\n    touchcancel: INPUT_CANCEL\n};\n\nvar TOUCH_TARGET_EVENTS = 'touchstart touchmove touchend touchcancel';\n\n/**\n * Multi-user touch events input\n * @constructor\n * @extends Input\n */\nfunction TouchInput() {\n    this.evTarget = TOUCH_TARGET_EVENTS;\n    this.targetIds = {};\n\n    Input.apply(this, arguments);\n}\n\ninherit(TouchInput, Input, {\n    handler: function MTEhandler(ev) {\n        var type = TOUCH_INPUT_MAP[ev.type];\n        var touches = getTouches.call(this, ev, type);\n        if (!touches) {\n            return;\n        }\n\n        this.callback(this.manager, type, {\n            pointers: touches[0],\n            changedPointers: touches[1],\n            pointerType: INPUT_TYPE_TOUCH,\n            srcEvent: ev\n        });\n    }\n});\n\n/**\n * @this {TouchInput}\n * @param {Object} ev\n * @param {Number} type flag\n * @returns {undefined|Array} [all, changed]\n */\nfunction getTouches(ev, type) {\n    var allTouches = toArray(ev.touches);\n    var targetIds = this.targetIds;\n\n    // when there is only one touch, the process can be simplified\n    if (type & (INPUT_START | INPUT_MOVE) && allTouches.length === 1) {\n        targetIds[allTouches[0].identifier] = true;\n        return [allTouches, allTouches];\n    }\n\n    var i,\n        targetTouches,\n        changedTouches = toArray(ev.changedTouches),\n        changedTargetTouches = [],\n        target = this.target;\n\n    // get target touches from touches\n    targetTouches = allTouches.filter(function(touch) {\n        return hasParent(touch.target, target);\n    });\n\n    // collect touches\n    if (type === INPUT_START) {\n        i = 0;\n        while (i < targetTouches.length) {\n            targetIds[targetTouches[i].identifier] = true;\n            i++;\n        }\n    }\n\n    // filter changed touches to only contain touches that exist in the collected target ids\n    i = 0;\n    while (i < changedTouches.length) {\n        if (targetIds[changedTouches[i].identifier]) {\n            changedTargetTouches.push(changedTouches[i]);\n        }\n\n        // cleanup removed touches\n        if (type & (INPUT_END | INPUT_CANCEL)) {\n            delete targetIds[changedTouches[i].identifier];\n        }\n        i++;\n    }\n\n    if (!changedTargetTouches.length) {\n        return;\n    }\n\n    return [\n        // merge targetTouches with changedTargetTouches so it contains ALL touches, including 'end' and 'cancel'\n        uniqueArray(targetTouches.concat(changedTargetTouches), 'identifier', true),\n        changedTargetTouches\n    ];\n}\n\n/**\n * Combined touch and mouse input\n *\n * Touch has a higher priority then mouse, and while touching no mouse events are allowed.\n * This because touch devices also emit mouse events while doing a touch.\n *\n * @constructor\n * @extends Input\n */\n\nvar DEDUP_TIMEOUT = 2500;\nvar DEDUP_DISTANCE = 25;\n\nfunction TouchMouseInput() {\n    Input.apply(this, arguments);\n\n    var handler = bindFn(this.handler, this);\n    this.touch = new TouchInput(this.manager, handler);\n    this.mouse = new MouseInput(this.manager, handler);\n\n    this.primaryTouch = null;\n    this.lastTouches = [];\n}\n\ninherit(TouchMouseInput, Input, {\n    /**\n     * handle mouse and touch events\n     * @param {Hammer} manager\n     * @param {String} inputEvent\n     * @param {Object} inputData\n     */\n    handler: function TMEhandler(manager, inputEvent, inputData) {\n        var isTouch = (inputData.pointerType == INPUT_TYPE_TOUCH),\n            isMouse = (inputData.pointerType == INPUT_TYPE_MOUSE);\n\n        if (isMouse && inputData.sourceCapabilities && inputData.sourceCapabilities.firesTouchEvents) {\n            return;\n        }\n\n        // when we're in a touch event, record touches to  de-dupe synthetic mouse event\n        if (isTouch) {\n            recordTouches.call(this, inputEvent, inputData);\n        } else if (isMouse && isSyntheticEvent.call(this, inputData)) {\n            return;\n        }\n\n        this.callback(manager, inputEvent, inputData);\n    },\n\n    /**\n     * remove the event listeners\n     */\n    destroy: function destroy() {\n        this.touch.destroy();\n        this.mouse.destroy();\n    }\n});\n\nfunction recordTouches(eventType, eventData) {\n    if (eventType & INPUT_START) {\n        this.primaryTouch = eventData.changedPointers[0].identifier;\n        setLastTouch.call(this, eventData);\n    } else if (eventType & (INPUT_END | INPUT_CANCEL)) {\n        setLastTouch.call(this, eventData);\n    }\n}\n\nfunction setLastTouch(eventData) {\n    var touch = eventData.changedPointers[0];\n\n    if (touch.identifier === this.primaryTouch) {\n        var lastTouch = {x: touch.clientX, y: touch.clientY};\n        this.lastTouches.push(lastTouch);\n        var lts = this.lastTouches;\n        var removeLastTouch = function() {\n            var i = lts.indexOf(lastTouch);\n            if (i > -1) {\n                lts.splice(i, 1);\n            }\n        };\n        setTimeout(removeLastTouch, DEDUP_TIMEOUT);\n    }\n}\n\nfunction isSyntheticEvent(eventData) {\n    var x = eventData.srcEvent.clientX, y = eventData.srcEvent.clientY;\n    for (var i = 0; i < this.lastTouches.length; i++) {\n        var t = this.lastTouches[i];\n        var dx = Math.abs(x - t.x), dy = Math.abs(y - t.y);\n        if (dx <= DEDUP_DISTANCE && dy <= DEDUP_DISTANCE) {\n            return true;\n        }\n    }\n    return false;\n}\n\nvar PREFIXED_TOUCH_ACTION = prefixed(TEST_ELEMENT.style, 'touchAction');\nvar NATIVE_TOUCH_ACTION = PREFIXED_TOUCH_ACTION !== undefined;\n\n// magical touchAction value\nvar TOUCH_ACTION_COMPUTE = 'compute';\nvar TOUCH_ACTION_AUTO = 'auto';\nvar TOUCH_ACTION_MANIPULATION = 'manipulation'; // not implemented\nvar TOUCH_ACTION_NONE = 'none';\nvar TOUCH_ACTION_PAN_X = 'pan-x';\nvar TOUCH_ACTION_PAN_Y = 'pan-y';\nvar TOUCH_ACTION_MAP = getTouchActionProps();\n\n/**\n * Touch Action\n * sets the touchAction property or uses the js alternative\n * @param {Manager} manager\n * @param {String} value\n * @constructor\n */\nfunction TouchAction(manager, value) {\n    this.manager = manager;\n    this.set(value);\n}\n\nTouchAction.prototype = {\n    /**\n     * set the touchAction value on the element or enable the polyfill\n     * @param {String} value\n     */\n    set: function(value) {\n        // find out the touch-action by the event handlers\n        if (value == TOUCH_ACTION_COMPUTE) {\n            value = this.compute();\n        }\n\n        if (NATIVE_TOUCH_ACTION && this.manager.element.style && TOUCH_ACTION_MAP[value]) {\n            this.manager.element.style[PREFIXED_TOUCH_ACTION] = value;\n        }\n        this.actions = value.toLowerCase().trim();\n    },\n\n    /**\n     * just re-set the touchAction value\n     */\n    update: function() {\n        this.set(this.manager.options.touchAction);\n    },\n\n    /**\n     * compute the value for the touchAction property based on the recognizer's settings\n     * @returns {String} value\n     */\n    compute: function() {\n        var actions = [];\n        each(this.manager.recognizers, function(recognizer) {\n            if (boolOrFn(recognizer.options.enable, [recognizer])) {\n                actions = actions.concat(recognizer.getTouchAction());\n            }\n        });\n        return cleanTouchActions(actions.join(' '));\n    },\n\n    /**\n     * this method is called on each input cycle and provides the preventing of the browser behavior\n     * @param {Object} input\n     */\n    preventDefaults: function(input) {\n        var srcEvent = input.srcEvent;\n        var direction = input.offsetDirection;\n\n        // if the touch action did prevented once this session\n        if (this.manager.session.prevented) {\n            srcEvent.preventDefault();\n            return;\n        }\n\n        var actions = this.actions;\n        var hasNone = inStr(actions, TOUCH_ACTION_NONE) && !TOUCH_ACTION_MAP[TOUCH_ACTION_NONE];\n        var hasPanY = inStr(actions, TOUCH_ACTION_PAN_Y) && !TOUCH_ACTION_MAP[TOUCH_ACTION_PAN_Y];\n        var hasPanX = inStr(actions, TOUCH_ACTION_PAN_X) && !TOUCH_ACTION_MAP[TOUCH_ACTION_PAN_X];\n\n        if (hasNone) {\n            //do not prevent defaults if this is a tap gesture\n\n            var isTapPointer = input.pointers.length === 1;\n            var isTapMovement = input.distance < 2;\n            var isTapTouchTime = input.deltaTime < 250;\n\n            if (isTapPointer && isTapMovement && isTapTouchTime) {\n                return;\n            }\n        }\n\n        if (hasPanX && hasPanY) {\n            // `pan-x pan-y` means browser handles all scrolling/panning, do not prevent\n            return;\n        }\n\n        if (hasNone ||\n            (hasPanY && direction & DIRECTION_HORIZONTAL) ||\n            (hasPanX && direction & DIRECTION_VERTICAL)) {\n            return this.preventSrc(srcEvent);\n        }\n    },\n\n    /**\n     * call preventDefault to prevent the browser's default behavior (scrolling in most cases)\n     * @param {Object} srcEvent\n     */\n    preventSrc: function(srcEvent) {\n        this.manager.session.prevented = true;\n        srcEvent.preventDefault();\n    }\n};\n\n/**\n * when the touchActions are collected they are not a valid value, so we need to clean things up. *\n * @param {String} actions\n * @returns {*}\n */\nfunction cleanTouchActions(actions) {\n    // none\n    if (inStr(actions, TOUCH_ACTION_NONE)) {\n        return TOUCH_ACTION_NONE;\n    }\n\n    var hasPanX = inStr(actions, TOUCH_ACTION_PAN_X);\n    var hasPanY = inStr(actions, TOUCH_ACTION_PAN_Y);\n\n    // if both pan-x and pan-y are set (different recognizers\n    // for different directions, e.g. horizontal pan but vertical swipe?)\n    // we need none (as otherwise with pan-x pan-y combined none of these\n    // recognizers will work, since the browser would handle all panning\n    if (hasPanX && hasPanY) {\n        return TOUCH_ACTION_NONE;\n    }\n\n    // pan-x OR pan-y\n    if (hasPanX || hasPanY) {\n        return hasPanX ? TOUCH_ACTION_PAN_X : TOUCH_ACTION_PAN_Y;\n    }\n\n    // manipulation\n    if (inStr(actions, TOUCH_ACTION_MANIPULATION)) {\n        return TOUCH_ACTION_MANIPULATION;\n    }\n\n    return TOUCH_ACTION_AUTO;\n}\n\nfunction getTouchActionProps() {\n    if (!NATIVE_TOUCH_ACTION) {\n        return false;\n    }\n    var touchMap = {};\n    var cssSupports = window.CSS && window.CSS.supports;\n    ['auto', 'manipulation', 'pan-y', 'pan-x', 'pan-x pan-y', 'none'].forEach(function(val) {\n\n        // If css.supports is not supported but there is native touch-action assume it supports\n        // all values. This is the case for IE 10 and 11.\n        touchMap[val] = cssSupports ? window.CSS.supports('touch-action', val) : true;\n    });\n    return touchMap;\n}\n\n/**\n * Recognizer flow explained; *\n * All recognizers have the initial state of POSSIBLE when a input session starts.\n * The definition of a input session is from the first input until the last input, with all it's movement in it. *\n * Example session for mouse-input: mousedown -> mousemove -> mouseup\n *\n * On each recognizing cycle (see Manager.recognize) the .recognize() method is executed\n * which determines with state it should be.\n *\n * If the recognizer has the state FAILED, CANCELLED or RECOGNIZED (equals ENDED), it is reset to\n * POSSIBLE to give it another change on the next cycle.\n *\n *               Possible\n *                  |\n *            +-----+---------------+\n *            |                     |\n *      +-----+-----+               |\n *      |           |               |\n *   Failed      Cancelled          |\n *                          +-------+------+\n *                          |              |\n *                      Recognized       Began\n *                                         |\n *                                      Changed\n *                                         |\n *                                  Ended/Recognized\n */\nvar STATE_POSSIBLE = 1;\nvar STATE_BEGAN = 2;\nvar STATE_CHANGED = 4;\nvar STATE_ENDED = 8;\nvar STATE_RECOGNIZED = STATE_ENDED;\nvar STATE_CANCELLED = 16;\nvar STATE_FAILED = 32;\n\n/**\n * Recognizer\n * Every recognizer needs to extend from this class.\n * @constructor\n * @param {Object} options\n */\nfunction Recognizer(options) {\n    this.options = assign({}, this.defaults, options || {});\n\n    this.id = uniqueId();\n\n    this.manager = null;\n\n    // default is enable true\n    this.options.enable = ifUndefined(this.options.enable, true);\n\n    this.state = STATE_POSSIBLE;\n\n    this.simultaneous = {};\n    this.requireFail = [];\n}\n\nRecognizer.prototype = {\n    /**\n     * @virtual\n     * @type {Object}\n     */\n    defaults: {},\n\n    /**\n     * set options\n     * @param {Object} options\n     * @return {Recognizer}\n     */\n    set: function(options) {\n        assign(this.options, options);\n\n        // also update the touchAction, in case something changed about the directions/enabled state\n        this.manager && this.manager.touchAction.update();\n        return this;\n    },\n\n    /**\n     * recognize simultaneous with an other recognizer.\n     * @param {Recognizer} otherRecognizer\n     * @returns {Recognizer} this\n     */\n    recognizeWith: function(otherRecognizer) {\n        if (invokeArrayArg(otherRecognizer, 'recognizeWith', this)) {\n            return this;\n        }\n\n        var simultaneous = this.simultaneous;\n        otherRecognizer = getRecognizerByNameIfManager(otherRecognizer, this);\n        if (!simultaneous[otherRecognizer.id]) {\n            simultaneous[otherRecognizer.id] = otherRecognizer;\n            otherRecognizer.recognizeWith(this);\n        }\n        return this;\n    },\n\n    /**\n     * drop the simultaneous link. it doesnt remove the link on the other recognizer.\n     * @param {Recognizer} otherRecognizer\n     * @returns {Recognizer} this\n     */\n    dropRecognizeWith: function(otherRecognizer) {\n        if (invokeArrayArg(otherRecognizer, 'dropRecognizeWith', this)) {\n            return this;\n        }\n\n        otherRecognizer = getRecognizerByNameIfManager(otherRecognizer, this);\n        delete this.simultaneous[otherRecognizer.id];\n        return this;\n    },\n\n    /**\n     * recognizer can only run when an other is failing\n     * @param {Recognizer} otherRecognizer\n     * @returns {Recognizer} this\n     */\n    requireFailure: function(otherRecognizer) {\n        if (invokeArrayArg(otherRecognizer, 'requireFailure', this)) {\n            return this;\n        }\n\n        var requireFail = this.requireFail;\n        otherRecognizer = getRecognizerByNameIfManager(otherRecognizer, this);\n        if (inArray(requireFail, otherRecognizer) === -1) {\n            requireFail.push(otherRecognizer);\n            otherRecognizer.requireFailure(this);\n        }\n        return this;\n    },\n\n    /**\n     * drop the requireFailure link. it does not remove the link on the other recognizer.\n     * @param {Recognizer} otherRecognizer\n     * @returns {Recognizer} this\n     */\n    dropRequireFailure: function(otherRecognizer) {\n        if (invokeArrayArg(otherRecognizer, 'dropRequireFailure', this)) {\n            return this;\n        }\n\n        otherRecognizer = getRecognizerByNameIfManager(otherRecognizer, this);\n        var index = inArray(this.requireFail, otherRecognizer);\n        if (index > -1) {\n            this.requireFail.splice(index, 1);\n        }\n        return this;\n    },\n\n    /**\n     * has require failures boolean\n     * @returns {boolean}\n     */\n    hasRequireFailures: function() {\n        return this.requireFail.length > 0;\n    },\n\n    /**\n     * if the recognizer can recognize simultaneous with an other recognizer\n     * @param {Recognizer} otherRecognizer\n     * @returns {Boolean}\n     */\n    canRecognizeWith: function(otherRecognizer) {\n        return !!this.simultaneous[otherRecognizer.id];\n    },\n\n    /**\n     * You should use `tryEmit` instead of `emit` directly to check\n     * that all the needed recognizers has failed before emitting.\n     * @param {Object} input\n     */\n    emit: function(input) {\n        var self = this;\n        var state = this.state;\n\n        function emit(event) {\n            self.manager.emit(event, input);\n        }\n\n        // 'panstart' and 'panmove'\n        if (state < STATE_ENDED) {\n            emit(self.options.event + stateStr(state));\n        }\n\n        emit(self.options.event); // simple 'eventName' events\n\n        if (input.additionalEvent) { // additional event(panleft, panright, pinchin, pinchout...)\n            emit(input.additionalEvent);\n        }\n\n        // panend and pancancel\n        if (state >= STATE_ENDED) {\n            emit(self.options.event + stateStr(state));\n        }\n    },\n\n    /**\n     * Check that all the require failure recognizers has failed,\n     * if true, it emits a gesture event,\n     * otherwise, setup the state to FAILED.\n     * @param {Object} input\n     */\n    tryEmit: function(input) {\n        if (this.canEmit()) {\n            return this.emit(input);\n        }\n        // it's failing anyway\n        this.state = STATE_FAILED;\n    },\n\n    /**\n     * can we emit?\n     * @returns {boolean}\n     */\n    canEmit: function() {\n        var i = 0;\n        while (i < this.requireFail.length) {\n            if (!(this.requireFail[i].state & (STATE_FAILED | STATE_POSSIBLE))) {\n                return false;\n            }\n            i++;\n        }\n        return true;\n    },\n\n    /**\n     * update the recognizer\n     * @param {Object} inputData\n     */\n    recognize: function(inputData) {\n        // make a new copy of the inputData\n        // so we can change the inputData without messing up the other recognizers\n        var inputDataClone = assign({}, inputData);\n\n        // is is enabled and allow recognizing?\n        if (!boolOrFn(this.options.enable, [this, inputDataClone])) {\n            this.reset();\n            this.state = STATE_FAILED;\n            return;\n        }\n\n        // reset when we've reached the end\n        if (this.state & (STATE_RECOGNIZED | STATE_CANCELLED | STATE_FAILED)) {\n            this.state = STATE_POSSIBLE;\n        }\n\n        this.state = this.process(inputDataClone);\n\n        // the recognizer has recognized a gesture\n        // so trigger an event\n        if (this.state & (STATE_BEGAN | STATE_CHANGED | STATE_ENDED | STATE_CANCELLED)) {\n            this.tryEmit(inputDataClone);\n        }\n    },\n\n    /**\n     * return the state of the recognizer\n     * the actual recognizing happens in this method\n     * @virtual\n     * @param {Object} inputData\n     * @returns {Const} STATE\n     */\n    process: function(inputData) { }, // jshint ignore:line\n\n    /**\n     * return the preferred touch-action\n     * @virtual\n     * @returns {Array}\n     */\n    getTouchAction: function() { },\n\n    /**\n     * called when the gesture isn't allowed to recognize\n     * like when another is being recognized or it is disabled\n     * @virtual\n     */\n    reset: function() { }\n};\n\n/**\n * get a usable string, used as event postfix\n * @param {Const} state\n * @returns {String} state\n */\nfunction stateStr(state) {\n    if (state & STATE_CANCELLED) {\n        return 'cancel';\n    } else if (state & STATE_ENDED) {\n        return 'end';\n    } else if (state & STATE_CHANGED) {\n        return 'move';\n    } else if (state & STATE_BEGAN) {\n        return 'start';\n    }\n    return '';\n}\n\n/**\n * direction cons to string\n * @param {Const} direction\n * @returns {String}\n */\nfunction directionStr(direction) {\n    if (direction == DIRECTION_DOWN) {\n        return 'down';\n    } else if (direction == DIRECTION_UP) {\n        return 'up';\n    } else if (direction == DIRECTION_LEFT) {\n        return 'left';\n    } else if (direction == DIRECTION_RIGHT) {\n        return 'right';\n    }\n    return '';\n}\n\n/**\n * get a recognizer by name if it is bound to a manager\n * @param {Recognizer|String} otherRecognizer\n * @param {Recognizer} recognizer\n * @returns {Recognizer}\n */\nfunction getRecognizerByNameIfManager(otherRecognizer, recognizer) {\n    var manager = recognizer.manager;\n    if (manager) {\n        return manager.get(otherRecognizer);\n    }\n    return otherRecognizer;\n}\n\n/**\n * This recognizer is just used as a base for the simple attribute recognizers.\n * @constructor\n * @extends Recognizer\n */\nfunction AttrRecognizer() {\n    Recognizer.apply(this, arguments);\n}\n\ninherit(AttrRecognizer, Recognizer, {\n    /**\n     * @namespace\n     * @memberof AttrRecognizer\n     */\n    defaults: {\n        /**\n         * @type {Number}\n         * @default 1\n         */\n        pointers: 1\n    },\n\n    /**\n     * Used to check if it the recognizer receives valid input, like input.distance > 10.\n     * @memberof AttrRecognizer\n     * @param {Object} input\n     * @returns {Boolean} recognized\n     */\n    attrTest: function(input) {\n        var optionPointers = this.options.pointers;\n        return optionPointers === 0 || input.pointers.length === optionPointers;\n    },\n\n    /**\n     * Process the input and return the state for the recognizer\n     * @memberof AttrRecognizer\n     * @param {Object} input\n     * @returns {*} State\n     */\n    process: function(input) {\n        var state = this.state;\n        var eventType = input.eventType;\n\n        var isRecognized = state & (STATE_BEGAN | STATE_CHANGED);\n        var isValid = this.attrTest(input);\n\n        // on cancel input and we've recognized before, return STATE_CANCELLED\n        if (isRecognized && (eventType & INPUT_CANCEL || !isValid)) {\n            return state | STATE_CANCELLED;\n        } else if (isRecognized || isValid) {\n            if (eventType & INPUT_END) {\n                return state | STATE_ENDED;\n            } else if (!(state & STATE_BEGAN)) {\n                return STATE_BEGAN;\n            }\n            return state | STATE_CHANGED;\n        }\n        return STATE_FAILED;\n    }\n});\n\n/**\n * Pan\n * Recognized when the pointer is down and moved in the allowed direction.\n * @constructor\n * @extends AttrRecognizer\n */\nfunction PanRecognizer() {\n    AttrRecognizer.apply(this, arguments);\n\n    this.pX = null;\n    this.pY = null;\n}\n\ninherit(PanRecognizer, AttrRecognizer, {\n    /**\n     * @namespace\n     * @memberof PanRecognizer\n     */\n    defaults: {\n        event: 'pan',\n        threshold: 10,\n        pointers: 1,\n        direction: DIRECTION_ALL\n    },\n\n    getTouchAction: function() {\n        var direction = this.options.direction;\n        var actions = [];\n        if (direction & DIRECTION_HORIZONTAL) {\n            actions.push(TOUCH_ACTION_PAN_Y);\n        }\n        if (direction & DIRECTION_VERTICAL) {\n            actions.push(TOUCH_ACTION_PAN_X);\n        }\n        return actions;\n    },\n\n    directionTest: function(input) {\n        var options = this.options;\n        var hasMoved = true;\n        var distance = input.distance;\n        var direction = input.direction;\n        var x = input.deltaX;\n        var y = input.deltaY;\n\n        // lock to axis?\n        if (!(direction & options.direction)) {\n            if (options.direction & DIRECTION_HORIZONTAL) {\n                direction = (x === 0) ? DIRECTION_NONE : (x < 0) ? DIRECTION_LEFT : DIRECTION_RIGHT;\n                hasMoved = x != this.pX;\n                distance = Math.abs(input.deltaX);\n            } else {\n                direction = (y === 0) ? DIRECTION_NONE : (y < 0) ? DIRECTION_UP : DIRECTION_DOWN;\n                hasMoved = y != this.pY;\n                distance = Math.abs(input.deltaY);\n            }\n        }\n        input.direction = direction;\n        return hasMoved && distance > options.threshold && direction & options.direction;\n    },\n\n    attrTest: function(input) {\n        return AttrRecognizer.prototype.attrTest.call(this, input) &&\n            (this.state & STATE_BEGAN || (!(this.state & STATE_BEGAN) && this.directionTest(input)));\n    },\n\n    emit: function(input) {\n\n        this.pX = input.deltaX;\n        this.pY = input.deltaY;\n\n        var direction = directionStr(input.direction);\n\n        if (direction) {\n            input.additionalEvent = this.options.event + direction;\n        }\n        this._super.emit.call(this, input);\n    }\n});\n\n/**\n * Pinch\n * Recognized when two or more pointers are moving toward (zoom-in) or away from each other (zoom-out).\n * @constructor\n * @extends AttrRecognizer\n */\nfunction PinchRecognizer() {\n    AttrRecognizer.apply(this, arguments);\n}\n\ninherit(PinchRecognizer, AttrRecognizer, {\n    /**\n     * @namespace\n     * @memberof PinchRecognizer\n     */\n    defaults: {\n        event: 'pinch',\n        threshold: 0,\n        pointers: 2\n    },\n\n    getTouchAction: function() {\n        return [TOUCH_ACTION_NONE];\n    },\n\n    attrTest: function(input) {\n        return this._super.attrTest.call(this, input) &&\n            (Math.abs(input.scale - 1) > this.options.threshold || this.state & STATE_BEGAN);\n    },\n\n    emit: function(input) {\n        if (input.scale !== 1) {\n            var inOut = input.scale < 1 ? 'in' : 'out';\n            input.additionalEvent = this.options.event + inOut;\n        }\n        this._super.emit.call(this, input);\n    }\n});\n\n/**\n * Press\n * Recognized when the pointer is down for x ms without any movement.\n * @constructor\n * @extends Recognizer\n */\nfunction PressRecognizer() {\n    Recognizer.apply(this, arguments);\n\n    this._timer = null;\n    this._input = null;\n}\n\ninherit(PressRecognizer, Recognizer, {\n    /**\n     * @namespace\n     * @memberof PressRecognizer\n     */\n    defaults: {\n        event: 'press',\n        pointers: 1,\n        time: 251, // minimal time of the pointer to be pressed\n        threshold: 9 // a minimal movement is ok, but keep it low\n    },\n\n    getTouchAction: function() {\n        return [TOUCH_ACTION_AUTO];\n    },\n\n    process: function(input) {\n        var options = this.options;\n        var validPointers = input.pointers.length === options.pointers;\n        var validMovement = input.distance < options.threshold;\n        var validTime = input.deltaTime > options.time;\n\n        this._input = input;\n\n        // we only allow little movement\n        // and we've reached an end event, so a tap is possible\n        if (!validMovement || !validPointers || (input.eventType & (INPUT_END | INPUT_CANCEL) && !validTime)) {\n            this.reset();\n        } else if (input.eventType & INPUT_START) {\n            this.reset();\n            this._timer = setTimeoutContext(function() {\n                this.state = STATE_RECOGNIZED;\n                this.tryEmit();\n            }, options.time, this);\n        } else if (input.eventType & INPUT_END) {\n            return STATE_RECOGNIZED;\n        }\n        return STATE_FAILED;\n    },\n\n    reset: function() {\n        clearTimeout(this._timer);\n    },\n\n    emit: function(input) {\n        if (this.state !== STATE_RECOGNIZED) {\n            return;\n        }\n\n        if (input && (input.eventType & INPUT_END)) {\n            this.manager.emit(this.options.event + 'up', input);\n        } else {\n            this._input.timeStamp = now();\n            this.manager.emit(this.options.event, this._input);\n        }\n    }\n});\n\n/**\n * Rotate\n * Recognized when two or more pointer are moving in a circular motion.\n * @constructor\n * @extends AttrRecognizer\n */\nfunction RotateRecognizer() {\n    AttrRecognizer.apply(this, arguments);\n}\n\ninherit(RotateRecognizer, AttrRecognizer, {\n    /**\n     * @namespace\n     * @memberof RotateRecognizer\n     */\n    defaults: {\n        event: 'rotate',\n        threshold: 0,\n        pointers: 2\n    },\n\n    getTouchAction: function() {\n        return [TOUCH_ACTION_NONE];\n    },\n\n    attrTest: function(input) {\n        return this._super.attrTest.call(this, input) &&\n            (Math.abs(input.rotation) > this.options.threshold || this.state & STATE_BEGAN);\n    }\n});\n\n/**\n * Swipe\n * Recognized when the pointer is moving fast (velocity), with enough distance in the allowed direction.\n * @constructor\n * @extends AttrRecognizer\n */\nfunction SwipeRecognizer() {\n    AttrRecognizer.apply(this, arguments);\n}\n\ninherit(SwipeRecognizer, AttrRecognizer, {\n    /**\n     * @namespace\n     * @memberof SwipeRecognizer\n     */\n    defaults: {\n        event: 'swipe',\n        threshold: 10,\n        velocity: 0.3,\n        direction: DIRECTION_HORIZONTAL | DIRECTION_VERTICAL,\n        pointers: 1\n    },\n\n    getTouchAction: function() {\n        return PanRecognizer.prototype.getTouchAction.call(this);\n    },\n\n    attrTest: function(input) {\n        var direction = this.options.direction;\n        var velocity;\n\n        if (direction & (DIRECTION_HORIZONTAL | DIRECTION_VERTICAL)) {\n            velocity = input.overallVelocity;\n        } else if (direction & DIRECTION_HORIZONTAL) {\n            velocity = input.overallVelocityX;\n        } else if (direction & DIRECTION_VERTICAL) {\n            velocity = input.overallVelocityY;\n        }\n\n        return this._super.attrTest.call(this, input) &&\n            direction & input.offsetDirection &&\n            input.distance > this.options.threshold &&\n            input.maxPointers == this.options.pointers &&\n            abs(velocity) > this.options.velocity && input.eventType & INPUT_END;\n    },\n\n    emit: function(input) {\n        var direction = directionStr(input.offsetDirection);\n        if (direction) {\n            this.manager.emit(this.options.event + direction, input);\n        }\n\n        this.manager.emit(this.options.event, input);\n    }\n});\n\n/**\n * A tap is ecognized when the pointer is doing a small tap/click. Multiple taps are recognized if they occur\n * between the given interval and position. The delay option can be used to recognize multi-taps without firing\n * a single tap.\n *\n * The eventData from the emitted event contains the property `tapCount`, which contains the amount of\n * multi-taps being recognized.\n * @constructor\n * @extends Recognizer\n */\nfunction TapRecognizer() {\n    Recognizer.apply(this, arguments);\n\n    // previous time and center,\n    // used for tap counting\n    this.pTime = false;\n    this.pCenter = false;\n\n    this._timer = null;\n    this._input = null;\n    this.count = 0;\n}\n\ninherit(TapRecognizer, Recognizer, {\n    /**\n     * @namespace\n     * @memberof PinchRecognizer\n     */\n    defaults: {\n        event: 'tap',\n        pointers: 1,\n        taps: 1,\n        interval: 300, // max time between the multi-tap taps\n        time: 250, // max time of the pointer to be down (like finger on the screen)\n        threshold: 9, // a minimal movement is ok, but keep it low\n        posThreshold: 10 // a multi-tap can be a bit off the initial position\n    },\n\n    getTouchAction: function() {\n        return [TOUCH_ACTION_MANIPULATION];\n    },\n\n    process: function(input) {\n        var options = this.options;\n\n        var validPointers = input.pointers.length === options.pointers;\n        var validMovement = input.distance < options.threshold;\n        var validTouchTime = input.deltaTime < options.time;\n\n        this.reset();\n\n        if ((input.eventType & INPUT_START) && (this.count === 0)) {\n            return this.failTimeout();\n        }\n\n        // we only allow little movement\n        // and we've reached an end event, so a tap is possible\n        if (validMovement && validTouchTime && validPointers) {\n            if (input.eventType != INPUT_END) {\n                return this.failTimeout();\n            }\n\n            var validInterval = this.pTime ? (input.timeStamp - this.pTime < options.interval) : true;\n            var validMultiTap = !this.pCenter || getDistance(this.pCenter, input.center) < options.posThreshold;\n\n            this.pTime = input.timeStamp;\n            this.pCenter = input.center;\n\n            if (!validMultiTap || !validInterval) {\n                this.count = 1;\n            } else {\n                this.count += 1;\n            }\n\n            this._input = input;\n\n            // if tap count matches we have recognized it,\n            // else it has began recognizing...\n            var tapCount = this.count % options.taps;\n            if (tapCount === 0) {\n                // no failing requirements, immediately trigger the tap event\n                // or wait as long as the multitap interval to trigger\n                if (!this.hasRequireFailures()) {\n                    return STATE_RECOGNIZED;\n                } else {\n                    this._timer = setTimeoutContext(function() {\n                        this.state = STATE_RECOGNIZED;\n                        this.tryEmit();\n                    }, options.interval, this);\n                    return STATE_BEGAN;\n                }\n            }\n        }\n        return STATE_FAILED;\n    },\n\n    failTimeout: function() {\n        this._timer = setTimeoutContext(function() {\n            this.state = STATE_FAILED;\n        }, this.options.interval, this);\n        return STATE_FAILED;\n    },\n\n    reset: function() {\n        clearTimeout(this._timer);\n    },\n\n    emit: function() {\n        if (this.state == STATE_RECOGNIZED) {\n            this._input.tapCount = this.count;\n            this.manager.emit(this.options.event, this._input);\n        }\n    }\n});\n\n/**\n * Simple way to create a manager with a default set of recognizers.\n * @param {HTMLElement} element\n * @param {Object} [options]\n * @constructor\n */\nfunction Hammer(element, options) {\n    options = options || {};\n    options.recognizers = ifUndefined(options.recognizers, Hammer.defaults.preset);\n    return new Manager(element, options);\n}\n\n/**\n * @const {string}\n */\nHammer.VERSION = '2.0.7';\n\n/**\n * default settings\n * @namespace\n */\nHammer.defaults = {\n    /**\n     * set if DOM events are being triggered.\n     * But this is slower and unused by simple implementations, so disabled by default.\n     * @type {Boolean}\n     * @default false\n     */\n    domEvents: false,\n\n    /**\n     * The value for the touchAction property/fallback.\n     * When set to `compute` it will magically set the correct value based on the added recognizers.\n     * @type {String}\n     * @default compute\n     */\n    touchAction: TOUCH_ACTION_COMPUTE,\n\n    /**\n     * @type {Boolean}\n     * @default true\n     */\n    enable: true,\n\n    /**\n     * EXPERIMENTAL FEATURE -- can be removed/changed\n     * Change the parent input target element.\n     * If Null, then it is being set the to main element.\n     * @type {Null|EventTarget}\n     * @default null\n     */\n    inputTarget: null,\n\n    /**\n     * force an input class\n     * @type {Null|Function}\n     * @default null\n     */\n    inputClass: null,\n\n    /**\n     * Default recognizer setup when calling `Hammer()`\n     * When creating a new Manager these will be skipped.\n     * @type {Array}\n     */\n    preset: [\n        // RecognizerClass, options, [recognizeWith, ...], [requireFailure, ...]\n        [RotateRecognizer, {enable: false}],\n        [PinchRecognizer, {enable: false}, ['rotate']],\n        [SwipeRecognizer, {direction: DIRECTION_HORIZONTAL}],\n        [PanRecognizer, {direction: DIRECTION_HORIZONTAL}, ['swipe']],\n        [TapRecognizer],\n        [TapRecognizer, {event: 'doubletap', taps: 2}, ['tap']],\n        [PressRecognizer]\n    ],\n\n    /**\n     * Some CSS properties can be used to improve the working of Hammer.\n     * Add them to this method and they will be set when creating a new Manager.\n     * @namespace\n     */\n    cssProps: {\n        /**\n         * Disables text selection to improve the dragging gesture. Mainly for desktop browsers.\n         * @type {String}\n         * @default 'none'\n         */\n        userSelect: 'none',\n\n        /**\n         * Disable the Windows Phone grippers when pressing an element.\n         * @type {String}\n         * @default 'none'\n         */\n        touchSelect: 'none',\n\n        /**\n         * Disables the default callout shown when you touch and hold a touch target.\n         * On iOS, when you touch and hold a touch target such as a link, Safari displays\n         * a callout containing information about the link. This property allows you to disable that callout.\n         * @type {String}\n         * @default 'none'\n         */\n        touchCallout: 'none',\n\n        /**\n         * Specifies whether zooming is enabled. Used by IE10>\n         * @type {String}\n         * @default 'none'\n         */\n        contentZooming: 'none',\n\n        /**\n         * Specifies that an entire element should be draggable instead of its contents. Mainly for desktop browsers.\n         * @type {String}\n         * @default 'none'\n         */\n        userDrag: 'none',\n\n        /**\n         * Overrides the highlight color shown when the user taps a link or a JavaScript\n         * clickable element in iOS. This property obeys the alpha value, if specified.\n         * @type {String}\n         * @default 'rgba(0,0,0,0)'\n         */\n        tapHighlightColor: 'rgba(0,0,0,0)'\n    }\n};\n\nvar STOP = 1;\nvar FORCED_STOP = 2;\n\n/**\n * Manager\n * @param {HTMLElement} element\n * @param {Object} [options]\n * @constructor\n */\nfunction Manager(element, options) {\n    this.options = assign({}, Hammer.defaults, options || {});\n\n    this.options.inputTarget = this.options.inputTarget || element;\n\n    this.handlers = {};\n    this.session = {};\n    this.recognizers = [];\n    this.oldCssProps = {};\n\n    this.element = element;\n    this.input = createInputInstance(this);\n    this.touchAction = new TouchAction(this, this.options.touchAction);\n\n    toggleCssProps(this, true);\n\n    each(this.options.recognizers, function(item) {\n        var recognizer = this.add(new (item[0])(item[1]));\n        item[2] && recognizer.recognizeWith(item[2]);\n        item[3] && recognizer.requireFailure(item[3]);\n    }, this);\n}\n\nManager.prototype = {\n    /**\n     * set options\n     * @param {Object} options\n     * @returns {Manager}\n     */\n    set: function(options) {\n        assign(this.options, options);\n\n        // Options that need a little more setup\n        if (options.touchAction) {\n            this.touchAction.update();\n        }\n        if (options.inputTarget) {\n            // Clean up existing event listeners and reinitialize\n            this.input.destroy();\n            this.input.target = options.inputTarget;\n            this.input.init();\n        }\n        return this;\n    },\n\n    /**\n     * stop recognizing for this session.\n     * This session will be discarded, when a new [input]start event is fired.\n     * When forced, the recognizer cycle is stopped immediately.\n     * @param {Boolean} [force]\n     */\n    stop: function(force) {\n        this.session.stopped = force ? FORCED_STOP : STOP;\n    },\n\n    /**\n     * run the recognizers!\n     * called by the inputHandler function on every movement of the pointers (touches)\n     * it walks through all the recognizers and tries to detect the gesture that is being made\n     * @param {Object} inputData\n     */\n    recognize: function(inputData) {\n        var session = this.session;\n        if (session.stopped) {\n            return;\n        }\n\n        // run the touch-action polyfill\n        this.touchAction.preventDefaults(inputData);\n\n        var recognizer;\n        var recognizers = this.recognizers;\n\n        // this holds the recognizer that is being recognized.\n        // so the recognizer's state needs to be BEGAN, CHANGED, ENDED or RECOGNIZED\n        // if no recognizer is detecting a thing, it is set to `null`\n        var curRecognizer = session.curRecognizer;\n\n        // reset when the last recognizer is recognized\n        // or when we're in a new session\n        if (!curRecognizer || (curRecognizer && curRecognizer.state & STATE_RECOGNIZED)) {\n            curRecognizer = session.curRecognizer = null;\n        }\n\n        var i = 0;\n        while (i < recognizers.length) {\n            recognizer = recognizers[i];\n\n            // find out if we are allowed try to recognize the input for this one.\n            // 1.   allow if the session is NOT forced stopped (see the .stop() method)\n            // 2.   allow if we still haven't recognized a gesture in this session, or the this recognizer is the one\n            //      that is being recognized.\n            // 3.   allow if the recognizer is allowed to run simultaneous with the current recognized recognizer.\n            //      this can be setup with the `recognizeWith()` method on the recognizer.\n            if (session.stopped !== FORCED_STOP && ( // 1\n                    !curRecognizer || recognizer == curRecognizer || // 2\n                    recognizer.canRecognizeWith(curRecognizer))) { // 3\n                recognizer.recognize(inputData);\n            } else {\n                recognizer.reset();\n            }\n\n            // if the recognizer has been recognizing the input as a valid gesture, we want to store this one as the\n            // current active recognizer. but only if we don't already have an active recognizer\n            if (!curRecognizer && recognizer.state & (STATE_BEGAN | STATE_CHANGED | STATE_ENDED)) {\n                curRecognizer = session.curRecognizer = recognizer;\n            }\n            i++;\n        }\n    },\n\n    /**\n     * get a recognizer by its event name.\n     * @param {Recognizer|String} recognizer\n     * @returns {Recognizer|Null}\n     */\n    get: function(recognizer) {\n        if (recognizer instanceof Recognizer) {\n            return recognizer;\n        }\n\n        var recognizers = this.recognizers;\n        for (var i = 0; i < recognizers.length; i++) {\n            if (recognizers[i].options.event == recognizer) {\n                return recognizers[i];\n            }\n        }\n        return null;\n    },\n\n    /**\n     * add a recognizer to the manager\n     * existing recognizers with the same event name will be removed\n     * @param {Recognizer} recognizer\n     * @returns {Recognizer|Manager}\n     */\n    add: function(recognizer) {\n        if (invokeArrayArg(recognizer, 'add', this)) {\n            return this;\n        }\n\n        // remove existing\n        var existing = this.get(recognizer.options.event);\n        if (existing) {\n            this.remove(existing);\n        }\n\n        this.recognizers.push(recognizer);\n        recognizer.manager = this;\n\n        this.touchAction.update();\n        return recognizer;\n    },\n\n    /**\n     * remove a recognizer by name or instance\n     * @param {Recognizer|String} recognizer\n     * @returns {Manager}\n     */\n    remove: function(recognizer) {\n        if (invokeArrayArg(recognizer, 'remove', this)) {\n            return this;\n        }\n\n        recognizer = this.get(recognizer);\n\n        // let's make sure this recognizer exists\n        if (recognizer) {\n            var recognizers = this.recognizers;\n            var index = inArray(recognizers, recognizer);\n\n            if (index !== -1) {\n                recognizers.splice(index, 1);\n                this.touchAction.update();\n            }\n        }\n\n        return this;\n    },\n\n    /**\n     * bind event\n     * @param {String} events\n     * @param {Function} handler\n     * @returns {EventEmitter} this\n     */\n    on: function(events, handler) {\n        if (events === undefined) {\n            return;\n        }\n        if (handler === undefined) {\n            return;\n        }\n\n        var handlers = this.handlers;\n        each(splitStr(events), function(event) {\n            handlers[event] = handlers[event] || [];\n            handlers[event].push(handler);\n        });\n        return this;\n    },\n\n    /**\n     * unbind event, leave emit blank to remove all handlers\n     * @param {String} events\n     * @param {Function} [handler]\n     * @returns {EventEmitter} this\n     */\n    off: function(events, handler) {\n        if (events === undefined) {\n            return;\n        }\n\n        var handlers = this.handlers;\n        each(splitStr(events), function(event) {\n            if (!handler) {\n                delete handlers[event];\n            } else {\n                handlers[event] && handlers[event].splice(inArray(handlers[event], handler), 1);\n            }\n        });\n        return this;\n    },\n\n    /**\n     * emit event to the listeners\n     * @param {String} event\n     * @param {Object} data\n     */\n    emit: function(event, data) {\n        // we also want to trigger dom events\n        if (this.options.domEvents) {\n            triggerDomEvent(event, data);\n        }\n\n        // no handlers, so skip it all\n        var handlers = this.handlers[event] && this.handlers[event].slice();\n        if (!handlers || !handlers.length) {\n            return;\n        }\n\n        data.type = event;\n        data.preventDefault = function() {\n            data.srcEvent.preventDefault();\n        };\n\n        var i = 0;\n        while (i < handlers.length) {\n            handlers[i](data);\n            i++;\n        }\n    },\n\n    /**\n     * destroy the manager and unbinds all events\n     * it doesn't unbind dom events, that is the user own responsibility\n     */\n    destroy: function() {\n        this.element && toggleCssProps(this, false);\n\n        this.handlers = {};\n        this.session = {};\n        this.input.destroy();\n        this.element = null;\n    }\n};\n\n/**\n * add/remove the css properties as defined in manager.options.cssProps\n * @param {Manager} manager\n * @param {Boolean} add\n */\nfunction toggleCssProps(manager, add) {\n    var element = manager.element;\n    if (!element.style) {\n        return;\n    }\n    var prop;\n    each(manager.options.cssProps, function(value, name) {\n        prop = prefixed(element.style, name);\n        if (add) {\n            manager.oldCssProps[prop] = element.style[prop];\n            element.style[prop] = value;\n        } else {\n            element.style[prop] = manager.oldCssProps[prop] || '';\n        }\n    });\n    if (!add) {\n        manager.oldCssProps = {};\n    }\n}\n\n/**\n * trigger dom event\n * @param {String} event\n * @param {Object} data\n */\nfunction triggerDomEvent(event, data) {\n    var gestureEvent = document.createEvent('Event');\n    gestureEvent.initEvent(event, true, true);\n    gestureEvent.gesture = data;\n    data.target.dispatchEvent(gestureEvent);\n}\n\nassign(Hammer, {\n    INPUT_START: INPUT_START,\n    INPUT_MOVE: INPUT_MOVE,\n    INPUT_END: INPUT_END,\n    INPUT_CANCEL: INPUT_CANCEL,\n\n    STATE_POSSIBLE: STATE_POSSIBLE,\n    STATE_BEGAN: STATE_BEGAN,\n    STATE_CHANGED: STATE_CHANGED,\n    STATE_ENDED: STATE_ENDED,\n    STATE_RECOGNIZED: STATE_RECOGNIZED,\n    STATE_CANCELLED: STATE_CANCELLED,\n    STATE_FAILED: STATE_FAILED,\n\n    DIRECTION_NONE: DIRECTION_NONE,\n    DIRECTION_LEFT: DIRECTION_LEFT,\n    DIRECTION_RIGHT: DIRECTION_RIGHT,\n    DIRECTION_UP: DIRECTION_UP,\n    DIRECTION_DOWN: DIRECTION_DOWN,\n    DIRECTION_HORIZONTAL: DIRECTION_HORIZONTAL,\n    DIRECTION_VERTICAL: DIRECTION_VERTICAL,\n    DIRECTION_ALL: DIRECTION_ALL,\n\n    Manager: Manager,\n    Input: Input,\n    TouchAction: TouchAction,\n\n    TouchInput: TouchInput,\n    MouseInput: MouseInput,\n    PointerEventInput: PointerEventInput,\n    TouchMouseInput: TouchMouseInput,\n    SingleTouchInput: SingleTouchInput,\n\n    Recognizer: Recognizer,\n    AttrRecognizer: AttrRecognizer,\n    Tap: TapRecognizer,\n    Pan: PanRecognizer,\n    Swipe: SwipeRecognizer,\n    Pinch: PinchRecognizer,\n    Rotate: RotateRecognizer,\n    Press: PressRecognizer,\n\n    on: addEventListeners,\n    off: removeEventListeners,\n    each: each,\n    merge: merge,\n    extend: extend,\n    assign: assign,\n    inherit: inherit,\n    bindFn: bindFn,\n    prefixed: prefixed\n});\n\n// this prevents errors when Hammer is loaded in the presence of an AMD\n//  style loader but by script tag, not by the loader.\nvar freeGlobal = (typeof window !== 'undefined' ? window : (typeof self !== 'undefined' ? self : {})); // jshint ignore:line\nfreeGlobal.Hammer = Hammer;\n\nif (typeof define === 'function' && define.amd) {\n    define(function() {\n        return Hammer;\n    });\n} else if (typeof module != 'undefined' && module.exports) {\n    module.exports = Hammer;\n} else {\n    window[exportName] = Hammer;\n}\n\n})(window, document, 'Hammer');\n\n},{}],5:[function(_dereq_,module,exports){\n/**\n * MicroEvent - to make any js object an event emitter (server or browser)\n * \n * - pure javascript - server compatible, browser compatible\n * - dont rely on the browser doms\n * - super simple - you get it immediatly, no mistery, no magic involved\n *\n * - create a MicroEventDebug with goodies to debug\n *   - make it safer to use\n*/\n\nvar MicroEvent\t= function(){}\nMicroEvent.prototype\t= {\n\tbind\t: function(event, fct){\n\t\tthis._events = this._events || {};\n\t\tthis._events[event] = this._events[event]\t|| [];\n\t\tthis._events[event].push(fct);\n\t},\n\tunbind\t: function(event, fct){\n\t\tthis._events = this._events || {};\n\t\tif( event in this._events === false  )\treturn;\n\t\tthis._events[event].splice(this._events[event].indexOf(fct), 1);\n\t},\n\ttrigger\t: function(event /* , args... */){\n\t\tthis._events = this._events || {};\n\t\tif( event in this._events === false  )\treturn;\n\t\tfor(var i = 0; i < this._events[event].length; i++){\n\t\t\tthis._events[event][i].apply(this, Array.prototype.slice.call(arguments, 1))\n\t\t}\n\t}\n};\n\n/**\n * mixin will delegate all MicroEvent.js function in the destination object\n *\n * - require('MicroEvent').mixin(Foobar) will make Foobar able to use MicroEvent\n *\n * @param {Object} the object which will support MicroEvent\n*/\nMicroEvent.mixin\t= function(destObject){\n\tvar props\t= ['bind', 'unbind', 'trigger'];\n\tfor(var i = 0; i < props.length; i ++){\n\t\tdestObject.prototype[props[i]]\t= MicroEvent.prototype[props[i]];\n\t}\n}\n\n// export in common js\nif( typeof module !== \"undefined\" && ('exports' in module)){\n\tmodule.exports\t= MicroEvent\n}\n\n},{}]},{},[3])(3)\n});\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJsaWIvY29mZmVlc2NyaXB0L2FuaW1hdGlvbi5jb2ZmZWUiLCJsaWIvY29mZmVlc2NyaXB0L3BhZ2Vfc3ByZWFkLmNvZmZlZSIsImxpYi9jb2ZmZWVzY3JpcHQvdmVyc28uY29mZmVlIiwibm9kZV9tb2R1bGVzL2hhbW1lcmpzL2hhbW1lci5qcyIsIm5vZGVfbW9kdWxlcy9taWNyb2V2ZW50L21pY3JvZXZlbnQuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7Ozs7QUNBQSxJQUFBOztBQUFBLEFBQU0sT0FBTixBQUFPO0FBQ0gsQUFBYSxxQkFBQTs7O0FBQUMsQUFBQyxTQUFBO0FBQ1gsQUFBQyxTQUFELEFBQUMsTUFBTSxBQUVQO0FBSFM7QUFLYixBQUFTOztBQU5JLEFBQU07OztBQU9mOztVQURNLDhFQUFELEFBQVc7VUFBSSwrRUFBVyxZQUFBLENBQTFCOztVQUNMLFVBQUEsUUFBQSxLQUFBLE1BQUEsTUFBQSxNQUFBLE1BQUEsS0FBQSxPQUFBLFdBQUEsZ0JBQUEsR0FBQTtBQUFBLDRDQUFnQjtBQUNoQiw4Q0FBZ0I7QUFDaEIsc0RBQXdCO0FBQ3hCLHdEQUEwQjtBQUMxQiw0REFBOEI7QUFDOUIsWUFBTSxFQUFFLEFBQUMsS0FBQTtBQUNULEFBQVksbUNBQUEsQUFBZSxBQUFFLFdBQWpCLEFBQXFCLEFBQUUsd0JBQXZCLEFBQXdDLEFBQU0sZUFBOUMsQUFBa0QsQUFBTTtBQUVwRSxVQUFHLEFBQUMsS0FBQSxBQUFFLEdBQUMsQUFBSyxNQUFULEFBQVUsY0FBYixBQUEwQjtBQUExQixBQUNJO0FBREosaUJBRVEsV0FBSCxBQUFjO0FBQ2YseUJBQWdCO0FBQ1osY0FBVSxRQUFTLEFBQUMsTUFBcEIsQUFBb0IsS0FBcEI7QUFBQTs7QUFFQSxBQUFDLGdCQUFBLEFBQUUsR0FBSCxBQUFJLG9CQUFKLEFBQXdCLGlCQUF4QixBQUF5QztBQUN6QyxBQUFDLGdCQUFBLEFB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Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDbmxGQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pIiwibW9kdWxlLmV4cG9ydHMgPSBjbGFzcyBBbmltYXRpb25cbiAgICBjb25zdHJ1Y3RvcjogKEBlbCkgLT5cbiAgICAgICAgQHJ1biA9IDBcblxuICAgICAgICByZXR1cm5cblxuICAgIGFuaW1hdGU6IChvcHRpb25zID0ge30sIGNhbGxiYWNrID0gLT4pIC0+XG4gICAgICAgIHggPSBvcHRpb25zLnggPyAwXG4gICAgICAgIHkgPSBvcHRpb25zLnkgPyAwXG4gICAgICAgIHNjYWxlID0gb3B0aW9ucy5zY2FsZSA/IDFcbiAgICAgICAgZWFzaW5nID0gb3B0aW9ucy5lYXNpbmcgPyAnZWFzZS1vdXQnXG4gICAgICAgIGR1cmF0aW9uID0gb3B0aW9ucy5kdXJhdGlvbiA/IDBcbiAgICAgICAgcnVuID0gKytAcnVuXG4gICAgICAgIHRyYW5zZm9ybSA9IFwidHJhbnNsYXRlM2QoI3t4fSwgI3t5fSwgMHB4KSBzY2FsZTNkKCN7c2NhbGV9LCAje3NjYWxlfSwgMSlcIlxuXG4gICAgICAgIGlmIEBlbC5zdHlsZS50cmFuc2Zvcm0gaXMgdHJhbnNmb3JtXG4gICAgICAgICAgICBjYWxsYmFjaygpXG4gICAgICAgIGVsc2UgaWYgZHVyYXRpb24gPiAwXG4gICAgICAgICAgICB0cmFuc2l0aW9uRW5kID0gPT5cbiAgICAgICAgICAgICAgICByZXR1cm4gaWYgcnVuIGlzbnQgQHJ1blxuXG4gICAgICAgICAgICAgICAgQGVsLnJlbW92ZUV2ZW50TGlzdGVuZXIgJ3RyYW5zaXRpb25lbmQnLCB0cmFuc2l0aW9uRW5kXG4gICAgICAgICAgICAgICAgQGVsLnN0eWxlLnRyYW5zaXRpb24gPSAnbm9uZSdcblxuICAgICAgICAgICAgICAgIGNhbGxiYWNrKClcblxuICAgICAgICAgICAgICAgIHJldHVyblxuXG4gICAgICAgICAgICBAZWwuYWRkRXZlbnRMaXN0ZW5lciAndHJhbnNpdGlvbmVuZCcsIHRyYW5zaXRpb25FbmQsIGZhbHNlXG5cbiAgICAgICAgICAgIEBlbC5zdHlsZS50cmFuc2l0aW9uID0gXCJ0cmFuc2Zvcm0gI3tlYXNpbmd9ICN7ZHVyYXRpb259bXNcIlxuICAgICAgICAgICAgQGVsLnN0eWxlLnRyYW5zZm9ybSA9IHRyYW5zZm9ybVxuICAgICAgICBlbHNlXG4gICAgICAgICAgICBAZWwuc3R5bGUudHJhbnNpdGlvbiA9ICdub25lJ1xuICAgICAgICAgICAgQGVsLnN0eWxlLnRyYW5zZm9ybSA9IHRyYW5zZm9ybVxuXG4gICAgICAgICAgICBjYWxsYmFjaygpXG5cbiAgICAgICAgQFxuIiwibW9kdWxlLmV4cG9ydHMgPSBjbGFzcyBQYWdlU3ByZWFkXG4gICAgY29uc3RydWN0b3I6IChAZWwsIEBvcHRpb25zID0ge30pIC0+XG4gICAgICAgIEB2aXNpYmlsaXR5ID0gJ2dvbmUnXG4gICAgICAgIEBwb3NpdGlvbmVkID0gZmFsc2VcbiAgICAgICAgQGFjdGl2ZSA9IGZhbHNlXG4gICAgICAgIEBpZCA9IEBvcHRpb25zLmlkXG4gICAgICAgIEB0eXBlID0gQG9wdGlvbnMudHlwZVxuICAgICAgICBAcGFnZUlkcyA9IEBvcHRpb25zLnBhZ2VJZHNcbiAgICAgICAgQHdpZHRoID0gQG9wdGlvbnMud2lkdGhcbiAgICAgICAgQGxlZnQgPSBAb3B0aW9ucy5sZWZ0XG4gICAgICAgIEBtYXhab29tU2NhbGUgPSBAb3B0aW9ucy5tYXhab29tU2NhbGVcblxuICAgICAgICByZXR1cm5cblxuICAgIGlzWm9vbWFibGU6IC0+XG4gICAgICAgIEBnZXRNYXhab29tU2NhbGUoKSA+IDEgYW5kIEBnZXRFbCgpLmdldEF0dHJpYnV0ZSgnZGF0YS16b29tYWJsZScpIGlzbnQgJ2ZhbHNlJ1xuXG4gICAgaXNTY3JvbGxhYmxlOiAtPlxuICAgICAgICBAZ2V0RWwoKS5jbGFzc0xpc3QuY29udGFpbnMgJ3ZlcnNvLS1zY3JvbGxhYmxlJ1xuXG4gICAgZ2V0RWw6IC0+XG4gICAgICAgIEBlbFxuXG4gICAgZ2V0T3ZlcmxheUVsczogLT5cbiAgICAgICAgQGdldEVsKCkucXVlcnlTZWxlY3RvckFsbCAnLnZlcnNvX19vdmVybGF5J1xuXG4gICAgZ2V0UGFnZUVsczogLT5cbiAgICAgICAgQGdldEVsKCkucXVlcnlTZWxlY3RvckFsbCAnLnZlcnNvX19wYWdlJ1xuXG4gICAgZ2V0UmVjdDogLT5cbiAgICAgICAgQGdldEVsKCkuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KClcblxuICAgIGdldENvbnRlbnRSZWN0OiAtPlxuICAgICAgICByZWN0ID1cbiAgICAgICAgICAgIHRvcDogbnVsbFxuICAgICAgICAgICAgbGVmdDogbnVsbFxuICAgICAgICAgICAgcmlnaHQ6IG51bGxcbiAgICAgICAgICAgIGJvdHRvbTogbnVsbFxuICAgICAgICAgICAgd2lkdGg6IG51bGxcbiAgICAgICAgICAgIGhlaWdodDogbnVsbFxuXG4gICAgICAgIGZvciBwYWdlRWwgaW4gQGdldFBhZ2VFbHMoKVxuICAgICAgICAgICAgYm91bmRpbmdDbGllbnRSZWN0ID0gcGFnZUVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpXG4gICAgICAgICAgICBvZmZzZXRUb3AgPSBwYWdlRWwub2Zmc2V0VG9wXG4gICAgICAgICAgICBvZmZzZXRMZWZ0ID0gcGFnZUVsLm9mZnNldExlZnRcbiAgICAgICAgICAgIG9mZnNldFRvcERlbHRhID0gb2Zmc2V0VG9wIC0gYm91bmRpbmdDbGllbnRSZWN0LnRvcFxuICAgICAgICAgICAgb2Zmc2V0TGVmdERlbHRhID0gb2Zmc2V0TGVmdCAtIGJvdW5kaW5nQ2xpZW50UmVjdC5sZWZ0XG4gICAgICAgICAgICBwYWdlUmVjdCA9XG4gICAgICAgICAgICAgICAgdG9wOiBib3VuZGluZ0NsaWVudFJlY3QudG9wICsgb2Zmc2V0VG9wRGVsdGFcbiAgICAgICAgICAgICAgICBsZWZ0OiBib3VuZGluZ0NsaWVudFJlY3QubGVmdCArIG9mZnNldExlZnREZWx0YVxuICAgICAgICAgICAgICAgIHJpZ2h0OiBib3VuZGluZ0NsaWVudFJlY3QucmlnaHQgKyBvZmZzZXRMZWZ0RGVsdGFcbiAgICAgICAgICAgICAgICBib3R0b206IGJvdW5kaW5nQ2xpZW50UmVjdC5ib3R0b20gKyBvZmZzZXRUb3BEZWx0YVxuICAgICAgICAgICAgICAgIHdpZHRoOiBib3VuZGluZ0NsaWVudFJlY3Qud2lkdGhcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IGJvdW5kaW5nQ2xpZW50UmVjdC5oZWlnaHRcblxuICAgICAgICAgICAgcmVjdC50b3AgPSBwYWdlUmVjdC50b3AgaWYgcGFnZVJlY3QudG9wIDwgcmVjdC50b3Agb3Igbm90IHJlY3QudG9wP1xuICAgICAgICAgICAgcmVjdC5sZWZ0ID0gcGFnZVJlY3QubGVmdCBpZiBwYWdlUmVjdC5sZWZ0IDwgcmVjdC5sZWZ0IG9yIG5vdCByZWN0LmxlZnQ/XG4gICAgICAgICAgICByZWN0LnJpZ2h0ID0gcGFnZVJlY3QucmlnaHQgaWYgcGFnZVJlY3QucmlnaHQgPiByZWN0LnJpZ2h0IG9yIG5vdCByZWN0LnJpZ2h0P1xuICAgICAgICAgICAgcmVjdC5ib3R0b20gPSBwYWdlUmVjdC5ib3R0b20gaWYgcGFnZVJlY3QuYm90dG9tID4gcmVjdC5ib3R0b20gb3Igbm90IHJlY3QuYm90dG9tP1xuXG4gICAgICAgIHJlY3QudG9wID0gcmVjdC50b3AgPyAwXG4gICAgICAgIHJlY3QubGVmdCA9IHJlY3QubGVmdCA/IDBcbiAgICAgICAgcmVjdC5yaWdodCA9IHJlY3QucmlnaHQgPyAwXG4gICAgICAgIHJlY3QuYm90dG9tID0gcmVjdC5ib3R0b20gPyAwXG4gICAgICAgIHJlY3Qud2lkdGggPSByZWN0LnJpZ2h0IC0gcmVjdC5sZWZ0XG4gICAgICAgIHJlY3QuaGVpZ2h0ID0gcmVjdC5ib3R0b20gLSByZWN0LnRvcFxuXG4gICAgICAgIHJlY3RcblxuICAgIGdldElkOiAtPlxuICAgICAgICBAaWRcblxuICAgIGdldFR5cGU6IC0+XG4gICAgICAgIEB0eXBlXG5cbiAgICBnZXRQYWdlSWRzOiAtPlxuICAgICAgICBAcGFnZUlkc1xuXG4gICAgZ2V0V2lkdGg6IC0+XG4gICAgICAgIEB3aWR0aFxuXG4gICAgZ2V0TGVmdDogLT5cbiAgICAgICAgQGxlZnRcblxuICAgIGdldE1heFpvb21TY2FsZTogLT5cbiAgICAgICAgQG1heFpvb21TY2FsZVxuXG4gICAgZ2V0VmlzaWJpbGl0eTogLT5cbiAgICAgICAgQHZpc2liaWxpdHlcblxuICAgIHNldFZpc2liaWxpdHk6ICh2aXNpYmlsaXR5KSAtPlxuICAgICAgICBpZiBAdmlzaWJpbGl0eSBpc250IHZpc2liaWxpdHlcbiAgICAgICAgICAgIEBnZXRFbCgpLnN0eWxlLmRpc3BsYXkgPSBpZiB2aXNpYmlsaXR5IGlzICd2aXNpYmxlJyB0aGVuICdibG9jaycgZWxzZSAnbm9uZSdcblxuICAgICAgICAgICAgQHZpc2liaWxpdHkgPSB2aXNpYmlsaXR5XG5cbiAgICAgICAgQFxuXG4gICAgcG9zaXRpb246IC0+XG4gICAgICAgIGlmIEBwb3NpdGlvbmVkIGlzIGZhbHNlXG4gICAgICAgICAgICBAZ2V0RWwoKS5zdHlsZS5sZWZ0ID0gXCIje0BnZXRMZWZ0KCl9JVwiXG5cbiAgICAgICAgICAgIEBwb3NpdGlvbmVkID0gdHJ1ZVxuXG4gICAgICAgIEBcblxuICAgIGFjdGl2YXRlOiAtPlxuICAgICAgICBAYWN0aXZlID0gdHJ1ZVxuICAgICAgICBAZ2V0RWwoKS5zZXRBdHRyaWJ1dGUgJ2RhdGEtYWN0aXZlJywgQGFjdGl2ZVxuXG4gICAgICAgIHJldHVyblxuXG4gICAgZGVhY3RpdmF0ZTogLT5cbiAgICAgICAgQGFjdGl2ZSA9IGZhbHNlXG4gICAgICAgIEBnZXRFbCgpLnNldEF0dHJpYnV0ZSAnZGF0YS1hY3RpdmUnLCBAYWN0aXZlXG5cbiAgICAgICAgcmV0dXJuXG4iLCJIYW1tZXIgPSByZXF1aXJlICdoYW1tZXJqcydcbk1pY3JvRXZlbnQgPSByZXF1aXJlICdtaWNyb2V2ZW50J1xuUGFnZVNwcmVhZCA9IHJlcXVpcmUgJy4vcGFnZV9zcHJlYWQnXG5BbmltYXRpb24gPSByZXF1aXJlICcuL2FuaW1hdGlvbidcblxuY2xhc3MgVmVyc29cbiAgICBjb25zdHJ1Y3RvcjogKEBlbCwgQG9wdGlvbnMgPSB7fSkgLT5cbiAgICAgICAgQHN3aXBlVmVsb2NpdHkgPSBAb3B0aW9ucy5zd2lwZVZlbG9jaXR5ID8gMC4zXG4gICAgICAgIEBzd2lwZVRocmVzaG9sZCA9IEBvcHRpb25zLnN3aXBlVGhyZXNob2xkID8gMTBcbiAgICAgICAgQG5hdmlnYXRpb25EdXJhdGlvbiA9IEBvcHRpb25zLm5hdmlnYXRpb25EdXJhdGlvbiA/IDI0MFxuICAgICAgICBAbmF2aWdhdGlvblBhbkR1cmF0aW9uID0gQG9wdGlvbnMubmF2aWdhdGlvblBhbkR1cmF0aW9uID8gMjAwXG4gICAgICAgIEB6b29tRHVyYXRpb24gPSBAb3B0aW9ucy56b29tRHVyYXRpb24gPyAyMDBcbiAgICAgICAgQGRvdWJsZVRhcERlbGF5ID0gQG9wdGlvbnMuZG91YmxlVGFwRGVsYXkgPyAyNTBcblxuICAgICAgICBAcG9zaXRpb24gPSAtMVxuICAgICAgICBAcGluY2hpbmcgPSBmYWxzZVxuICAgICAgICBAcGFubmluZyA9IGZhbHNlXG4gICAgICAgIEB0cmFuc2Zvcm0gPSBsZWZ0OiAwLCB0b3A6IDAsIHNjYWxlOiAxXG4gICAgICAgIEBzdGFydFRyYW5zZm9ybSA9IGxlZnQ6IDAsIHRvcDogMCwgc2NhbGU6IDFcbiAgICAgICAgQHRhcCA9XG4gICAgICAgICAgICBjb3VudDogMFxuICAgICAgICAgICAgZGVsYXk6IEBkb3VibGVUYXBEZWxheVxuXG4gICAgICAgIEBzY3JvbGxlckVsID0gQGVsLnF1ZXJ5U2VsZWN0b3IgJy52ZXJzb19fc2Nyb2xsZXInXG4gICAgICAgIEBwYWdlU3ByZWFkRWxzID0gQGVsLnF1ZXJ5U2VsZWN0b3JBbGwgJy52ZXJzb19fcGFnZS1zcHJlYWQnXG4gICAgICAgIEBwYWdlU3ByZWFkcyA9IEB0cmF2ZXJzZVBhZ2VTcHJlYWRzIEBwYWdlU3ByZWFkRWxzXG4gICAgICAgIEBwYWdlSWRzID0gQGJ1aWxkUGFnZUlkcyBAcGFnZVNwcmVhZHNcbiAgICAgICAgQGFuaW1hdGlvbiA9IG5ldyBBbmltYXRpb24gQHNjcm9sbGVyRWxcbiAgICAgICAgQGhhbW1lciA9IG5ldyBIYW1tZXIuTWFuYWdlciBAc2Nyb2xsZXJFbCxcbiAgICAgICAgICAgIHRvdWNoQWN0aW9uOiAnbm9uZSdcbiAgICAgICAgICAgIGVuYWJsZTogZmFsc2VcbiAgICAgICAgICAgIGlucHV0Q2xhc3M6IEBnZXRIYW1tZXJJbnB1dENsYXNzKClcblxuICAgICAgICBAaGFtbWVyLmFkZCBuZXcgSGFtbWVyLlBhbiB0aHJlc2hvbGQ6IDUsIGRpcmVjdGlvbjogSGFtbWVyLkRJUkVDVElPTl9BTExcbiAgICAgICAgQGhhbW1lci5hZGQgbmV3IEhhbW1lci5UYXAgZXZlbnQ6ICdzaW5nbGV0YXAnLCBpbnRlcnZhbDogMFxuICAgICAgICBAaGFtbWVyLmFkZCBuZXcgSGFtbWVyLlBpbmNoKClcbiAgICAgICAgQGhhbW1lci5hZGQgbmV3IEhhbW1lci5QcmVzcyB0aW1lOiA1MDBcbiAgICAgICAgQGhhbW1lci5vbiAncGFuc3RhcnQnLCBAb25QYW5TdGFydC5iaW5kIEBcbiAgICAgICAgQGhhbW1lci5vbiAncGFubW92ZScsIEBvblBhbk1vdmUuYmluZCBAXG4gICAgICAgIEBoYW1tZXIub24gJ3BhbmVuZCcsIEBvblBhbkVuZC5iaW5kIEBcbiAgICAgICAgQGhhbW1lci5vbiAncGFuY2FuY2VsJywgQG9uUGFuRW5kLmJpbmQgQFxuICAgICAgICBAaGFtbWVyLm9uICdzaW5nbGV0YXAnLCBAb25TaW5nbGV0YXAuYmluZCBAXG4gICAgICAgIEBoYW1tZXIub24gJ3BpbmNoc3RhcnQnLCBAb25QaW5jaFN0YXJ0LmJpbmQgQFxuICAgICAgICBAaGFtbWVyLm9uICdwaW5jaG1vdmUnLCBAb25QaW5jaE1vdmUuYmluZCBAXG4gICAgICAgIEBoYW1tZXIub24gJ3BpbmNoZW5kJywgQG9uUGluY2hFbmQuYmluZCBAXG4gICAgICAgIEBoYW1tZXIub24gJ3BpbmNoY2FuY2VsJywgQG9uUGluY2hFbmQuYmluZCBAXG4gICAgICAgIEBoYW1tZXIub24gJ3ByZXNzJywgQG9uUHJlc3MuYmluZCBAXG5cbiAgICAgICAgQHNjcm9sbGVyRWwuYWRkRXZlbnRMaXN0ZW5lciAnY29udGV4dG1lbnUnLCBAb25Db250ZXh0bWVudS5iaW5kIEBcblxuICAgICAgICByZXR1cm5cblxuICAgIHN0YXJ0OiAtPlxuICAgICAgICBwYWdlSWQgPSBAZ2V0UGFnZVNwcmVhZFBvc2l0aW9uRnJvbVBhZ2VJZChAb3B0aW9ucy5wYWdlSWQpID8gMFxuXG4gICAgICAgIEBoYW1tZXIuc2V0IGVuYWJsZTogdHJ1ZVxuICAgICAgICBAbmF2aWdhdGVUbyBwYWdlSWQsIGR1cmF0aW9uOiAwXG5cbiAgICAgICAgQHJlc2l6ZUxpc3RlbmVyID0gQG9uUmVzaXplLmJpbmQgQFxuICAgICAgICBAdG91Y2hTdGFydExpc3RlbmVyID0gQG9uVG91Y2hTdGFydC5iaW5kIEBcbiAgICAgICAgQHRvdWNoRW5kTGlzdGVuZXIgPSBAb25Ub3VjaEVuZC5iaW5kIEBcblxuICAgICAgICBAZWwuYWRkRXZlbnRMaXN0ZW5lciAndG91Y2hzdGFydCcsIEB0b3VjaFN0YXJ0TGlzdGVuZXIsIGZhbHNlXG4gICAgICAgIEBlbC5hZGRFdmVudExpc3RlbmVyICd0b3VjaGVuZCcsIEB0b3VjaEVuZExpc3RlbmVyLCBmYWxzZVxuXG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyICdyZXNpemUnLCBAcmVzaXplTGlzdGVuZXIsIGZhbHNlXG5cbiAgICAgICAgQFxuXG4gICAgZGVzdHJveTogLT5cbiAgICAgICAgQGhhbW1lci5kZXN0cm95KClcblxuICAgICAgICBAZWwucmVtb3ZlRXZlbnRMaXN0ZW5lciAndG91Y2hzdGFydCcsIEB0b3VjaFN0YXJ0TGlzdGVuZXJcbiAgICAgICAgQGVsLnJlbW92ZUV2ZW50TGlzdGVuZXIgJ3RvdWNoZW5kJywgQHRvdWNoRW5kTGlzdGVuZXJcblxuICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lciAncmVzaXplJywgQHJlc2l6ZUxpc3RlbmVyXG5cbiAgICAgICAgQFxuXG4gICAgZmlyc3Q6IChvcHRpb25zKSAtPlxuICAgICAgICBAbmF2aWdhdGVUbyAwLCBvcHRpb25zXG5cbiAgICBwcmV2OiAob3B0aW9ucykgLT5cbiAgICAgICAgQG5hdmlnYXRlVG8gQGdldFBvc2l0aW9uKCkgLSAxLCBvcHRpb25zXG5cbiAgICBuZXh0OiAob3B0aW9ucykgLT5cbiAgICAgICAgQG5hdmlnYXRlVG8gQGdldFBvc2l0aW9uKCkgKyAxLCBvcHRpb25zXG5cbiAgICBsYXN0OiAob3B0aW9ucykgLT5cbiAgICAgICAgQG5hdmlnYXRlVG8gQGdldFBhZ2VTcHJlYWRDb3VudCgpIC0gMSwgb3B0aW9uc1xuXG4gICAgbmF2aWdhdGVUbzogKHBvc2l0aW9uLCBvcHRpb25zID0ge30pIC0+XG4gICAgICAgIHJldHVybiBpZiBwb3NpdGlvbiA8IDAgb3IgcG9zaXRpb24gPiBAZ2V0UGFnZVNwcmVhZENvdW50KCkgLSAxXG5cbiAgICAgICAgY3VycmVudFBvc2l0aW9uID0gQGdldFBvc2l0aW9uKClcbiAgICAgICAgY3VycmVudFBhZ2VTcHJlYWQgPSBAZ2V0UGFnZVNwcmVhZEZyb21Qb3NpdGlvbiBjdXJyZW50UG9zaXRpb25cbiAgICAgICAgYWN0aXZlUGFnZVNwcmVhZCA9IEBnZXRQYWdlU3ByZWFkRnJvbVBvc2l0aW9uIHBvc2l0aW9uXG4gICAgICAgIGNhcm91c2VsID0gQGdldENhcm91c2VsRnJvbVBhZ2VTcHJlYWQgYWN0aXZlUGFnZVNwcmVhZFxuICAgICAgICB2ZWxvY2l0eSA9IG9wdGlvbnMudmVsb2NpdHkgPyAxXG4gICAgICAgIGR1cmF0aW9uID0gb3B0aW9ucy5kdXJhdGlvbiA/IEBuYXZpZ2F0aW9uRHVyYXRpb25cbiAgICAgICAgZHVyYXRpb24gPSBkdXJhdGlvbiAvIE1hdGguYWJzKHZlbG9jaXR5KVxuICAgICAgICB0b3VjaEFjdGlvbiA9IGlmIGFjdGl2ZVBhZ2VTcHJlYWQuaXNTY3JvbGxhYmxlKCkgdGhlbiAncGFuLXknIGVsc2UgJ25vbmUnXG5cbiAgICAgICAgY3VycmVudFBhZ2VTcHJlYWQuZGVhY3RpdmF0ZSgpIGlmIGN1cnJlbnRQYWdlU3ByZWFkP1xuICAgICAgICBhY3RpdmVQYWdlU3ByZWFkLmFjdGl2YXRlKClcblxuICAgICAgICBjYXJvdXNlbC52aXNpYmxlLmZvckVhY2ggKHBhZ2VTcHJlYWQpIC0+IHBhZ2VTcHJlYWQucG9zaXRpb24oKS5zZXRWaXNpYmlsaXR5ICd2aXNpYmxlJ1xuXG4gICAgICAgIEBoYW1tZXIuc2V0IHRvdWNoQWN0aW9uOiB0b3VjaEFjdGlvblxuXG4gICAgICAgIEB0cmFuc2Zvcm0ubGVmdCA9IEBnZXRMZWZ0VHJhbnNmb3JtRnJvbVBhZ2VTcHJlYWQgcG9zaXRpb24sIGFjdGl2ZVBhZ2VTcHJlYWRcbiAgICAgICAgQHNldFBvc2l0aW9uIHBvc2l0aW9uXG5cbiAgICAgICAgaWYgQHRyYW5zZm9ybS5zY2FsZSA+IDFcbiAgICAgICAgICAgIEB0cmFuc2Zvcm0udG9wID0gMFxuICAgICAgICAgICAgQHRyYW5zZm9ybS5zY2FsZSA9IDFcblxuICAgICAgICAgICAgQHRyaWdnZXIgJ3pvb21lZE91dCcsIHBvc2l0aW9uOiBjdXJyZW50UG9zaXRpb25cblxuICAgICAgICBAdHJpZ2dlciAnYmVmb3JlTmF2aWdhdGlvbicsXG4gICAgICAgICAgICBjdXJyZW50UG9zaXRpb246IGN1cnJlbnRQb3NpdGlvblxuICAgICAgICAgICAgbmV3UG9zaXRpb246IHBvc2l0aW9uXG5cbiAgICAgICAgQGFuaW1hdGlvbi5hbmltYXRlXG4gICAgICAgICAgICB4OiBcIiN7QHRyYW5zZm9ybS5sZWZ0fSVcIlxuICAgICAgICAgICAgZHVyYXRpb246IGR1cmF0aW9uXG4gICAgICAgICwgPT5cbiAgICAgICAgICAgIGNhcm91c2VsID0gQGdldENhcm91c2VsRnJvbVBhZ2VTcHJlYWQgQGdldEFjdGl2ZVBhZ2VTcHJlYWQoKVxuXG4gICAgICAgICAgICBjYXJvdXNlbC5nb25lLmZvckVhY2ggKHBhZ2VTcHJlYWQpIC0+IHBhZ2VTcHJlYWQuc2V0VmlzaWJpbGl0eSAnZ29uZSdcblxuICAgICAgICAgICAgQHRyaWdnZXIgJ2FmdGVyTmF2aWdhdGlvbicsXG4gICAgICAgICAgICAgICAgbmV3UG9zaXRpb246IEBnZXRQb3NpdGlvbigpXG4gICAgICAgICAgICAgICAgcHJldmlvdXNQb3NpdGlvbjogY3VycmVudFBvc2l0aW9uXG5cbiAgICAgICAgICAgIHJldHVyblxuXG4gICAgICAgIHJldHVyblxuXG4gICAgZ2V0UG9zaXRpb246IC0+XG4gICAgICAgIEBwb3NpdGlvblxuXG4gICAgc2V0UG9zaXRpb246IChwb3NpdGlvbikgLT5cbiAgICAgICAgQHBvc2l0aW9uID0gcG9zaXRpb25cblxuICAgICAgICBAXG5cbiAgICBnZXRMZWZ0VHJhbnNmb3JtRnJvbVBhZ2VTcHJlYWQ6IChwb3NpdGlvbiwgcGFnZVNwcmVhZCkgLT5cbiAgICAgICAgbGVmdCA9IDBcblxuICAgICAgICBpZiBwb3NpdGlvbiBpcyBAZ2V0UGFnZVNwcmVhZENvdW50KCkgLSAxXG4gICAgICAgICAgICBsZWZ0ID0gKDEwMCAtIHBhZ2VTcHJlYWQuZ2V0V2lkdGgoKSkgLSBwYWdlU3ByZWFkLmdldExlZnQoKVxuICAgICAgICBlbHNlIGlmIHBvc2l0aW9uID4gMFxuICAgICAgICAgICAgbGVmdCA9ICgxMDAgLSBwYWdlU3ByZWFkLmdldFdpZHRoKCkpIC8gMiAtIHBhZ2VTcHJlYWQuZ2V0TGVmdCgpXG5cbiAgICAgICAgbGVmdFxuXG4gICAgZ2V0Q2Fyb3VzZWxGcm9tUGFnZVNwcmVhZDogKHBhZ2VTcHJlYWRTdWJqZWN0KSAtPlxuICAgICAgICBjYXJvdXNlbCA9XG4gICAgICAgICAgICB2aXNpYmxlOiBbXVxuICAgICAgICAgICAgZ29uZTogW11cblxuICAgICAgICAjIElkZW50aWZ5IHRoZSBwYWdlIHNwcmVhZHMgdGhhdCBzaG91bGQgYmUgYSBwYXJ0IG9mIHRoZSBjYXJvdXNlbC5cbiAgICAgICAgQHBhZ2VTcHJlYWRzLmZvckVhY2ggKHBhZ2VTcHJlYWQpIC0+XG4gICAgICAgICAgICB2aXNpYmxlID0gZmFsc2VcblxuICAgICAgICAgICAgaWYgcGFnZVNwcmVhZC5nZXRMZWZ0KCkgPD0gcGFnZVNwcmVhZFN1YmplY3QuZ2V0TGVmdCgpXG4gICAgICAgICAgICAgICAgdmlzaWJsZSA9IHRydWUgaWYgcGFnZVNwcmVhZC5nZXRMZWZ0KCkgKyBwYWdlU3ByZWFkLmdldFdpZHRoKCkgPiBwYWdlU3ByZWFkU3ViamVjdC5nZXRMZWZ0KCkgLSAxMDBcbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICB2aXNpYmxlID0gdHJ1ZSBpZiBwYWdlU3ByZWFkLmdldExlZnQoKSAtIHBhZ2VTcHJlYWQuZ2V0V2lkdGgoKSA8IHBhZ2VTcHJlYWRTdWJqZWN0LmdldExlZnQoKSArIDEwMFxuXG4gICAgICAgICAgICBpZiB2aXNpYmxlIGlzIHRydWVcbiAgICAgICAgICAgICAgICBjYXJvdXNlbC52aXNpYmxlLnB1c2ggcGFnZVNwcmVhZFxuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIGNhcm91c2VsLmdvbmUucHVzaCBwYWdlU3ByZWFkXG5cbiAgICAgICAgICAgIHJldHVyblxuXG4gICAgICAgIGNhcm91c2VsXG5cbiAgICB0cmF2ZXJzZVBhZ2VTcHJlYWRzOiAoZWxzKSAtPlxuICAgICAgICBwYWdlU3ByZWFkcyA9IFtdXG4gICAgICAgIGxlZnQgPSAwXG5cbiAgICAgICAgZm9yIGVsIGluIGVsc1xuICAgICAgICAgICAgaWQgPSBlbC5nZXRBdHRyaWJ1dGUgJ2RhdGEtaWQnXG4gICAgICAgICAgICB0eXBlID0gZWwuZ2V0QXR0cmlidXRlICdkYXRhLXR5cGUnXG4gICAgICAgICAgICBwYWdlSWRzID0gZWwuZ2V0QXR0cmlidXRlICdkYXRhLXBhZ2UtaWRzJ1xuICAgICAgICAgICAgcGFnZUlkcyA9IGlmIHBhZ2VJZHM/IHRoZW4gcGFnZUlkcy5zcGxpdCgnLCcpLm1hcCAoaSkgLT4gaSBlbHNlIFtdXG4gICAgICAgICAgICBtYXhab29tU2NhbGUgPSBlbC5nZXRBdHRyaWJ1dGUgJ2RhdGEtbWF4LXpvb20tc2NhbGUnXG4gICAgICAgICAgICBtYXhab29tU2NhbGUgPSBpZiBtYXhab29tU2NhbGU/IHRoZW4gK21heFpvb21TY2FsZSBlbHNlIDFcbiAgICAgICAgICAgIHdpZHRoID0gZWwuZ2V0QXR0cmlidXRlICdkYXRhLXdpZHRoJ1xuICAgICAgICAgICAgd2lkdGggPSBpZiB3aWR0aD8gdGhlbiArd2lkdGggZWxzZSAxMDBcbiAgICAgICAgICAgIHBhZ2VTcHJlYWQgPSBuZXcgUGFnZVNwcmVhZCBlbCxcbiAgICAgICAgICAgICAgICBpZDogaWRcbiAgICAgICAgICAgICAgICB0eXBlOiB0eXBlXG4gICAgICAgICAgICAgICAgcGFnZUlkczogcGFnZUlkc1xuICAgICAgICAgICAgICAgIG1heFpvb21TY2FsZTogbWF4Wm9vbVNjYWxlXG4gICAgICAgICAgICAgICAgd2lkdGg6IHdpZHRoXG4gICAgICAgICAgICAgICAgbGVmdDogbGVmdFxuXG4gICAgICAgICAgICBsZWZ0ICs9IHdpZHRoXG5cbiAgICAgICAgICAgIHBhZ2VTcHJlYWRzLnB1c2ggcGFnZVNwcmVhZFxuXG4gICAgICAgIHBhZ2VTcHJlYWRzXG5cbiAgICBidWlsZFBhZ2VJZHM6IChwYWdlU3ByZWFkcykgLT5cbiAgICAgICAgcGFnZUlkcyA9IHt9XG5cbiAgICAgICAgcGFnZVNwcmVhZHMuZm9yRWFjaCAocGFnZVNwcmVhZCwgaSkgLT5cbiAgICAgICAgICAgIHBhZ2VTcHJlYWQub3B0aW9ucy5wYWdlSWRzLmZvckVhY2ggKHBhZ2VJZCkgLT5cbiAgICAgICAgICAgICAgICBwYWdlSWRzW3BhZ2VJZF0gPSBwYWdlU3ByZWFkXG5cbiAgICAgICAgICAgICAgICByZXR1cm5cblxuICAgICAgICAgICAgcmV0dXJuXG5cbiAgICAgICAgcGFnZUlkc1xuXG4gICAgaXNDb29yZGluYXRlSW5zaWRlRWxlbWVudDogKHgsIHksIGVsKSAtPlxuICAgICAgICByZWN0ID0gZWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KClcblxuICAgICAgICB4ID49IHJlY3QubGVmdCBhbmQgeCA8PSByZWN0LnJpZ2h0IGFuZCB5ID49IHJlY3QudG9wIGFuZCB5IDw9IHJlY3QuYm90dG9tXG5cbiAgICBnZXRDb29yZGluYXRlSW5mbzogKHgsIHksIHBhZ2VTcHJlYWQpIC0+XG4gICAgICAgIHggLT0gQGVsLm9mZnNldExlZnRcbiAgICAgICAgeSAtPSBAZWwub2Zmc2V0VG9wXG4gICAgICAgIGluZm8gPVxuICAgICAgICAgICAgeDogeFxuICAgICAgICAgICAgeTogeVxuICAgICAgICAgICAgY29udGVudFg6IDBcbiAgICAgICAgICAgIGNvbnRlbnRZOiAwXG4gICAgICAgICAgICBwYWdlWDogMFxuICAgICAgICAgICAgcGFnZVk6IDBcbiAgICAgICAgICAgIG92ZXJsYXlFbHM6IFtdXG4gICAgICAgICAgICBwYWdlRWw6IG51bGxcbiAgICAgICAgICAgIGlzSW5zaWRlQ29udGVudFg6IGZhbHNlXG4gICAgICAgICAgICBpc0luc2lkZUNvbnRlbnRZOiBmYWxzZVxuICAgICAgICAgICAgaXNJbnNpZGVDb250ZW50OiBmYWxzZVxuICAgICAgICBjb250ZW50UmVjdCA9IHBhZ2VTcHJlYWQuZ2V0Q29udGVudFJlY3QoKVxuICAgICAgICBvdmVybGF5RWxzID0gcGFnZVNwcmVhZC5nZXRPdmVybGF5RWxzKClcbiAgICAgICAgcGFnZUVscyA9IHBhZ2VTcHJlYWQuZ2V0UGFnZUVscygpXG5cbiAgICAgICAgZm9yIG92ZXJsYXlFbCBpbiBvdmVybGF5RWxzXG4gICAgICAgICAgICBpbmZvLm92ZXJsYXlFbHMucHVzaCBvdmVybGF5RWwgaWYgQGlzQ29vcmRpbmF0ZUluc2lkZUVsZW1lbnQoeCwgeSwgb3ZlcmxheUVsKVxuXG4gICAgICAgIGZvciBwYWdlRWwgaW4gcGFnZUVsc1xuICAgICAgICAgICAgaWYgQGlzQ29vcmRpbmF0ZUluc2lkZUVsZW1lbnQoeCwgeSwgcGFnZUVsKVxuICAgICAgICAgICAgICAgIGluZm8ucGFnZUVsID0gcGFnZUVsXG4gICAgICAgICAgICAgICAgYnJlYWtcblxuICAgICAgICBpbmZvLmNvbnRlbnRYID0gKHggLSBjb250ZW50UmVjdC5sZWZ0KSAvIE1hdGgubWF4KDEsIGNvbnRlbnRSZWN0LndpZHRoKVxuICAgICAgICBpbmZvLmNvbnRlbnRZID0gKHkgLSBjb250ZW50UmVjdC50b3ApIC8gTWF0aC5tYXgoMSwgY29udGVudFJlY3QuaGVpZ2h0KVxuXG4gICAgICAgIGlmIGluZm8ucGFnZUVsP1xuICAgICAgICAgICAgaW5mby5pc0luc2lkZUNvbnRlbnRYID0gaW5mby5jb250ZW50WCA+PSAwIGFuZCBpbmZvLmNvbnRlbnRYIDw9IDFcbiAgICAgICAgICAgIGluZm8uaXNJbnNpZGVDb250ZW50WSA9IGluZm8uY29udGVudFkgPj0gMCBhbmQgaW5mby5jb250ZW50WSA8PSAxXG4gICAgICAgICAgICBpbmZvLmlzSW5zaWRlQ29udGVudCA9IGluZm8uaXNJbnNpZGVDb250ZW50WCBhbmQgaW5mby5pc0luc2lkZUNvbnRlbnRZXG5cbiAgICAgICAgaW5mb1xuXG4gICAgZ2V0UGFnZVNwcmVhZENvdW50OiAtPlxuICAgICAgICBAcGFnZVNwcmVhZHMubGVuZ3RoXG5cbiAgICBnZXRBY3RpdmVQYWdlU3ByZWFkOiAtPlxuICAgICAgICBAZ2V0UGFnZVNwcmVhZEZyb21Qb3NpdGlvbiBAZ2V0UG9zaXRpb24oKVxuXG4gICAgZ2V0UGFnZVNwcmVhZEZyb21Qb3NpdGlvbjogKHBvc2l0aW9uKSAtPlxuICAgICAgICBAcGFnZVNwcmVhZHNbcG9zaXRpb25dXG5cbiAgICBnZXRQYWdlU3ByZWFkUG9zaXRpb25Gcm9tUGFnZUlkOiAocGFnZUlkKSAtPlxuICAgICAgICBmb3IgcGFnZVNwcmVhZCwgaWR4IGluIEBwYWdlU3ByZWFkc1xuICAgICAgICAgICAgcmV0dXJuIGlkeCBpZiBwYWdlU3ByZWFkLm9wdGlvbnMucGFnZUlkcy5pbmRleE9mKHBhZ2VJZCkgPiAtMVxuXG4gICAgZ2V0UGFnZVNwcmVhZEJvdW5kczogKHBhZ2VTcHJlYWQpIC0+XG4gICAgICAgIHBhZ2VTcHJlYWRSZWN0ID0gcGFnZVNwcmVhZC5nZXRSZWN0KClcbiAgICAgICAgcGFnZVNwcmVhZENvbnRlbnRSZWN0ID0gcGFnZVNwcmVhZC5nZXRDb250ZW50UmVjdCgpXG5cbiAgICAgICAgbGVmdDogKHBhZ2VTcHJlYWRDb250ZW50UmVjdC5sZWZ0IC0gcGFnZVNwcmVhZFJlY3QubGVmdCkgLyBwYWdlU3ByZWFkUmVjdC53aWR0aCAqIDEwMFxuICAgICAgICB0b3A6IChwYWdlU3ByZWFkQ29udGVudFJlY3QudG9wIC0gcGFnZVNwcmVhZFJlY3QudG9wKSAvIHBhZ2VTcHJlYWRSZWN0LmhlaWdodCAqIDEwMFxuICAgICAgICB3aWR0aDogcGFnZVNwcmVhZENvbnRlbnRSZWN0LndpZHRoIC8gcGFnZVNwcmVhZFJlY3Qud2lkdGggKiAxMDBcbiAgICAgICAgaGVpZ2h0OiBwYWdlU3ByZWFkQ29udGVudFJlY3QuaGVpZ2h0IC8gcGFnZVNwcmVhZFJlY3QuaGVpZ2h0ICogMTAwXG4gICAgICAgIHBhZ2VTcHJlYWRSZWN0OiBwYWdlU3ByZWFkUmVjdFxuICAgICAgICBwYWdlU3ByZWFkQ29udGVudFJlY3Q6IHBhZ2VTcHJlYWRDb250ZW50UmVjdFxuXG4gICAgY2xpcENvb3JkaW5hdGU6IChjb29yZGluYXRlLCBzY2FsZSwgc2l6ZSwgb2Zmc2V0KSAtPlxuICAgICAgICBpZiBzaXplICogc2NhbGUgPCAxMDBcbiAgICAgICAgICAgIGNvb3JkaW5hdGUgPSBvZmZzZXQgKiAtc2NhbGUgKyA1MCAtIChzaXplICogc2NhbGUgLyAyKVxuICAgICAgICBlbHNlXG4gICAgICAgICAgICBjb29yZGluYXRlID0gTWF0aC5taW4gY29vcmRpbmF0ZSwgb2Zmc2V0ICogLXNjYWxlXG4gICAgICAgICAgICBjb29yZGluYXRlID0gTWF0aC5tYXggY29vcmRpbmF0ZSwgb2Zmc2V0ICogLXNjYWxlIC0gc2l6ZSAqIHNjYWxlICsgMTAwXG5cbiAgICAgICAgY29vcmRpbmF0ZVxuXG4gICAgem9vbVRvOiAob3B0aW9ucyA9IHt9LCBjYWxsYmFjaykgLT5cbiAgICAgICAgc2NhbGUgPSBvcHRpb25zLnNjYWxlXG4gICAgICAgIGN1clNjYWxlID0gQHRyYW5zZm9ybS5zY2FsZVxuICAgICAgICBhY3RpdmVQYWdlU3ByZWFkID0gQGdldEFjdGl2ZVBhZ2VTcHJlYWQoKVxuICAgICAgICBwYWdlU3ByZWFkQm91bmRzID0gQGdldFBhZ2VTcHJlYWRCb3VuZHMgYWN0aXZlUGFnZVNwcmVhZFxuICAgICAgICBjYXJvdXNlbE9mZnNldCA9IGFjdGl2ZVBhZ2VTcHJlYWQuZ2V0TGVmdCgpXG4gICAgICAgIGNhcm91c2VsU2NhbGVkT2Zmc2V0ID0gY2Fyb3VzZWxPZmZzZXQgKiBjdXJTY2FsZVxuICAgICAgICB4ID0gb3B0aW9ucy54ID8gMFxuICAgICAgICB5ID0gb3B0aW9ucy55ID8gMFxuXG4gICAgICAgIGlmIHNjYWxlIGlzbnQgMVxuICAgICAgICAgICAgeCAtPSBwYWdlU3ByZWFkQm91bmRzLnBhZ2VTcHJlYWRSZWN0LmxlZnRcbiAgICAgICAgICAgIHkgLT0gcGFnZVNwcmVhZEJvdW5kcy5wYWdlU3ByZWFkUmVjdC50b3BcbiAgICAgICAgICAgIHggPSB4IC8gKHBhZ2VTcHJlYWRCb3VuZHMucGFnZVNwcmVhZFJlY3Qud2lkdGggLyBjdXJTY2FsZSkgKiAxMDBcbiAgICAgICAgICAgIHkgPSB5IC8gKHBhZ2VTcHJlYWRCb3VuZHMucGFnZVNwcmVhZFJlY3QuaGVpZ2h0IC8gY3VyU2NhbGUpICogMTAwXG4gICAgICAgICAgICB4ID0gQHRyYW5zZm9ybS5sZWZ0ICsgY2Fyb3VzZWxTY2FsZWRPZmZzZXQgKyB4IC0gKHggKiBzY2FsZSAvIGN1clNjYWxlKVxuICAgICAgICAgICAgeSA9IEB0cmFuc2Zvcm0udG9wICsgeSAtICh5ICogc2NhbGUgLyBjdXJTY2FsZSlcblxuICAgICAgICAgICAgIyBNYWtlIHN1cmUgdGhlIGFuaW1hdGlvbiBkb2Vzbid0IGV4Y2VlZCB0aGUgY29udGVudCBib3VuZHMuXG4gICAgICAgICAgICBpZiBvcHRpb25zLmJvdW5kcyBpc250IGZhbHNlIGFuZCBzY2FsZSA+IDFcbiAgICAgICAgICAgICAgICB4ID0gQGNsaXBDb29yZGluYXRlIHgsIHNjYWxlLCBwYWdlU3ByZWFkQm91bmRzLndpZHRoLCBwYWdlU3ByZWFkQm91bmRzLmxlZnRcbiAgICAgICAgICAgICAgICB5ID0gQGNsaXBDb29yZGluYXRlIHksIHNjYWxlLCBwYWdlU3ByZWFkQm91bmRzLmhlaWdodCwgcGFnZVNwcmVhZEJvdW5kcy50b3BcbiAgICAgICAgZWxzZVxuICAgICAgICAgICAgeCA9IDBcbiAgICAgICAgICAgIHkgPSAwXG5cbiAgICAgICAgIyBBY2NvdW50IGZvciB0aGUgcGFnZSBzcHJlYWRzIGxlZnQgb2YgdGhlIGFjdGl2ZSBvbmUuXG4gICAgICAgIHggLT0gY2Fyb3VzZWxPZmZzZXQgKiBzY2FsZVxuXG4gICAgICAgIEB0cmFuc2Zvcm0ubGVmdCA9IHhcbiAgICAgICAgQHRyYW5zZm9ybS50b3AgPSB5XG4gICAgICAgIEB0cmFuc2Zvcm0uc2NhbGUgPSBzY2FsZVxuXG4gICAgICAgIEBhbmltYXRpb24uYW5pbWF0ZVxuICAgICAgICAgICAgeDogXCIje3h9JVwiXG4gICAgICAgICAgICB5OiBcIiN7eX0lXCJcbiAgICAgICAgICAgIHNjYWxlOiBzY2FsZVxuICAgICAgICAgICAgZWFzaW5nOiBvcHRpb25zLmVhc2luZ1xuICAgICAgICAgICAgZHVyYXRpb246IG9wdGlvbnMuZHVyYXRpb25cbiAgICAgICAgLCBjYWxsYmFja1xuXG4gICAgICAgIHJldHVyblxuXG4gICAgcmVmcmVzaDogLT5cbiAgICAgICAgQHBhZ2VTcHJlYWRFbHMgPSBAZWwucXVlcnlTZWxlY3RvckFsbCAnLnZlcnNvX19wYWdlLXNwcmVhZCdcbiAgICAgICAgQHBhZ2VTcHJlYWRzID0gQHRyYXZlcnNlUGFnZVNwcmVhZHMgQHBhZ2VTcHJlYWRFbHNcbiAgICAgICAgQHBhZ2VJZHMgPSBAYnVpbGRQYWdlSWRzIEBwYWdlU3ByZWFkc1xuXG4gICAgICAgIEBcbiAgICBcbiAgICBnZXRIYW1tZXJJbnB1dENsYXNzOiAtPlxuICAgICAgICBtb2JpbGVSZWdleCA9IC9tb2JpbGV8dGFibGV0fGlwKGFkfGhvbmV8b2QpfGFuZHJvaWQvaVxuICAgICAgICBzdXBwb3J0VG91Y2ggPSAnb250b3VjaHN0YXJ0JyBvZiB3aW5kb3dcblxuICAgICAgICBpZiBzdXBwb3J0VG91Y2ggYW5kIG1vYmlsZVJlZ2V4LnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCkgdGhlbiBIYW1tZXIuVG91Y2hJbnB1dCBlbHNlIG51bGxcblxuICAgICMjIyMjIyMjIyMjIyMjXG4gICAgIyMjIEV2ZW50cyAjIyNcbiAgICAjIyMjIyMjIyMjIyMjI1xuXG4gICAgb25QYW5TdGFydDogKGUpIC0+XG4gICAgICAgICMgT25seSBhbGxvdyBwYW5uaW5nIGlmIHpvb21lZCBpbiBvciBkb2luZyBhIGhvcml6b250YWwgcGFuLlxuICAgICAgICAjIFRoaXMgZW5zdXJlcyB2ZXJ0aWNhbCBzY3JvbGxpbmcgd29ya3MgZm9yIHNjcm9sbGFibGUgcGFnZSBzcHJlYWRzLlxuICAgICAgICBpZiBAdHJhbnNmb3JtLnNjYWxlID4gMSBvciAoZS5kaXJlY3Rpb24gaXMgSGFtbWVyLkRJUkVDVElPTl9MRUZUIG9yIGUuZGlyZWN0aW9uIGlzIEhhbW1lci5ESVJFQ1RJT05fUklHSFQpXG4gICAgICAgICAgICB4ID0gZS5jZW50ZXIueFxuICAgICAgICAgICAgZWRnZVRocmVzaG9sZCA9IDMwXG4gICAgICAgICAgICB3aWR0aCA9IEBzY3JvbGxlckVsLm9mZnNldFdpZHRoXG5cbiAgICAgICAgICAgICMgUHJldmVudCBwYW5uaW5nIHdoZW4gZWRnZS1zd2lwaW5nIG9uIGlPUy5cbiAgICAgICAgICAgIGlmIHggPiBlZGdlVGhyZXNob2xkIGFuZCB4IDwgd2lkdGggLSBlZGdlVGhyZXNob2xkXG4gICAgICAgICAgICAgICAgQHN0YXJ0VHJhbnNmb3JtLmxlZnQgPSBAdHJhbnNmb3JtLmxlZnRcbiAgICAgICAgICAgICAgICBAc3RhcnRUcmFuc2Zvcm0udG9wID0gQHRyYW5zZm9ybS50b3BcblxuICAgICAgICAgICAgICAgIEBwYW5uaW5nID0gdHJ1ZVxuXG4gICAgICAgICAgICAgICAgQHRyaWdnZXIgJ3BhblN0YXJ0J1xuXG4gICAgICAgIHJldHVyblxuXG4gICAgb25QYW5Nb3ZlOiAoZSkgLT5cbiAgICAgICAgcmV0dXJuIGlmIEBwaW5jaGluZyBpcyB0cnVlIG9yIEBwYW5uaW5nIGlzIGZhbHNlXG5cbiAgICAgICAgaWYgQHRyYW5zZm9ybS5zY2FsZSA+IDFcbiAgICAgICAgICAgIGFjdGl2ZVBhZ2VTcHJlYWQgPSBAZ2V0QWN0aXZlUGFnZVNwcmVhZCgpXG4gICAgICAgICAgICBjYXJvdXNlbE9mZnNldCA9IGFjdGl2ZVBhZ2VTcHJlYWQuZ2V0TGVmdCgpXG4gICAgICAgICAgICBjYXJvdXNlbFNjYWxlZE9mZnNldCA9IGNhcm91c2VsT2Zmc2V0ICogQHRyYW5zZm9ybS5zY2FsZVxuICAgICAgICAgICAgcGFnZVNwcmVhZEJvdW5kcyA9IEBnZXRQYWdlU3ByZWFkQm91bmRzIGFjdGl2ZVBhZ2VTcHJlYWRcbiAgICAgICAgICAgIHNjYWxlID0gQHRyYW5zZm9ybS5zY2FsZVxuICAgICAgICAgICAgeCA9IEBzdGFydFRyYW5zZm9ybS5sZWZ0ICsgY2Fyb3VzZWxTY2FsZWRPZmZzZXQgKyBlLmRlbHRhWCAvIEBzY3JvbGxlckVsLm9mZnNldFdpZHRoICogMTAwXG4gICAgICAgICAgICB5ID0gQHN0YXJ0VHJhbnNmb3JtLnRvcCArIGUuZGVsdGFZIC8gQHNjcm9sbGVyRWwub2Zmc2V0SGVpZ2h0ICogMTAwXG4gICAgICAgICAgICB4ID0gQGNsaXBDb29yZGluYXRlIHgsIHNjYWxlLCBwYWdlU3ByZWFkQm91bmRzLndpZHRoLCBwYWdlU3ByZWFkQm91bmRzLmxlZnRcbiAgICAgICAgICAgIHkgPSBAY2xpcENvb3JkaW5hdGUgeSwgc2NhbGUsIHBhZ2VTcHJlYWRCb3VuZHMuaGVpZ2h0LCBwYWdlU3ByZWFkQm91bmRzLnRvcFxuICAgICAgICAgICAgeCAtPSBjYXJvdXNlbFNjYWxlZE9mZnNldFxuXG4gICAgICAgICAgICBAdHJhbnNmb3JtLmxlZnQgPSB4XG4gICAgICAgICAgICBAdHJhbnNmb3JtLnRvcCA9IHlcblxuICAgICAgICAgICAgQGFuaW1hdGlvbi5hbmltYXRlXG4gICAgICAgICAgICAgICAgeDogXCIje3h9JVwiXG4gICAgICAgICAgICAgICAgeTogXCIje3l9JVwiXG4gICAgICAgICAgICAgICAgc2NhbGU6IHNjYWxlXG4gICAgICAgICAgICAgICAgZWFzaW5nOiAnbGluZWFyJ1xuICAgICAgICBlbHNlXG4gICAgICAgICAgICB4ID0gQHRyYW5zZm9ybS5sZWZ0ICsgZS5kZWx0YVggLyBAc2Nyb2xsZXJFbC5vZmZzZXRXaWR0aCAqIDEwMFxuXG4gICAgICAgICAgICBAYW5pbWF0aW9uLmFuaW1hdGVcbiAgICAgICAgICAgICAgICB4OiBcIiN7eH0lXCJcbiAgICAgICAgICAgICAgICBlYXNpbmc6ICdsaW5lYXInXG5cbiAgICAgICAgcmV0dXJuXG5cbiAgICBvblBhbkVuZDogKGUpIC0+XG4gICAgICAgIHJldHVybiBpZiBAcGFubmluZyBpcyBmYWxzZVxuXG4gICAgICAgIEBwYW5uaW5nID0gZmFsc2VcbiAgICAgICAgQHRyaWdnZXIgJ3BhbkVuZCdcblxuICAgICAgICBpZiBAdHJhbnNmb3JtLnNjYWxlIGlzIDEgYW5kIEBwaW5jaGluZyBpcyBmYWxzZVxuICAgICAgICAgICAgcG9zaXRpb24gPSBAZ2V0UG9zaXRpb24oKVxuICAgICAgICAgICAgdmVsb2NpdHkgPSBlLm92ZXJhbGxWZWxvY2l0eVhcblxuICAgICAgICAgICAgaWYgTWF0aC5hYnModmVsb2NpdHkpID49IEBzd2lwZVZlbG9jaXR5XG4gICAgICAgICAgICAgICAgaWYgTWF0aC5hYnMoZS5kZWx0YVgpID49IEBzd2lwZVRocmVzaG9sZFxuICAgICAgICAgICAgICAgICAgICBpZiBlLm9mZnNldERpcmVjdGlvbiBpcyBIYW1tZXIuRElSRUNUSU9OX0xFRlRcbiAgICAgICAgICAgICAgICAgICAgICAgIEBuZXh0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmVsb2NpdHk6IHZlbG9jaXR5XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZHVyYXRpb246IEBuYXZpZ2F0aW9uUGFuRHVyYXRpb25cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiBlLm9mZnNldERpcmVjdGlvbiBpcyBIYW1tZXIuRElSRUNUSU9OX1JJR0hUXG4gICAgICAgICAgICAgICAgICAgICAgICBAcHJldlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZlbG9jaXR5OiB2ZWxvY2l0eVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGR1cmF0aW9uOiBAbmF2aWdhdGlvblBhbkR1cmF0aW9uXG5cbiAgICAgICAgICAgIGlmIHBvc2l0aW9uIGlzIEBnZXRQb3NpdGlvbigpXG4gICAgICAgICAgICAgICAgQGFuaW1hdGlvbi5hbmltYXRlXG4gICAgICAgICAgICAgICAgICAgIHg6IFwiI3tAdHJhbnNmb3JtLmxlZnR9JVwiXG4gICAgICAgICAgICAgICAgICAgIGR1cmF0aW9uOiBAbmF2aWdhdGlvblBhbkR1cmF0aW9uXG5cbiAgICAgICAgICAgICAgICBAdHJpZ2dlciAnYXR0ZW1wdGVkTmF2aWdhdGlvbicsIHBvc2l0aW9uOiBAZ2V0UG9zaXRpb24oKVxuXG4gICAgICAgIHJldHVyblxuXG4gICAgb25QaW5jaFN0YXJ0OiAoZSkgLT5cbiAgICAgICAgcmV0dXJuIGlmIG5vdCBAZ2V0QWN0aXZlUGFnZVNwcmVhZCgpLmlzWm9vbWFibGUoKVxuXG4gICAgICAgIEBwaW5jaGluZyA9IHRydWVcbiAgICAgICAgQGVsLnNldEF0dHJpYnV0ZSAnZGF0YS1waW5jaGluZycsIHRydWVcbiAgICAgICAgQHN0YXJ0VHJhbnNmb3JtLnNjYWxlID0gQHRyYW5zZm9ybS5zY2FsZVxuXG4gICAgICAgIHJldHVyblxuXG4gICAgb25QaW5jaE1vdmU6IChlKSAtPlxuICAgICAgICByZXR1cm4gaWYgQHBpbmNoaW5nIGlzIGZhbHNlXG5cbiAgICAgICAgQHpvb21Ub1xuICAgICAgICAgICAgeDogZS5jZW50ZXIueFxuICAgICAgICAgICAgeTogZS5jZW50ZXIueVxuICAgICAgICAgICAgc2NhbGU6IEBzdGFydFRyYW5zZm9ybS5zY2FsZSAqIGUuc2NhbGVcbiAgICAgICAgICAgIGJvdW5kczogZmFsc2VcbiAgICAgICAgICAgIGVhc2luZzogJ2xpbmVhcidcblxuICAgICAgICByZXR1cm5cblxuICAgIG9uUGluY2hFbmQ6IChlKSAtPlxuICAgICAgICByZXR1cm4gaWYgQHBpbmNoaW5nIGlzIGZhbHNlXG5cbiAgICAgICAgYWN0aXZlUGFnZVNwcmVhZCA9IEBnZXRBY3RpdmVQYWdlU3ByZWFkKClcbiAgICAgICAgbWF4Wm9vbVNjYWxlID0gYWN0aXZlUGFnZVNwcmVhZC5nZXRNYXhab29tU2NhbGUoKVxuICAgICAgICBzY2FsZSA9IE1hdGgubWF4IDEsIE1hdGgubWluKEB0cmFuc2Zvcm0uc2NhbGUsIG1heFpvb21TY2FsZSlcbiAgICAgICAgcG9zaXRpb24gPSBAZ2V0UG9zaXRpb24oKVxuXG4gICAgICAgIGlmIEBzdGFydFRyYW5zZm9ybS5zY2FsZSBpcyAxIGFuZCBzY2FsZSA+IDFcbiAgICAgICAgICAgIEB0cmlnZ2VyICd6b29tZWRJbicsIHBvc2l0aW9uOiBwb3NpdGlvblxuICAgICAgICBlbHNlIGlmIEBzdGFydFRyYW5zZm9ybS5zY2FsZSA+IDEgYW5kIHNjYWxlIGlzIDFcbiAgICAgICAgICAgIEB0cmlnZ2VyICd6b29tZWRPdXQnLCBwb3NpdGlvbjogcG9zaXRpb25cblxuICAgICAgICBAem9vbVRvXG4gICAgICAgICAgICB4OiBlLmNlbnRlci54XG4gICAgICAgICAgICB5OiBlLmNlbnRlci55XG4gICAgICAgICAgICBzY2FsZTogc2NhbGVcbiAgICAgICAgICAgIGR1cmF0aW9uOiBAem9vbUR1cmF0aW9uXG4gICAgICAgICwgPT5cbiAgICAgICAgICAgIEBwaW5jaGluZyA9IGZhbHNlXG4gICAgICAgICAgICBAZWwuc2V0QXR0cmlidXRlICdkYXRhLXBpbmNoaW5nJywgZmFsc2VcblxuICAgICAgICAgICAgcmV0dXJuXG5cbiAgICAgICAgcmV0dXJuXG5cbiAgICBvblByZXNzOiAoZSkgLT5cbiAgICAgICAgQHRyaWdnZXIgJ3ByZXNzZWQnLCBAZ2V0Q29vcmRpbmF0ZUluZm8oZS5jZW50ZXIueCwgZS5jZW50ZXIueSwgQGdldEFjdGl2ZVBhZ2VTcHJlYWQoKSlcblxuICAgICAgICByZXR1cm5cblxuICAgIG9uQ29udGV4dG1lbnU6IChlKSAtPlxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KClcblxuICAgICAgICBAdHJpZ2dlciAnY29udGV4dG1lbnUnLCBAZ2V0Q29vcmRpbmF0ZUluZm8oZS5jbGllbnRYLCBlLmNsaWVudFksIEBnZXRBY3RpdmVQYWdlU3ByZWFkKCkpXG5cbiAgICAgICAgZmFsc2VcblxuICAgIG9uU2luZ2xldGFwOiAoZSkgLT5cbiAgICAgICAgYWN0aXZlUGFnZVNwcmVhZCA9IEBnZXRBY3RpdmVQYWdlU3ByZWFkKClcbiAgICAgICAgY29vcmRpbmF0ZUluZm8gPSBAZ2V0Q29vcmRpbmF0ZUluZm8gZS5jZW50ZXIueCwgZS5jZW50ZXIueSwgYWN0aXZlUGFnZVNwcmVhZFxuXG4gICAgICAgIGNsZWFyVGltZW91dCBAdGFwLnRpbWVvdXRcblxuICAgICAgICBpZiBAdGFwLmNvdW50IGlzIDFcbiAgICAgICAgICAgIEB0YXAuY291bnQgPSAwXG5cbiAgICAgICAgICAgIEB0cmlnZ2VyICdkb3VibGVDbGlja2VkJywgY29vcmRpbmF0ZUluZm9cblxuICAgICAgICAgICAgaWYgYWN0aXZlUGFnZVNwcmVhZC5pc1pvb21hYmxlKClcbiAgICAgICAgICAgICAgICBtYXhab29tU2NhbGUgPSBhY3RpdmVQYWdlU3ByZWFkLmdldE1heFpvb21TY2FsZSgpXG4gICAgICAgICAgICAgICAgem9vbWVkSW4gPSBAdHJhbnNmb3JtLnNjYWxlID4gMVxuICAgICAgICAgICAgICAgIHNjYWxlID0gaWYgem9vbWVkSW4gdGhlbiAxIGVsc2UgbWF4Wm9vbVNjYWxlXG4gICAgICAgICAgICAgICAgem9vbUV2ZW50ID0gaWYgem9vbWVkSW4gdGhlbiAnem9vbWVkT3V0JyBlbHNlICd6b29tZWRJbidcbiAgICAgICAgICAgICAgICBwb3NpdGlvbiA9IEBnZXRQb3NpdGlvbigpXG5cbiAgICAgICAgICAgICAgICBAem9vbVRvXG4gICAgICAgICAgICAgICAgICAgIHg6IGUuY2VudGVyLnhcbiAgICAgICAgICAgICAgICAgICAgeTogZS5jZW50ZXIueVxuICAgICAgICAgICAgICAgICAgICBzY2FsZTogc2NhbGVcbiAgICAgICAgICAgICAgICAgICAgZHVyYXRpb246IEB6b29tRHVyYXRpb25cbiAgICAgICAgICAgICAgICAsID0+XG4gICAgICAgICAgICAgICAgICAgIEB0cmlnZ2VyIHpvb21FdmVudCwgcG9zaXRpb246IHBvc2l0aW9uXG5cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIEB0YXAuY291bnQrK1xuICAgICAgICAgICAgQHRhcC50aW1lb3V0ID0gc2V0VGltZW91dCA9PlxuICAgICAgICAgICAgICAgIEB0YXAuY291bnQgPSAwXG5cbiAgICAgICAgICAgICAgICBAdHJpZ2dlciAnY2xpY2tlZCcsIGNvb3JkaW5hdGVJbmZvXG5cbiAgICAgICAgICAgICAgICByZXR1cm5cbiAgICAgICAgICAgICwgQHRhcC5kZWxheVxuXG4gICAgICAgIHJldHVyblxuXG4gICAgb25Ub3VjaFN0YXJ0OiAoZSkgLT5cbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpIGlmIG5vdCBAZ2V0QWN0aXZlUGFnZVNwcmVhZCgpLmlzU2Nyb2xsYWJsZSgpXG5cbiAgICAgICAgcmV0dXJuXG5cbiAgICBvblRvdWNoRW5kOiAoZSkgLT5cbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpIGlmIG5vdCBAZ2V0QWN0aXZlUGFnZVNwcmVhZCgpLmlzU2Nyb2xsYWJsZSgpXG5cbiAgICAgICAgcmV0dXJuXG5cbiAgICBvblJlc2l6ZTogLT5cbiAgICAgICAgaWYgQHRyYW5zZm9ybS5zY2FsZSA+IDFcbiAgICAgICAgICAgIHBvc2l0aW9uID0gQGdldFBvc2l0aW9uKClcbiAgICAgICAgICAgIGFjdGl2ZVBhZ2VTcHJlYWQgPSBAZ2V0QWN0aXZlUGFnZVNwcmVhZCgpXG5cbiAgICAgICAgICAgIEB0cmFuc2Zvcm0ubGVmdCA9IEBnZXRMZWZ0VHJhbnNmb3JtRnJvbVBhZ2VTcHJlYWQgcG9zaXRpb24sIGFjdGl2ZVBhZ2VTcHJlYWRcbiAgICAgICAgICAgIEB0cmFuc2Zvcm0udG9wID0gMFxuICAgICAgICAgICAgQHRyYW5zZm9ybS5zY2FsZSA9IDFcblxuICAgICAgICAgICAgQHpvb21Ub1xuICAgICAgICAgICAgICAgIHg6IEB0cmFuc2Zvcm0ubGVmdFxuICAgICAgICAgICAgICAgIHk6IEB0cmFuc2Zvcm0udG9wXG4gICAgICAgICAgICAgICAgc2NhbGU6IEB0cmFuc2Zvcm0uc2NhbGVcbiAgICAgICAgICAgICAgICBkdXJhdGlvbjogMFxuXG4gICAgICAgICAgICBAdHJpZ2dlciAnem9vbWVkT3V0JywgcG9zaXRpb246IHBvc2l0aW9uXG5cbiAgICAgICAgcmV0dXJuXG5cbk1pY3JvRXZlbnQubWl4aW4gVmVyc29cblxubW9kdWxlLmV4cG9ydHMgPSBWZXJzb1xuIiwiLyohIEhhbW1lci5KUyAtIHYyLjAuNyAtIDIwMTYtMDQtMjJcbiAqIGh0dHA6Ly9oYW1tZXJqcy5naXRodWIuaW8vXG4gKlxuICogQ29weXJpZ2h0IChjKSAyMDE2IEpvcmlrIFRhbmdlbGRlcjtcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZSAqL1xuKGZ1bmN0aW9uKHdpbmRvdywgZG9jdW1lbnQsIGV4cG9ydE5hbWUsIHVuZGVmaW5lZCkge1xuICAndXNlIHN0cmljdCc7XG5cbnZhciBWRU5ET1JfUFJFRklYRVMgPSBbJycsICd3ZWJraXQnLCAnTW96JywgJ01TJywgJ21zJywgJ28nXTtcbnZhciBURVNUX0VMRU1FTlQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcblxudmFyIFRZUEVfRlVOQ1RJT04gPSAnZnVuY3Rpb24nO1xuXG52YXIgcm91bmQgPSBNYXRoLnJvdW5kO1xudmFyIGFicyA9IE1hdGguYWJzO1xudmFyIG5vdyA9IERhdGUubm93O1xuXG4vKipcbiAqIHNldCBhIHRpbWVvdXQgd2l0aCBhIGdpdmVuIHNjb3BlXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmblxuICogQHBhcmFtIHtOdW1iZXJ9IHRpbWVvdXRcbiAqIEBwYXJhbSB7T2JqZWN0fSBjb250ZXh0XG4gKiBAcmV0dXJucyB7bnVtYmVyfVxuICovXG5mdW5jdGlvbiBzZXRUaW1lb3V0Q29udGV4dChmbiwgdGltZW91dCwgY29udGV4dCkge1xuICAgIHJldHVybiBzZXRUaW1lb3V0KGJpbmRGbihmbiwgY29udGV4dCksIHRpbWVvdXQpO1xufVxuXG4vKipcbiAqIGlmIHRoZSBhcmd1bWVudCBpcyBhbiBhcnJheSwgd2Ugd2FudCB0byBleGVjdXRlIHRoZSBmbiBvbiBlYWNoIGVudHJ5XG4gKiBpZiBpdCBhaW50IGFuIGFycmF5IHdlIGRvbid0IHdhbnQgdG8gZG8gYSB0aGluZy5cbiAqIHRoaXMgaXMgdXNlZCBieSBhbGwgdGhlIG1ldGhvZHMgdGhhdCBhY2NlcHQgYSBzaW5nbGUgYW5kIGFycmF5IGFyZ3VtZW50LlxuICogQHBhcmFtIHsqfEFycmF5fSBhcmdcbiAqIEBwYXJhbSB7U3RyaW5nfSBmblxuICogQHBhcmFtIHtPYmplY3R9IFtjb250ZXh0XVxuICogQHJldHVybnMge0Jvb2xlYW59XG4gKi9cbmZ1bmN0aW9uIGludm9rZUFycmF5QXJnKGFyZywgZm4sIGNvbnRleHQpIHtcbiAgICBpZiAoQXJyYXkuaXNBcnJheShhcmcpKSB7XG4gICAgICAgIGVhY2goYXJnLCBjb250ZXh0W2ZuXSwgY29udGV4dCk7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG59XG5cbi8qKlxuICogd2FsayBvYmplY3RzIGFuZCBhcnJheXNcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmpcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGl0ZXJhdG9yXG4gKiBAcGFyYW0ge09iamVjdH0gY29udGV4dFxuICovXG5mdW5jdGlvbiBlYWNoKG9iaiwgaXRlcmF0b3IsIGNvbnRleHQpIHtcbiAgICB2YXIgaTtcblxuICAgIGlmICghb2JqKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAob2JqLmZvckVhY2gpIHtcbiAgICAgICAgb2JqLmZvckVhY2goaXRlcmF0b3IsIGNvbnRleHQpO1xuICAgIH0gZWxzZSBpZiAob2JqLmxlbmd0aCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGkgPSAwO1xuICAgICAgICB3aGlsZSAoaSA8IG9iai5sZW5ndGgpIHtcbiAgICAgICAgICAgIGl0ZXJhdG9yLmNhbGwoY29udGV4dCwgb2JqW2ldLCBpLCBvYmopO1xuICAgICAgICAgICAgaSsrO1xuICAgICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgICAgZm9yIChpIGluIG9iaikge1xuICAgICAgICAgICAgb2JqLmhhc093blByb3BlcnR5KGkpICYmIGl0ZXJhdG9yLmNhbGwoY29udGV4dCwgb2JqW2ldLCBpLCBvYmopO1xuICAgICAgICB9XG4gICAgfVxufVxuXG4vKipcbiAqIHdyYXAgYSBtZXRob2Qgd2l0aCBhIGRlcHJlY2F0aW9uIHdhcm5pbmcgYW5kIHN0YWNrIHRyYWNlXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBtZXRob2RcbiAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lXG4gKiBAcGFyYW0ge1N0cmluZ30gbWVzc2FnZVxuICogQHJldHVybnMge0Z1bmN0aW9ufSBBIG5ldyBmdW5jdGlvbiB3cmFwcGluZyB0aGUgc3VwcGxpZWQgbWV0aG9kLlxuICovXG5mdW5jdGlvbiBkZXByZWNhdGUobWV0aG9kLCBuYW1lLCBtZXNzYWdlKSB7XG4gICAgdmFyIGRlcHJlY2F0aW9uTWVzc2FnZSA9ICdERVBSRUNBVEVEIE1FVEhPRDogJyArIG5hbWUgKyAnXFxuJyArIG1lc3NhZ2UgKyAnIEFUIFxcbic7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgZSA9IG5ldyBFcnJvcignZ2V0LXN0YWNrLXRyYWNlJyk7XG4gICAgICAgIHZhciBzdGFjayA9IGUgJiYgZS5zdGFjayA/IGUuc3RhY2sucmVwbGFjZSgvXlteXFwoXSs/W1xcbiRdL2dtLCAnJylcbiAgICAgICAgICAgIC5yZXBsYWNlKC9eXFxzK2F0XFxzKy9nbSwgJycpXG4gICAgICAgICAgICAucmVwbGFjZSgvXk9iamVjdC48YW5vbnltb3VzPlxccypcXCgvZ20sICd7YW5vbnltb3VzfSgpQCcpIDogJ1Vua25vd24gU3RhY2sgVHJhY2UnO1xuXG4gICAgICAgIHZhciBsb2cgPSB3aW5kb3cuY29uc29sZSAmJiAod2luZG93LmNvbnNvbGUud2FybiB8fCB3aW5kb3cuY29uc29sZS5sb2cpO1xuICAgICAgICBpZiAobG9nKSB7XG4gICAgICAgICAgICBsb2cuY2FsbCh3aW5kb3cuY29uc29sZSwgZGVwcmVjYXRpb25NZXNzYWdlLCBzdGFjayk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG1ldGhvZC5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIH07XG59XG5cbi8qKlxuICogZXh0ZW5kIG9iamVjdC5cbiAqIG1lYW5zIHRoYXQgcHJvcGVydGllcyBpbiBkZXN0IHdpbGwgYmUgb3ZlcndyaXR0ZW4gYnkgdGhlIG9uZXMgaW4gc3JjLlxuICogQHBhcmFtIHtPYmplY3R9IHRhcmdldFxuICogQHBhcmFtIHsuLi5PYmplY3R9IG9iamVjdHNfdG9fYXNzaWduXG4gKiBAcmV0dXJucyB7T2JqZWN0fSB0YXJnZXRcbiAqL1xudmFyIGFzc2lnbjtcbmlmICh0eXBlb2YgT2JqZWN0LmFzc2lnbiAhPT0gJ2Z1bmN0aW9uJykge1xuICAgIGFzc2lnbiA9IGZ1bmN0aW9uIGFzc2lnbih0YXJnZXQpIHtcbiAgICAgICAgaWYgKHRhcmdldCA9PT0gdW5kZWZpbmVkIHx8IHRhcmdldCA9PT0gbnVsbCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignQ2Fubm90IGNvbnZlcnQgdW5kZWZpbmVkIG9yIG51bGwgdG8gb2JqZWN0Jyk7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgb3V0cHV0ID0gT2JqZWN0KHRhcmdldCk7XG4gICAgICAgIGZvciAodmFyIGluZGV4ID0gMTsgaW5kZXggPCBhcmd1bWVudHMubGVuZ3RoOyBpbmRleCsrKSB7XG4gICAgICAgICAgICB2YXIgc291cmNlID0gYXJndW1lbnRzW2luZGV4XTtcbiAgICAgICAgICAgIGlmIChzb3VyY2UgIT09IHVuZGVmaW5lZCAmJiBzb3VyY2UgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBuZXh0S2V5IGluIHNvdXJjZSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoc291cmNlLmhhc093blByb3BlcnR5KG5leHRLZXkpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBvdXRwdXRbbmV4dEtleV0gPSBzb3VyY2VbbmV4dEtleV07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG91dHB1dDtcbiAgICB9O1xufSBlbHNlIHtcbiAgICBhc3NpZ24gPSBPYmplY3QuYXNzaWduO1xufVxuXG4vKipcbiAqIGV4dGVuZCBvYmplY3QuXG4gKiBtZWFucyB0aGF0IHByb3BlcnRpZXMgaW4gZGVzdCB3aWxsIGJlIG92ZXJ3cml0dGVuIGJ5IHRoZSBvbmVzIGluIHNyYy5cbiAqIEBwYXJhbSB7T2JqZWN0fSBkZXN0XG4gKiBAcGFyYW0ge09iamVjdH0gc3JjXG4gKiBAcGFyYW0ge0Jvb2xlYW59IFttZXJnZT1mYWxzZV1cbiAqIEByZXR1cm5zIHtPYmplY3R9IGRlc3RcbiAqL1xudmFyIGV4dGVuZCA9IGRlcHJlY2F0ZShmdW5jdGlvbiBleHRlbmQoZGVzdCwgc3JjLCBtZXJnZSkge1xuICAgIHZhciBrZXlzID0gT2JqZWN0LmtleXMoc3JjKTtcbiAgICB2YXIgaSA9IDA7XG4gICAgd2hpbGUgKGkgPCBrZXlzLmxlbmd0aCkge1xuICAgICAgICBpZiAoIW1lcmdlIHx8IChtZXJnZSAmJiBkZXN0W2tleXNbaV1dID09PSB1bmRlZmluZWQpKSB7XG4gICAgICAgICAgICBkZXN0W2tleXNbaV1dID0gc3JjW2tleXNbaV1dO1xuICAgICAgICB9XG4gICAgICAgIGkrKztcbiAgICB9XG4gICAgcmV0dXJuIGRlc3Q7XG59LCAnZXh0ZW5kJywgJ1VzZSBgYXNzaWduYC4nKTtcblxuLyoqXG4gKiBtZXJnZSB0aGUgdmFsdWVzIGZyb20gc3JjIGluIHRoZSBkZXN0LlxuICogbWVhbnMgdGhhdCBwcm9wZXJ0aWVzIHRoYXQgZXhpc3QgaW4gZGVzdCB3aWxsIG5vdCBiZSBvdmVyd3JpdHRlbiBieSBzcmNcbiAqIEBwYXJhbSB7T2JqZWN0fSBkZXN0XG4gKiBAcGFyYW0ge09iamVjdH0gc3JjXG4gKiBAcmV0dXJucyB7T2JqZWN0fSBkZXN0XG4gKi9cbnZhciBtZXJnZSA9IGRlcHJlY2F0ZShmdW5jdGlvbiBtZXJnZShkZXN0LCBzcmMpIHtcbiAgICByZXR1cm4gZXh0ZW5kKGRlc3QsIHNyYywgdHJ1ZSk7XG59LCAnbWVyZ2UnLCAnVXNlIGBhc3NpZ25gLicpO1xuXG4vKipcbiAqIHNpbXBsZSBjbGFzcyBpbmhlcml0YW5jZVxuICogQHBhcmFtIHtGdW5jdGlvbn0gY2hpbGRcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGJhc2VcbiAqIEBwYXJhbSB7T2JqZWN0fSBbcHJvcGVydGllc11cbiAqL1xuZnVuY3Rpb24gaW5oZXJpdChjaGlsZCwgYmFzZSwgcHJvcGVydGllcykge1xuICAgIHZhciBiYXNlUCA9IGJhc2UucHJvdG90eXBlLFxuICAgICAgICBjaGlsZFA7XG5cbiAgICBjaGlsZFAgPSBjaGlsZC5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKGJhc2VQKTtcbiAgICBjaGlsZFAuY29uc3RydWN0b3IgPSBjaGlsZDtcbiAgICBjaGlsZFAuX3N1cGVyID0gYmFzZVA7XG5cbiAgICBpZiAocHJvcGVydGllcykge1xuICAgICAgICBhc3NpZ24oY2hpbGRQLCBwcm9wZXJ0aWVzKTtcbiAgICB9XG59XG5cbi8qKlxuICogc2ltcGxlIGZ1bmN0aW9uIGJpbmRcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZuXG4gKiBAcGFyYW0ge09iamVjdH0gY29udGV4dFxuICogQHJldHVybnMge0Z1bmN0aW9ufVxuICovXG5mdW5jdGlvbiBiaW5kRm4oZm4sIGNvbnRleHQpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gYm91bmRGbigpIHtcbiAgICAgICAgcmV0dXJuIGZuLmFwcGx5KGNvbnRleHQsIGFyZ3VtZW50cyk7XG4gICAgfTtcbn1cblxuLyoqXG4gKiBsZXQgYSBib29sZWFuIHZhbHVlIGFsc28gYmUgYSBmdW5jdGlvbiB0aGF0IG11c3QgcmV0dXJuIGEgYm9vbGVhblxuICogdGhpcyBmaXJzdCBpdGVtIGluIGFyZ3Mgd2lsbCBiZSB1c2VkIGFzIHRoZSBjb250ZXh0XG4gKiBAcGFyYW0ge0Jvb2xlYW58RnVuY3Rpb259IHZhbFxuICogQHBhcmFtIHtBcnJheX0gW2FyZ3NdXG4gKiBAcmV0dXJucyB7Qm9vbGVhbn1cbiAqL1xuZnVuY3Rpb24gYm9vbE9yRm4odmFsLCBhcmdzKSB7XG4gICAgaWYgKHR5cGVvZiB2YWwgPT0gVFlQRV9GVU5DVElPTikge1xuICAgICAgICByZXR1cm4gdmFsLmFwcGx5KGFyZ3MgPyBhcmdzWzBdIHx8IHVuZGVmaW5lZCA6IHVuZGVmaW5lZCwgYXJncyk7XG4gICAgfVxuICAgIHJldHVybiB2YWw7XG59XG5cbi8qKlxuICogdXNlIHRoZSB2YWwyIHdoZW4gdmFsMSBpcyB1bmRlZmluZWRcbiAqIEBwYXJhbSB7Kn0gdmFsMVxuICogQHBhcmFtIHsqfSB2YWwyXG4gKiBAcmV0dXJucyB7Kn1cbiAqL1xuZnVuY3Rpb24gaWZVbmRlZmluZWQodmFsMSwgdmFsMikge1xuICAgIHJldHVybiAodmFsMSA9PT0gdW5kZWZpbmVkKSA/IHZhbDIgOiB2YWwxO1xufVxuXG4vKipcbiAqIGFkZEV2ZW50TGlzdGVuZXIgd2l0aCBtdWx0aXBsZSBldmVudHMgYXQgb25jZVxuICogQHBhcmFtIHtFdmVudFRhcmdldH0gdGFyZ2V0XG4gKiBAcGFyYW0ge1N0cmluZ30gdHlwZXNcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGhhbmRsZXJcbiAqL1xuZnVuY3Rpb24gYWRkRXZlbnRMaXN0ZW5lcnModGFyZ2V0LCB0eXBlcywgaGFuZGxlcikge1xuICAgIGVhY2goc3BsaXRTdHIodHlwZXMpLCBmdW5jdGlvbih0eXBlKSB7XG4gICAgICAgIHRhcmdldC5hZGRFdmVudExpc3RlbmVyKHR5cGUsIGhhbmRsZXIsIGZhbHNlKTtcbiAgICB9KTtcbn1cblxuLyoqXG4gKiByZW1vdmVFdmVudExpc3RlbmVyIHdpdGggbXVsdGlwbGUgZXZlbnRzIGF0IG9uY2VcbiAqIEBwYXJhbSB7RXZlbnRUYXJnZXR9IHRhcmdldFxuICogQHBhcmFtIHtTdHJpbmd9IHR5cGVzXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBoYW5kbGVyXG4gKi9cbmZ1bmN0aW9uIHJlbW92ZUV2ZW50TGlzdGVuZXJzKHRhcmdldCwgdHlwZXMsIGhhbmRsZXIpIHtcbiAgICBlYWNoKHNwbGl0U3RyKHR5cGVzKSwgZnVuY3Rpb24odHlwZSkge1xuICAgICAgICB0YXJnZXQucmVtb3ZlRXZlbnRMaXN0ZW5lcih0eXBlLCBoYW5kbGVyLCBmYWxzZSk7XG4gICAgfSk7XG59XG5cbi8qKlxuICogZmluZCBpZiBhIG5vZGUgaXMgaW4gdGhlIGdpdmVuIHBhcmVudFxuICogQG1ldGhvZCBoYXNQYXJlbnRcbiAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IG5vZGVcbiAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IHBhcmVudFxuICogQHJldHVybiB7Qm9vbGVhbn0gZm91bmRcbiAqL1xuZnVuY3Rpb24gaGFzUGFyZW50KG5vZGUsIHBhcmVudCkge1xuICAgIHdoaWxlIChub2RlKSB7XG4gICAgICAgIGlmIChub2RlID09IHBhcmVudCkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgbm9kZSA9IG5vZGUucGFyZW50Tm9kZTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xufVxuXG4vKipcbiAqIHNtYWxsIGluZGV4T2Ygd3JhcHBlclxuICogQHBhcmFtIHtTdHJpbmd9IHN0clxuICogQHBhcmFtIHtTdHJpbmd9IGZpbmRcbiAqIEByZXR1cm5zIHtCb29sZWFufSBmb3VuZFxuICovXG5mdW5jdGlvbiBpblN0cihzdHIsIGZpbmQpIHtcbiAgICByZXR1cm4gc3RyLmluZGV4T2YoZmluZCkgPiAtMTtcbn1cblxuLyoqXG4gKiBzcGxpdCBzdHJpbmcgb24gd2hpdGVzcGFjZVxuICogQHBhcmFtIHtTdHJpbmd9IHN0clxuICogQHJldHVybnMge0FycmF5fSB3b3Jkc1xuICovXG5mdW5jdGlvbiBzcGxpdFN0cihzdHIpIHtcbiAgICByZXR1cm4gc3RyLnRyaW0oKS5zcGxpdCgvXFxzKy9nKTtcbn1cblxuLyoqXG4gKiBmaW5kIGlmIGEgYXJyYXkgY29udGFpbnMgdGhlIG9iamVjdCB1c2luZyBpbmRleE9mIG9yIGEgc2ltcGxlIHBvbHlGaWxsXG4gKiBAcGFyYW0ge0FycmF5fSBzcmNcbiAqIEBwYXJhbSB7U3RyaW5nfSBmaW5kXG4gKiBAcGFyYW0ge1N0cmluZ30gW2ZpbmRCeUtleV1cbiAqIEByZXR1cm4ge0Jvb2xlYW58TnVtYmVyfSBmYWxzZSB3aGVuIG5vdCBmb3VuZCwgb3IgdGhlIGluZGV4XG4gKi9cbmZ1bmN0aW9uIGluQXJyYXkoc3JjLCBmaW5kLCBmaW5kQnlLZXkpIHtcbiAgICBpZiAoc3JjLmluZGV4T2YgJiYgIWZpbmRCeUtleSkge1xuICAgICAgICByZXR1cm4gc3JjLmluZGV4T2YoZmluZCk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIGkgPSAwO1xuICAgICAgICB3aGlsZSAoaSA8IHNyYy5sZW5ndGgpIHtcbiAgICAgICAgICAgIGlmICgoZmluZEJ5S2V5ICYmIHNyY1tpXVtmaW5kQnlLZXldID09IGZpbmQpIHx8ICghZmluZEJ5S2V5ICYmIHNyY1tpXSA9PT0gZmluZCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gaTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGkrKztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gLTE7XG4gICAgfVxufVxuXG4vKipcbiAqIGNvbnZlcnQgYXJyYXktbGlrZSBvYmplY3RzIHRvIHJlYWwgYXJyYXlzXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqXG4gKiBAcmV0dXJucyB7QXJyYXl9XG4gKi9cbmZ1bmN0aW9uIHRvQXJyYXkob2JqKSB7XG4gICAgcmV0dXJuIEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKG9iaiwgMCk7XG59XG5cbi8qKlxuICogdW5pcXVlIGFycmF5IHdpdGggb2JqZWN0cyBiYXNlZCBvbiBhIGtleSAobGlrZSAnaWQnKSBvciBqdXN0IGJ5IHRoZSBhcnJheSdzIHZhbHVlXG4gKiBAcGFyYW0ge0FycmF5fSBzcmMgW3tpZDoxfSx7aWQ6Mn0se2lkOjF9XVxuICogQHBhcmFtIHtTdHJpbmd9IFtrZXldXG4gKiBAcGFyYW0ge0Jvb2xlYW59IFtzb3J0PUZhbHNlXVxuICogQHJldHVybnMge0FycmF5fSBbe2lkOjF9LHtpZDoyfV1cbiAqL1xuZnVuY3Rpb24gdW5pcXVlQXJyYXkoc3JjLCBrZXksIHNvcnQpIHtcbiAgICB2YXIgcmVzdWx0cyA9IFtdO1xuICAgIHZhciB2YWx1ZXMgPSBbXTtcbiAgICB2YXIgaSA9IDA7XG5cbiAgICB3aGlsZSAoaSA8IHNyYy5sZW5ndGgpIHtcbiAgICAgICAgdmFyIHZhbCA9IGtleSA/IHNyY1tpXVtrZXldIDogc3JjW2ldO1xuICAgICAgICBpZiAoaW5BcnJheSh2YWx1ZXMsIHZhbCkgPCAwKSB7XG4gICAgICAgICAgICByZXN1bHRzLnB1c2goc3JjW2ldKTtcbiAgICAgICAgfVxuICAgICAgICB2YWx1ZXNbaV0gPSB2YWw7XG4gICAgICAgIGkrKztcbiAgICB9XG5cbiAgICBpZiAoc29ydCkge1xuICAgICAgICBpZiAoIWtleSkge1xuICAgICAgICAgICAgcmVzdWx0cyA9IHJlc3VsdHMuc29ydCgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmVzdWx0cyA9IHJlc3VsdHMuc29ydChmdW5jdGlvbiBzb3J0VW5pcXVlQXJyYXkoYSwgYikge1xuICAgICAgICAgICAgICAgIHJldHVybiBhW2tleV0gPiBiW2tleV07XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiByZXN1bHRzO1xufVxuXG4vKipcbiAqIGdldCB0aGUgcHJlZml4ZWQgcHJvcGVydHlcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmpcbiAqIEBwYXJhbSB7U3RyaW5nfSBwcm9wZXJ0eVxuICogQHJldHVybnMge1N0cmluZ3xVbmRlZmluZWR9IHByZWZpeGVkXG4gKi9cbmZ1bmN0aW9uIHByZWZpeGVkKG9iaiwgcHJvcGVydHkpIHtcbiAgICB2YXIgcHJlZml4LCBwcm9wO1xuICAgIHZhciBjYW1lbFByb3AgPSBwcm9wZXJ0eVswXS50b1VwcGVyQ2FzZSgpICsgcHJvcGVydHkuc2xpY2UoMSk7XG5cbiAgICB2YXIgaSA9IDA7XG4gICAgd2hpbGUgKGkgPCBWRU5ET1JfUFJFRklYRVMubGVuZ3RoKSB7XG4gICAgICAgIHByZWZpeCA9IFZFTkRPUl9QUkVGSVhFU1tpXTtcbiAgICAgICAgcHJvcCA9IChwcmVmaXgpID8gcHJlZml4ICsgY2FtZWxQcm9wIDogcHJvcGVydHk7XG5cbiAgICAgICAgaWYgKHByb3AgaW4gb2JqKSB7XG4gICAgICAgICAgICByZXR1cm4gcHJvcDtcbiAgICAgICAgfVxuICAgICAgICBpKys7XG4gICAgfVxuICAgIHJldHVybiB1bmRlZmluZWQ7XG59XG5cbi8qKlxuICogZ2V0IGEgdW5pcXVlIGlkXG4gKiBAcmV0dXJucyB7bnVtYmVyfSB1bmlxdWVJZFxuICovXG52YXIgX3VuaXF1ZUlkID0gMTtcbmZ1bmN0aW9uIHVuaXF1ZUlkKCkge1xuICAgIHJldHVybiBfdW5pcXVlSWQrKztcbn1cblxuLyoqXG4gKiBnZXQgdGhlIHdpbmRvdyBvYmplY3Qgb2YgYW4gZWxlbWVudFxuICogQHBhcmFtIHtIVE1MRWxlbWVudH0gZWxlbWVudFxuICogQHJldHVybnMge0RvY3VtZW50Vmlld3xXaW5kb3d9XG4gKi9cbmZ1bmN0aW9uIGdldFdpbmRvd0ZvckVsZW1lbnQoZWxlbWVudCkge1xuICAgIHZhciBkb2MgPSBlbGVtZW50Lm93bmVyRG9jdW1lbnQgfHwgZWxlbWVudDtcbiAgICByZXR1cm4gKGRvYy5kZWZhdWx0VmlldyB8fCBkb2MucGFyZW50V2luZG93IHx8IHdpbmRvdyk7XG59XG5cbnZhciBNT0JJTEVfUkVHRVggPSAvbW9iaWxlfHRhYmxldHxpcChhZHxob25lfG9kKXxhbmRyb2lkL2k7XG5cbnZhciBTVVBQT1JUX1RPVUNIID0gKCdvbnRvdWNoc3RhcnQnIGluIHdpbmRvdyk7XG52YXIgU1VQUE9SVF9QT0lOVEVSX0VWRU5UUyA9IHByZWZpeGVkKHdpbmRvdywgJ1BvaW50ZXJFdmVudCcpICE9PSB1bmRlZmluZWQ7XG52YXIgU1VQUE9SVF9PTkxZX1RPVUNIID0gU1VQUE9SVF9UT1VDSCAmJiBNT0JJTEVfUkVHRVgudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KTtcblxudmFyIElOUFVUX1RZUEVfVE9VQ0ggPSAndG91Y2gnO1xudmFyIElOUFVUX1RZUEVfUEVOID0gJ3Blbic7XG52YXIgSU5QVVRfVFlQRV9NT1VTRSA9ICdtb3VzZSc7XG52YXIgSU5QVVRfVFlQRV9LSU5FQ1QgPSAna2luZWN0JztcblxudmFyIENPTVBVVEVfSU5URVJWQUwgPSAyNTtcblxudmFyIElOUFVUX1NUQVJUID0gMTtcbnZhciBJTlBVVF9NT1ZFID0gMjtcbnZhciBJTlBVVF9FTkQgPSA0O1xudmFyIElOUFVUX0NBTkNFTCA9IDg7XG5cbnZhciBESVJFQ1RJT05fTk9ORSA9IDE7XG52YXIgRElSRUNUSU9OX0xFRlQgPSAyO1xudmFyIERJUkVDVElPTl9SSUdIVCA9IDQ7XG52YXIgRElSRUNUSU9OX1VQID0gODtcbnZhciBESVJFQ1RJT05fRE9XTiA9IDE2O1xuXG52YXIgRElSRUNUSU9OX0hPUklaT05UQUwgPSBESVJFQ1RJT05fTEVGVCB8IERJUkVDVElPTl9SSUdIVDtcbnZhciBESVJFQ1RJT05fVkVSVElDQUwgPSBESVJFQ1RJT05fVVAgfCBESVJFQ1RJT05fRE9XTjtcbnZhciBESVJFQ1RJT05fQUxMID0gRElSRUNUSU9OX0hPUklaT05UQUwgfCBESVJFQ1RJT05fVkVSVElDQUw7XG5cbnZhciBQUk9QU19YWSA9IFsneCcsICd5J107XG52YXIgUFJPUFNfQ0xJRU5UX1hZID0gWydjbGllbnRYJywgJ2NsaWVudFknXTtcblxuLyoqXG4gKiBjcmVhdGUgbmV3IGlucHV0IHR5cGUgbWFuYWdlclxuICogQHBhcmFtIHtNYW5hZ2VyfSBtYW5hZ2VyXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFja1xuICogQHJldHVybnMge0lucHV0fVxuICogQGNvbnN0cnVjdG9yXG4gKi9cbmZ1bmN0aW9uIElucHV0KG1hbmFnZXIsIGNhbGxiYWNrKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHRoaXMubWFuYWdlciA9IG1hbmFnZXI7XG4gICAgdGhpcy5jYWxsYmFjayA9IGNhbGxiYWNrO1xuICAgIHRoaXMuZWxlbWVudCA9IG1hbmFnZXIuZWxlbWVudDtcbiAgICB0aGlzLnRhcmdldCA9IG1hbmFnZXIub3B0aW9ucy5pbnB1dFRhcmdldDtcblxuICAgIC8vIHNtYWxsZXIgd3JhcHBlciBhcm91bmQgdGhlIGhhbmRsZXIsIGZvciB0aGUgc2NvcGUgYW5kIHRoZSBlbmFibGVkIHN0YXRlIG9mIHRoZSBtYW5hZ2VyLFxuICAgIC8vIHNvIHdoZW4gZGlzYWJsZWQgdGhlIGlucHV0IGV2ZW50cyBhcmUgY29tcGxldGVseSBieXBhc3NlZC5cbiAgICB0aGlzLmRvbUhhbmRsZXIgPSBmdW5jdGlvbihldikge1xuICAgICAgICBpZiAoYm9vbE9yRm4obWFuYWdlci5vcHRpb25zLmVuYWJsZSwgW21hbmFnZXJdKSkge1xuICAgICAgICAgICAgc2VsZi5oYW5kbGVyKGV2KTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICB0aGlzLmluaXQoKTtcblxufVxuXG5JbnB1dC5wcm90b3R5cGUgPSB7XG4gICAgLyoqXG4gICAgICogc2hvdWxkIGhhbmRsZSB0aGUgaW5wdXRFdmVudCBkYXRhIGFuZCB0cmlnZ2VyIHRoZSBjYWxsYmFja1xuICAgICAqIEB2aXJ0dWFsXG4gICAgICovXG4gICAgaGFuZGxlcjogZnVuY3Rpb24oKSB7IH0sXG5cbiAgICAvKipcbiAgICAgKiBiaW5kIHRoZSBldmVudHNcbiAgICAgKi9cbiAgICBpbml0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgdGhpcy5ldkVsICYmIGFkZEV2ZW50TGlzdGVuZXJzKHRoaXMuZWxlbWVudCwgdGhpcy5ldkVsLCB0aGlzLmRvbUhhbmRsZXIpO1xuICAgICAgICB0aGlzLmV2VGFyZ2V0ICYmIGFkZEV2ZW50TGlzdGVuZXJzKHRoaXMudGFyZ2V0LCB0aGlzLmV2VGFyZ2V0LCB0aGlzLmRvbUhhbmRsZXIpO1xuICAgICAgICB0aGlzLmV2V2luICYmIGFkZEV2ZW50TGlzdGVuZXJzKGdldFdpbmRvd0ZvckVsZW1lbnQodGhpcy5lbGVtZW50KSwgdGhpcy5ldldpbiwgdGhpcy5kb21IYW5kbGVyKTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogdW5iaW5kIHRoZSBldmVudHNcbiAgICAgKi9cbiAgICBkZXN0cm95OiBmdW5jdGlvbigpIHtcbiAgICAgICAgdGhpcy5ldkVsICYmIHJlbW92ZUV2ZW50TGlzdGVuZXJzKHRoaXMuZWxlbWVudCwgdGhpcy5ldkVsLCB0aGlzLmRvbUhhbmRsZXIpO1xuICAgICAgICB0aGlzLmV2VGFyZ2V0ICYmIHJlbW92ZUV2ZW50TGlzdGVuZXJzKHRoaXMudGFyZ2V0LCB0aGlzLmV2VGFyZ2V0LCB0aGlzLmRvbUhhbmRsZXIpO1xuICAgICAgICB0aGlzLmV2V2luICYmIHJlbW92ZUV2ZW50TGlzdGVuZXJzKGdldFdpbmRvd0ZvckVsZW1lbnQodGhpcy5lbGVtZW50KSwgdGhpcy5ldldpbiwgdGhpcy5kb21IYW5kbGVyKTtcbiAgICB9XG59O1xuXG4vKipcbiAqIGNyZWF0ZSBuZXcgaW5wdXQgdHlwZSBtYW5hZ2VyXG4gKiBjYWxsZWQgYnkgdGhlIE1hbmFnZXIgY29uc3RydWN0b3JcbiAqIEBwYXJhbSB7SGFtbWVyfSBtYW5hZ2VyXG4gKiBAcmV0dXJucyB7SW5wdXR9XG4gKi9cbmZ1bmN0aW9uIGNyZWF0ZUlucHV0SW5zdGFuY2UobWFuYWdlcikge1xuICAgIHZhciBUeXBlO1xuICAgIHZhciBpbnB1dENsYXNzID0gbWFuYWdlci5vcHRpb25zLmlucHV0Q2xhc3M7XG5cbiAgICBpZiAoaW5wdXRDbGFzcykge1xuICAgICAgICBUeXBlID0gaW5wdXRDbGFzcztcbiAgICB9IGVsc2UgaWYgKFNVUFBPUlRfUE9JTlRFUl9FVkVOVFMpIHtcbiAgICAgICAgVHlwZSA9IFBvaW50ZXJFdmVudElucHV0O1xuICAgIH0gZWxzZSBpZiAoU1VQUE9SVF9PTkxZX1RPVUNIKSB7XG4gICAgICAgIFR5cGUgPSBUb3VjaElucHV0O1xuICAgIH0gZWxzZSBpZiAoIVNVUFBPUlRfVE9VQ0gpIHtcbiAgICAgICAgVHlwZSA9IE1vdXNlSW5wdXQ7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgVHlwZSA9IFRvdWNoTW91c2VJbnB1dDtcbiAgICB9XG4gICAgcmV0dXJuIG5ldyAoVHlwZSkobWFuYWdlciwgaW5wdXRIYW5kbGVyKTtcbn1cblxuLyoqXG4gKiBoYW5kbGUgaW5wdXQgZXZlbnRzXG4gKiBAcGFyYW0ge01hbmFnZXJ9IG1hbmFnZXJcbiAqIEBwYXJhbSB7U3RyaW5nfSBldmVudFR5cGVcbiAqIEBwYXJhbSB7T2JqZWN0fSBpbnB1dFxuICovXG5mdW5jdGlvbiBpbnB1dEhhbmRsZXIobWFuYWdlciwgZXZlbnRUeXBlLCBpbnB1dCkge1xuICAgIHZhciBwb2ludGVyc0xlbiA9IGlucHV0LnBvaW50ZXJzLmxlbmd0aDtcbiAgICB2YXIgY2hhbmdlZFBvaW50ZXJzTGVuID0gaW5wdXQuY2hhbmdlZFBvaW50ZXJzLmxlbmd0aDtcbiAgICB2YXIgaXNGaXJzdCA9IChldmVudFR5cGUgJiBJTlBVVF9TVEFSVCAmJiAocG9pbnRlcnNMZW4gLSBjaGFuZ2VkUG9pbnRlcnNMZW4gPT09IDApKTtcbiAgICB2YXIgaXNGaW5hbCA9IChldmVudFR5cGUgJiAoSU5QVVRfRU5EIHwgSU5QVVRfQ0FOQ0VMKSAmJiAocG9pbnRlcnNMZW4gLSBjaGFuZ2VkUG9pbnRlcnNMZW4gPT09IDApKTtcblxuICAgIGlucHV0LmlzRmlyc3QgPSAhIWlzRmlyc3Q7XG4gICAgaW5wdXQuaXNGaW5hbCA9ICEhaXNGaW5hbDtcblxuICAgIGlmIChpc0ZpcnN0KSB7XG4gICAgICAgIG1hbmFnZXIuc2Vzc2lvbiA9IHt9O1xuICAgIH1cblxuICAgIC8vIHNvdXJjZSBldmVudCBpcyB0aGUgbm9ybWFsaXplZCB2YWx1ZSBvZiB0aGUgZG9tRXZlbnRzXG4gICAgLy8gbGlrZSAndG91Y2hzdGFydCwgbW91c2V1cCwgcG9pbnRlcmRvd24nXG4gICAgaW5wdXQuZXZlbnRUeXBlID0gZXZlbnRUeXBlO1xuXG4gICAgLy8gY29tcHV0ZSBzY2FsZSwgcm90YXRpb24gZXRjXG4gICAgY29tcHV0ZUlucHV0RGF0YShtYW5hZ2VyLCBpbnB1dCk7XG5cbiAgICAvLyBlbWl0IHNlY3JldCBldmVudFxuICAgIG1hbmFnZXIuZW1pdCgnaGFtbWVyLmlucHV0JywgaW5wdXQpO1xuXG4gICAgbWFuYWdlci5yZWNvZ25pemUoaW5wdXQpO1xuICAgIG1hbmFnZXIuc2Vzc2lvbi5wcmV2SW5wdXQgPSBpbnB1dDtcbn1cblxuLyoqXG4gKiBleHRlbmQgdGhlIGRhdGEgd2l0aCBzb21lIHVzYWJsZSBwcm9wZXJ0aWVzIGxpa2Ugc2NhbGUsIHJvdGF0ZSwgdmVsb2NpdHkgZXRjXG4gKiBAcGFyYW0ge09iamVjdH0gbWFuYWdlclxuICogQHBhcmFtIHtPYmplY3R9IGlucHV0XG4gKi9cbmZ1bmN0aW9uIGNvbXB1dGVJbnB1dERhdGEobWFuYWdlciwgaW5wdXQpIHtcbiAgICB2YXIgc2Vzc2lvbiA9IG1hbmFnZXIuc2Vzc2lvbjtcbiAgICB2YXIgcG9pbnRlcnMgPSBpbnB1dC5wb2ludGVycztcbiAgICB2YXIgcG9pbnRlcnNMZW5ndGggPSBwb2ludGVycy5sZW5ndGg7XG5cbiAgICAvLyBzdG9yZSB0aGUgZmlyc3QgaW5wdXQgdG8gY2FsY3VsYXRlIHRoZSBkaXN0YW5jZSBhbmQgZGlyZWN0aW9uXG4gICAgaWYgKCFzZXNzaW9uLmZpcnN0SW5wdXQpIHtcbiAgICAgICAgc2Vzc2lvbi5maXJzdElucHV0ID0gc2ltcGxlQ2xvbmVJbnB1dERhdGEoaW5wdXQpO1xuICAgIH1cblxuICAgIC8vIHRvIGNvbXB1dGUgc2NhbGUgYW5kIHJvdGF0aW9uIHdlIG5lZWQgdG8gc3RvcmUgdGhlIG11bHRpcGxlIHRvdWNoZXNcbiAgICBpZiAocG9pbnRlcnNMZW5ndGggPiAxICYmICFzZXNzaW9uLmZpcnN0TXVsdGlwbGUpIHtcbiAgICAgICAgc2Vzc2lvbi5maXJzdE11bHRpcGxlID0gc2ltcGxlQ2xvbmVJbnB1dERhdGEoaW5wdXQpO1xuICAgIH0gZWxzZSBpZiAocG9pbnRlcnNMZW5ndGggPT09IDEpIHtcbiAgICAgICAgc2Vzc2lvbi5maXJzdE11bHRpcGxlID0gZmFsc2U7XG4gICAgfVxuXG4gICAgdmFyIGZpcnN0SW5wdXQgPSBzZXNzaW9uLmZpcnN0SW5wdXQ7XG4gICAgdmFyIGZpcnN0TXVsdGlwbGUgPSBzZXNzaW9uLmZpcnN0TXVsdGlwbGU7XG4gICAgdmFyIG9mZnNldENlbnRlciA9IGZpcnN0TXVsdGlwbGUgPyBmaXJzdE11bHRpcGxlLmNlbnRlciA6IGZpcnN0SW5wdXQuY2VudGVyO1xuXG4gICAgdmFyIGNlbnRlciA9IGlucHV0LmNlbnRlciA9IGdldENlbnRlcihwb2ludGVycyk7XG4gICAgaW5wdXQudGltZVN0YW1wID0gbm93KCk7XG4gICAgaW5wdXQuZGVsdGFUaW1lID0gaW5wdXQudGltZVN0YW1wIC0gZmlyc3RJbnB1dC50aW1lU3RhbXA7XG5cbiAgICBpbnB1dC5hbmdsZSA9IGdldEFuZ2xlKG9mZnNldENlbnRlciwgY2VudGVyKTtcbiAgICBpbnB1dC5kaXN0YW5jZSA9IGdldERpc3RhbmNlKG9mZnNldENlbnRlciwgY2VudGVyKTtcblxuICAgIGNvbXB1dGVEZWx0YVhZKHNlc3Npb24sIGlucHV0KTtcbiAgICBpbnB1dC5vZmZzZXREaXJlY3Rpb24gPSBnZXREaXJlY3Rpb24oaW5wdXQuZGVsdGFYLCBpbnB1dC5kZWx0YVkpO1xuXG4gICAgdmFyIG92ZXJhbGxWZWxvY2l0eSA9IGdldFZlbG9jaXR5KGlucHV0LmRlbHRhVGltZSwgaW5wdXQuZGVsdGFYLCBpbnB1dC5kZWx0YVkpO1xuICAgIGlucHV0Lm92ZXJhbGxWZWxvY2l0eVggPSBvdmVyYWxsVmVsb2NpdHkueDtcbiAgICBpbnB1dC5vdmVyYWxsVmVsb2NpdHlZID0gb3ZlcmFsbFZlbG9jaXR5Lnk7XG4gICAgaW5wdXQub3ZlcmFsbFZlbG9jaXR5ID0gKGFicyhvdmVyYWxsVmVsb2NpdHkueCkgPiBhYnMob3ZlcmFsbFZlbG9jaXR5LnkpKSA/IG92ZXJhbGxWZWxvY2l0eS54IDogb3ZlcmFsbFZlbG9jaXR5Lnk7XG5cbiAgICBpbnB1dC5zY2FsZSA9IGZpcnN0TXVsdGlwbGUgPyBnZXRTY2FsZShmaXJzdE11bHRpcGxlLnBvaW50ZXJzLCBwb2ludGVycykgOiAxO1xuICAgIGlucHV0LnJvdGF0aW9uID0gZmlyc3RNdWx0aXBsZSA/IGdldFJvdGF0aW9uKGZpcnN0TXVsdGlwbGUucG9pbnRlcnMsIHBvaW50ZXJzKSA6IDA7XG5cbiAgICBpbnB1dC5tYXhQb2ludGVycyA9ICFzZXNzaW9uLnByZXZJbnB1dCA/IGlucHV0LnBvaW50ZXJzLmxlbmd0aCA6ICgoaW5wdXQucG9pbnRlcnMubGVuZ3RoID5cbiAgICAgICAgc2Vzc2lvbi5wcmV2SW5wdXQubWF4UG9pbnRlcnMpID8gaW5wdXQucG9pbnRlcnMubGVuZ3RoIDogc2Vzc2lvbi5wcmV2SW5wdXQubWF4UG9pbnRlcnMpO1xuXG4gICAgY29tcHV0ZUludGVydmFsSW5wdXREYXRhKHNlc3Npb24sIGlucHV0KTtcblxuICAgIC8vIGZpbmQgdGhlIGNvcnJlY3QgdGFyZ2V0XG4gICAgdmFyIHRhcmdldCA9IG1hbmFnZXIuZWxlbWVudDtcbiAgICBpZiAoaGFzUGFyZW50KGlucHV0LnNyY0V2ZW50LnRhcmdldCwgdGFyZ2V0KSkge1xuICAgICAgICB0YXJnZXQgPSBpbnB1dC5zcmNFdmVudC50YXJnZXQ7XG4gICAgfVxuICAgIGlucHV0LnRhcmdldCA9IHRhcmdldDtcbn1cblxuZnVuY3Rpb24gY29tcHV0ZURlbHRhWFkoc2Vzc2lvbiwgaW5wdXQpIHtcbiAgICB2YXIgY2VudGVyID0gaW5wdXQuY2VudGVyO1xuICAgIHZhciBvZmZzZXQgPSBzZXNzaW9uLm9mZnNldERlbHRhIHx8IHt9O1xuICAgIHZhciBwcmV2RGVsdGEgPSBzZXNzaW9uLnByZXZEZWx0YSB8fCB7fTtcbiAgICB2YXIgcHJldklucHV0ID0gc2Vzc2lvbi5wcmV2SW5wdXQgfHwge307XG5cbiAgICBpZiAoaW5wdXQuZXZlbnRUeXBlID09PSBJTlBVVF9TVEFSVCB8fCBwcmV2SW5wdXQuZXZlbnRUeXBlID09PSBJTlBVVF9FTkQpIHtcbiAgICAgICAgcHJldkRlbHRhID0gc2Vzc2lvbi5wcmV2RGVsdGEgPSB7XG4gICAgICAgICAgICB4OiBwcmV2SW5wdXQuZGVsdGFYIHx8IDAsXG4gICAgICAgICAgICB5OiBwcmV2SW5wdXQuZGVsdGFZIHx8IDBcbiAgICAgICAgfTtcblxuICAgICAgICBvZmZzZXQgPSBzZXNzaW9uLm9mZnNldERlbHRhID0ge1xuICAgICAgICAgICAgeDogY2VudGVyLngsXG4gICAgICAgICAgICB5OiBjZW50ZXIueVxuICAgICAgICB9O1xuICAgIH1cblxuICAgIGlucHV0LmRlbHRhWCA9IHByZXZEZWx0YS54ICsgKGNlbnRlci54IC0gb2Zmc2V0LngpO1xuICAgIGlucHV0LmRlbHRhWSA9IHByZXZEZWx0YS55ICsgKGNlbnRlci55IC0gb2Zmc2V0LnkpO1xufVxuXG4vKipcbiAqIHZlbG9jaXR5IGlzIGNhbGN1bGF0ZWQgZXZlcnkgeCBtc1xuICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb25cbiAqIEBwYXJhbSB7T2JqZWN0fSBpbnB1dFxuICovXG5mdW5jdGlvbiBjb21wdXRlSW50ZXJ2YWxJbnB1dERhdGEoc2Vzc2lvbiwgaW5wdXQpIHtcbiAgICB2YXIgbGFzdCA9IHNlc3Npb24ubGFzdEludGVydmFsIHx8IGlucHV0LFxuICAgICAgICBkZWx0YVRpbWUgPSBpbnB1dC50aW1lU3RhbXAgLSBsYXN0LnRpbWVTdGFtcCxcbiAgICAgICAgdmVsb2NpdHksIHZlbG9jaXR5WCwgdmVsb2NpdHlZLCBkaXJlY3Rpb247XG5cbiAgICBpZiAoaW5wdXQuZXZlbnRUeXBlICE9IElOUFVUX0NBTkNFTCAmJiAoZGVsdGFUaW1lID4gQ09NUFVURV9JTlRFUlZBTCB8fCBsYXN0LnZlbG9jaXR5ID09PSB1bmRlZmluZWQpKSB7XG4gICAgICAgIHZhciBkZWx0YVggPSBpbnB1dC5kZWx0YVggLSBsYXN0LmRlbHRhWDtcbiAgICAgICAgdmFyIGRlbHRhWSA9IGlucHV0LmRlbHRhWSAtIGxhc3QuZGVsdGFZO1xuXG4gICAgICAgIHZhciB2ID0gZ2V0VmVsb2NpdHkoZGVsdGFUaW1lLCBkZWx0YVgsIGRlbHRhWSk7XG4gICAgICAgIHZlbG9jaXR5WCA9IHYueDtcbiAgICAgICAgdmVsb2NpdHlZID0gdi55O1xuICAgICAgICB2ZWxvY2l0eSA9IChhYnModi54KSA+IGFicyh2LnkpKSA/IHYueCA6IHYueTtcbiAgICAgICAgZGlyZWN0aW9uID0gZ2V0RGlyZWN0aW9uKGRlbHRhWCwgZGVsdGFZKTtcblxuICAgICAgICBzZXNzaW9uLmxhc3RJbnRlcnZhbCA9IGlucHV0O1xuICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIHVzZSBsYXRlc3QgdmVsb2NpdHkgaW5mbyBpZiBpdCBkb2Vzbid0IG92ZXJ0YWtlIGEgbWluaW11bSBwZXJpb2RcbiAgICAgICAgdmVsb2NpdHkgPSBsYXN0LnZlbG9jaXR5O1xuICAgICAgICB2ZWxvY2l0eVggPSBsYXN0LnZlbG9jaXR5WDtcbiAgICAgICAgdmVsb2NpdHlZID0gbGFzdC52ZWxvY2l0eVk7XG4gICAgICAgIGRpcmVjdGlvbiA9IGxhc3QuZGlyZWN0aW9uO1xuICAgIH1cblxuICAgIGlucHV0LnZlbG9jaXR5ID0gdmVsb2NpdHk7XG4gICAgaW5wdXQudmVsb2NpdHlYID0gdmVsb2NpdHlYO1xuICAgIGlucHV0LnZlbG9jaXR5WSA9IHZlbG9jaXR5WTtcbiAgICBpbnB1dC5kaXJlY3Rpb24gPSBkaXJlY3Rpb247XG59XG5cbi8qKlxuICogY3JlYXRlIGEgc2ltcGxlIGNsb25lIGZyb20gdGhlIGlucHV0IHVzZWQgZm9yIHN0b3JhZ2Ugb2YgZmlyc3RJbnB1dCBhbmQgZmlyc3RNdWx0aXBsZVxuICogQHBhcmFtIHtPYmplY3R9IGlucHV0XG4gKiBAcmV0dXJucyB7T2JqZWN0fSBjbG9uZWRJbnB1dERhdGFcbiAqL1xuZnVuY3Rpb24gc2ltcGxlQ2xvbmVJbnB1dERhdGEoaW5wdXQpIHtcbiAgICAvLyBtYWtlIGEgc2ltcGxlIGNvcHkgb2YgdGhlIHBvaW50ZXJzIGJlY2F1c2Ugd2Ugd2lsbCBnZXQgYSByZWZlcmVuY2UgaWYgd2UgZG9uJ3RcbiAgICAvLyB3ZSBvbmx5IG5lZWQgY2xpZW50WFkgZm9yIHRoZSBjYWxjdWxhdGlvbnNcbiAgICB2YXIgcG9pbnRlcnMgPSBbXTtcbiAgICB2YXIgaSA9IDA7XG4gICAgd2hpbGUgKGkgPCBpbnB1dC5wb2ludGVycy5sZW5ndGgpIHtcbiAgICAgICAgcG9pbnRlcnNbaV0gPSB7XG4gICAgICAgICAgICBjbGllbnRYOiByb3VuZChpbnB1dC5wb2ludGVyc1tpXS5jbGllbnRYKSxcbiAgICAgICAgICAgIGNsaWVudFk6IHJvdW5kKGlucHV0LnBvaW50ZXJzW2ldLmNsaWVudFkpXG4gICAgICAgIH07XG4gICAgICAgIGkrKztcbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgICB0aW1lU3RhbXA6IG5vdygpLFxuICAgICAgICBwb2ludGVyczogcG9pbnRlcnMsXG4gICAgICAgIGNlbnRlcjogZ2V0Q2VudGVyKHBvaW50ZXJzKSxcbiAgICAgICAgZGVsdGFYOiBpbnB1dC5kZWx0YVgsXG4gICAgICAgIGRlbHRhWTogaW5wdXQuZGVsdGFZXG4gICAgfTtcbn1cblxuLyoqXG4gKiBnZXQgdGhlIGNlbnRlciBvZiBhbGwgdGhlIHBvaW50ZXJzXG4gKiBAcGFyYW0ge0FycmF5fSBwb2ludGVyc1xuICogQHJldHVybiB7T2JqZWN0fSBjZW50ZXIgY29udGFpbnMgYHhgIGFuZCBgeWAgcHJvcGVydGllc1xuICovXG5mdW5jdGlvbiBnZXRDZW50ZXIocG9pbnRlcnMpIHtcbiAgICB2YXIgcG9pbnRlcnNMZW5ndGggPSBwb2ludGVycy5sZW5ndGg7XG5cbiAgICAvLyBubyBuZWVkIHRvIGxvb3Agd2hlbiBvbmx5IG9uZSB0b3VjaFxuICAgIGlmIChwb2ludGVyc0xlbmd0aCA9PT0gMSkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgeDogcm91bmQocG9pbnRlcnNbMF0uY2xpZW50WCksXG4gICAgICAgICAgICB5OiByb3VuZChwb2ludGVyc1swXS5jbGllbnRZKVxuICAgICAgICB9O1xuICAgIH1cblxuICAgIHZhciB4ID0gMCwgeSA9IDAsIGkgPSAwO1xuICAgIHdoaWxlIChpIDwgcG9pbnRlcnNMZW5ndGgpIHtcbiAgICAgICAgeCArPSBwb2ludGVyc1tpXS5jbGllbnRYO1xuICAgICAgICB5ICs9IHBvaW50ZXJzW2ldLmNsaWVudFk7XG4gICAgICAgIGkrKztcbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgICB4OiByb3VuZCh4IC8gcG9pbnRlcnNMZW5ndGgpLFxuICAgICAgICB5OiByb3VuZCh5IC8gcG9pbnRlcnNMZW5ndGgpXG4gICAgfTtcbn1cblxuLyoqXG4gKiBjYWxjdWxhdGUgdGhlIHZlbG9jaXR5IGJldHdlZW4gdHdvIHBvaW50cy4gdW5pdCBpcyBpbiBweCBwZXIgbXMuXG4gKiBAcGFyYW0ge051bWJlcn0gZGVsdGFUaW1lXG4gKiBAcGFyYW0ge051bWJlcn0geFxuICogQHBhcmFtIHtOdW1iZXJ9IHlcbiAqIEByZXR1cm4ge09iamVjdH0gdmVsb2NpdHkgYHhgIGFuZCBgeWBcbiAqL1xuZnVuY3Rpb24gZ2V0VmVsb2NpdHkoZGVsdGFUaW1lLCB4LCB5KSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgeDogeCAvIGRlbHRhVGltZSB8fCAwLFxuICAgICAgICB5OiB5IC8gZGVsdGFUaW1lIHx8IDBcbiAgICB9O1xufVxuXG4vKipcbiAqIGdldCB0aGUgZGlyZWN0aW9uIGJldHdlZW4gdHdvIHBvaW50c1xuICogQHBhcmFtIHtOdW1iZXJ9IHhcbiAqIEBwYXJhbSB7TnVtYmVyfSB5XG4gKiBAcmV0dXJuIHtOdW1iZXJ9IGRpcmVjdGlvblxuICovXG5mdW5jdGlvbiBnZXREaXJlY3Rpb24oeCwgeSkge1xuICAgIGlmICh4ID09PSB5KSB7XG4gICAgICAgIHJldHVybiBESVJFQ1RJT05fTk9ORTtcbiAgICB9XG5cbiAgICBpZiAoYWJzKHgpID49IGFicyh5KSkge1xuICAgICAgICByZXR1cm4geCA8IDAgPyBESVJFQ1RJT05fTEVGVCA6IERJUkVDVElPTl9SSUdIVDtcbiAgICB9XG4gICAgcmV0dXJuIHkgPCAwID8gRElSRUNUSU9OX1VQIDogRElSRUNUSU9OX0RPV047XG59XG5cbi8qKlxuICogY2FsY3VsYXRlIHRoZSBhYnNvbHV0ZSBkaXN0YW5jZSBiZXR3ZWVuIHR3byBwb2ludHNcbiAqIEBwYXJhbSB7T2JqZWN0fSBwMSB7eCwgeX1cbiAqIEBwYXJhbSB7T2JqZWN0fSBwMiB7eCwgeX1cbiAqIEBwYXJhbSB7QXJyYXl9IFtwcm9wc10gY29udGFpbmluZyB4IGFuZCB5IGtleXNcbiAqIEByZXR1cm4ge051bWJlcn0gZGlzdGFuY2VcbiAqL1xuZnVuY3Rpb24gZ2V0RGlzdGFuY2UocDEsIHAyLCBwcm9wcykge1xuICAgIGlmICghcHJvcHMpIHtcbiAgICAgICAgcHJvcHMgPSBQUk9QU19YWTtcbiAgICB9XG4gICAgdmFyIHggPSBwMltwcm9wc1swXV0gLSBwMVtwcm9wc1swXV0sXG4gICAgICAgIHkgPSBwMltwcm9wc1sxXV0gLSBwMVtwcm9wc1sxXV07XG5cbiAgICByZXR1cm4gTWF0aC5zcXJ0KCh4ICogeCkgKyAoeSAqIHkpKTtcbn1cblxuLyoqXG4gKiBjYWxjdWxhdGUgdGhlIGFuZ2xlIGJldHdlZW4gdHdvIGNvb3JkaW5hdGVzXG4gKiBAcGFyYW0ge09iamVjdH0gcDFcbiAqIEBwYXJhbSB7T2JqZWN0fSBwMlxuICogQHBhcmFtIHtBcnJheX0gW3Byb3BzXSBjb250YWluaW5nIHggYW5kIHkga2V5c1xuICogQHJldHVybiB7TnVtYmVyfSBhbmdsZVxuICovXG5mdW5jdGlvbiBnZXRBbmdsZShwMSwgcDIsIHByb3BzKSB7XG4gICAgaWYgKCFwcm9wcykge1xuICAgICAgICBwcm9wcyA9IFBST1BTX1hZO1xuICAgIH1cbiAgICB2YXIgeCA9IHAyW3Byb3BzWzBdXSAtIHAxW3Byb3BzWzBdXSxcbiAgICAgICAgeSA9IHAyW3Byb3BzWzFdXSAtIHAxW3Byb3BzWzFdXTtcbiAgICByZXR1cm4gTWF0aC5hdGFuMih5LCB4KSAqIDE4MCAvIE1hdGguUEk7XG59XG5cbi8qKlxuICogY2FsY3VsYXRlIHRoZSByb3RhdGlvbiBkZWdyZWVzIGJldHdlZW4gdHdvIHBvaW50ZXJzZXRzXG4gKiBAcGFyYW0ge0FycmF5fSBzdGFydCBhcnJheSBvZiBwb2ludGVyc1xuICogQHBhcmFtIHtBcnJheX0gZW5kIGFycmF5IG9mIHBvaW50ZXJzXG4gKiBAcmV0dXJuIHtOdW1iZXJ9IHJvdGF0aW9uXG4gKi9cbmZ1bmN0aW9uIGdldFJvdGF0aW9uKHN0YXJ0LCBlbmQpIHtcbiAgICByZXR1cm4gZ2V0QW5nbGUoZW5kWzFdLCBlbmRbMF0sIFBST1BTX0NMSUVOVF9YWSkgKyBnZXRBbmdsZShzdGFydFsxXSwgc3RhcnRbMF0sIFBST1BTX0NMSUVOVF9YWSk7XG59XG5cbi8qKlxuICogY2FsY3VsYXRlIHRoZSBzY2FsZSBmYWN0b3IgYmV0d2VlbiB0d28gcG9pbnRlcnNldHNcbiAqIG5vIHNjYWxlIGlzIDEsIGFuZCBnb2VzIGRvd24gdG8gMCB3aGVuIHBpbmNoZWQgdG9nZXRoZXIsIGFuZCBiaWdnZXIgd2hlbiBwaW5jaGVkIG91dFxuICogQHBhcmFtIHtBcnJheX0gc3RhcnQgYXJyYXkgb2YgcG9pbnRlcnNcbiAqIEBwYXJhbSB7QXJyYXl9IGVuZCBhcnJheSBvZiBwb2ludGVyc1xuICogQHJldHVybiB7TnVtYmVyfSBzY2FsZVxuICovXG5mdW5jdGlvbiBnZXRTY2FsZShzdGFydCwgZW5kKSB7XG4gICAgcmV0dXJuIGdldERpc3RhbmNlKGVuZFswXSwgZW5kWzFdLCBQUk9QU19DTElFTlRfWFkpIC8gZ2V0RGlzdGFuY2Uoc3RhcnRbMF0sIHN0YXJ0WzFdLCBQUk9QU19DTElFTlRfWFkpO1xufVxuXG52YXIgTU9VU0VfSU5QVVRfTUFQID0ge1xuICAgIG1vdXNlZG93bjogSU5QVVRfU1RBUlQsXG4gICAgbW91c2Vtb3ZlOiBJTlBVVF9NT1ZFLFxuICAgIG1vdXNldXA6IElOUFVUX0VORFxufTtcblxudmFyIE1PVVNFX0VMRU1FTlRfRVZFTlRTID0gJ21vdXNlZG93bic7XG52YXIgTU9VU0VfV0lORE9XX0VWRU5UUyA9ICdtb3VzZW1vdmUgbW91c2V1cCc7XG5cbi8qKlxuICogTW91c2UgZXZlbnRzIGlucHV0XG4gKiBAY29uc3RydWN0b3JcbiAqIEBleHRlbmRzIElucHV0XG4gKi9cbmZ1bmN0aW9uIE1vdXNlSW5wdXQoKSB7XG4gICAgdGhpcy5ldkVsID0gTU9VU0VfRUxFTUVOVF9FVkVOVFM7XG4gICAgdGhpcy5ldldpbiA9IE1PVVNFX1dJTkRPV19FVkVOVFM7XG5cbiAgICB0aGlzLnByZXNzZWQgPSBmYWxzZTsgLy8gbW91c2Vkb3duIHN0YXRlXG5cbiAgICBJbnB1dC5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xufVxuXG5pbmhlcml0KE1vdXNlSW5wdXQsIElucHV0LCB7XG4gICAgLyoqXG4gICAgICogaGFuZGxlIG1vdXNlIGV2ZW50c1xuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBldlxuICAgICAqL1xuICAgIGhhbmRsZXI6IGZ1bmN0aW9uIE1FaGFuZGxlcihldikge1xuICAgICAgICB2YXIgZXZlbnRUeXBlID0gTU9VU0VfSU5QVVRfTUFQW2V2LnR5cGVdO1xuXG4gICAgICAgIC8vIG9uIHN0YXJ0IHdlIHdhbnQgdG8gaGF2ZSB0aGUgbGVmdCBtb3VzZSBidXR0b24gZG93blxuICAgICAgICBpZiAoZXZlbnRUeXBlICYgSU5QVVRfU1RBUlQgJiYgZXYuYnV0dG9uID09PSAwKSB7XG4gICAgICAgICAgICB0aGlzLnByZXNzZWQgPSB0cnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGV2ZW50VHlwZSAmIElOUFVUX01PVkUgJiYgZXYud2hpY2ggIT09IDEpIHtcbiAgICAgICAgICAgIGV2ZW50VHlwZSA9IElOUFVUX0VORDtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIG1vdXNlIG11c3QgYmUgZG93blxuICAgICAgICBpZiAoIXRoaXMucHJlc3NlZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGV2ZW50VHlwZSAmIElOUFVUX0VORCkge1xuICAgICAgICAgICAgdGhpcy5wcmVzc2VkID0gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmNhbGxiYWNrKHRoaXMubWFuYWdlciwgZXZlbnRUeXBlLCB7XG4gICAgICAgICAgICBwb2ludGVyczogW2V2XSxcbiAgICAgICAgICAgIGNoYW5nZWRQb2ludGVyczogW2V2XSxcbiAgICAgICAgICAgIHBvaW50ZXJUeXBlOiBJTlBVVF9UWVBFX01PVVNFLFxuICAgICAgICAgICAgc3JjRXZlbnQ6IGV2XG4gICAgICAgIH0pO1xuICAgIH1cbn0pO1xuXG52YXIgUE9JTlRFUl9JTlBVVF9NQVAgPSB7XG4gICAgcG9pbnRlcmRvd246IElOUFVUX1NUQVJULFxuICAgIHBvaW50ZXJtb3ZlOiBJTlBVVF9NT1ZFLFxuICAgIHBvaW50ZXJ1cDogSU5QVVRfRU5ELFxuICAgIHBvaW50ZXJjYW5jZWw6IElOUFVUX0NBTkNFTCxcbiAgICBwb2ludGVyb3V0OiBJTlBVVF9DQU5DRUxcbn07XG5cbi8vIGluIElFMTAgdGhlIHBvaW50ZXIgdHlwZXMgaXMgZGVmaW5lZCBhcyBhbiBlbnVtXG52YXIgSUUxMF9QT0lOVEVSX1RZUEVfRU5VTSA9IHtcbiAgICAyOiBJTlBVVF9UWVBFX1RPVUNILFxuICAgIDM6IElOUFVUX1RZUEVfUEVOLFxuICAgIDQ6IElOUFVUX1RZUEVfTU9VU0UsXG4gICAgNTogSU5QVVRfVFlQRV9LSU5FQ1QgLy8gc2VlIGh0dHBzOi8vdHdpdHRlci5jb20vamFjb2Jyb3NzaS9zdGF0dXMvNDgwNTk2NDM4NDg5ODkwODE2XG59O1xuXG52YXIgUE9JTlRFUl9FTEVNRU5UX0VWRU5UUyA9ICdwb2ludGVyZG93bic7XG52YXIgUE9JTlRFUl9XSU5ET1dfRVZFTlRTID0gJ3BvaW50ZXJtb3ZlIHBvaW50ZXJ1cCBwb2ludGVyY2FuY2VsJztcblxuLy8gSUUxMCBoYXMgcHJlZml4ZWQgc3VwcG9ydCwgYW5kIGNhc2Utc2Vuc2l0aXZlXG5pZiAod2luZG93Lk1TUG9pbnRlckV2ZW50ICYmICF3aW5kb3cuUG9pbnRlckV2ZW50KSB7XG4gICAgUE9JTlRFUl9FTEVNRU5UX0VWRU5UUyA9ICdNU1BvaW50ZXJEb3duJztcbiAgICBQT0lOVEVSX1dJTkRPV19FVkVOVFMgPSAnTVNQb2ludGVyTW92ZSBNU1BvaW50ZXJVcCBNU1BvaW50ZXJDYW5jZWwnO1xufVxuXG4vKipcbiAqIFBvaW50ZXIgZXZlbnRzIGlucHV0XG4gKiBAY29uc3RydWN0b3JcbiAqIEBleHRlbmRzIElucHV0XG4gKi9cbmZ1bmN0aW9uIFBvaW50ZXJFdmVudElucHV0KCkge1xuICAgIHRoaXMuZXZFbCA9IFBPSU5URVJfRUxFTUVOVF9FVkVOVFM7XG4gICAgdGhpcy5ldldpbiA9IFBPSU5URVJfV0lORE9XX0VWRU5UUztcblxuICAgIElucHV0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG5cbiAgICB0aGlzLnN0b3JlID0gKHRoaXMubWFuYWdlci5zZXNzaW9uLnBvaW50ZXJFdmVudHMgPSBbXSk7XG59XG5cbmluaGVyaXQoUG9pbnRlckV2ZW50SW5wdXQsIElucHV0LCB7XG4gICAgLyoqXG4gICAgICogaGFuZGxlIG1vdXNlIGV2ZW50c1xuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBldlxuICAgICAqL1xuICAgIGhhbmRsZXI6IGZ1bmN0aW9uIFBFaGFuZGxlcihldikge1xuICAgICAgICB2YXIgc3RvcmUgPSB0aGlzLnN0b3JlO1xuICAgICAgICB2YXIgcmVtb3ZlUG9pbnRlciA9IGZhbHNlO1xuXG4gICAgICAgIHZhciBldmVudFR5cGVOb3JtYWxpemVkID0gZXYudHlwZS50b0xvd2VyQ2FzZSgpLnJlcGxhY2UoJ21zJywgJycpO1xuICAgICAgICB2YXIgZXZlbnRUeXBlID0gUE9JTlRFUl9JTlBVVF9NQVBbZXZlbnRUeXBlTm9ybWFsaXplZF07XG4gICAgICAgIHZhciBwb2ludGVyVHlwZSA9IElFMTBfUE9JTlRFUl9UWVBFX0VOVU1bZXYucG9pbnRlclR5cGVdIHx8IGV2LnBvaW50ZXJUeXBlO1xuXG4gICAgICAgIHZhciBpc1RvdWNoID0gKHBvaW50ZXJUeXBlID09IElOUFVUX1RZUEVfVE9VQ0gpO1xuXG4gICAgICAgIC8vIGdldCBpbmRleCBvZiB0aGUgZXZlbnQgaW4gdGhlIHN0b3JlXG4gICAgICAgIHZhciBzdG9yZUluZGV4ID0gaW5BcnJheShzdG9yZSwgZXYucG9pbnRlcklkLCAncG9pbnRlcklkJyk7XG5cbiAgICAgICAgLy8gc3RhcnQgYW5kIG1vdXNlIG11c3QgYmUgZG93blxuICAgICAgICBpZiAoZXZlbnRUeXBlICYgSU5QVVRfU1RBUlQgJiYgKGV2LmJ1dHRvbiA9PT0gMCB8fCBpc1RvdWNoKSkge1xuICAgICAgICAgICAgaWYgKHN0b3JlSW5kZXggPCAwKSB7XG4gICAgICAgICAgICAgICAgc3RvcmUucHVzaChldik7XG4gICAgICAgICAgICAgICAgc3RvcmVJbmRleCA9IHN0b3JlLmxlbmd0aCAtIDE7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAoZXZlbnRUeXBlICYgKElOUFVUX0VORCB8IElOUFVUX0NBTkNFTCkpIHtcbiAgICAgICAgICAgIHJlbW92ZVBvaW50ZXIgPSB0cnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gaXQgbm90IGZvdW5kLCBzbyB0aGUgcG9pbnRlciBoYXNuJ3QgYmVlbiBkb3duIChzbyBpdCdzIHByb2JhYmx5IGEgaG92ZXIpXG4gICAgICAgIGlmIChzdG9yZUluZGV4IDwgMCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gdXBkYXRlIHRoZSBldmVudCBpbiB0aGUgc3RvcmVcbiAgICAgICAgc3RvcmVbc3RvcmVJbmRleF0gPSBldjtcblxuICAgICAgICB0aGlzLmNhbGxiYWNrKHRoaXMubWFuYWdlciwgZXZlbnRUeXBlLCB7XG4gICAgICAgICAgICBwb2ludGVyczogc3RvcmUsXG4gICAgICAgICAgICBjaGFuZ2VkUG9pbnRlcnM6IFtldl0sXG4gICAgICAgICAgICBwb2ludGVyVHlwZTogcG9pbnRlclR5cGUsXG4gICAgICAgICAgICBzcmNFdmVudDogZXZcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaWYgKHJlbW92ZVBvaW50ZXIpIHtcbiAgICAgICAgICAgIC8vIHJlbW92ZSBmcm9tIHRoZSBzdG9yZVxuICAgICAgICAgICAgc3RvcmUuc3BsaWNlKHN0b3JlSW5kZXgsIDEpO1xuICAgICAgICB9XG4gICAgfVxufSk7XG5cbnZhciBTSU5HTEVfVE9VQ0hfSU5QVVRfTUFQID0ge1xuICAgIHRvdWNoc3RhcnQ6IElOUFVUX1NUQVJULFxuICAgIHRvdWNobW92ZTogSU5QVVRfTU9WRSxcbiAgICB0b3VjaGVuZDogSU5QVVRfRU5ELFxuICAgIHRvdWNoY2FuY2VsOiBJTlBVVF9DQU5DRUxcbn07XG5cbnZhciBTSU5HTEVfVE9VQ0hfVEFSR0VUX0VWRU5UUyA9ICd0b3VjaHN0YXJ0JztcbnZhciBTSU5HTEVfVE9VQ0hfV0lORE9XX0VWRU5UUyA9ICd0b3VjaHN0YXJ0IHRvdWNobW92ZSB0b3VjaGVuZCB0b3VjaGNhbmNlbCc7XG5cbi8qKlxuICogVG91Y2ggZXZlbnRzIGlucHV0XG4gKiBAY29uc3RydWN0b3JcbiAqIEBleHRlbmRzIElucHV0XG4gKi9cbmZ1bmN0aW9uIFNpbmdsZVRvdWNoSW5wdXQoKSB7XG4gICAgdGhpcy5ldlRhcmdldCA9IFNJTkdMRV9UT1VDSF9UQVJHRVRfRVZFTlRTO1xuICAgIHRoaXMuZXZXaW4gPSBTSU5HTEVfVE9VQ0hfV0lORE9XX0VWRU5UUztcbiAgICB0aGlzLnN0YXJ0ZWQgPSBmYWxzZTtcblxuICAgIElucHV0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG59XG5cbmluaGVyaXQoU2luZ2xlVG91Y2hJbnB1dCwgSW5wdXQsIHtcbiAgICBoYW5kbGVyOiBmdW5jdGlvbiBURWhhbmRsZXIoZXYpIHtcbiAgICAgICAgdmFyIHR5cGUgPSBTSU5HTEVfVE9VQ0hfSU5QVVRfTUFQW2V2LnR5cGVdO1xuXG4gICAgICAgIC8vIHNob3VsZCB3ZSBoYW5kbGUgdGhlIHRvdWNoIGV2ZW50cz9cbiAgICAgICAgaWYgKHR5cGUgPT09IElOUFVUX1NUQVJUKSB7XG4gICAgICAgICAgICB0aGlzLnN0YXJ0ZWQgPSB0cnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCF0aGlzLnN0YXJ0ZWQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciB0b3VjaGVzID0gbm9ybWFsaXplU2luZ2xlVG91Y2hlcy5jYWxsKHRoaXMsIGV2LCB0eXBlKTtcblxuICAgICAgICAvLyB3aGVuIGRvbmUsIHJlc2V0IHRoZSBzdGFydGVkIHN0YXRlXG4gICAgICAgIGlmICh0eXBlICYgKElOUFVUX0VORCB8IElOUFVUX0NBTkNFTCkgJiYgdG91Y2hlc1swXS5sZW5ndGggLSB0b3VjaGVzWzFdLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgdGhpcy5zdGFydGVkID0gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmNhbGxiYWNrKHRoaXMubWFuYWdlciwgdHlwZSwge1xuICAgICAgICAgICAgcG9pbnRlcnM6IHRvdWNoZXNbMF0sXG4gICAgICAgICAgICBjaGFuZ2VkUG9pbnRlcnM6IHRvdWNoZXNbMV0sXG4gICAgICAgICAgICBwb2ludGVyVHlwZTogSU5QVVRfVFlQRV9UT1VDSCxcbiAgICAgICAgICAgIHNyY0V2ZW50OiBldlxuICAgICAgICB9KTtcbiAgICB9XG59KTtcblxuLyoqXG4gKiBAdGhpcyB7VG91Y2hJbnB1dH1cbiAqIEBwYXJhbSB7T2JqZWN0fSBldlxuICogQHBhcmFtIHtOdW1iZXJ9IHR5cGUgZmxhZ1xuICogQHJldHVybnMge3VuZGVmaW5lZHxBcnJheX0gW2FsbCwgY2hhbmdlZF1cbiAqL1xuZnVuY3Rpb24gbm9ybWFsaXplU2luZ2xlVG91Y2hlcyhldiwgdHlwZSkge1xuICAgIHZhciBhbGwgPSB0b0FycmF5KGV2LnRvdWNoZXMpO1xuICAgIHZhciBjaGFuZ2VkID0gdG9BcnJheShldi5jaGFuZ2VkVG91Y2hlcyk7XG5cbiAgICBpZiAodHlwZSAmIChJTlBVVF9FTkQgfCBJTlBVVF9DQU5DRUwpKSB7XG4gICAgICAgIGFsbCA9IHVuaXF1ZUFycmF5KGFsbC5jb25jYXQoY2hhbmdlZCksICdpZGVudGlmaWVyJywgdHJ1ZSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIFthbGwsIGNoYW5nZWRdO1xufVxuXG52YXIgVE9VQ0hfSU5QVVRfTUFQID0ge1xuICAgIHRvdWNoc3RhcnQ6IElOUFVUX1NUQVJULFxuICAgIHRvdWNobW92ZTogSU5QVVRfTU9WRSxcbiAgICB0b3VjaGVuZDogSU5QVVRfRU5ELFxuICAgIHRvdWNoY2FuY2VsOiBJTlBVVF9DQU5DRUxcbn07XG5cbnZhciBUT1VDSF9UQVJHRVRfRVZFTlRTID0gJ3RvdWNoc3RhcnQgdG91Y2htb3ZlIHRvdWNoZW5kIHRvdWNoY2FuY2VsJztcblxuLyoqXG4gKiBNdWx0aS11c2VyIHRvdWNoIGV2ZW50cyBpbnB1dFxuICogQGNvbnN0cnVjdG9yXG4gKiBAZXh0ZW5kcyBJbnB1dFxuICovXG5mdW5jdGlvbiBUb3VjaElucHV0KCkge1xuICAgIHRoaXMuZXZUYXJnZXQgPSBUT1VDSF9UQVJHRVRfRVZFTlRTO1xuICAgIHRoaXMudGFyZ2V0SWRzID0ge307XG5cbiAgICBJbnB1dC5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xufVxuXG5pbmhlcml0KFRvdWNoSW5wdXQsIElucHV0LCB7XG4gICAgaGFuZGxlcjogZnVuY3Rpb24gTVRFaGFuZGxlcihldikge1xuICAgICAgICB2YXIgdHlwZSA9IFRPVUNIX0lOUFVUX01BUFtldi50eXBlXTtcbiAgICAgICAgdmFyIHRvdWNoZXMgPSBnZXRUb3VjaGVzLmNhbGwodGhpcywgZXYsIHR5cGUpO1xuICAgICAgICBpZiAoIXRvdWNoZXMpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuY2FsbGJhY2sodGhpcy5tYW5hZ2VyLCB0eXBlLCB7XG4gICAgICAgICAgICBwb2ludGVyczogdG91Y2hlc1swXSxcbiAgICAgICAgICAgIGNoYW5nZWRQb2ludGVyczogdG91Y2hlc1sxXSxcbiAgICAgICAgICAgIHBvaW50ZXJUeXBlOiBJTlBVVF9UWVBFX1RPVUNILFxuICAgICAgICAgICAgc3JjRXZlbnQ6IGV2XG4gICAgICAgIH0pO1xuICAgIH1cbn0pO1xuXG4vKipcbiAqIEB0aGlzIHtUb3VjaElucHV0fVxuICogQHBhcmFtIHtPYmplY3R9IGV2XG4gKiBAcGFyYW0ge051bWJlcn0gdHlwZSBmbGFnXG4gKiBAcmV0dXJucyB7dW5kZWZpbmVkfEFycmF5fSBbYWxsLCBjaGFuZ2VkXVxuICovXG5mdW5jdGlvbiBnZXRUb3VjaGVzKGV2LCB0eXBlKSB7XG4gICAgdmFyIGFsbFRvdWNoZXMgPSB0b0FycmF5KGV2LnRvdWNoZXMpO1xuICAgIHZhciB0YXJnZXRJZHMgPSB0aGlzLnRhcmdldElkcztcblxuICAgIC8vIHdoZW4gdGhlcmUgaXMgb25seSBvbmUgdG91Y2gsIHRoZSBwcm9jZXNzIGNhbiBiZSBzaW1wbGlmaWVkXG4gICAgaWYgKHR5cGUgJiAoSU5QVVRfU1RBUlQgfCBJTlBVVF9NT1ZFKSAmJiBhbGxUb3VjaGVzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICB0YXJnZXRJZHNbYWxsVG91Y2hlc1swXS5pZGVudGlmaWVyXSA9IHRydWU7XG4gICAgICAgIHJldHVybiBbYWxsVG91Y2hlcywgYWxsVG91Y2hlc107XG4gICAgfVxuXG4gICAgdmFyIGksXG4gICAgICAgIHRhcmdldFRvdWNoZXMsXG4gICAgICAgIGNoYW5nZWRUb3VjaGVzID0gdG9BcnJheShldi5jaGFuZ2VkVG91Y2hlcyksXG4gICAgICAgIGNoYW5nZWRUYXJnZXRUb3VjaGVzID0gW10sXG4gICAgICAgIHRhcmdldCA9IHRoaXMudGFyZ2V0O1xuXG4gICAgLy8gZ2V0IHRhcmdldCB0b3VjaGVzIGZyb20gdG91Y2hlc1xuICAgIHRhcmdldFRvdWNoZXMgPSBhbGxUb3VjaGVzLmZpbHRlcihmdW5jdGlvbih0b3VjaCkge1xuICAgICAgICByZXR1cm4gaGFzUGFyZW50KHRvdWNoLnRhcmdldCwgdGFyZ2V0KTtcbiAgICB9KTtcblxuICAgIC8vIGNvbGxlY3QgdG91Y2hlc1xuICAgIGlmICh0eXBlID09PSBJTlBVVF9TVEFSVCkge1xuICAgICAgICBpID0gMDtcbiAgICAgICAgd2hpbGUgKGkgPCB0YXJnZXRUb3VjaGVzLmxlbmd0aCkge1xuICAgICAgICAgICAgdGFyZ2V0SWRzW3RhcmdldFRvdWNoZXNbaV0uaWRlbnRpZmllcl0gPSB0cnVlO1xuICAgICAgICAgICAgaSsrO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8gZmlsdGVyIGNoYW5nZWQgdG91Y2hlcyB0byBvbmx5IGNvbnRhaW4gdG91Y2hlcyB0aGF0IGV4aXN0IGluIHRoZSBjb2xsZWN0ZWQgdGFyZ2V0IGlkc1xuICAgIGkgPSAwO1xuICAgIHdoaWxlIChpIDwgY2hhbmdlZFRvdWNoZXMubGVuZ3RoKSB7XG4gICAgICAgIGlmICh0YXJnZXRJZHNbY2hhbmdlZFRvdWNoZXNbaV0uaWRlbnRpZmllcl0pIHtcbiAgICAgICAgICAgIGNoYW5nZWRUYXJnZXRUb3VjaGVzLnB1c2goY2hhbmdlZFRvdWNoZXNbaV0pO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gY2xlYW51cCByZW1vdmVkIHRvdWNoZXNcbiAgICAgICAgaWYgKHR5cGUgJiAoSU5QVVRfRU5EIHwgSU5QVVRfQ0FOQ0VMKSkge1xuICAgICAgICAgICAgZGVsZXRlIHRhcmdldElkc1tjaGFuZ2VkVG91Y2hlc1tpXS5pZGVudGlmaWVyXTtcbiAgICAgICAgfVxuICAgICAgICBpKys7XG4gICAgfVxuXG4gICAgaWYgKCFjaGFuZ2VkVGFyZ2V0VG91Y2hlcy5sZW5ndGgpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHJldHVybiBbXG4gICAgICAgIC8vIG1lcmdlIHRhcmdldFRvdWNoZXMgd2l0aCBjaGFuZ2VkVGFyZ2V0VG91Y2hlcyBzbyBpdCBjb250YWlucyBBTEwgdG91Y2hlcywgaW5jbHVkaW5nICdlbmQnIGFuZCAnY2FuY2VsJ1xuICAgICAgICB1bmlxdWVBcnJheSh0YXJnZXRUb3VjaGVzLmNvbmNhdChjaGFuZ2VkVGFyZ2V0VG91Y2hlcyksICdpZGVudGlmaWVyJywgdHJ1ZSksXG4gICAgICAgIGNoYW5nZWRUYXJnZXRUb3VjaGVzXG4gICAgXTtcbn1cblxuLyoqXG4gKiBDb21iaW5lZCB0b3VjaCBhbmQgbW91c2UgaW5wdXRcbiAqXG4gKiBUb3VjaCBoYXMgYSBoaWdoZXIgcHJpb3JpdHkgdGhlbiBtb3VzZSwgYW5kIHdoaWxlIHRvdWNoaW5nIG5vIG1vdXNlIGV2ZW50cyBhcmUgYWxsb3dlZC5cbiAqIFRoaXMgYmVjYXVzZSB0b3VjaCBkZXZpY2VzIGFsc28gZW1pdCBtb3VzZSBldmVudHMgd2hpbGUgZG9pbmcgYSB0b3VjaC5cbiAqXG4gKiBAY29uc3RydWN0b3JcbiAqIEBleHRlbmRzIElucHV0XG4gKi9cblxudmFyIERFRFVQX1RJTUVPVVQgPSAyNTAwO1xudmFyIERFRFVQX0RJU1RBTkNFID0gMjU7XG5cbmZ1bmN0aW9uIFRvdWNoTW91c2VJbnB1dCgpIHtcbiAgICBJbnB1dC5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuXG4gICAgdmFyIGhhbmRsZXIgPSBiaW5kRm4odGhpcy5oYW5kbGVyLCB0aGlzKTtcbiAgICB0aGlzLnRvdWNoID0gbmV3IFRvdWNoSW5wdXQodGhpcy5tYW5hZ2VyLCBoYW5kbGVyKTtcbiAgICB0aGlzLm1vdXNlID0gbmV3IE1vdXNlSW5wdXQodGhpcy5tYW5hZ2VyLCBoYW5kbGVyKTtcblxuICAgIHRoaXMucHJpbWFyeVRvdWNoID0gbnVsbDtcbiAgICB0aGlzLmxhc3RUb3VjaGVzID0gW107XG59XG5cbmluaGVyaXQoVG91Y2hNb3VzZUlucHV0LCBJbnB1dCwge1xuICAgIC8qKlxuICAgICAqIGhhbmRsZSBtb3VzZSBhbmQgdG91Y2ggZXZlbnRzXG4gICAgICogQHBhcmFtIHtIYW1tZXJ9IG1hbmFnZXJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gaW5wdXRFdmVudFxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBpbnB1dERhdGFcbiAgICAgKi9cbiAgICBoYW5kbGVyOiBmdW5jdGlvbiBUTUVoYW5kbGVyKG1hbmFnZXIsIGlucHV0RXZlbnQsIGlucHV0RGF0YSkge1xuICAgICAgICB2YXIgaXNUb3VjaCA9IChpbnB1dERhdGEucG9pbnRlclR5cGUgPT0gSU5QVVRfVFlQRV9UT1VDSCksXG4gICAgICAgICAgICBpc01vdXNlID0gKGlucHV0RGF0YS5wb2ludGVyVHlwZSA9PSBJTlBVVF9UWVBFX01PVVNFKTtcblxuICAgICAgICBpZiAoaXNNb3VzZSAmJiBpbnB1dERhdGEuc291cmNlQ2FwYWJpbGl0aWVzICYmIGlucHV0RGF0YS5zb3VyY2VDYXBhYmlsaXRpZXMuZmlyZXNUb3VjaEV2ZW50cykge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gd2hlbiB3ZSdyZSBpbiBhIHRvdWNoIGV2ZW50LCByZWNvcmQgdG91Y2hlcyB0byAgZGUtZHVwZSBzeW50aGV0aWMgbW91c2UgZXZlbnRcbiAgICAgICAgaWYgKGlzVG91Y2gpIHtcbiAgICAgICAgICAgIHJlY29yZFRvdWNoZXMuY2FsbCh0aGlzLCBpbnB1dEV2ZW50LCBpbnB1dERhdGEpO1xuICAgICAgICB9IGVsc2UgaWYgKGlzTW91c2UgJiYgaXNTeW50aGV0aWNFdmVudC5jYWxsKHRoaXMsIGlucHV0RGF0YSkpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuY2FsbGJhY2sobWFuYWdlciwgaW5wdXRFdmVudCwgaW5wdXREYXRhKTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogcmVtb3ZlIHRoZSBldmVudCBsaXN0ZW5lcnNcbiAgICAgKi9cbiAgICBkZXN0cm95OiBmdW5jdGlvbiBkZXN0cm95KCkge1xuICAgICAgICB0aGlzLnRvdWNoLmRlc3Ryb3koKTtcbiAgICAgICAgdGhpcy5tb3VzZS5kZXN0cm95KCk7XG4gICAgfVxufSk7XG5cbmZ1bmN0aW9uIHJlY29yZFRvdWNoZXMoZXZlbnRUeXBlLCBldmVudERhdGEpIHtcbiAgICBpZiAoZXZlbnRUeXBlICYgSU5QVVRfU1RBUlQpIHtcbiAgICAgICAgdGhpcy5wcmltYXJ5VG91Y2ggPSBldmVudERhdGEuY2hhbmdlZFBvaW50ZXJzWzBdLmlkZW50aWZpZXI7XG4gICAgICAgIHNldExhc3RUb3VjaC5jYWxsKHRoaXMsIGV2ZW50RGF0YSk7XG4gICAgfSBlbHNlIGlmIChldmVudFR5cGUgJiAoSU5QVVRfRU5EIHwgSU5QVVRfQ0FOQ0VMKSkge1xuICAgICAgICBzZXRMYXN0VG91Y2guY2FsbCh0aGlzLCBldmVudERhdGEpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gc2V0TGFzdFRvdWNoKGV2ZW50RGF0YSkge1xuICAgIHZhciB0b3VjaCA9IGV2ZW50RGF0YS5jaGFuZ2VkUG9pbnRlcnNbMF07XG5cbiAgICBpZiAodG91Y2guaWRlbnRpZmllciA9PT0gdGhpcy5wcmltYXJ5VG91Y2gpIHtcbiAgICAgICAgdmFyIGxhc3RUb3VjaCA9IHt4OiB0b3VjaC5jbGllbnRYLCB5OiB0b3VjaC5jbGllbnRZfTtcbiAgICAgICAgdGhpcy5sYXN0VG91Y2hlcy5wdXNoKGxhc3RUb3VjaCk7XG4gICAgICAgIHZhciBsdHMgPSB0aGlzLmxhc3RUb3VjaGVzO1xuICAgICAgICB2YXIgcmVtb3ZlTGFzdFRvdWNoID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgaSA9IGx0cy5pbmRleE9mKGxhc3RUb3VjaCk7XG4gICAgICAgICAgICBpZiAoaSA+IC0xKSB7XG4gICAgICAgICAgICAgICAgbHRzLnNwbGljZShpLCAxKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgc2V0VGltZW91dChyZW1vdmVMYXN0VG91Y2gsIERFRFVQX1RJTUVPVVQpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gaXNTeW50aGV0aWNFdmVudChldmVudERhdGEpIHtcbiAgICB2YXIgeCA9IGV2ZW50RGF0YS5zcmNFdmVudC5jbGllbnRYLCB5ID0gZXZlbnREYXRhLnNyY0V2ZW50LmNsaWVudFk7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmxhc3RUb3VjaGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHZhciB0ID0gdGhpcy5sYXN0VG91Y2hlc1tpXTtcbiAgICAgICAgdmFyIGR4ID0gTWF0aC5hYnMoeCAtIHQueCksIGR5ID0gTWF0aC5hYnMoeSAtIHQueSk7XG4gICAgICAgIGlmIChkeCA8PSBERURVUF9ESVNUQU5DRSAmJiBkeSA8PSBERURVUF9ESVNUQU5DRSkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xufVxuXG52YXIgUFJFRklYRURfVE9VQ0hfQUNUSU9OID0gcHJlZml4ZWQoVEVTVF9FTEVNRU5ULnN0eWxlLCAndG91Y2hBY3Rpb24nKTtcbnZhciBOQVRJVkVfVE9VQ0hfQUNUSU9OID0gUFJFRklYRURfVE9VQ0hfQUNUSU9OICE9PSB1bmRlZmluZWQ7XG5cbi8vIG1hZ2ljYWwgdG91Y2hBY3Rpb24gdmFsdWVcbnZhciBUT1VDSF9BQ1RJT05fQ09NUFVURSA9ICdjb21wdXRlJztcbnZhciBUT1VDSF9BQ1RJT05fQVVUTyA9ICdhdXRvJztcbnZhciBUT1VDSF9BQ1RJT05fTUFOSVBVTEFUSU9OID0gJ21hbmlwdWxhdGlvbic7IC8vIG5vdCBpbXBsZW1lbnRlZFxudmFyIFRPVUNIX0FDVElPTl9OT05FID0gJ25vbmUnO1xudmFyIFRPVUNIX0FDVElPTl9QQU5fWCA9ICdwYW4teCc7XG52YXIgVE9VQ0hfQUNUSU9OX1BBTl9ZID0gJ3Bhbi15JztcbnZhciBUT1VDSF9BQ1RJT05fTUFQID0gZ2V0VG91Y2hBY3Rpb25Qcm9wcygpO1xuXG4vKipcbiAqIFRvdWNoIEFjdGlvblxuICogc2V0cyB0aGUgdG91Y2hBY3Rpb24gcHJvcGVydHkgb3IgdXNlcyB0aGUganMgYWx0ZXJuYXRpdmVcbiAqIEBwYXJhbSB7TWFuYWdlcn0gbWFuYWdlclxuICogQHBhcmFtIHtTdHJpbmd9IHZhbHVlXG4gKiBAY29uc3RydWN0b3JcbiAqL1xuZnVuY3Rpb24gVG91Y2hBY3Rpb24obWFuYWdlciwgdmFsdWUpIHtcbiAgICB0aGlzLm1hbmFnZXIgPSBtYW5hZ2VyO1xuICAgIHRoaXMuc2V0KHZhbHVlKTtcbn1cblxuVG91Y2hBY3Rpb24ucHJvdG90eXBlID0ge1xuICAgIC8qKlxuICAgICAqIHNldCB0aGUgdG91Y2hBY3Rpb24gdmFsdWUgb24gdGhlIGVsZW1lbnQgb3IgZW5hYmxlIHRoZSBwb2x5ZmlsbFxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSB2YWx1ZVxuICAgICAqL1xuICAgIHNldDogZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgLy8gZmluZCBvdXQgdGhlIHRvdWNoLWFjdGlvbiBieSB0aGUgZXZlbnQgaGFuZGxlcnNcbiAgICAgICAgaWYgKHZhbHVlID09IFRPVUNIX0FDVElPTl9DT01QVVRFKSB7XG4gICAgICAgICAgICB2YWx1ZSA9IHRoaXMuY29tcHV0ZSgpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKE5BVElWRV9UT1VDSF9BQ1RJT04gJiYgdGhpcy5tYW5hZ2VyLmVsZW1lbnQuc3R5bGUgJiYgVE9VQ0hfQUNUSU9OX01BUFt2YWx1ZV0pIHtcbiAgICAgICAgICAgIHRoaXMubWFuYWdlci5lbGVtZW50LnN0eWxlW1BSRUZJWEVEX1RPVUNIX0FDVElPTl0gPSB2YWx1ZTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmFjdGlvbnMgPSB2YWx1ZS50b0xvd2VyQ2FzZSgpLnRyaW0oKTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICoganVzdCByZS1zZXQgdGhlIHRvdWNoQWN0aW9uIHZhbHVlXG4gICAgICovXG4gICAgdXBkYXRlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgdGhpcy5zZXQodGhpcy5tYW5hZ2VyLm9wdGlvbnMudG91Y2hBY3Rpb24pO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBjb21wdXRlIHRoZSB2YWx1ZSBmb3IgdGhlIHRvdWNoQWN0aW9uIHByb3BlcnR5IGJhc2VkIG9uIHRoZSByZWNvZ25pemVyJ3Mgc2V0dGluZ3NcbiAgICAgKiBAcmV0dXJucyB7U3RyaW5nfSB2YWx1ZVxuICAgICAqL1xuICAgIGNvbXB1dGU6IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgYWN0aW9ucyA9IFtdO1xuICAgICAgICBlYWNoKHRoaXMubWFuYWdlci5yZWNvZ25pemVycywgZnVuY3Rpb24ocmVjb2duaXplcikge1xuICAgICAgICAgICAgaWYgKGJvb2xPckZuKHJlY29nbml6ZXIub3B0aW9ucy5lbmFibGUsIFtyZWNvZ25pemVyXSkpIHtcbiAgICAgICAgICAgICAgICBhY3Rpb25zID0gYWN0aW9ucy5jb25jYXQocmVjb2duaXplci5nZXRUb3VjaEFjdGlvbigpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBjbGVhblRvdWNoQWN0aW9ucyhhY3Rpb25zLmpvaW4oJyAnKSk7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIHRoaXMgbWV0aG9kIGlzIGNhbGxlZCBvbiBlYWNoIGlucHV0IGN5Y2xlIGFuZCBwcm92aWRlcyB0aGUgcHJldmVudGluZyBvZiB0aGUgYnJvd3NlciBiZWhhdmlvclxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBpbnB1dFxuICAgICAqL1xuICAgIHByZXZlbnREZWZhdWx0czogZnVuY3Rpb24oaW5wdXQpIHtcbiAgICAgICAgdmFyIHNyY0V2ZW50ID0gaW5wdXQuc3JjRXZlbnQ7XG4gICAgICAgIHZhciBkaXJlY3Rpb24gPSBpbnB1dC5vZmZzZXREaXJlY3Rpb247XG5cbiAgICAgICAgLy8gaWYgdGhlIHRvdWNoIGFjdGlvbiBkaWQgcHJldmVudGVkIG9uY2UgdGhpcyBzZXNzaW9uXG4gICAgICAgIGlmICh0aGlzLm1hbmFnZXIuc2Vzc2lvbi5wcmV2ZW50ZWQpIHtcbiAgICAgICAgICAgIHNyY0V2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgYWN0aW9ucyA9IHRoaXMuYWN0aW9ucztcbiAgICAgICAgdmFyIGhhc05vbmUgPSBpblN0cihhY3Rpb25zLCBUT1VDSF9BQ1RJT05fTk9ORSkgJiYgIVRPVUNIX0FDVElPTl9NQVBbVE9VQ0hfQUNUSU9OX05PTkVdO1xuICAgICAgICB2YXIgaGFzUGFuWSA9IGluU3RyKGFjdGlvbnMsIFRPVUNIX0FDVElPTl9QQU5fWSkgJiYgIVRPVUNIX0FDVElPTl9NQVBbVE9VQ0hfQUNUSU9OX1BBTl9ZXTtcbiAgICAgICAgdmFyIGhhc1BhblggPSBpblN0cihhY3Rpb25zLCBUT1VDSF9BQ1RJT05fUEFOX1gpICYmICFUT1VDSF9BQ1RJT05fTUFQW1RPVUNIX0FDVElPTl9QQU5fWF07XG5cbiAgICAgICAgaWYgKGhhc05vbmUpIHtcbiAgICAgICAgICAgIC8vZG8gbm90IHByZXZlbnQgZGVmYXVsdHMgaWYgdGhpcyBpcyBhIHRhcCBnZXN0dXJlXG5cbiAgICAgICAgICAgIHZhciBpc1RhcFBvaW50ZXIgPSBpbnB1dC5wb2ludGVycy5sZW5ndGggPT09IDE7XG4gICAgICAgICAgICB2YXIgaXNUYXBNb3ZlbWVudCA9IGlucHV0LmRpc3RhbmNlIDwgMjtcbiAgICAgICAgICAgIHZhciBpc1RhcFRvdWNoVGltZSA9IGlucHV0LmRlbHRhVGltZSA8IDI1MDtcblxuICAgICAgICAgICAgaWYgKGlzVGFwUG9pbnRlciAmJiBpc1RhcE1vdmVtZW50ICYmIGlzVGFwVG91Y2hUaW1lKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGhhc1BhblggJiYgaGFzUGFuWSkge1xuICAgICAgICAgICAgLy8gYHBhbi14IHBhbi15YCBtZWFucyBicm93c2VyIGhhbmRsZXMgYWxsIHNjcm9sbGluZy9wYW5uaW5nLCBkbyBub3QgcHJldmVudFxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGhhc05vbmUgfHxcbiAgICAgICAgICAgIChoYXNQYW5ZICYmIGRpcmVjdGlvbiAmIERJUkVDVElPTl9IT1JJWk9OVEFMKSB8fFxuICAgICAgICAgICAgKGhhc1BhblggJiYgZGlyZWN0aW9uICYgRElSRUNUSU9OX1ZFUlRJQ0FMKSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJldmVudFNyYyhzcmNFdmVudCk7XG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogY2FsbCBwcmV2ZW50RGVmYXVsdCB0byBwcmV2ZW50IHRoZSBicm93c2VyJ3MgZGVmYXVsdCBiZWhhdmlvciAoc2Nyb2xsaW5nIGluIG1vc3QgY2FzZXMpXG4gICAgICogQHBhcmFtIHtPYmplY3R9IHNyY0V2ZW50XG4gICAgICovXG4gICAgcHJldmVudFNyYzogZnVuY3Rpb24oc3JjRXZlbnQpIHtcbiAgICAgICAgdGhpcy5tYW5hZ2VyLnNlc3Npb24ucHJldmVudGVkID0gdHJ1ZTtcbiAgICAgICAgc3JjRXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICB9XG59O1xuXG4vKipcbiAqIHdoZW4gdGhlIHRvdWNoQWN0aW9ucyBhcmUgY29sbGVjdGVkIHRoZXkgYXJlIG5vdCBhIHZhbGlkIHZhbHVlLCBzbyB3ZSBuZWVkIHRvIGNsZWFuIHRoaW5ncyB1cC4gKlxuICogQHBhcmFtIHtTdHJpbmd9IGFjdGlvbnNcbiAqIEByZXR1cm5zIHsqfVxuICovXG5mdW5jdGlvbiBjbGVhblRvdWNoQWN0aW9ucyhhY3Rpb25zKSB7XG4gICAgLy8gbm9uZVxuICAgIGlmIChpblN0cihhY3Rpb25zLCBUT1VDSF9BQ1RJT05fTk9ORSkpIHtcbiAgICAgICAgcmV0dXJuIFRPVUNIX0FDVElPTl9OT05FO1xuICAgIH1cblxuICAgIHZhciBoYXNQYW5YID0gaW5TdHIoYWN0aW9ucywgVE9VQ0hfQUNUSU9OX1BBTl9YKTtcbiAgICB2YXIgaGFzUGFuWSA9IGluU3RyKGFjdGlvbnMsIFRPVUNIX0FDVElPTl9QQU5fWSk7XG5cbiAgICAvLyBpZiBib3RoIHBhbi14IGFuZCBwYW4teSBhcmUgc2V0IChkaWZmZXJlbnQgcmVjb2duaXplcnNcbiAgICAvLyBmb3IgZGlmZmVyZW50IGRpcmVjdGlvbnMsIGUuZy4gaG9yaXpvbnRhbCBwYW4gYnV0IHZlcnRpY2FsIHN3aXBlPylcbiAgICAvLyB3ZSBuZWVkIG5vbmUgKGFzIG90aGVyd2lzZSB3aXRoIHBhbi14IHBhbi15IGNvbWJpbmVkIG5vbmUgb2YgdGhlc2VcbiAgICAvLyByZWNvZ25pemVycyB3aWxsIHdvcmssIHNpbmNlIHRoZSBicm93c2VyIHdvdWxkIGhhbmRsZSBhbGwgcGFubmluZ1xuICAgIGlmIChoYXNQYW5YICYmIGhhc1BhblkpIHtcbiAgICAgICAgcmV0dXJuIFRPVUNIX0FDVElPTl9OT05FO1xuICAgIH1cblxuICAgIC8vIHBhbi14IE9SIHBhbi15XG4gICAgaWYgKGhhc1BhblggfHwgaGFzUGFuWSkge1xuICAgICAgICByZXR1cm4gaGFzUGFuWCA/IFRPVUNIX0FDVElPTl9QQU5fWCA6IFRPVUNIX0FDVElPTl9QQU5fWTtcbiAgICB9XG5cbiAgICAvLyBtYW5pcHVsYXRpb25cbiAgICBpZiAoaW5TdHIoYWN0aW9ucywgVE9VQ0hfQUNUSU9OX01BTklQVUxBVElPTikpIHtcbiAgICAgICAgcmV0dXJuIFRPVUNIX0FDVElPTl9NQU5JUFVMQVRJT047XG4gICAgfVxuXG4gICAgcmV0dXJuIFRPVUNIX0FDVElPTl9BVVRPO1xufVxuXG5mdW5jdGlvbiBnZXRUb3VjaEFjdGlvblByb3BzKCkge1xuICAgIGlmICghTkFUSVZFX1RPVUNIX0FDVElPTikge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHZhciB0b3VjaE1hcCA9IHt9O1xuICAgIHZhciBjc3NTdXBwb3J0cyA9IHdpbmRvdy5DU1MgJiYgd2luZG93LkNTUy5zdXBwb3J0cztcbiAgICBbJ2F1dG8nLCAnbWFuaXB1bGF0aW9uJywgJ3Bhbi15JywgJ3Bhbi14JywgJ3Bhbi14IHBhbi15JywgJ25vbmUnXS5mb3JFYWNoKGZ1bmN0aW9uKHZhbCkge1xuXG4gICAgICAgIC8vIElmIGNzcy5zdXBwb3J0cyBpcyBub3Qgc3VwcG9ydGVkIGJ1dCB0aGVyZSBpcyBuYXRpdmUgdG91Y2gtYWN0aW9uIGFzc3VtZSBpdCBzdXBwb3J0c1xuICAgICAgICAvLyBhbGwgdmFsdWVzLiBUaGlzIGlzIHRoZSBjYXNlIGZvciBJRSAxMCBhbmQgMTEuXG4gICAgICAgIHRvdWNoTWFwW3ZhbF0gPSBjc3NTdXBwb3J0cyA/IHdpbmRvdy5DU1Muc3VwcG9ydHMoJ3RvdWNoLWFjdGlvbicsIHZhbCkgOiB0cnVlO1xuICAgIH0pO1xuICAgIHJldHVybiB0b3VjaE1hcDtcbn1cblxuLyoqXG4gKiBSZWNvZ25pemVyIGZsb3cgZXhwbGFpbmVkOyAqXG4gKiBBbGwgcmVjb2duaXplcnMgaGF2ZSB0aGUgaW5pdGlhbCBzdGF0ZSBvZiBQT1NTSUJMRSB3aGVuIGEgaW5wdXQgc2Vzc2lvbiBzdGFydHMuXG4gKiBUaGUgZGVmaW5pdGlvbiBvZiBhIGlucHV0IHNlc3Npb24gaXMgZnJvbSB0aGUgZmlyc3QgaW5wdXQgdW50aWwgdGhlIGxhc3QgaW5wdXQsIHdpdGggYWxsIGl0J3MgbW92ZW1lbnQgaW4gaXQuICpcbiAqIEV4YW1wbGUgc2Vzc2lvbiBmb3IgbW91c2UtaW5wdXQ6IG1vdXNlZG93biAtPiBtb3VzZW1vdmUgLT4gbW91c2V1cFxuICpcbiAqIE9uIGVhY2ggcmVjb2duaXppbmcgY3ljbGUgKHNlZSBNYW5hZ2VyLnJlY29nbml6ZSkgdGhlIC5yZWNvZ25pemUoKSBtZXRob2QgaXMgZXhlY3V0ZWRcbiAqIHdoaWNoIGRldGVybWluZXMgd2l0aCBzdGF0ZSBpdCBzaG91bGQgYmUuXG4gKlxuICogSWYgdGhlIHJlY29nbml6ZXIgaGFzIHRoZSBzdGF0ZSBGQUlMRUQsIENBTkNFTExFRCBvciBSRUNPR05JWkVEIChlcXVhbHMgRU5ERUQpLCBpdCBpcyByZXNldCB0b1xuICogUE9TU0lCTEUgdG8gZ2l2ZSBpdCBhbm90aGVyIGNoYW5nZSBvbiB0aGUgbmV4dCBjeWNsZS5cbiAqXG4gKiAgICAgICAgICAgICAgIFBvc3NpYmxlXG4gKiAgICAgICAgICAgICAgICAgIHxcbiAqICAgICAgICAgICAgKy0tLS0tKy0tLS0tLS0tLS0tLS0tLStcbiAqICAgICAgICAgICAgfCAgICAgICAgICAgICAgICAgICAgIHxcbiAqICAgICAgKy0tLS0tKy0tLS0tKyAgICAgICAgICAgICAgIHxcbiAqICAgICAgfCAgICAgICAgICAgfCAgICAgICAgICAgICAgIHxcbiAqICAgRmFpbGVkICAgICAgQ2FuY2VsbGVkICAgICAgICAgIHxcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICArLS0tLS0tLSstLS0tLS0rXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgfCAgICAgICAgICAgICAgfFxuICogICAgICAgICAgICAgICAgICAgICAgUmVjb2duaXplZCAgICAgICBCZWdhblxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHxcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBDaGFuZ2VkXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfFxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRW5kZWQvUmVjb2duaXplZFxuICovXG52YXIgU1RBVEVfUE9TU0lCTEUgPSAxO1xudmFyIFNUQVRFX0JFR0FOID0gMjtcbnZhciBTVEFURV9DSEFOR0VEID0gNDtcbnZhciBTVEFURV9FTkRFRCA9IDg7XG52YXIgU1RBVEVfUkVDT0dOSVpFRCA9IFNUQVRFX0VOREVEO1xudmFyIFNUQVRFX0NBTkNFTExFRCA9IDE2O1xudmFyIFNUQVRFX0ZBSUxFRCA9IDMyO1xuXG4vKipcbiAqIFJlY29nbml6ZXJcbiAqIEV2ZXJ5IHJlY29nbml6ZXIgbmVlZHMgdG8gZXh0ZW5kIGZyb20gdGhpcyBjbGFzcy5cbiAqIEBjb25zdHJ1Y3RvclxuICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcbiAqL1xuZnVuY3Rpb24gUmVjb2duaXplcihvcHRpb25zKSB7XG4gICAgdGhpcy5vcHRpb25zID0gYXNzaWduKHt9LCB0aGlzLmRlZmF1bHRzLCBvcHRpb25zIHx8IHt9KTtcblxuICAgIHRoaXMuaWQgPSB1bmlxdWVJZCgpO1xuXG4gICAgdGhpcy5tYW5hZ2VyID0gbnVsbDtcblxuICAgIC8vIGRlZmF1bHQgaXMgZW5hYmxlIHRydWVcbiAgICB0aGlzLm9wdGlvbnMuZW5hYmxlID0gaWZVbmRlZmluZWQodGhpcy5vcHRpb25zLmVuYWJsZSwgdHJ1ZSk7XG5cbiAgICB0aGlzLnN0YXRlID0gU1RBVEVfUE9TU0lCTEU7XG5cbiAgICB0aGlzLnNpbXVsdGFuZW91cyA9IHt9O1xuICAgIHRoaXMucmVxdWlyZUZhaWwgPSBbXTtcbn1cblxuUmVjb2duaXplci5wcm90b3R5cGUgPSB7XG4gICAgLyoqXG4gICAgICogQHZpcnR1YWxcbiAgICAgKiBAdHlwZSB7T2JqZWN0fVxuICAgICAqL1xuICAgIGRlZmF1bHRzOiB7fSxcblxuICAgIC8qKlxuICAgICAqIHNldCBvcHRpb25zXG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcbiAgICAgKiBAcmV0dXJuIHtSZWNvZ25pemVyfVxuICAgICAqL1xuICAgIHNldDogZnVuY3Rpb24ob3B0aW9ucykge1xuICAgICAgICBhc3NpZ24odGhpcy5vcHRpb25zLCBvcHRpb25zKTtcblxuICAgICAgICAvLyBhbHNvIHVwZGF0ZSB0aGUgdG91Y2hBY3Rpb24sIGluIGNhc2Ugc29tZXRoaW5nIGNoYW5nZWQgYWJvdXQgdGhlIGRpcmVjdGlvbnMvZW5hYmxlZCBzdGF0ZVxuICAgICAgICB0aGlzLm1hbmFnZXIgJiYgdGhpcy5tYW5hZ2VyLnRvdWNoQWN0aW9uLnVwZGF0ZSgpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogcmVjb2duaXplIHNpbXVsdGFuZW91cyB3aXRoIGFuIG90aGVyIHJlY29nbml6ZXIuXG4gICAgICogQHBhcmFtIHtSZWNvZ25pemVyfSBvdGhlclJlY29nbml6ZXJcbiAgICAgKiBAcmV0dXJucyB7UmVjb2duaXplcn0gdGhpc1xuICAgICAqL1xuICAgIHJlY29nbml6ZVdpdGg6IGZ1bmN0aW9uKG90aGVyUmVjb2duaXplcikge1xuICAgICAgICBpZiAoaW52b2tlQXJyYXlBcmcob3RoZXJSZWNvZ25pemVyLCAncmVjb2duaXplV2l0aCcsIHRoaXMpKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBzaW11bHRhbmVvdXMgPSB0aGlzLnNpbXVsdGFuZW91cztcbiAgICAgICAgb3RoZXJSZWNvZ25pemVyID0gZ2V0UmVjb2duaXplckJ5TmFtZUlmTWFuYWdlcihvdGhlclJlY29nbml6ZXIsIHRoaXMpO1xuICAgICAgICBpZiAoIXNpbXVsdGFuZW91c1tvdGhlclJlY29nbml6ZXIuaWRdKSB7XG4gICAgICAgICAgICBzaW11bHRhbmVvdXNbb3RoZXJSZWNvZ25pemVyLmlkXSA9IG90aGVyUmVjb2duaXplcjtcbiAgICAgICAgICAgIG90aGVyUmVjb2duaXplci5yZWNvZ25pemVXaXRoKHRoaXMpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBkcm9wIHRoZSBzaW11bHRhbmVvdXMgbGluay4gaXQgZG9lc250IHJlbW92ZSB0aGUgbGluayBvbiB0aGUgb3RoZXIgcmVjb2duaXplci5cbiAgICAgKiBAcGFyYW0ge1JlY29nbml6ZXJ9IG90aGVyUmVjb2duaXplclxuICAgICAqIEByZXR1cm5zIHtSZWNvZ25pemVyfSB0aGlzXG4gICAgICovXG4gICAgZHJvcFJlY29nbml6ZVdpdGg6IGZ1bmN0aW9uKG90aGVyUmVjb2duaXplcikge1xuICAgICAgICBpZiAoaW52b2tlQXJyYXlBcmcob3RoZXJSZWNvZ25pemVyLCAnZHJvcFJlY29nbml6ZVdpdGgnLCB0aGlzKSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH1cblxuICAgICAgICBvdGhlclJlY29nbml6ZXIgPSBnZXRSZWNvZ25pemVyQnlOYW1lSWZNYW5hZ2VyKG90aGVyUmVjb2duaXplciwgdGhpcyk7XG4gICAgICAgIGRlbGV0ZSB0aGlzLnNpbXVsdGFuZW91c1tvdGhlclJlY29nbml6ZXIuaWRdO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogcmVjb2duaXplciBjYW4gb25seSBydW4gd2hlbiBhbiBvdGhlciBpcyBmYWlsaW5nXG4gICAgICogQHBhcmFtIHtSZWNvZ25pemVyfSBvdGhlclJlY29nbml6ZXJcbiAgICAgKiBAcmV0dXJucyB7UmVjb2duaXplcn0gdGhpc1xuICAgICAqL1xuICAgIHJlcXVpcmVGYWlsdXJlOiBmdW5jdGlvbihvdGhlclJlY29nbml6ZXIpIHtcbiAgICAgICAgaWYgKGludm9rZUFycmF5QXJnKG90aGVyUmVjb2duaXplciwgJ3JlcXVpcmVGYWlsdXJlJywgdGhpcykpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIHJlcXVpcmVGYWlsID0gdGhpcy5yZXF1aXJlRmFpbDtcbiAgICAgICAgb3RoZXJSZWNvZ25pemVyID0gZ2V0UmVjb2duaXplckJ5TmFtZUlmTWFuYWdlcihvdGhlclJlY29nbml6ZXIsIHRoaXMpO1xuICAgICAgICBpZiAoaW5BcnJheShyZXF1aXJlRmFpbCwgb3RoZXJSZWNvZ25pemVyKSA9PT0gLTEpIHtcbiAgICAgICAgICAgIHJlcXVpcmVGYWlsLnB1c2gob3RoZXJSZWNvZ25pemVyKTtcbiAgICAgICAgICAgIG90aGVyUmVjb2duaXplci5yZXF1aXJlRmFpbHVyZSh0aGlzKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogZHJvcCB0aGUgcmVxdWlyZUZhaWx1cmUgbGluay4gaXQgZG9lcyBub3QgcmVtb3ZlIHRoZSBsaW5rIG9uIHRoZSBvdGhlciByZWNvZ25pemVyLlxuICAgICAqIEBwYXJhbSB7UmVjb2duaXplcn0gb3RoZXJSZWNvZ25pemVyXG4gICAgICogQHJldHVybnMge1JlY29nbml6ZXJ9IHRoaXNcbiAgICAgKi9cbiAgICBkcm9wUmVxdWlyZUZhaWx1cmU6IGZ1bmN0aW9uKG90aGVyUmVjb2duaXplcikge1xuICAgICAgICBpZiAoaW52b2tlQXJyYXlBcmcob3RoZXJSZWNvZ25pemVyLCAnZHJvcFJlcXVpcmVGYWlsdXJlJywgdGhpcykpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9XG5cbiAgICAgICAgb3RoZXJSZWNvZ25pemVyID0gZ2V0UmVjb2duaXplckJ5TmFtZUlmTWFuYWdlcihvdGhlclJlY29nbml6ZXIsIHRoaXMpO1xuICAgICAgICB2YXIgaW5kZXggPSBpbkFycmF5KHRoaXMucmVxdWlyZUZhaWwsIG90aGVyUmVjb2duaXplcik7XG4gICAgICAgIGlmIChpbmRleCA+IC0xKSB7XG4gICAgICAgICAgICB0aGlzLnJlcXVpcmVGYWlsLnNwbGljZShpbmRleCwgMSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIGhhcyByZXF1aXJlIGZhaWx1cmVzIGJvb2xlYW5cbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn1cbiAgICAgKi9cbiAgICBoYXNSZXF1aXJlRmFpbHVyZXM6IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yZXF1aXJlRmFpbC5sZW5ndGggPiAwO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBpZiB0aGUgcmVjb2duaXplciBjYW4gcmVjb2duaXplIHNpbXVsdGFuZW91cyB3aXRoIGFuIG90aGVyIHJlY29nbml6ZXJcbiAgICAgKiBAcGFyYW0ge1JlY29nbml6ZXJ9IG90aGVyUmVjb2duaXplclxuICAgICAqIEByZXR1cm5zIHtCb29sZWFufVxuICAgICAqL1xuICAgIGNhblJlY29nbml6ZVdpdGg6IGZ1bmN0aW9uKG90aGVyUmVjb2duaXplcikge1xuICAgICAgICByZXR1cm4gISF0aGlzLnNpbXVsdGFuZW91c1tvdGhlclJlY29nbml6ZXIuaWRdO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBZb3Ugc2hvdWxkIHVzZSBgdHJ5RW1pdGAgaW5zdGVhZCBvZiBgZW1pdGAgZGlyZWN0bHkgdG8gY2hlY2tcbiAgICAgKiB0aGF0IGFsbCB0aGUgbmVlZGVkIHJlY29nbml6ZXJzIGhhcyBmYWlsZWQgYmVmb3JlIGVtaXR0aW5nLlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBpbnB1dFxuICAgICAqL1xuICAgIGVtaXQ6IGZ1bmN0aW9uKGlucHV0KSB7XG4gICAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgICAgdmFyIHN0YXRlID0gdGhpcy5zdGF0ZTtcblxuICAgICAgICBmdW5jdGlvbiBlbWl0KGV2ZW50KSB7XG4gICAgICAgICAgICBzZWxmLm1hbmFnZXIuZW1pdChldmVudCwgaW5wdXQpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gJ3BhbnN0YXJ0JyBhbmQgJ3Bhbm1vdmUnXG4gICAgICAgIGlmIChzdGF0ZSA8IFNUQVRFX0VOREVEKSB7XG4gICAgICAgICAgICBlbWl0KHNlbGYub3B0aW9ucy5ldmVudCArIHN0YXRlU3RyKHN0YXRlKSk7XG4gICAgICAgIH1cblxuICAgICAgICBlbWl0KHNlbGYub3B0aW9ucy5ldmVudCk7IC8vIHNpbXBsZSAnZXZlbnROYW1lJyBldmVudHNcblxuICAgICAgICBpZiAoaW5wdXQuYWRkaXRpb25hbEV2ZW50KSB7IC8vIGFkZGl0aW9uYWwgZXZlbnQocGFubGVmdCwgcGFucmlnaHQsIHBpbmNoaW4sIHBpbmNob3V0Li4uKVxuICAgICAgICAgICAgZW1pdChpbnB1dC5hZGRpdGlvbmFsRXZlbnQpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gcGFuZW5kIGFuZCBwYW5jYW5jZWxcbiAgICAgICAgaWYgKHN0YXRlID49IFNUQVRFX0VOREVEKSB7XG4gICAgICAgICAgICBlbWl0KHNlbGYub3B0aW9ucy5ldmVudCArIHN0YXRlU3RyKHN0YXRlKSk7XG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQ2hlY2sgdGhhdCBhbGwgdGhlIHJlcXVpcmUgZmFpbHVyZSByZWNvZ25pemVycyBoYXMgZmFpbGVkLFxuICAgICAqIGlmIHRydWUsIGl0IGVtaXRzIGEgZ2VzdHVyZSBldmVudCxcbiAgICAgKiBvdGhlcndpc2UsIHNldHVwIHRoZSBzdGF0ZSB0byBGQUlMRUQuXG4gICAgICogQHBhcmFtIHtPYmplY3R9IGlucHV0XG4gICAgICovXG4gICAgdHJ5RW1pdDogZnVuY3Rpb24oaW5wdXQpIHtcbiAgICAgICAgaWYgKHRoaXMuY2FuRW1pdCgpKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5lbWl0KGlucHV0KTtcbiAgICAgICAgfVxuICAgICAgICAvLyBpdCdzIGZhaWxpbmcgYW55d2F5XG4gICAgICAgIHRoaXMuc3RhdGUgPSBTVEFURV9GQUlMRUQ7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIGNhbiB3ZSBlbWl0P1xuICAgICAqIEByZXR1cm5zIHtib29sZWFufVxuICAgICAqL1xuICAgIGNhbkVtaXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgaSA9IDA7XG4gICAgICAgIHdoaWxlIChpIDwgdGhpcy5yZXF1aXJlRmFpbC5sZW5ndGgpIHtcbiAgICAgICAgICAgIGlmICghKHRoaXMucmVxdWlyZUZhaWxbaV0uc3RhdGUgJiAoU1RBVEVfRkFJTEVEIHwgU1RBVEVfUE9TU0lCTEUpKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGkrKztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogdXBkYXRlIHRoZSByZWNvZ25pemVyXG4gICAgICogQHBhcmFtIHtPYmplY3R9IGlucHV0RGF0YVxuICAgICAqL1xuICAgIHJlY29nbml6ZTogZnVuY3Rpb24oaW5wdXREYXRhKSB7XG4gICAgICAgIC8vIG1ha2UgYSBuZXcgY29weSBvZiB0aGUgaW5wdXREYXRhXG4gICAgICAgIC8vIHNvIHdlIGNhbiBjaGFuZ2UgdGhlIGlucHV0RGF0YSB3aXRob3V0IG1lc3NpbmcgdXAgdGhlIG90aGVyIHJlY29nbml6ZXJzXG4gICAgICAgIHZhciBpbnB1dERhdGFDbG9uZSA9IGFzc2lnbih7fSwgaW5wdXREYXRhKTtcblxuICAgICAgICAvLyBpcyBpcyBlbmFibGVkIGFuZCBhbGxvdyByZWNvZ25pemluZz9cbiAgICAgICAgaWYgKCFib29sT3JGbih0aGlzLm9wdGlvbnMuZW5hYmxlLCBbdGhpcywgaW5wdXREYXRhQ2xvbmVdKSkge1xuICAgICAgICAgICAgdGhpcy5yZXNldCgpO1xuICAgICAgICAgICAgdGhpcy5zdGF0ZSA9IFNUQVRFX0ZBSUxFRDtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIHJlc2V0IHdoZW4gd2UndmUgcmVhY2hlZCB0aGUgZW5kXG4gICAgICAgIGlmICh0aGlzLnN0YXRlICYgKFNUQVRFX1JFQ09HTklaRUQgfCBTVEFURV9DQU5DRUxMRUQgfCBTVEFURV9GQUlMRUQpKSB7XG4gICAgICAgICAgICB0aGlzLnN0YXRlID0gU1RBVEVfUE9TU0lCTEU7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnN0YXRlID0gdGhpcy5wcm9jZXNzKGlucHV0RGF0YUNsb25lKTtcblxuICAgICAgICAvLyB0aGUgcmVjb2duaXplciBoYXMgcmVjb2duaXplZCBhIGdlc3R1cmVcbiAgICAgICAgLy8gc28gdHJpZ2dlciBhbiBldmVudFxuICAgICAgICBpZiAodGhpcy5zdGF0ZSAmIChTVEFURV9CRUdBTiB8IFNUQVRFX0NIQU5HRUQgfCBTVEFURV9FTkRFRCB8IFNUQVRFX0NBTkNFTExFRCkpIHtcbiAgICAgICAgICAgIHRoaXMudHJ5RW1pdChpbnB1dERhdGFDbG9uZSk7XG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogcmV0dXJuIHRoZSBzdGF0ZSBvZiB0aGUgcmVjb2duaXplclxuICAgICAqIHRoZSBhY3R1YWwgcmVjb2duaXppbmcgaGFwcGVucyBpbiB0aGlzIG1ldGhvZFxuICAgICAqIEB2aXJ0dWFsXG4gICAgICogQHBhcmFtIHtPYmplY3R9IGlucHV0RGF0YVxuICAgICAqIEByZXR1cm5zIHtDb25zdH0gU1RBVEVcbiAgICAgKi9cbiAgICBwcm9jZXNzOiBmdW5jdGlvbihpbnB1dERhdGEpIHsgfSwgLy8ganNoaW50IGlnbm9yZTpsaW5lXG5cbiAgICAvKipcbiAgICAgKiByZXR1cm4gdGhlIHByZWZlcnJlZCB0b3VjaC1hY3Rpb25cbiAgICAgKiBAdmlydHVhbFxuICAgICAqIEByZXR1cm5zIHtBcnJheX1cbiAgICAgKi9cbiAgICBnZXRUb3VjaEFjdGlvbjogZnVuY3Rpb24oKSB7IH0sXG5cbiAgICAvKipcbiAgICAgKiBjYWxsZWQgd2hlbiB0aGUgZ2VzdHVyZSBpc24ndCBhbGxvd2VkIHRvIHJlY29nbml6ZVxuICAgICAqIGxpa2Ugd2hlbiBhbm90aGVyIGlzIGJlaW5nIHJlY29nbml6ZWQgb3IgaXQgaXMgZGlzYWJsZWRcbiAgICAgKiBAdmlydHVhbFxuICAgICAqL1xuICAgIHJlc2V0OiBmdW5jdGlvbigpIHsgfVxufTtcblxuLyoqXG4gKiBnZXQgYSB1c2FibGUgc3RyaW5nLCB1c2VkIGFzIGV2ZW50IHBvc3RmaXhcbiAqIEBwYXJhbSB7Q29uc3R9IHN0YXRlXG4gKiBAcmV0dXJucyB7U3RyaW5nfSBzdGF0ZVxuICovXG5mdW5jdGlvbiBzdGF0ZVN0cihzdGF0ZSkge1xuICAgIGlmIChzdGF0ZSAmIFNUQVRFX0NBTkNFTExFRCkge1xuICAgICAgICByZXR1cm4gJ2NhbmNlbCc7XG4gICAgfSBlbHNlIGlmIChzdGF0ZSAmIFNUQVRFX0VOREVEKSB7XG4gICAgICAgIHJldHVybiAnZW5kJztcbiAgICB9IGVsc2UgaWYgKHN0YXRlICYgU1RBVEVfQ0hBTkdFRCkge1xuICAgICAgICByZXR1cm4gJ21vdmUnO1xuICAgIH0gZWxzZSBpZiAoc3RhdGUgJiBTVEFURV9CRUdBTikge1xuICAgICAgICByZXR1cm4gJ3N0YXJ0JztcbiAgICB9XG4gICAgcmV0dXJuICcnO1xufVxuXG4vKipcbiAqIGRpcmVjdGlvbiBjb25zIHRvIHN0cmluZ1xuICogQHBhcmFtIHtDb25zdH0gZGlyZWN0aW9uXG4gKiBAcmV0dXJucyB7U3RyaW5nfVxuICovXG5mdW5jdGlvbiBkaXJlY3Rpb25TdHIoZGlyZWN0aW9uKSB7XG4gICAgaWYgKGRpcmVjdGlvbiA9PSBESVJFQ1RJT05fRE9XTikge1xuICAgICAgICByZXR1cm4gJ2Rvd24nO1xuICAgIH0gZWxzZSBpZiAoZGlyZWN0aW9uID09IERJUkVDVElPTl9VUCkge1xuICAgICAgICByZXR1cm4gJ3VwJztcbiAgICB9IGVsc2UgaWYgKGRpcmVjdGlvbiA9PSBESVJFQ1RJT05fTEVGVCkge1xuICAgICAgICByZXR1cm4gJ2xlZnQnO1xuICAgIH0gZWxzZSBpZiAoZGlyZWN0aW9uID09IERJUkVDVElPTl9SSUdIVCkge1xuICAgICAgICByZXR1cm4gJ3JpZ2h0JztcbiAgICB9XG4gICAgcmV0dXJuICcnO1xufVxuXG4vKipcbiAqIGdldCBhIHJlY29nbml6ZXIgYnkgbmFtZSBpZiBpdCBpcyBib3VuZCB0byBhIG1hbmFnZXJcbiAqIEBwYXJhbSB7UmVjb2duaXplcnxTdHJpbmd9IG90aGVyUmVjb2duaXplclxuICogQHBhcmFtIHtSZWNvZ25pemVyfSByZWNvZ25pemVyXG4gKiBAcmV0dXJucyB7UmVjb2duaXplcn1cbiAqL1xuZnVuY3Rpb24gZ2V0UmVjb2duaXplckJ5TmFtZUlmTWFuYWdlcihvdGhlclJlY29nbml6ZXIsIHJlY29nbml6ZXIpIHtcbiAgICB2YXIgbWFuYWdlciA9IHJlY29nbml6ZXIubWFuYWdlcjtcbiAgICBpZiAobWFuYWdlcikge1xuICAgICAgICByZXR1cm4gbWFuYWdlci5nZXQob3RoZXJSZWNvZ25pemVyKTtcbiAgICB9XG4gICAgcmV0dXJuIG90aGVyUmVjb2duaXplcjtcbn1cblxuLyoqXG4gKiBUaGlzIHJlY29nbml6ZXIgaXMganVzdCB1c2VkIGFzIGEgYmFzZSBmb3IgdGhlIHNpbXBsZSBhdHRyaWJ1dGUgcmVjb2duaXplcnMuXG4gKiBAY29uc3RydWN0b3JcbiAqIEBleHRlbmRzIFJlY29nbml6ZXJcbiAqL1xuZnVuY3Rpb24gQXR0clJlY29nbml6ZXIoKSB7XG4gICAgUmVjb2duaXplci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xufVxuXG5pbmhlcml0KEF0dHJSZWNvZ25pemVyLCBSZWNvZ25pemVyLCB7XG4gICAgLyoqXG4gICAgICogQG5hbWVzcGFjZVxuICAgICAqIEBtZW1iZXJvZiBBdHRyUmVjb2duaXplclxuICAgICAqL1xuICAgIGRlZmF1bHRzOiB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7TnVtYmVyfVxuICAgICAgICAgKiBAZGVmYXVsdCAxXG4gICAgICAgICAqL1xuICAgICAgICBwb2ludGVyczogMVxuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBVc2VkIHRvIGNoZWNrIGlmIGl0IHRoZSByZWNvZ25pemVyIHJlY2VpdmVzIHZhbGlkIGlucHV0LCBsaWtlIGlucHV0LmRpc3RhbmNlID4gMTAuXG4gICAgICogQG1lbWJlcm9mIEF0dHJSZWNvZ25pemVyXG4gICAgICogQHBhcmFtIHtPYmplY3R9IGlucHV0XG4gICAgICogQHJldHVybnMge0Jvb2xlYW59IHJlY29nbml6ZWRcbiAgICAgKi9cbiAgICBhdHRyVGVzdDogZnVuY3Rpb24oaW5wdXQpIHtcbiAgICAgICAgdmFyIG9wdGlvblBvaW50ZXJzID0gdGhpcy5vcHRpb25zLnBvaW50ZXJzO1xuICAgICAgICByZXR1cm4gb3B0aW9uUG9pbnRlcnMgPT09IDAgfHwgaW5wdXQucG9pbnRlcnMubGVuZ3RoID09PSBvcHRpb25Qb2ludGVycztcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogUHJvY2VzcyB0aGUgaW5wdXQgYW5kIHJldHVybiB0aGUgc3RhdGUgZm9yIHRoZSByZWNvZ25pemVyXG4gICAgICogQG1lbWJlcm9mIEF0dHJSZWNvZ25pemVyXG4gICAgICogQHBhcmFtIHtPYmplY3R9IGlucHV0XG4gICAgICogQHJldHVybnMgeyp9IFN0YXRlXG4gICAgICovXG4gICAgcHJvY2VzczogZnVuY3Rpb24oaW5wdXQpIHtcbiAgICAgICAgdmFyIHN0YXRlID0gdGhpcy5zdGF0ZTtcbiAgICAgICAgdmFyIGV2ZW50VHlwZSA9IGlucHV0LmV2ZW50VHlwZTtcblxuICAgICAgICB2YXIgaXNSZWNvZ25pemVkID0gc3RhdGUgJiAoU1RBVEVfQkVHQU4gfCBTVEFURV9DSEFOR0VEKTtcbiAgICAgICAgdmFyIGlzVmFsaWQgPSB0aGlzLmF0dHJUZXN0KGlucHV0KTtcblxuICAgICAgICAvLyBvbiBjYW5jZWwgaW5wdXQgYW5kIHdlJ3ZlIHJlY29nbml6ZWQgYmVmb3JlLCByZXR1cm4gU1RBVEVfQ0FOQ0VMTEVEXG4gICAgICAgIGlmIChpc1JlY29nbml6ZWQgJiYgKGV2ZW50VHlwZSAmIElOUFVUX0NBTkNFTCB8fCAhaXNWYWxpZCkpIHtcbiAgICAgICAgICAgIHJldHVybiBzdGF0ZSB8IFNUQVRFX0NBTkNFTExFRDtcbiAgICAgICAgfSBlbHNlIGlmIChpc1JlY29nbml6ZWQgfHwgaXNWYWxpZCkge1xuICAgICAgICAgICAgaWYgKGV2ZW50VHlwZSAmIElOUFVUX0VORCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBzdGF0ZSB8IFNUQVRFX0VOREVEO1xuICAgICAgICAgICAgfSBlbHNlIGlmICghKHN0YXRlICYgU1RBVEVfQkVHQU4pKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFNUQVRFX0JFR0FOO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHN0YXRlIHwgU1RBVEVfQ0hBTkdFRDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gU1RBVEVfRkFJTEVEO1xuICAgIH1cbn0pO1xuXG4vKipcbiAqIFBhblxuICogUmVjb2duaXplZCB3aGVuIHRoZSBwb2ludGVyIGlzIGRvd24gYW5kIG1vdmVkIGluIHRoZSBhbGxvd2VkIGRpcmVjdGlvbi5cbiAqIEBjb25zdHJ1Y3RvclxuICogQGV4dGVuZHMgQXR0clJlY29nbml6ZXJcbiAqL1xuZnVuY3Rpb24gUGFuUmVjb2duaXplcigpIHtcbiAgICBBdHRyUmVjb2duaXplci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuXG4gICAgdGhpcy5wWCA9IG51bGw7XG4gICAgdGhpcy5wWSA9IG51bGw7XG59XG5cbmluaGVyaXQoUGFuUmVjb2duaXplciwgQXR0clJlY29nbml6ZXIsIHtcbiAgICAvKipcbiAgICAgKiBAbmFtZXNwYWNlXG4gICAgICogQG1lbWJlcm9mIFBhblJlY29nbml6ZXJcbiAgICAgKi9cbiAgICBkZWZhdWx0czoge1xuICAgICAgICBldmVudDogJ3BhbicsXG4gICAgICAgIHRocmVzaG9sZDogMTAsXG4gICAgICAgIHBvaW50ZXJzOiAxLFxuICAgICAgICBkaXJlY3Rpb246IERJUkVDVElPTl9BTExcbiAgICB9LFxuXG4gICAgZ2V0VG91Y2hBY3Rpb246IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgZGlyZWN0aW9uID0gdGhpcy5vcHRpb25zLmRpcmVjdGlvbjtcbiAgICAgICAgdmFyIGFjdGlvbnMgPSBbXTtcbiAgICAgICAgaWYgKGRpcmVjdGlvbiAmIERJUkVDVElPTl9IT1JJWk9OVEFMKSB7XG4gICAgICAgICAgICBhY3Rpb25zLnB1c2goVE9VQ0hfQUNUSU9OX1BBTl9ZKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZGlyZWN0aW9uICYgRElSRUNUSU9OX1ZFUlRJQ0FMKSB7XG4gICAgICAgICAgICBhY3Rpb25zLnB1c2goVE9VQ0hfQUNUSU9OX1BBTl9YKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYWN0aW9ucztcbiAgICB9LFxuXG4gICAgZGlyZWN0aW9uVGVzdDogZnVuY3Rpb24oaW5wdXQpIHtcbiAgICAgICAgdmFyIG9wdGlvbnMgPSB0aGlzLm9wdGlvbnM7XG4gICAgICAgIHZhciBoYXNNb3ZlZCA9IHRydWU7XG4gICAgICAgIHZhciBkaXN0YW5jZSA9IGlucHV0LmRpc3RhbmNlO1xuICAgICAgICB2YXIgZGlyZWN0aW9uID0gaW5wdXQuZGlyZWN0aW9uO1xuICAgICAgICB2YXIgeCA9IGlucHV0LmRlbHRhWDtcbiAgICAgICAgdmFyIHkgPSBpbnB1dC5kZWx0YVk7XG5cbiAgICAgICAgLy8gbG9jayB0byBheGlzP1xuICAgICAgICBpZiAoIShkaXJlY3Rpb24gJiBvcHRpb25zLmRpcmVjdGlvbikpIHtcbiAgICAgICAgICAgIGlmIChvcHRpb25zLmRpcmVjdGlvbiAmIERJUkVDVElPTl9IT1JJWk9OVEFMKSB7XG4gICAgICAgICAgICAgICAgZGlyZWN0aW9uID0gKHggPT09IDApID8gRElSRUNUSU9OX05PTkUgOiAoeCA8IDApID8gRElSRUNUSU9OX0xFRlQgOiBESVJFQ1RJT05fUklHSFQ7XG4gICAgICAgICAgICAgICAgaGFzTW92ZWQgPSB4ICE9IHRoaXMucFg7XG4gICAgICAgICAgICAgICAgZGlzdGFuY2UgPSBNYXRoLmFicyhpbnB1dC5kZWx0YVgpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBkaXJlY3Rpb24gPSAoeSA9PT0gMCkgPyBESVJFQ1RJT05fTk9ORSA6ICh5IDwgMCkgPyBESVJFQ1RJT05fVVAgOiBESVJFQ1RJT05fRE9XTjtcbiAgICAgICAgICAgICAgICBoYXNNb3ZlZCA9IHkgIT0gdGhpcy5wWTtcbiAgICAgICAgICAgICAgICBkaXN0YW5jZSA9IE1hdGguYWJzKGlucHV0LmRlbHRhWSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaW5wdXQuZGlyZWN0aW9uID0gZGlyZWN0aW9uO1xuICAgICAgICByZXR1cm4gaGFzTW92ZWQgJiYgZGlzdGFuY2UgPiBvcHRpb25zLnRocmVzaG9sZCAmJiBkaXJlY3Rpb24gJiBvcHRpb25zLmRpcmVjdGlvbjtcbiAgICB9LFxuXG4gICAgYXR0clRlc3Q6IGZ1bmN0aW9uKGlucHV0KSB7XG4gICAgICAgIHJldHVybiBBdHRyUmVjb2duaXplci5wcm90b3R5cGUuYXR0clRlc3QuY2FsbCh0aGlzLCBpbnB1dCkgJiZcbiAgICAgICAgICAgICh0aGlzLnN0YXRlICYgU1RBVEVfQkVHQU4gfHwgKCEodGhpcy5zdGF0ZSAmIFNUQVRFX0JFR0FOKSAmJiB0aGlzLmRpcmVjdGlvblRlc3QoaW5wdXQpKSk7XG4gICAgfSxcblxuICAgIGVtaXQ6IGZ1bmN0aW9uKGlucHV0KSB7XG5cbiAgICAgICAgdGhpcy5wWCA9IGlucHV0LmRlbHRhWDtcbiAgICAgICAgdGhpcy5wWSA9IGlucHV0LmRlbHRhWTtcblxuICAgICAgICB2YXIgZGlyZWN0aW9uID0gZGlyZWN0aW9uU3RyKGlucHV0LmRpcmVjdGlvbik7XG5cbiAgICAgICAgaWYgKGRpcmVjdGlvbikge1xuICAgICAgICAgICAgaW5wdXQuYWRkaXRpb25hbEV2ZW50ID0gdGhpcy5vcHRpb25zLmV2ZW50ICsgZGlyZWN0aW9uO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX3N1cGVyLmVtaXQuY2FsbCh0aGlzLCBpbnB1dCk7XG4gICAgfVxufSk7XG5cbi8qKlxuICogUGluY2hcbiAqIFJlY29nbml6ZWQgd2hlbiB0d28gb3IgbW9yZSBwb2ludGVycyBhcmUgbW92aW5nIHRvd2FyZCAoem9vbS1pbikgb3IgYXdheSBmcm9tIGVhY2ggb3RoZXIgKHpvb20tb3V0KS5cbiAqIEBjb25zdHJ1Y3RvclxuICogQGV4dGVuZHMgQXR0clJlY29nbml6ZXJcbiAqL1xuZnVuY3Rpb24gUGluY2hSZWNvZ25pemVyKCkge1xuICAgIEF0dHJSZWNvZ25pemVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG59XG5cbmluaGVyaXQoUGluY2hSZWNvZ25pemVyLCBBdHRyUmVjb2duaXplciwge1xuICAgIC8qKlxuICAgICAqIEBuYW1lc3BhY2VcbiAgICAgKiBAbWVtYmVyb2YgUGluY2hSZWNvZ25pemVyXG4gICAgICovXG4gICAgZGVmYXVsdHM6IHtcbiAgICAgICAgZXZlbnQ6ICdwaW5jaCcsXG4gICAgICAgIHRocmVzaG9sZDogMCxcbiAgICAgICAgcG9pbnRlcnM6IDJcbiAgICB9LFxuXG4gICAgZ2V0VG91Y2hBY3Rpb246IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gW1RPVUNIX0FDVElPTl9OT05FXTtcbiAgICB9LFxuXG4gICAgYXR0clRlc3Q6IGZ1bmN0aW9uKGlucHV0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9zdXBlci5hdHRyVGVzdC5jYWxsKHRoaXMsIGlucHV0KSAmJlxuICAgICAgICAgICAgKE1hdGguYWJzKGlucHV0LnNjYWxlIC0gMSkgPiB0aGlzLm9wdGlvbnMudGhyZXNob2xkIHx8IHRoaXMuc3RhdGUgJiBTVEFURV9CRUdBTik7XG4gICAgfSxcblxuICAgIGVtaXQ6IGZ1bmN0aW9uKGlucHV0KSB7XG4gICAgICAgIGlmIChpbnB1dC5zY2FsZSAhPT0gMSkge1xuICAgICAgICAgICAgdmFyIGluT3V0ID0gaW5wdXQuc2NhbGUgPCAxID8gJ2luJyA6ICdvdXQnO1xuICAgICAgICAgICAgaW5wdXQuYWRkaXRpb25hbEV2ZW50ID0gdGhpcy5vcHRpb25zLmV2ZW50ICsgaW5PdXQ7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fc3VwZXIuZW1pdC5jYWxsKHRoaXMsIGlucHV0KTtcbiAgICB9XG59KTtcblxuLyoqXG4gKiBQcmVzc1xuICogUmVjb2duaXplZCB3aGVuIHRoZSBwb2ludGVyIGlzIGRvd24gZm9yIHggbXMgd2l0aG91dCBhbnkgbW92ZW1lbnQuXG4gKiBAY29uc3RydWN0b3JcbiAqIEBleHRlbmRzIFJlY29nbml6ZXJcbiAqL1xuZnVuY3Rpb24gUHJlc3NSZWNvZ25pemVyKCkge1xuICAgIFJlY29nbml6ZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcblxuICAgIHRoaXMuX3RpbWVyID0gbnVsbDtcbiAgICB0aGlzLl9pbnB1dCA9IG51bGw7XG59XG5cbmluaGVyaXQoUHJlc3NSZWNvZ25pemVyLCBSZWNvZ25pemVyLCB7XG4gICAgLyoqXG4gICAgICogQG5hbWVzcGFjZVxuICAgICAqIEBtZW1iZXJvZiBQcmVzc1JlY29nbml6ZXJcbiAgICAgKi9cbiAgICBkZWZhdWx0czoge1xuICAgICAgICBldmVudDogJ3ByZXNzJyxcbiAgICAgICAgcG9pbnRlcnM6IDEsXG4gICAgICAgIHRpbWU6IDI1MSwgLy8gbWluaW1hbCB0aW1lIG9mIHRoZSBwb2ludGVyIHRvIGJlIHByZXNzZWRcbiAgICAgICAgdGhyZXNob2xkOiA5IC8vIGEgbWluaW1hbCBtb3ZlbWVudCBpcyBvaywgYnV0IGtlZXAgaXQgbG93XG4gICAgfSxcblxuICAgIGdldFRvdWNoQWN0aW9uOiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIFtUT1VDSF9BQ1RJT05fQVVUT107XG4gICAgfSxcblxuICAgIHByb2Nlc3M6IGZ1bmN0aW9uKGlucHV0KSB7XG4gICAgICAgIHZhciBvcHRpb25zID0gdGhpcy5vcHRpb25zO1xuICAgICAgICB2YXIgdmFsaWRQb2ludGVycyA9IGlucHV0LnBvaW50ZXJzLmxlbmd0aCA9PT0gb3B0aW9ucy5wb2ludGVycztcbiAgICAgICAgdmFyIHZhbGlkTW92ZW1lbnQgPSBpbnB1dC5kaXN0YW5jZSA8IG9wdGlvbnMudGhyZXNob2xkO1xuICAgICAgICB2YXIgdmFsaWRUaW1lID0gaW5wdXQuZGVsdGFUaW1lID4gb3B0aW9ucy50aW1lO1xuXG4gICAgICAgIHRoaXMuX2lucHV0ID0gaW5wdXQ7XG5cbiAgICAgICAgLy8gd2Ugb25seSBhbGxvdyBsaXR0bGUgbW92ZW1lbnRcbiAgICAgICAgLy8gYW5kIHdlJ3ZlIHJlYWNoZWQgYW4gZW5kIGV2ZW50LCBzbyBhIHRhcCBpcyBwb3NzaWJsZVxuICAgICAgICBpZiAoIXZhbGlkTW92ZW1lbnQgfHwgIXZhbGlkUG9pbnRlcnMgfHwgKGlucHV0LmV2ZW50VHlwZSAmIChJTlBVVF9FTkQgfCBJTlBVVF9DQU5DRUwpICYmICF2YWxpZFRpbWUpKSB7XG4gICAgICAgICAgICB0aGlzLnJlc2V0KCk7XG4gICAgICAgIH0gZWxzZSBpZiAoaW5wdXQuZXZlbnRUeXBlICYgSU5QVVRfU1RBUlQpIHtcbiAgICAgICAgICAgIHRoaXMucmVzZXQoKTtcbiAgICAgICAgICAgIHRoaXMuX3RpbWVyID0gc2V0VGltZW91dENvbnRleHQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zdGF0ZSA9IFNUQVRFX1JFQ09HTklaRUQ7XG4gICAgICAgICAgICAgICAgdGhpcy50cnlFbWl0KCk7XG4gICAgICAgICAgICB9LCBvcHRpb25zLnRpbWUsIHRoaXMpO1xuICAgICAgICB9IGVsc2UgaWYgKGlucHV0LmV2ZW50VHlwZSAmIElOUFVUX0VORCkge1xuICAgICAgICAgICAgcmV0dXJuIFNUQVRFX1JFQ09HTklaRUQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFNUQVRFX0ZBSUxFRDtcbiAgICB9LFxuXG4gICAgcmVzZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5fdGltZXIpO1xuICAgIH0sXG5cbiAgICBlbWl0OiBmdW5jdGlvbihpbnB1dCkge1xuICAgICAgICBpZiAodGhpcy5zdGF0ZSAhPT0gU1RBVEVfUkVDT0dOSVpFRCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGlucHV0ICYmIChpbnB1dC5ldmVudFR5cGUgJiBJTlBVVF9FTkQpKSB7XG4gICAgICAgICAgICB0aGlzLm1hbmFnZXIuZW1pdCh0aGlzLm9wdGlvbnMuZXZlbnQgKyAndXAnLCBpbnB1dCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLl9pbnB1dC50aW1lU3RhbXAgPSBub3coKTtcbiAgICAgICAgICAgIHRoaXMubWFuYWdlci5lbWl0KHRoaXMub3B0aW9ucy5ldmVudCwgdGhpcy5faW5wdXQpO1xuICAgICAgICB9XG4gICAgfVxufSk7XG5cbi8qKlxuICogUm90YXRlXG4gKiBSZWNvZ25pemVkIHdoZW4gdHdvIG9yIG1vcmUgcG9pbnRlciBhcmUgbW92aW5nIGluIGEgY2lyY3VsYXIgbW90aW9uLlxuICogQGNvbnN0cnVjdG9yXG4gKiBAZXh0ZW5kcyBBdHRyUmVjb2duaXplclxuICovXG5mdW5jdGlvbiBSb3RhdGVSZWNvZ25pemVyKCkge1xuICAgIEF0dHJSZWNvZ25pemVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG59XG5cbmluaGVyaXQoUm90YXRlUmVjb2duaXplciwgQXR0clJlY29nbml6ZXIsIHtcbiAgICAvKipcbiAgICAgKiBAbmFtZXNwYWNlXG4gICAgICogQG1lbWJlcm9mIFJvdGF0ZVJlY29nbml6ZXJcbiAgICAgKi9cbiAgICBkZWZhdWx0czoge1xuICAgICAgICBldmVudDogJ3JvdGF0ZScsXG4gICAgICAgIHRocmVzaG9sZDogMCxcbiAgICAgICAgcG9pbnRlcnM6IDJcbiAgICB9LFxuXG4gICAgZ2V0VG91Y2hBY3Rpb246IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gW1RPVUNIX0FDVElPTl9OT05FXTtcbiAgICB9LFxuXG4gICAgYXR0clRlc3Q6IGZ1bmN0aW9uKGlucHV0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9zdXBlci5hdHRyVGVzdC5jYWxsKHRoaXMsIGlucHV0KSAmJlxuICAgICAgICAgICAgKE1hdGguYWJzKGlucHV0LnJvdGF0aW9uKSA+IHRoaXMub3B0aW9ucy50aHJlc2hvbGQgfHwgdGhpcy5zdGF0ZSAmIFNUQVRFX0JFR0FOKTtcbiAgICB9XG59KTtcblxuLyoqXG4gKiBTd2lwZVxuICogUmVjb2duaXplZCB3aGVuIHRoZSBwb2ludGVyIGlzIG1vdmluZyBmYXN0ICh2ZWxvY2l0eSksIHdpdGggZW5vdWdoIGRpc3RhbmNlIGluIHRoZSBhbGxvd2VkIGRpcmVjdGlvbi5cbiAqIEBjb25zdHJ1Y3RvclxuICogQGV4dGVuZHMgQXR0clJlY29nbml6ZXJcbiAqL1xuZnVuY3Rpb24gU3dpcGVSZWNvZ25pemVyKCkge1xuICAgIEF0dHJSZWNvZ25pemVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG59XG5cbmluaGVyaXQoU3dpcGVSZWNvZ25pemVyLCBBdHRyUmVjb2duaXplciwge1xuICAgIC8qKlxuICAgICAqIEBuYW1lc3BhY2VcbiAgICAgKiBAbWVtYmVyb2YgU3dpcGVSZWNvZ25pemVyXG4gICAgICovXG4gICAgZGVmYXVsdHM6IHtcbiAgICAgICAgZXZlbnQ6ICdzd2lwZScsXG4gICAgICAgIHRocmVzaG9sZDogMTAsXG4gICAgICAgIHZlbG9jaXR5OiAwLjMsXG4gICAgICAgIGRpcmVjdGlvbjogRElSRUNUSU9OX0hPUklaT05UQUwgfCBESVJFQ1RJT05fVkVSVElDQUwsXG4gICAgICAgIHBvaW50ZXJzOiAxXG4gICAgfSxcblxuICAgIGdldFRvdWNoQWN0aW9uOiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIFBhblJlY29nbml6ZXIucHJvdG90eXBlLmdldFRvdWNoQWN0aW9uLmNhbGwodGhpcyk7XG4gICAgfSxcblxuICAgIGF0dHJUZXN0OiBmdW5jdGlvbihpbnB1dCkge1xuICAgICAgICB2YXIgZGlyZWN0aW9uID0gdGhpcy5vcHRpb25zLmRpcmVjdGlvbjtcbiAgICAgICAgdmFyIHZlbG9jaXR5O1xuXG4gICAgICAgIGlmIChkaXJlY3Rpb24gJiAoRElSRUNUSU9OX0hPUklaT05UQUwgfCBESVJFQ1RJT05fVkVSVElDQUwpKSB7XG4gICAgICAgICAgICB2ZWxvY2l0eSA9IGlucHV0Lm92ZXJhbGxWZWxvY2l0eTtcbiAgICAgICAgfSBlbHNlIGlmIChkaXJlY3Rpb24gJiBESVJFQ1RJT05fSE9SSVpPTlRBTCkge1xuICAgICAgICAgICAgdmVsb2NpdHkgPSBpbnB1dC5vdmVyYWxsVmVsb2NpdHlYO1xuICAgICAgICB9IGVsc2UgaWYgKGRpcmVjdGlvbiAmIERJUkVDVElPTl9WRVJUSUNBTCkge1xuICAgICAgICAgICAgdmVsb2NpdHkgPSBpbnB1dC5vdmVyYWxsVmVsb2NpdHlZO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuX3N1cGVyLmF0dHJUZXN0LmNhbGwodGhpcywgaW5wdXQpICYmXG4gICAgICAgICAgICBkaXJlY3Rpb24gJiBpbnB1dC5vZmZzZXREaXJlY3Rpb24gJiZcbiAgICAgICAgICAgIGlucHV0LmRpc3RhbmNlID4gdGhpcy5vcHRpb25zLnRocmVzaG9sZCAmJlxuICAgICAgICAgICAgaW5wdXQubWF4UG9pbnRlcnMgPT0gdGhpcy5vcHRpb25zLnBvaW50ZXJzICYmXG4gICAgICAgICAgICBhYnModmVsb2NpdHkpID4gdGhpcy5vcHRpb25zLnZlbG9jaXR5ICYmIGlucHV0LmV2ZW50VHlwZSAmIElOUFVUX0VORDtcbiAgICB9LFxuXG4gICAgZW1pdDogZnVuY3Rpb24oaW5wdXQpIHtcbiAgICAgICAgdmFyIGRpcmVjdGlvbiA9IGRpcmVjdGlvblN0cihpbnB1dC5vZmZzZXREaXJlY3Rpb24pO1xuICAgICAgICBpZiAoZGlyZWN0aW9uKSB7XG4gICAgICAgICAgICB0aGlzLm1hbmFnZXIuZW1pdCh0aGlzLm9wdGlvbnMuZXZlbnQgKyBkaXJlY3Rpb24sIGlucHV0KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMubWFuYWdlci5lbWl0KHRoaXMub3B0aW9ucy5ldmVudCwgaW5wdXQpO1xuICAgIH1cbn0pO1xuXG4vKipcbiAqIEEgdGFwIGlzIGVjb2duaXplZCB3aGVuIHRoZSBwb2ludGVyIGlzIGRvaW5nIGEgc21hbGwgdGFwL2NsaWNrLiBNdWx0aXBsZSB0YXBzIGFyZSByZWNvZ25pemVkIGlmIHRoZXkgb2NjdXJcbiAqIGJldHdlZW4gdGhlIGdpdmVuIGludGVydmFsIGFuZCBwb3NpdGlvbi4gVGhlIGRlbGF5IG9wdGlvbiBjYW4gYmUgdXNlZCB0byByZWNvZ25pemUgbXVsdGktdGFwcyB3aXRob3V0IGZpcmluZ1xuICogYSBzaW5nbGUgdGFwLlxuICpcbiAqIFRoZSBldmVudERhdGEgZnJvbSB0aGUgZW1pdHRlZCBldmVudCBjb250YWlucyB0aGUgcHJvcGVydHkgYHRhcENvdW50YCwgd2hpY2ggY29udGFpbnMgdGhlIGFtb3VudCBvZlxuICogbXVsdGktdGFwcyBiZWluZyByZWNvZ25pemVkLlxuICogQGNvbnN0cnVjdG9yXG4gKiBAZXh0ZW5kcyBSZWNvZ25pemVyXG4gKi9cbmZ1bmN0aW9uIFRhcFJlY29nbml6ZXIoKSB7XG4gICAgUmVjb2duaXplci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuXG4gICAgLy8gcHJldmlvdXMgdGltZSBhbmQgY2VudGVyLFxuICAgIC8vIHVzZWQgZm9yIHRhcCBjb3VudGluZ1xuICAgIHRoaXMucFRpbWUgPSBmYWxzZTtcbiAgICB0aGlzLnBDZW50ZXIgPSBmYWxzZTtcblxuICAgIHRoaXMuX3RpbWVyID0gbnVsbDtcbiAgICB0aGlzLl9pbnB1dCA9IG51bGw7XG4gICAgdGhpcy5jb3VudCA9IDA7XG59XG5cbmluaGVyaXQoVGFwUmVjb2duaXplciwgUmVjb2duaXplciwge1xuICAgIC8qKlxuICAgICAqIEBuYW1lc3BhY2VcbiAgICAgKiBAbWVtYmVyb2YgUGluY2hSZWNvZ25pemVyXG4gICAgICovXG4gICAgZGVmYXVsdHM6IHtcbiAgICAgICAgZXZlbnQ6ICd0YXAnLFxuICAgICAgICBwb2ludGVyczogMSxcbiAgICAgICAgdGFwczogMSxcbiAgICAgICAgaW50ZXJ2YWw6IDMwMCwgLy8gbWF4IHRpbWUgYmV0d2VlbiB0aGUgbXVsdGktdGFwIHRhcHNcbiAgICAgICAgdGltZTogMjUwLCAvLyBtYXggdGltZSBvZiB0aGUgcG9pbnRlciB0byBiZSBkb3duIChsaWtlIGZpbmdlciBvbiB0aGUgc2NyZWVuKVxuICAgICAgICB0aHJlc2hvbGQ6IDksIC8vIGEgbWluaW1hbCBtb3ZlbWVudCBpcyBvaywgYnV0IGtlZXAgaXQgbG93XG4gICAgICAgIHBvc1RocmVzaG9sZDogMTAgLy8gYSBtdWx0aS10YXAgY2FuIGJlIGEgYml0IG9mZiB0aGUgaW5pdGlhbCBwb3NpdGlvblxuICAgIH0sXG5cbiAgICBnZXRUb3VjaEFjdGlvbjogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBbVE9VQ0hfQUNUSU9OX01BTklQVUxBVElPTl07XG4gICAgfSxcblxuICAgIHByb2Nlc3M6IGZ1bmN0aW9uKGlucHV0KSB7XG4gICAgICAgIHZhciBvcHRpb25zID0gdGhpcy5vcHRpb25zO1xuXG4gICAgICAgIHZhciB2YWxpZFBvaW50ZXJzID0gaW5wdXQucG9pbnRlcnMubGVuZ3RoID09PSBvcHRpb25zLnBvaW50ZXJzO1xuICAgICAgICB2YXIgdmFsaWRNb3ZlbWVudCA9IGlucHV0LmRpc3RhbmNlIDwgb3B0aW9ucy50aHJlc2hvbGQ7XG4gICAgICAgIHZhciB2YWxpZFRvdWNoVGltZSA9IGlucHV0LmRlbHRhVGltZSA8IG9wdGlvbnMudGltZTtcblxuICAgICAgICB0aGlzLnJlc2V0KCk7XG5cbiAgICAgICAgaWYgKChpbnB1dC5ldmVudFR5cGUgJiBJTlBVVF9TVEFSVCkgJiYgKHRoaXMuY291bnQgPT09IDApKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5mYWlsVGltZW91dCgpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gd2Ugb25seSBhbGxvdyBsaXR0bGUgbW92ZW1lbnRcbiAgICAgICAgLy8gYW5kIHdlJ3ZlIHJlYWNoZWQgYW4gZW5kIGV2ZW50LCBzbyBhIHRhcCBpcyBwb3NzaWJsZVxuICAgICAgICBpZiAodmFsaWRNb3ZlbWVudCAmJiB2YWxpZFRvdWNoVGltZSAmJiB2YWxpZFBvaW50ZXJzKSB7XG4gICAgICAgICAgICBpZiAoaW5wdXQuZXZlbnRUeXBlICE9IElOUFVUX0VORCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmZhaWxUaW1lb3V0KCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHZhciB2YWxpZEludGVydmFsID0gdGhpcy5wVGltZSA/IChpbnB1dC50aW1lU3RhbXAgLSB0aGlzLnBUaW1lIDwgb3B0aW9ucy5pbnRlcnZhbCkgOiB0cnVlO1xuICAgICAgICAgICAgdmFyIHZhbGlkTXVsdGlUYXAgPSAhdGhpcy5wQ2VudGVyIHx8IGdldERpc3RhbmNlKHRoaXMucENlbnRlciwgaW5wdXQuY2VudGVyKSA8IG9wdGlvbnMucG9zVGhyZXNob2xkO1xuXG4gICAgICAgICAgICB0aGlzLnBUaW1lID0gaW5wdXQudGltZVN0YW1wO1xuICAgICAgICAgICAgdGhpcy5wQ2VudGVyID0gaW5wdXQuY2VudGVyO1xuXG4gICAgICAgICAgICBpZiAoIXZhbGlkTXVsdGlUYXAgfHwgIXZhbGlkSW50ZXJ2YWwpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNvdW50ID0gMTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jb3VudCArPSAxO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aGlzLl9pbnB1dCA9IGlucHV0O1xuXG4gICAgICAgICAgICAvLyBpZiB0YXAgY291bnQgbWF0Y2hlcyB3ZSBoYXZlIHJlY29nbml6ZWQgaXQsXG4gICAgICAgICAgICAvLyBlbHNlIGl0IGhhcyBiZWdhbiByZWNvZ25pemluZy4uLlxuICAgICAgICAgICAgdmFyIHRhcENvdW50ID0gdGhpcy5jb3VudCAlIG9wdGlvbnMudGFwcztcbiAgICAgICAgICAgIGlmICh0YXBDb3VudCA9PT0gMCkge1xuICAgICAgICAgICAgICAgIC8vIG5vIGZhaWxpbmcgcmVxdWlyZW1lbnRzLCBpbW1lZGlhdGVseSB0cmlnZ2VyIHRoZSB0YXAgZXZlbnRcbiAgICAgICAgICAgICAgICAvLyBvciB3YWl0IGFzIGxvbmcgYXMgdGhlIG11bHRpdGFwIGludGVydmFsIHRvIHRyaWdnZXJcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuaGFzUmVxdWlyZUZhaWx1cmVzKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFNUQVRFX1JFQ09HTklaRUQ7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fdGltZXIgPSBzZXRUaW1lb3V0Q29udGV4dChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUgPSBTVEFURV9SRUNPR05JWkVEO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50cnlFbWl0KCk7XG4gICAgICAgICAgICAgICAgICAgIH0sIG9wdGlvbnMuaW50ZXJ2YWwsIHRoaXMpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gU1RBVEVfQkVHQU47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBTVEFURV9GQUlMRUQ7XG4gICAgfSxcblxuICAgIGZhaWxUaW1lb3V0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgdGhpcy5fdGltZXIgPSBzZXRUaW1lb3V0Q29udGV4dChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHRoaXMuc3RhdGUgPSBTVEFURV9GQUlMRUQ7XG4gICAgICAgIH0sIHRoaXMub3B0aW9ucy5pbnRlcnZhbCwgdGhpcyk7XG4gICAgICAgIHJldHVybiBTVEFURV9GQUlMRUQ7XG4gICAgfSxcblxuICAgIHJlc2V0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuX3RpbWVyKTtcbiAgICB9LFxuXG4gICAgZW1pdDogZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmICh0aGlzLnN0YXRlID09IFNUQVRFX1JFQ09HTklaRUQpIHtcbiAgICAgICAgICAgIHRoaXMuX2lucHV0LnRhcENvdW50ID0gdGhpcy5jb3VudDtcbiAgICAgICAgICAgIHRoaXMubWFuYWdlci5lbWl0KHRoaXMub3B0aW9ucy5ldmVudCwgdGhpcy5faW5wdXQpO1xuICAgICAgICB9XG4gICAgfVxufSk7XG5cbi8qKlxuICogU2ltcGxlIHdheSB0byBjcmVhdGUgYSBtYW5hZ2VyIHdpdGggYSBkZWZhdWx0IHNldCBvZiByZWNvZ25pemVycy5cbiAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IGVsZW1lbnRcbiAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc11cbiAqIEBjb25zdHJ1Y3RvclxuICovXG5mdW5jdGlvbiBIYW1tZXIoZWxlbWVudCwgb3B0aW9ucykge1xuICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuICAgIG9wdGlvbnMucmVjb2duaXplcnMgPSBpZlVuZGVmaW5lZChvcHRpb25zLnJlY29nbml6ZXJzLCBIYW1tZXIuZGVmYXVsdHMucHJlc2V0KTtcbiAgICByZXR1cm4gbmV3IE1hbmFnZXIoZWxlbWVudCwgb3B0aW9ucyk7XG59XG5cbi8qKlxuICogQGNvbnN0IHtzdHJpbmd9XG4gKi9cbkhhbW1lci5WRVJTSU9OID0gJzIuMC43JztcblxuLyoqXG4gKiBkZWZhdWx0IHNldHRpbmdzXG4gKiBAbmFtZXNwYWNlXG4gKi9cbkhhbW1lci5kZWZhdWx0cyA9IHtcbiAgICAvKipcbiAgICAgKiBzZXQgaWYgRE9NIGV2ZW50cyBhcmUgYmVpbmcgdHJpZ2dlcmVkLlxuICAgICAqIEJ1dCB0aGlzIGlzIHNsb3dlciBhbmQgdW51c2VkIGJ5IHNpbXBsZSBpbXBsZW1lbnRhdGlvbnMsIHNvIGRpc2FibGVkIGJ5IGRlZmF1bHQuXG4gICAgICogQHR5cGUge0Jvb2xlYW59XG4gICAgICogQGRlZmF1bHQgZmFsc2VcbiAgICAgKi9cbiAgICBkb21FdmVudHM6IGZhbHNlLFxuXG4gICAgLyoqXG4gICAgICogVGhlIHZhbHVlIGZvciB0aGUgdG91Y2hBY3Rpb24gcHJvcGVydHkvZmFsbGJhY2suXG4gICAgICogV2hlbiBzZXQgdG8gYGNvbXB1dGVgIGl0IHdpbGwgbWFnaWNhbGx5IHNldCB0aGUgY29ycmVjdCB2YWx1ZSBiYXNlZCBvbiB0aGUgYWRkZWQgcmVjb2duaXplcnMuXG4gICAgICogQHR5cGUge1N0cmluZ31cbiAgICAgKiBAZGVmYXVsdCBjb21wdXRlXG4gICAgICovXG4gICAgdG91Y2hBY3Rpb246IFRPVUNIX0FDVElPTl9DT01QVVRFLFxuXG4gICAgLyoqXG4gICAgICogQHR5cGUge0Jvb2xlYW59XG4gICAgICogQGRlZmF1bHQgdHJ1ZVxuICAgICAqL1xuICAgIGVuYWJsZTogdHJ1ZSxcblxuICAgIC8qKlxuICAgICAqIEVYUEVSSU1FTlRBTCBGRUFUVVJFIC0tIGNhbiBiZSByZW1vdmVkL2NoYW5nZWRcbiAgICAgKiBDaGFuZ2UgdGhlIHBhcmVudCBpbnB1dCB0YXJnZXQgZWxlbWVudC5cbiAgICAgKiBJZiBOdWxsLCB0aGVuIGl0IGlzIGJlaW5nIHNldCB0aGUgdG8gbWFpbiBlbGVtZW50LlxuICAgICAqIEB0eXBlIHtOdWxsfEV2ZW50VGFyZ2V0fVxuICAgICAqIEBkZWZhdWx0IG51bGxcbiAgICAgKi9cbiAgICBpbnB1dFRhcmdldDogbnVsbCxcblxuICAgIC8qKlxuICAgICAqIGZvcmNlIGFuIGlucHV0IGNsYXNzXG4gICAgICogQHR5cGUge051bGx8RnVuY3Rpb259XG4gICAgICogQGRlZmF1bHQgbnVsbFxuICAgICAqL1xuICAgIGlucHV0Q2xhc3M6IG51bGwsXG5cbiAgICAvKipcbiAgICAgKiBEZWZhdWx0IHJlY29nbml6ZXIgc2V0dXAgd2hlbiBjYWxsaW5nIGBIYW1tZXIoKWBcbiAgICAgKiBXaGVuIGNyZWF0aW5nIGEgbmV3IE1hbmFnZXIgdGhlc2Ugd2lsbCBiZSBza2lwcGVkLlxuICAgICAqIEB0eXBlIHtBcnJheX1cbiAgICAgKi9cbiAgICBwcmVzZXQ6IFtcbiAgICAgICAgLy8gUmVjb2duaXplckNsYXNzLCBvcHRpb25zLCBbcmVjb2duaXplV2l0aCwgLi4uXSwgW3JlcXVpcmVGYWlsdXJlLCAuLi5dXG4gICAgICAgIFtSb3RhdGVSZWNvZ25pemVyLCB7ZW5hYmxlOiBmYWxzZX1dLFxuICAgICAgICBbUGluY2hSZWNvZ25pemVyLCB7ZW5hYmxlOiBmYWxzZX0sIFsncm90YXRlJ11dLFxuICAgICAgICBbU3dpcGVSZWNvZ25pemVyLCB7ZGlyZWN0aW9uOiBESVJFQ1RJT05fSE9SSVpPTlRBTH1dLFxuICAgICAgICBbUGFuUmVjb2duaXplciwge2RpcmVjdGlvbjogRElSRUNUSU9OX0hPUklaT05UQUx9LCBbJ3N3aXBlJ11dLFxuICAgICAgICBbVGFwUmVjb2duaXplcl0sXG4gICAgICAgIFtUYXBSZWNvZ25pemVyLCB7ZXZlbnQ6ICdkb3VibGV0YXAnLCB0YXBzOiAyfSwgWyd0YXAnXV0sXG4gICAgICAgIFtQcmVzc1JlY29nbml6ZXJdXG4gICAgXSxcblxuICAgIC8qKlxuICAgICAqIFNvbWUgQ1NTIHByb3BlcnRpZXMgY2FuIGJlIHVzZWQgdG8gaW1wcm92ZSB0aGUgd29ya2luZyBvZiBIYW1tZXIuXG4gICAgICogQWRkIHRoZW0gdG8gdGhpcyBtZXRob2QgYW5kIHRoZXkgd2lsbCBiZSBzZXQgd2hlbiBjcmVhdGluZyBhIG5ldyBNYW5hZ2VyLlxuICAgICAqIEBuYW1lc3BhY2VcbiAgICAgKi9cbiAgICBjc3NQcm9wczoge1xuICAgICAgICAvKipcbiAgICAgICAgICogRGlzYWJsZXMgdGV4dCBzZWxlY3Rpb24gdG8gaW1wcm92ZSB0aGUgZHJhZ2dpbmcgZ2VzdHVyZS4gTWFpbmx5IGZvciBkZXNrdG9wIGJyb3dzZXJzLlxuICAgICAgICAgKiBAdHlwZSB7U3RyaW5nfVxuICAgICAgICAgKiBAZGVmYXVsdCAnbm9uZSdcbiAgICAgICAgICovXG4gICAgICAgIHVzZXJTZWxlY3Q6ICdub25lJyxcblxuICAgICAgICAvKipcbiAgICAgICAgICogRGlzYWJsZSB0aGUgV2luZG93cyBQaG9uZSBncmlwcGVycyB3aGVuIHByZXNzaW5nIGFuIGVsZW1lbnQuXG4gICAgICAgICAqIEB0eXBlIHtTdHJpbmd9XG4gICAgICAgICAqIEBkZWZhdWx0ICdub25lJ1xuICAgICAgICAgKi9cbiAgICAgICAgdG91Y2hTZWxlY3Q6ICdub25lJyxcblxuICAgICAgICAvKipcbiAgICAgICAgICogRGlzYWJsZXMgdGhlIGRlZmF1bHQgY2FsbG91dCBzaG93biB3aGVuIHlvdSB0b3VjaCBhbmQgaG9sZCBhIHRvdWNoIHRhcmdldC5cbiAgICAgICAgICogT24gaU9TLCB3aGVuIHlvdSB0b3VjaCBhbmQgaG9sZCBhIHRvdWNoIHRhcmdldCBzdWNoIGFzIGEgbGluaywgU2FmYXJpIGRpc3BsYXlzXG4gICAgICAgICAqIGEgY2FsbG91dCBjb250YWluaW5nIGluZm9ybWF0aW9uIGFib3V0IHRoZSBsaW5rLiBUaGlzIHByb3BlcnR5IGFsbG93cyB5b3UgdG8gZGlzYWJsZSB0aGF0IGNhbGxvdXQuXG4gICAgICAgICAqIEB0eXBlIHtTdHJpbmd9XG4gICAgICAgICAqIEBkZWZhdWx0ICdub25lJ1xuICAgICAgICAgKi9cbiAgICAgICAgdG91Y2hDYWxsb3V0OiAnbm9uZScsXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNwZWNpZmllcyB3aGV0aGVyIHpvb21pbmcgaXMgZW5hYmxlZC4gVXNlZCBieSBJRTEwPlxuICAgICAgICAgKiBAdHlwZSB7U3RyaW5nfVxuICAgICAgICAgKiBAZGVmYXVsdCAnbm9uZSdcbiAgICAgICAgICovXG4gICAgICAgIGNvbnRlbnRab29taW5nOiAnbm9uZScsXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNwZWNpZmllcyB0aGF0IGFuIGVudGlyZSBlbGVtZW50IHNob3VsZCBiZSBkcmFnZ2FibGUgaW5zdGVhZCBvZiBpdHMgY29udGVudHMuIE1haW5seSBmb3IgZGVza3RvcCBicm93c2Vycy5cbiAgICAgICAgICogQHR5cGUge1N0cmluZ31cbiAgICAgICAgICogQGRlZmF1bHQgJ25vbmUnXG4gICAgICAgICAqL1xuICAgICAgICB1c2VyRHJhZzogJ25vbmUnLFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBPdmVycmlkZXMgdGhlIGhpZ2hsaWdodCBjb2xvciBzaG93biB3aGVuIHRoZSB1c2VyIHRhcHMgYSBsaW5rIG9yIGEgSmF2YVNjcmlwdFxuICAgICAgICAgKiBjbGlja2FibGUgZWxlbWVudCBpbiBpT1MuIFRoaXMgcHJvcGVydHkgb2JleXMgdGhlIGFscGhhIHZhbHVlLCBpZiBzcGVjaWZpZWQuXG4gICAgICAgICAqIEB0eXBlIHtTdHJpbmd9XG4gICAgICAgICAqIEBkZWZhdWx0ICdyZ2JhKDAsMCwwLDApJ1xuICAgICAgICAgKi9cbiAgICAgICAgdGFwSGlnaGxpZ2h0Q29sb3I6ICdyZ2JhKDAsMCwwLDApJ1xuICAgIH1cbn07XG5cbnZhciBTVE9QID0gMTtcbnZhciBGT1JDRURfU1RPUCA9IDI7XG5cbi8qKlxuICogTWFuYWdlclxuICogQHBhcmFtIHtIVE1MRWxlbWVudH0gZWxlbWVudFxuICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXVxuICogQGNvbnN0cnVjdG9yXG4gKi9cbmZ1bmN0aW9uIE1hbmFnZXIoZWxlbWVudCwgb3B0aW9ucykge1xuICAgIHRoaXMub3B0aW9ucyA9IGFzc2lnbih7fSwgSGFtbWVyLmRlZmF1bHRzLCBvcHRpb25zIHx8IHt9KTtcblxuICAgIHRoaXMub3B0aW9ucy5pbnB1dFRhcmdldCA9IHRoaXMub3B0aW9ucy5pbnB1dFRhcmdldCB8fCBlbGVtZW50O1xuXG4gICAgdGhpcy5oYW5kbGVycyA9IHt9O1xuICAgIHRoaXMuc2Vzc2lvbiA9IHt9O1xuICAgIHRoaXMucmVjb2duaXplcnMgPSBbXTtcbiAgICB0aGlzLm9sZENzc1Byb3BzID0ge307XG5cbiAgICB0aGlzLmVsZW1lbnQgPSBlbGVtZW50O1xuICAgIHRoaXMuaW5wdXQgPSBjcmVhdGVJbnB1dEluc3RhbmNlKHRoaXMpO1xuICAgIHRoaXMudG91Y2hBY3Rpb24gPSBuZXcgVG91Y2hBY3Rpb24odGhpcywgdGhpcy5vcHRpb25zLnRvdWNoQWN0aW9uKTtcblxuICAgIHRvZ2dsZUNzc1Byb3BzKHRoaXMsIHRydWUpO1xuXG4gICAgZWFjaCh0aGlzLm9wdGlvbnMucmVjb2duaXplcnMsIGZ1bmN0aW9uKGl0ZW0pIHtcbiAgICAgICAgdmFyIHJlY29nbml6ZXIgPSB0aGlzLmFkZChuZXcgKGl0ZW1bMF0pKGl0ZW1bMV0pKTtcbiAgICAgICAgaXRlbVsyXSAmJiByZWNvZ25pemVyLnJlY29nbml6ZVdpdGgoaXRlbVsyXSk7XG4gICAgICAgIGl0ZW1bM10gJiYgcmVjb2duaXplci5yZXF1aXJlRmFpbHVyZShpdGVtWzNdKTtcbiAgICB9LCB0aGlzKTtcbn1cblxuTWFuYWdlci5wcm90b3R5cGUgPSB7XG4gICAgLyoqXG4gICAgICogc2V0IG9wdGlvbnNcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuICAgICAqIEByZXR1cm5zIHtNYW5hZ2VyfVxuICAgICAqL1xuICAgIHNldDogZnVuY3Rpb24ob3B0aW9ucykge1xuICAgICAgICBhc3NpZ24odGhpcy5vcHRpb25zLCBvcHRpb25zKTtcblxuICAgICAgICAvLyBPcHRpb25zIHRoYXQgbmVlZCBhIGxpdHRsZSBtb3JlIHNldHVwXG4gICAgICAgIGlmIChvcHRpb25zLnRvdWNoQWN0aW9uKSB7XG4gICAgICAgICAgICB0aGlzLnRvdWNoQWN0aW9uLnVwZGF0ZSgpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChvcHRpb25zLmlucHV0VGFyZ2V0KSB7XG4gICAgICAgICAgICAvLyBDbGVhbiB1cCBleGlzdGluZyBldmVudCBsaXN0ZW5lcnMgYW5kIHJlaW5pdGlhbGl6ZVxuICAgICAgICAgICAgdGhpcy5pbnB1dC5kZXN0cm95KCk7XG4gICAgICAgICAgICB0aGlzLmlucHV0LnRhcmdldCA9IG9wdGlvbnMuaW5wdXRUYXJnZXQ7XG4gICAgICAgICAgICB0aGlzLmlucHV0LmluaXQoKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogc3RvcCByZWNvZ25pemluZyBmb3IgdGhpcyBzZXNzaW9uLlxuICAgICAqIFRoaXMgc2Vzc2lvbiB3aWxsIGJlIGRpc2NhcmRlZCwgd2hlbiBhIG5ldyBbaW5wdXRdc3RhcnQgZXZlbnQgaXMgZmlyZWQuXG4gICAgICogV2hlbiBmb3JjZWQsIHRoZSByZWNvZ25pemVyIGN5Y2xlIGlzIHN0b3BwZWQgaW1tZWRpYXRlbHkuXG4gICAgICogQHBhcmFtIHtCb29sZWFufSBbZm9yY2VdXG4gICAgICovXG4gICAgc3RvcDogZnVuY3Rpb24oZm9yY2UpIHtcbiAgICAgICAgdGhpcy5zZXNzaW9uLnN0b3BwZWQgPSBmb3JjZSA/IEZPUkNFRF9TVE9QIDogU1RPUDtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogcnVuIHRoZSByZWNvZ25pemVycyFcbiAgICAgKiBjYWxsZWQgYnkgdGhlIGlucHV0SGFuZGxlciBmdW5jdGlvbiBvbiBldmVyeSBtb3ZlbWVudCBvZiB0aGUgcG9pbnRlcnMgKHRvdWNoZXMpXG4gICAgICogaXQgd2Fsa3MgdGhyb3VnaCBhbGwgdGhlIHJlY29nbml6ZXJzIGFuZCB0cmllcyB0byBkZXRlY3QgdGhlIGdlc3R1cmUgdGhhdCBpcyBiZWluZyBtYWRlXG4gICAgICogQHBhcmFtIHtPYmplY3R9IGlucHV0RGF0YVxuICAgICAqL1xuICAgIHJlY29nbml6ZTogZnVuY3Rpb24oaW5wdXREYXRhKSB7XG4gICAgICAgIHZhciBzZXNzaW9uID0gdGhpcy5zZXNzaW9uO1xuICAgICAgICBpZiAoc2Vzc2lvbi5zdG9wcGVkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICAvLyBydW4gdGhlIHRvdWNoLWFjdGlvbiBwb2x5ZmlsbFxuICAgICAgICB0aGlzLnRvdWNoQWN0aW9uLnByZXZlbnREZWZhdWx0cyhpbnB1dERhdGEpO1xuXG4gICAgICAgIHZhciByZWNvZ25pemVyO1xuICAgICAgICB2YXIgcmVjb2duaXplcnMgPSB0aGlzLnJlY29nbml6ZXJzO1xuXG4gICAgICAgIC8vIHRoaXMgaG9sZHMgdGhlIHJlY29nbml6ZXIgdGhhdCBpcyBiZWluZyByZWNvZ25pemVkLlxuICAgICAgICAvLyBzbyB0aGUgcmVjb2duaXplcidzIHN0YXRlIG5lZWRzIHRvIGJlIEJFR0FOLCBDSEFOR0VELCBFTkRFRCBvciBSRUNPR05JWkVEXG4gICAgICAgIC8vIGlmIG5vIHJlY29nbml6ZXIgaXMgZGV0ZWN0aW5nIGEgdGhpbmcsIGl0IGlzIHNldCB0byBgbnVsbGBcbiAgICAgICAgdmFyIGN1clJlY29nbml6ZXIgPSBzZXNzaW9uLmN1clJlY29nbml6ZXI7XG5cbiAgICAgICAgLy8gcmVzZXQgd2hlbiB0aGUgbGFzdCByZWNvZ25pemVyIGlzIHJlY29nbml6ZWRcbiAgICAgICAgLy8gb3Igd2hlbiB3ZSdyZSBpbiBhIG5ldyBzZXNzaW9uXG4gICAgICAgIGlmICghY3VyUmVjb2duaXplciB8fCAoY3VyUmVjb2duaXplciAmJiBjdXJSZWNvZ25pemVyLnN0YXRlICYgU1RBVEVfUkVDT0dOSVpFRCkpIHtcbiAgICAgICAgICAgIGN1clJlY29nbml6ZXIgPSBzZXNzaW9uLmN1clJlY29nbml6ZXIgPSBudWxsO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGkgPSAwO1xuICAgICAgICB3aGlsZSAoaSA8IHJlY29nbml6ZXJzLmxlbmd0aCkge1xuICAgICAgICAgICAgcmVjb2duaXplciA9IHJlY29nbml6ZXJzW2ldO1xuXG4gICAgICAgICAgICAvLyBmaW5kIG91dCBpZiB3ZSBhcmUgYWxsb3dlZCB0cnkgdG8gcmVjb2duaXplIHRoZSBpbnB1dCBmb3IgdGhpcyBvbmUuXG4gICAgICAgICAgICAvLyAxLiAgIGFsbG93IGlmIHRoZSBzZXNzaW9uIGlzIE5PVCBmb3JjZWQgc3RvcHBlZCAoc2VlIHRoZSAuc3RvcCgpIG1ldGhvZClcbiAgICAgICAgICAgIC8vIDIuICAgYWxsb3cgaWYgd2Ugc3RpbGwgaGF2ZW4ndCByZWNvZ25pemVkIGEgZ2VzdHVyZSBpbiB0aGlzIHNlc3Npb24sIG9yIHRoZSB0aGlzIHJlY29nbml6ZXIgaXMgdGhlIG9uZVxuICAgICAgICAgICAgLy8gICAgICB0aGF0IGlzIGJlaW5nIHJlY29nbml6ZWQuXG4gICAgICAgICAgICAvLyAzLiAgIGFsbG93IGlmIHRoZSByZWNvZ25pemVyIGlzIGFsbG93ZWQgdG8gcnVuIHNpbXVsdGFuZW91cyB3aXRoIHRoZSBjdXJyZW50IHJlY29nbml6ZWQgcmVjb2duaXplci5cbiAgICAgICAgICAgIC8vICAgICAgdGhpcyBjYW4gYmUgc2V0dXAgd2l0aCB0aGUgYHJlY29nbml6ZVdpdGgoKWAgbWV0aG9kIG9uIHRoZSByZWNvZ25pemVyLlxuICAgICAgICAgICAgaWYgKHNlc3Npb24uc3RvcHBlZCAhPT0gRk9SQ0VEX1NUT1AgJiYgKCAvLyAxXG4gICAgICAgICAgICAgICAgICAgICFjdXJSZWNvZ25pemVyIHx8IHJlY29nbml6ZXIgPT0gY3VyUmVjb2duaXplciB8fCAvLyAyXG4gICAgICAgICAgICAgICAgICAgIHJlY29nbml6ZXIuY2FuUmVjb2duaXplV2l0aChjdXJSZWNvZ25pemVyKSkpIHsgLy8gM1xuICAgICAgICAgICAgICAgIHJlY29nbml6ZXIucmVjb2duaXplKGlucHV0RGF0YSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJlY29nbml6ZXIucmVzZXQoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gaWYgdGhlIHJlY29nbml6ZXIgaGFzIGJlZW4gcmVjb2duaXppbmcgdGhlIGlucHV0IGFzIGEgdmFsaWQgZ2VzdHVyZSwgd2Ugd2FudCB0byBzdG9yZSB0aGlzIG9uZSBhcyB0aGVcbiAgICAgICAgICAgIC8vIGN1cnJlbnQgYWN0aXZlIHJlY29nbml6ZXIuIGJ1dCBvbmx5IGlmIHdlIGRvbid0IGFscmVhZHkgaGF2ZSBhbiBhY3RpdmUgcmVjb2duaXplclxuICAgICAgICAgICAgaWYgKCFjdXJSZWNvZ25pemVyICYmIHJlY29nbml6ZXIuc3RhdGUgJiAoU1RBVEVfQkVHQU4gfCBTVEFURV9DSEFOR0VEIHwgU1RBVEVfRU5ERUQpKSB7XG4gICAgICAgICAgICAgICAgY3VyUmVjb2duaXplciA9IHNlc3Npb24uY3VyUmVjb2duaXplciA9IHJlY29nbml6ZXI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpKys7XG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogZ2V0IGEgcmVjb2duaXplciBieSBpdHMgZXZlbnQgbmFtZS5cbiAgICAgKiBAcGFyYW0ge1JlY29nbml6ZXJ8U3RyaW5nfSByZWNvZ25pemVyXG4gICAgICogQHJldHVybnMge1JlY29nbml6ZXJ8TnVsbH1cbiAgICAgKi9cbiAgICBnZXQ6IGZ1bmN0aW9uKHJlY29nbml6ZXIpIHtcbiAgICAgICAgaWYgKHJlY29nbml6ZXIgaW5zdGFuY2VvZiBSZWNvZ25pemVyKSB7XG4gICAgICAgICAgICByZXR1cm4gcmVjb2duaXplcjtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciByZWNvZ25pemVycyA9IHRoaXMucmVjb2duaXplcnM7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcmVjb2duaXplcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGlmIChyZWNvZ25pemVyc1tpXS5vcHRpb25zLmV2ZW50ID09IHJlY29nbml6ZXIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVjb2duaXplcnNbaV07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIGFkZCBhIHJlY29nbml6ZXIgdG8gdGhlIG1hbmFnZXJcbiAgICAgKiBleGlzdGluZyByZWNvZ25pemVycyB3aXRoIHRoZSBzYW1lIGV2ZW50IG5hbWUgd2lsbCBiZSByZW1vdmVkXG4gICAgICogQHBhcmFtIHtSZWNvZ25pemVyfSByZWNvZ25pemVyXG4gICAgICogQHJldHVybnMge1JlY29nbml6ZXJ8TWFuYWdlcn1cbiAgICAgKi9cbiAgICBhZGQ6IGZ1bmN0aW9uKHJlY29nbml6ZXIpIHtcbiAgICAgICAgaWYgKGludm9rZUFycmF5QXJnKHJlY29nbml6ZXIsICdhZGQnLCB0aGlzKSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH1cblxuICAgICAgICAvLyByZW1vdmUgZXhpc3RpbmdcbiAgICAgICAgdmFyIGV4aXN0aW5nID0gdGhpcy5nZXQocmVjb2duaXplci5vcHRpb25zLmV2ZW50KTtcbiAgICAgICAgaWYgKGV4aXN0aW5nKSB7XG4gICAgICAgICAgICB0aGlzLnJlbW92ZShleGlzdGluZyk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnJlY29nbml6ZXJzLnB1c2gocmVjb2duaXplcik7XG4gICAgICAgIHJlY29nbml6ZXIubWFuYWdlciA9IHRoaXM7XG5cbiAgICAgICAgdGhpcy50b3VjaEFjdGlvbi51cGRhdGUoKTtcbiAgICAgICAgcmV0dXJuIHJlY29nbml6ZXI7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIHJlbW92ZSBhIHJlY29nbml6ZXIgYnkgbmFtZSBvciBpbnN0YW5jZVxuICAgICAqIEBwYXJhbSB7UmVjb2duaXplcnxTdHJpbmd9IHJlY29nbml6ZXJcbiAgICAgKiBAcmV0dXJucyB7TWFuYWdlcn1cbiAgICAgKi9cbiAgICByZW1vdmU6IGZ1bmN0aW9uKHJlY29nbml6ZXIpIHtcbiAgICAgICAgaWYgKGludm9rZUFycmF5QXJnKHJlY29nbml6ZXIsICdyZW1vdmUnLCB0aGlzKSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH1cblxuICAgICAgICByZWNvZ25pemVyID0gdGhpcy5nZXQocmVjb2duaXplcik7XG5cbiAgICAgICAgLy8gbGV0J3MgbWFrZSBzdXJlIHRoaXMgcmVjb2duaXplciBleGlzdHNcbiAgICAgICAgaWYgKHJlY29nbml6ZXIpIHtcbiAgICAgICAgICAgIHZhciByZWNvZ25pemVycyA9IHRoaXMucmVjb2duaXplcnM7XG4gICAgICAgICAgICB2YXIgaW5kZXggPSBpbkFycmF5KHJlY29nbml6ZXJzLCByZWNvZ25pemVyKTtcblxuICAgICAgICAgICAgaWYgKGluZGV4ICE9PSAtMSkge1xuICAgICAgICAgICAgICAgIHJlY29nbml6ZXJzLnNwbGljZShpbmRleCwgMSk7XG4gICAgICAgICAgICAgICAgdGhpcy50b3VjaEFjdGlvbi51cGRhdGUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBiaW5kIGV2ZW50XG4gICAgICogQHBhcmFtIHtTdHJpbmd9IGV2ZW50c1xuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGhhbmRsZXJcbiAgICAgKiBAcmV0dXJucyB7RXZlbnRFbWl0dGVyfSB0aGlzXG4gICAgICovXG4gICAgb246IGZ1bmN0aW9uKGV2ZW50cywgaGFuZGxlcikge1xuICAgICAgICBpZiAoZXZlbnRzID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaGFuZGxlciA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgaGFuZGxlcnMgPSB0aGlzLmhhbmRsZXJzO1xuICAgICAgICBlYWNoKHNwbGl0U3RyKGV2ZW50cyksIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgICAgICBoYW5kbGVyc1tldmVudF0gPSBoYW5kbGVyc1tldmVudF0gfHwgW107XG4gICAgICAgICAgICBoYW5kbGVyc1tldmVudF0ucHVzaChoYW5kbGVyKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiB1bmJpbmQgZXZlbnQsIGxlYXZlIGVtaXQgYmxhbmsgdG8gcmVtb3ZlIGFsbCBoYW5kbGVyc1xuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBldmVudHNcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbaGFuZGxlcl1cbiAgICAgKiBAcmV0dXJucyB7RXZlbnRFbWl0dGVyfSB0aGlzXG4gICAgICovXG4gICAgb2ZmOiBmdW5jdGlvbihldmVudHMsIGhhbmRsZXIpIHtcbiAgICAgICAgaWYgKGV2ZW50cyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgaGFuZGxlcnMgPSB0aGlzLmhhbmRsZXJzO1xuICAgICAgICBlYWNoKHNwbGl0U3RyKGV2ZW50cyksIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgICAgICBpZiAoIWhhbmRsZXIpIHtcbiAgICAgICAgICAgICAgICBkZWxldGUgaGFuZGxlcnNbZXZlbnRdO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBoYW5kbGVyc1tldmVudF0gJiYgaGFuZGxlcnNbZXZlbnRdLnNwbGljZShpbkFycmF5KGhhbmRsZXJzW2V2ZW50XSwgaGFuZGxlciksIDEpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIGVtaXQgZXZlbnQgdG8gdGhlIGxpc3RlbmVyc1xuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBldmVudFxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBkYXRhXG4gICAgICovXG4gICAgZW1pdDogZnVuY3Rpb24oZXZlbnQsIGRhdGEpIHtcbiAgICAgICAgLy8gd2UgYWxzbyB3YW50IHRvIHRyaWdnZXIgZG9tIGV2ZW50c1xuICAgICAgICBpZiAodGhpcy5vcHRpb25zLmRvbUV2ZW50cykge1xuICAgICAgICAgICAgdHJpZ2dlckRvbUV2ZW50KGV2ZW50LCBkYXRhKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIG5vIGhhbmRsZXJzLCBzbyBza2lwIGl0IGFsbFxuICAgICAgICB2YXIgaGFuZGxlcnMgPSB0aGlzLmhhbmRsZXJzW2V2ZW50XSAmJiB0aGlzLmhhbmRsZXJzW2V2ZW50XS5zbGljZSgpO1xuICAgICAgICBpZiAoIWhhbmRsZXJzIHx8ICFoYW5kbGVycy5sZW5ndGgpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGRhdGEudHlwZSA9IGV2ZW50O1xuICAgICAgICBkYXRhLnByZXZlbnREZWZhdWx0ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBkYXRhLnNyY0V2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIH07XG5cbiAgICAgICAgdmFyIGkgPSAwO1xuICAgICAgICB3aGlsZSAoaSA8IGhhbmRsZXJzLmxlbmd0aCkge1xuICAgICAgICAgICAgaGFuZGxlcnNbaV0oZGF0YSk7XG4gICAgICAgICAgICBpKys7XG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogZGVzdHJveSB0aGUgbWFuYWdlciBhbmQgdW5iaW5kcyBhbGwgZXZlbnRzXG4gICAgICogaXQgZG9lc24ndCB1bmJpbmQgZG9tIGV2ZW50cywgdGhhdCBpcyB0aGUgdXNlciBvd24gcmVzcG9uc2liaWxpdHlcbiAgICAgKi9cbiAgICBkZXN0cm95OiBmdW5jdGlvbigpIHtcbiAgICAgICAgdGhpcy5lbGVtZW50ICYmIHRvZ2dsZUNzc1Byb3BzKHRoaXMsIGZhbHNlKTtcblxuICAgICAgICB0aGlzLmhhbmRsZXJzID0ge307XG4gICAgICAgIHRoaXMuc2Vzc2lvbiA9IHt9O1xuICAgICAgICB0aGlzLmlucHV0LmRlc3Ryb3koKTtcbiAgICAgICAgdGhpcy5lbGVtZW50ID0gbnVsbDtcbiAgICB9XG59O1xuXG4vKipcbiAqIGFkZC9yZW1vdmUgdGhlIGNzcyBwcm9wZXJ0aWVzIGFzIGRlZmluZWQgaW4gbWFuYWdlci5vcHRpb25zLmNzc1Byb3BzXG4gKiBAcGFyYW0ge01hbmFnZXJ9IG1hbmFnZXJcbiAqIEBwYXJhbSB7Qm9vbGVhbn0gYWRkXG4gKi9cbmZ1bmN0aW9uIHRvZ2dsZUNzc1Byb3BzKG1hbmFnZXIsIGFkZCkge1xuICAgIHZhciBlbGVtZW50ID0gbWFuYWdlci5lbGVtZW50O1xuICAgIGlmICghZWxlbWVudC5zdHlsZSkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIHZhciBwcm9wO1xuICAgIGVhY2gobWFuYWdlci5vcHRpb25zLmNzc1Byb3BzLCBmdW5jdGlvbih2YWx1ZSwgbmFtZSkge1xuICAgICAgICBwcm9wID0gcHJlZml4ZWQoZWxlbWVudC5zdHlsZSwgbmFtZSk7XG4gICAgICAgIGlmIChhZGQpIHtcbiAgICAgICAgICAgIG1hbmFnZXIub2xkQ3NzUHJvcHNbcHJvcF0gPSBlbGVtZW50LnN0eWxlW3Byb3BdO1xuICAgICAgICAgICAgZWxlbWVudC5zdHlsZVtwcm9wXSA9IHZhbHVlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZWxlbWVudC5zdHlsZVtwcm9wXSA9IG1hbmFnZXIub2xkQ3NzUHJvcHNbcHJvcF0gfHwgJyc7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICBpZiAoIWFkZCkge1xuICAgICAgICBtYW5hZ2VyLm9sZENzc1Byb3BzID0ge307XG4gICAgfVxufVxuXG4vKipcbiAqIHRyaWdnZXIgZG9tIGV2ZW50XG4gKiBAcGFyYW0ge1N0cmluZ30gZXZlbnRcbiAqIEBwYXJhbSB7T2JqZWN0fSBkYXRhXG4gKi9cbmZ1bmN0aW9uIHRyaWdnZXJEb21FdmVudChldmVudCwgZGF0YSkge1xuICAgIHZhciBnZXN0dXJlRXZlbnQgPSBkb2N1bWVudC5jcmVhdGVFdmVudCgnRXZlbnQnKTtcbiAgICBnZXN0dXJlRXZlbnQuaW5pdEV2ZW50KGV2ZW50LCB0cnVlLCB0cnVlKTtcbiAgICBnZXN0dXJlRXZlbnQuZ2VzdHVyZSA9IGRhdGE7XG4gICAgZGF0YS50YXJnZXQuZGlzcGF0Y2hFdmVudChnZXN0dXJlRXZlbnQpO1xufVxuXG5hc3NpZ24oSGFtbWVyLCB7XG4gICAgSU5QVVRfU1RBUlQ6IElOUFVUX1NUQVJULFxuICAgIElOUFVUX01PVkU6IElOUFVUX01PVkUsXG4gICAgSU5QVVRfRU5EOiBJTlBVVF9FTkQsXG4gICAgSU5QVVRfQ0FOQ0VMOiBJTlBVVF9DQU5DRUwsXG5cbiAgICBTVEFURV9QT1NTSUJMRTogU1RBVEVfUE9TU0lCTEUsXG4gICAgU1RBVEVfQkVHQU46IFNUQVRFX0JFR0FOLFxuICAgIFNUQVRFX0NIQU5HRUQ6IFNUQVRFX0NIQU5HRUQsXG4gICAgU1RBVEVfRU5ERUQ6IFNUQVRFX0VOREVELFxuICAgIFNUQVRFX1JFQ09HTklaRUQ6IFNUQVRFX1JFQ09HTklaRUQsXG4gICAgU1RBVEVfQ0FOQ0VMTEVEOiBTVEFURV9DQU5DRUxMRUQsXG4gICAgU1RBVEVfRkFJTEVEOiBTVEFURV9GQUlMRUQsXG5cbiAgICBESVJFQ1RJT05fTk9ORTogRElSRUNUSU9OX05PTkUsXG4gICAgRElSRUNUSU9OX0xFRlQ6IERJUkVDVElPTl9MRUZULFxuICAgIERJUkVDVElPTl9SSUdIVDogRElSRUNUSU9OX1JJR0hULFxuICAgIERJUkVDVElPTl9VUDogRElSRUNUSU9OX1VQLFxuICAgIERJUkVDVElPTl9ET1dOOiBESVJFQ1RJT05fRE9XTixcbiAgICBESVJFQ1RJT05fSE9SSVpPTlRBTDogRElSRUNUSU9OX0hPUklaT05UQUwsXG4gICAgRElSRUNUSU9OX1ZFUlRJQ0FMOiBESVJFQ1RJT05fVkVSVElDQUwsXG4gICAgRElSRUNUSU9OX0FMTDogRElSRUNUSU9OX0FMTCxcblxuICAgIE1hbmFnZXI6IE1hbmFnZXIsXG4gICAgSW5wdXQ6IElucHV0LFxuICAgIFRvdWNoQWN0aW9uOiBUb3VjaEFjdGlvbixcblxuICAgIFRvdWNoSW5wdXQ6IFRvdWNoSW5wdXQsXG4gICAgTW91c2VJbnB1dDogTW91c2VJbnB1dCxcbiAgICBQb2ludGVyRXZlbnRJbnB1dDogUG9pbnRlckV2ZW50SW5wdXQsXG4gICAgVG91Y2hNb3VzZUlucHV0OiBUb3VjaE1vdXNlSW5wdXQsXG4gICAgU2luZ2xlVG91Y2hJbnB1dDogU2luZ2xlVG91Y2hJbnB1dCxcblxuICAgIFJlY29nbml6ZXI6IFJlY29nbml6ZXIsXG4gICAgQXR0clJlY29nbml6ZXI6IEF0dHJSZWNvZ25pemVyLFxuICAgIFRhcDogVGFwUmVjb2duaXplcixcbiAgICBQYW46IFBhblJlY29nbml6ZXIsXG4gICAgU3dpcGU6IFN3aXBlUmVjb2duaXplcixcbiAgICBQaW5jaDogUGluY2hSZWNvZ25pemVyLFxuICAgIFJvdGF0ZTogUm90YXRlUmVjb2duaXplcixcbiAgICBQcmVzczogUHJlc3NSZWNvZ25pemVyLFxuXG4gICAgb246IGFkZEV2ZW50TGlzdGVuZXJzLFxuICAgIG9mZjogcmVtb3ZlRXZlbnRMaXN0ZW5lcnMsXG4gICAgZWFjaDogZWFjaCxcbiAgICBtZXJnZTogbWVyZ2UsXG4gICAgZXh0ZW5kOiBleHRlbmQsXG4gICAgYXNzaWduOiBhc3NpZ24sXG4gICAgaW5oZXJpdDogaW5oZXJpdCxcbiAgICBiaW5kRm46IGJpbmRGbixcbiAgICBwcmVmaXhlZDogcHJlZml4ZWRcbn0pO1xuXG4vLyB0aGlzIHByZXZlbnRzIGVycm9ycyB3aGVuIEhhbW1lciBpcyBsb2FkZWQgaW4gdGhlIHByZXNlbmNlIG9mIGFuIEFNRFxuLy8gIHN0eWxlIGxvYWRlciBidXQgYnkgc2NyaXB0IHRhZywgbm90IGJ5IHRoZSBsb2FkZXIuXG52YXIgZnJlZUdsb2JhbCA9ICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyA/IHdpbmRvdyA6ICh0eXBlb2Ygc2VsZiAhPT0gJ3VuZGVmaW5lZCcgPyBzZWxmIDoge30pKTsgLy8ganNoaW50IGlnbm9yZTpsaW5lXG5mcmVlR2xvYmFsLkhhbW1lciA9IEhhbW1lcjtcblxuaWYgKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZCkge1xuICAgIGRlZmluZShmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIEhhbW1lcjtcbiAgICB9KTtcbn0gZWxzZSBpZiAodHlwZW9mIG1vZHVsZSAhPSAndW5kZWZpbmVkJyAmJiBtb2R1bGUuZXhwb3J0cykge1xuICAgIG1vZHVsZS5leHBvcnRzID0gSGFtbWVyO1xufSBlbHNlIHtcbiAgICB3aW5kb3dbZXhwb3J0TmFtZV0gPSBIYW1tZXI7XG59XG5cbn0pKHdpbmRvdywgZG9jdW1lbnQsICdIYW1tZXInKTtcbiIsIi8qKlxuICogTWljcm9FdmVudCAtIHRvIG1ha2UgYW55IGpzIG9iamVjdCBhbiBldmVudCBlbWl0dGVyIChzZXJ2ZXIgb3IgYnJvd3NlcilcbiAqIFxuICogLSBwdXJlIGphdmFzY3JpcHQgLSBzZXJ2ZXIgY29tcGF0aWJsZSwgYnJvd3NlciBjb21wYXRpYmxlXG4gKiAtIGRvbnQgcmVseSBvbiB0aGUgYnJvd3NlciBkb21zXG4gKiAtIHN1cGVyIHNpbXBsZSAtIHlvdSBnZXQgaXQgaW1tZWRpYXRseSwgbm8gbWlzdGVyeSwgbm8gbWFnaWMgaW52b2x2ZWRcbiAqXG4gKiAtIGNyZWF0ZSBhIE1pY3JvRXZlbnREZWJ1ZyB3aXRoIGdvb2RpZXMgdG8gZGVidWdcbiAqICAgLSBtYWtlIGl0IHNhZmVyIHRvIHVzZVxuKi9cblxudmFyIE1pY3JvRXZlbnRcdD0gZnVuY3Rpb24oKXt9XG5NaWNyb0V2ZW50LnByb3RvdHlwZVx0PSB7XG5cdGJpbmRcdDogZnVuY3Rpb24oZXZlbnQsIGZjdCl7XG5cdFx0dGhpcy5fZXZlbnRzID0gdGhpcy5fZXZlbnRzIHx8IHt9O1xuXHRcdHRoaXMuX2V2ZW50c1tldmVudF0gPSB0aGlzLl9ldmVudHNbZXZlbnRdXHR8fCBbXTtcblx0XHR0aGlzLl9ldmVudHNbZXZlbnRdLnB1c2goZmN0KTtcblx0fSxcblx0dW5iaW5kXHQ6IGZ1bmN0aW9uKGV2ZW50LCBmY3Qpe1xuXHRcdHRoaXMuX2V2ZW50cyA9IHRoaXMuX2V2ZW50cyB8fCB7fTtcblx0XHRpZiggZXZlbnQgaW4gdGhpcy5fZXZlbnRzID09PSBmYWxzZSAgKVx0cmV0dXJuO1xuXHRcdHRoaXMuX2V2ZW50c1tldmVudF0uc3BsaWNlKHRoaXMuX2V2ZW50c1tldmVudF0uaW5kZXhPZihmY3QpLCAxKTtcblx0fSxcblx0dHJpZ2dlclx0OiBmdW5jdGlvbihldmVudCAvKiAsIGFyZ3MuLi4gKi8pe1xuXHRcdHRoaXMuX2V2ZW50cyA9IHRoaXMuX2V2ZW50cyB8fCB7fTtcblx0XHRpZiggZXZlbnQgaW4gdGhpcy5fZXZlbnRzID09PSBmYWxzZSAgKVx0cmV0dXJuO1xuXHRcdGZvcih2YXIgaSA9IDA7IGkgPCB0aGlzLl9ldmVudHNbZXZlbnRdLmxlbmd0aDsgaSsrKXtcblx0XHRcdHRoaXMuX2V2ZW50c1tldmVudF1baV0uYXBwbHkodGhpcywgQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKSlcblx0XHR9XG5cdH1cbn07XG5cbi8qKlxuICogbWl4aW4gd2lsbCBkZWxlZ2F0ZSBhbGwgTWljcm9FdmVudC5qcyBmdW5jdGlvbiBpbiB0aGUgZGVzdGluYXRpb24gb2JqZWN0XG4gKlxuICogLSByZXF1aXJlKCdNaWNyb0V2ZW50JykubWl4aW4oRm9vYmFyKSB3aWxsIG1ha2UgRm9vYmFyIGFibGUgdG8gdXNlIE1pY3JvRXZlbnRcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gdGhlIG9iamVjdCB3aGljaCB3aWxsIHN1cHBvcnQgTWljcm9FdmVudFxuKi9cbk1pY3JvRXZlbnQubWl4aW5cdD0gZnVuY3Rpb24oZGVzdE9iamVjdCl7XG5cdHZhciBwcm9wc1x0PSBbJ2JpbmQnLCAndW5iaW5kJywgJ3RyaWdnZXInXTtcblx0Zm9yKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSArKyl7XG5cdFx0ZGVzdE9iamVjdC5wcm90b3R5cGVbcHJvcHNbaV1dXHQ9IE1pY3JvRXZlbnQucHJvdG90eXBlW3Byb3BzW2ldXTtcblx0fVxufVxuXG4vLyBleHBvcnQgaW4gY29tbW9uIGpzXG5pZiggdHlwZW9mIG1vZHVsZSAhPT0gXCJ1bmRlZmluZWRcIiAmJiAoJ2V4cG9ydHMnIGluIG1vZHVsZSkpe1xuXHRtb2R1bGUuZXhwb3J0c1x0PSBNaWNyb0V2ZW50XG59XG4iXX0=\n","MicroEvent = require 'microevent'\nMustache = require 'mustache'\ntemplate = require './templates/hotspot'\n\nclass PagedPublicationHotspots\n    constructor: ->\n        @currentPageSpreadId = null\n        @pageSpreadsLoaded = {}\n        @cache = {}\n\n        @bind 'hotspotsReceived', @hotspotsReceived.bind(@)\n        @bind 'afterNavigation', @afterNavigation.bind(@)\n        @bind 'pagesLoaded', @pagesLoaded.bind(@)\n        @bind 'resized', @resized.bind(@)\n\n        return\n\n    renderHotspots: (data) ->\n        frag = document.createDocumentFragment()\n        contentRect = data.versoPageSpread.getContentRect()\n        pageSpreadEl = data.pageSpread.getEl()\n        hotspotEls = pageSpreadEl.querySelectorAll '.sgn-pp__hotspot'\n        boundingRect = pageSpreadEl.getBoundingClientRect()\n\n        hotspotEl.parentNode.removeChild hotspotEl for hotspotEl in hotspotEls\n\n        for id, hotspot of data.hotspots\n            position = @getPosition data.pages, data.ratio, hotspot\n            el = @renderHotspot hotspot, position, contentRect, boundingRect\n            \n            frag.appendChild el\n\n        pageSpreadEl.appendChild frag\n\n        @\n\n    renderHotspot: (hotspot, position, contentRect, boundingRect) ->\n        el = document.createElement 'div'\n        top = Math.round contentRect.height / 100 * position.top\n        left = Math.round contentRect.width / 100 * position.left\n        width = Math.round contentRect.width / 100 * position.width\n        height = Math.round contentRect.height / 100 * position.height\n\n        top += Math.round contentRect.top\n        left += Math.round contentRect.left\n        top -= boundingRect.top\n        left -= boundingRect.left\n\n        el.className = 'sgn-pp__hotspot verso__overlay'\n        el.setAttribute 'data-id', hotspot.id if hotspot.id?\n        el.setAttribute 'data-type', hotspot.type if hotspot.type?\n        el.innerHTML = Mustache.render hotspot.template ? template, hotspot\n\n        el.style.top = \"#{top}px\"\n        el.style.left = \"#{left}px\"\n        el.style.width = \"#{width}px\"\n        el.style.height = \"#{height}px\"\n\n        el\n\n    getPosition: (pages, ratio, hotspot) ->\n        minX = null\n        minY = null\n        maxX = null\n        maxY = null\n        pageNumbers = pages.map (page) -> page.pageNumber\n\n        for pageNumber of hotspot.locations\n            continue if pageNumbers.indexOf(+pageNumber) is -1\n\n            hotspot.locations[pageNumber].forEach (coords) ->\n                x = coords[0]\n                y = coords[1]\n\n                x +=1 if pages[1] and pageNumbers[1] is +pageNumber\n                x /= pages.length\n\n                if not minX?\n                    minX = maxX = x\n                    minY = maxY = y\n\n                minX = x if x < minX\n                maxX = x if x > maxX\n                minY = y if y < minY\n                maxY = y if y > maxY\n\n        width = maxX - minX\n        height = maxY - minY\n\n        top: minY / ratio * 100\n        left: minX * 100\n        width: width * 100\n        height: height / ratio * 100\n\n    requestHotspots: (pageSpreadId, pages) ->\n        @trigger 'hotspotsRequested',\n            id: pageSpreadId\n            pages: pages\n\n        return\n\n    hotspotsReceived: (e) ->\n        pageSpreadId = e.pageSpread.getId()\n\n        @setCache pageSpreadId, e\n        @renderHotspots e\n\n        return\n\n    getCache: (pageSpreadId) ->\n        @cache[pageSpreadId]\n\n    setCache: (pageSpreadId, data) ->\n        @cache[pageSpreadId] = data\n\n        @\n\n    afterNavigation: (e) ->\n        return if not e.pageSpread?\n\n        id = e.pageSpread.getId()\n\n        @currentPageSpreadId = id\n        @requestHotspots id, e.pageSpread.getPages() if @pageSpreadsLoaded[id]\n\n        return\n\n    pagesLoaded: (e) ->\n        @pageSpreadsLoaded[e.pageSpreadId] = true\n        @requestHotspots e.pageSpreadId, e.pages if @currentPageSpreadId is e.pageSpreadId\n\n        return\n\n    resized: (e) ->\n        data = @getCache @currentPageSpreadId\n\n        @renderHotspots data if data?\n\n        return\n\nMicroEvent.mixin PagedPublicationHotspots\n\nmodule.exports = PagedPublicationHotspots\n\n\n","module.exports = \"\"\"\n\"\"\"\n","MicroEvent = require 'microevent'\nSGN = require '../../sgn'\nkeyCodes = require '../../key-codes'\n\nclass PagedPublicationControls\n    constructor: (el, @options = {}) ->\n        @els =\n            root: el\n            progress: el.querySelector '.sgn-pp__progress'\n            progressBar: el.querySelector '.sgn-pp-progress__bar'\n            progressLabel: el.querySelector '.sgn-pp__progress-label'\n            prevControl: el.querySelector '.sgn-pp__control[data-direction=prev]'\n            nextControl: el.querySelector '.sgn-pp__control[data-direction=next]'\n            close: el.querySelector '.sgn-pp--close'\n\n        @keyDownListener = SGN.util.throttle @keyDown, 150, @\n\n        @els.root.addEventListener 'keydown', @keyDownListener, false if @options.keyboard is true\n        @els.prevControl.addEventListener 'click', @prevClicked.bind(@), false if @els.prevControl?\n        @els.nextControl.addEventListener 'click', @nextClicked.bind(@), false if @els.nextControl?\n        @els.close.addEventListener 'click', @closeClicked.bind(@), false if @els.close?\n\n        @bind 'beforeNavigation', @beforeNavigation.bind(@)\n\n        return\n\n    destroy: ->\n        @els.root.removeEventListener 'keydown', @keyDownListener\n\n        return\n\n    beforeNavigation: (e) ->\n        showProgress = typeof e.progressLabel is 'string' and e.progressLabel.length > 0\n        visibilityClassName = 'sgn-pp--hidden'\n\n        if @els.progress? and @els.progressBar?\n            @els.progressBar.style.width = \"#{e.progress}%\"\n\n            if showProgress is true\n                @els.progress.classList.remove visibilityClassName\n            else\n                @els.progress.classList.add visibilityClassName\n\n        if @els.progressLabel?\n            if showProgress is true\n                @els.progressLabel.textContent = e.progressLabel\n                @els.progressLabel.classList.remove visibilityClassName\n            else\n                @els.progressLabel.classList.add visibilityClassName\n\n        if @els.prevControl?\n            if e.verso.newPosition is 0\n                @els.prevControl.classList.add visibilityClassName\n            else\n                @els.prevControl.classList.remove visibilityClassName\n\n        if @els.nextControl?\n            if e.verso.newPosition is e.pageSpreadCount - 1\n                @els.nextControl.classList.add visibilityClassName\n            else\n                @els.nextControl.classList.remove visibilityClassName\n\n        return\n\n    prevClicked: (e) ->\n        e.preventDefault()\n\n        @trigger 'prev'\n\n        return\n\n    nextClicked: (e) ->\n        e.preventDefault()\n\n        @trigger 'next'\n\n        return\n    \n    closeClicked: (e) ->\n        e.preventDefault()\n\n        @trigger 'close'\n\n        return\n\n    keyDown: (e) ->\n        keyCode = e.keyCode\n\n        if keyCodes.ARROW_LEFT is keyCode\n            @trigger 'prev', duration: 0\n        else if keyCodes.ARROW_RIGHT is keyCode or keyCodes.SPACE is keyCode\n            @trigger 'next', duration: 0\n        else if keyCodes.NUMBER_ONE is keyCode\n            @trigger 'first', duration: 0\n\n        return\n\nMicroEvent.mixin PagedPublicationControls\n\nmodule.exports = PagedPublicationControls\n","module.exports =\n    ESC: 27\n    ARROW_RIGHT: 39\n    ARROW_LEFT: 37\n    SPACE: 32\n    NUMBER_ONE: 49\n","MicroEvent = require 'microevent'\n\nclass PagedPublicationEventTracking\n    constructor: ->\n        @hidden = true\n        @pageSpread = null\n\n        @bind 'appeared', @appeared.bind(@)\n        @bind 'disappeared', @disappeared.bind(@)\n        @bind 'beforeNavigation', @beforeNavigation.bind(@)\n        @bind 'afterNavigation', @afterNavigation.bind(@)\n        @bind 'attemptedNavigation', @attemptedNavigation.bind(@)\n        @bind 'clicked', @clicked.bind(@)\n        @bind 'doubleClicked', @doubleClicked.bind(@)\n        @bind 'pressed', @pressed.bind(@)\n        @bind 'panStart', @panStart.bind(@)\n        @bind 'zoomedIn', @zoomedIn.bind(@)\n        @bind 'zoomedOut', @zoomedOut.bind(@)\n        @bind 'destroyed', @destroy.bind(@)\n\n        return\n\n    destroy: ->\n        @pageSpreadDisappeared()\n\n        return\n\n    trackEvent: (type, properties = {}) ->\n        @trigger 'trackEvent', type: type, properties: properties\n\n        return\n\n    trackOpened: (properties) ->\n        @trackEvent 'paged-publication-opened', properties\n\n        @\n\n    trackPageClicked: (properties) ->\n        @trackEvent 'paged-publication-page-clicked', properties\n\n        @\n\n    trackPageDoubleClicked: (properties) ->\n        @trackEvent 'paged-publication-page-double-clicked', properties\n\n        @\n\n    trackPageLongPressed: (properties) ->\n        @trackEvent 'paged-publication-page-long-pressed', properties\n\n        @\n\n    trackPageHotspotsClicked: (properties) ->\n        @trackEvent 'paged-publication-page-hotspots-clicked', properties\n\n        @\n\n    trackPageSpreadAppeared: (properties) ->\n        @trackEvent 'paged-publication-page-spread-appeared', properties\n\n        @\n\n    trackPageSpreadDisappeared: (properties) ->\n        @trackEvent 'paged-publication-page-spread-disappeared', properties\n\n        @\n\n    trackPageSpreadZoomedIn: (properties) ->\n        @trackEvent 'paged-publication-page-spread-zoomed-in', properties\n\n        @\n\n    trackPageSpreadZoomedOut: (properties) ->\n        @trackEvent 'paged-publication-page-spread-zoomed-out', properties\n\n        @\n\n    appeared: (e) ->\n        @pageSpreadAppeared e.pageSpread\n\n        return\n\n    disappeared: ->\n        @pageSpreadDisappeared()\n\n        return\n\n    beforeNavigation: ->\n        @pageSpreadDisappeared()\n\n        return\n\n    afterNavigation: (e) ->\n        @pageSpreadAppeared e.pageSpread\n\n        return\n\n    attemptedNavigation: (e) ->\n        @pageSpreadAppeared e.pageSpread\n\n        return\n\n    clicked: (e) ->\n        if e.page?\n            properties =\n                pageNumber: e.page.pageNumber\n                x: e.verso.pageX\n                y: e.verso.pageY\n\n            @trackPageClicked pagedPublicationPage: properties\n            @trackPageHotspotsClicked pagedPublicationPage: properties if e.verso.overlayEls.length > 0\n\n        return\n\n    doubleClicked: (e) =>\n        if e.page?\n            @trackPageDoubleClicked pagedPublicationPage:\n                pageNumber: e.page.pageNumber\n                x: e.verso.pageX\n                y: e.verso.pageY\n\n        return\n\n    pressed: (e) ->\n        if e.page?\n            @trackPageLongPressed pagedPublicationPage:\n                pageNumber: e.page.pageNumber\n                x: e.verso.pageX\n                y: e.verso.pageY\n\n        return\n\n    panStart: (e) ->\n        @pageSpreadDisappeared() if e.scale is 1\n\n        return\n\n    zoomedIn: (e) ->\n        if e.pageSpread?\n            @trackPageSpreadZoomedIn pagedPublicationPageSpread:\n                pageNumbers: e.pageSpread.getPages().map (page) -> page.pageNumber\n\n        return\n\n    zoomedOut: (e) ->\n        if e.pageSpread?\n            @trackPageSpreadZoomedOut pagedPublicationPageSpread:\n                pageNumbers: e.pageSpread.getPages().map (page) -> page.pageNumber\n\n        return\n\n    pageSpreadAppeared: (pageSpread) ->\n        if pageSpread? and @hidden is true\n            @pageSpread = pageSpread\n\n            @trackPageSpreadAppeared pagedPublicationPageSpread:\n                pageNumbers: pageSpread.getPages().map (page) -> page.pageNumber\n\n            @hidden = false\n\n        return\n\n    pageSpreadDisappeared: ->\n        if @pageSpread? and @hidden is false\n            @trackPageSpreadDisappeared pagedPublicationPageSpread:\n                pageNumbers: @pageSpread.getPages().map (page) -> page.pageNumber\n\n            @hidden = true\n            @pageSpread = null\n\n        return\n\nMicroEvent.mixin PagedPublicationEventTracking\n\nmodule.exports = PagedPublicationEventTracking\n","MicroEvent = require 'microevent'\nSGN = require '../../sgn'\nCore = require './core'\nHotspots = require './hotspots'\nControls = require './controls'\nEventTracking = require './event-tracking'\n\nclass Viewer\n    constructor: (@el, @options = {}) ->\n        @_core = new Core @el,\n            id: @options.id\n            pages: @options.pages\n            pageSpreadWidth: @options.pageSpreadWidth\n            pageSpreadMaxZoomScale: @options.pageSpreadMaxZoomScale\n            pageId: @options.pageId\n            idleDelay: @options.idleDelay\n            resizeDelay: @options.resizeDelay\n            color: @options.color\n        @_hotspots = new Hotspots()\n        @_controls = new Controls @el, keyboard: @options.keyboard\n        @_eventTracking = new EventTracking()\n        @viewSession = SGN.util.uuid()\n        @hotspots = null\n        @hotspotQueue = []\n        @hotspotPicker = null\n\n        @_setupEventListeners()\n\n        return\n\n        return\n\n    start: ->\n        @_eventTracking.trackOpened()\n        @_core.trigger 'started'\n\n        @\n\n    destroy: ->\n        @_core.trigger 'destroyed'\n        @_hotspots.trigger 'destroyed'\n        @_controls.trigger 'destroyed'\n        @_eventTracking.trigger 'destroyed'\n\n        @trigger 'destroyed'\n\n        @\n\n    navigateTo: (position, options) ->\n        @navigateToIndex position, options\n\n        @\n\n    navigateToIndex: (position, options) ->\n        @_core.getVerso().navigateTo position, options\n\n        @\n    \n    navigateToPageId: (pageId, options) ->\n        position = @_core.getVerso().getPageSpreadPositionFromPageId pageId\n        \n        @_core.getVerso().navigateTo position, options\n\n    first: (options) ->\n        @_core.getVerso().first options\n\n        @\n\n    prev: (options) ->\n        @_core.getVerso().prev options\n\n        @\n\n    next: (options) ->\n        @_core.getVerso().next options\n\n        @\n\n    last: (options) ->\n        @_core.getVerso().last options\n\n        @\n\n    _trackEvent: (e) ->\n        type = e.type\n        idType = 'legacy'\n        properties = pagedPublication:\n            id: [idType, @options.id]\n            ownedBy: [idType, @options.ownedBy]\n        eventTracker = @options.eventTracker\n\n        properties[key] = value for key, value of e.properties\n\n        eventTracker.trackEvent type, properties if eventTracker?\n\n        return\n\n    _setupEventListeners: ->\n        @_eventTracking.bind 'trackEvent', (e) =>\n            @_trackEvent e\n\n            return\n\n        @_controls.bind 'prev', (e) =>\n            @prev e\n            \n            return\n        @_controls.bind 'next', (e) =>\n            @next e\n            \n            return\n        @_controls.bind 'first', (e) =>\n            @first e\n            \n            return\n        @_controls.bind 'last', (e) =>\n            @last e\n            \n            return\n        @_controls.bind 'close', (e) =>\n            @destroy e\n\n            return\n        @_hotspots.bind 'hotspotsRequested', (e) =>\n            @trigger 'hotspotsRequested', e\n\n            return\n\n        @_core.bind 'appeared', (e) =>\n            @_eventTracking.trigger 'appeared', e\n            @trigger 'appeared', e\n\n            return\n        @_core.bind 'disappeared', (e) =>\n            @_eventTracking.trigger 'disappeared', e\n            @trigger 'disappeared', e\n\n            return\n        @_core.bind 'beforeNavigation', (e) =>\n            @_eventTracking.trigger 'beforeNavigation', e\n            @_controls.trigger 'beforeNavigation', e\n            @trigger 'beforeNavigation', e\n\n            return\n        @_core.bind 'afterNavigation', (e) =>\n            @_eventTracking.trigger 'afterNavigation', e\n            @_hotspots.trigger 'afterNavigation', e\n            @trigger 'afterNavigation', e\n\n            return\n        @_core.bind 'attemptedNavigation', (e) =>\n            @_eventTracking.trigger 'attemptedNavigation', e\n            @trigger 'attemptedNavigation', e\n\n            return\n        @_core.bind 'clicked', (e) =>\n            @_eventTracking.trigger 'clicked', e\n            @trigger 'clicked', e\n\n            return\n        @_core.bind 'doubleClicked', (e) =>\n            @_eventTracking.trigger 'doubleClicked', e\n            @trigger 'doubleClicked', e\n\n            return\n        @_core.bind 'contextmenu', (e) =>\n            @trigger 'contextmenu', e\n\n            return\n        @_core.bind 'pressed', (e) =>\n            @_eventTracking.trigger 'pressed', e\n            @trigger 'pressed', e\n\n            return\n        @_core.bind 'panStart', (e) =>\n            @_eventTracking.trigger 'panStart', e\n            @trigger 'panStart', e\n\n            return\n        @_core.bind 'zoomedIn', (e) =>\n            @_eventTracking.trigger 'zoomedIn', e\n            @trigger 'zoomedIn', e\n\n            return\n        @_core.bind 'zoomedOut', (e) =>\n            @_eventTracking.trigger 'zoomedOut', e\n            @trigger 'zoomedOut', e\n\n            return\n        @_core.bind 'pageLoaded', (e) =>\n            @_eventTracking.trigger 'pageLoaded', e\n            @trigger 'pageLoaded', e\n\n            return\n        @_core.bind 'pagesLoaded', (e) =>\n            @_hotspots.trigger 'pagesLoaded', e\n            @trigger 'pagesLoaded', e\n\n            return\n        @_core.bind 'resized', (e) =>\n            @_hotspots.trigger 'resized'\n            @trigger 'resized', e\n\n            return\n\n        @bind 'hotspotsRequested', @hotspotsRequested.bind(@)\n        @bind 'beforeNavigation', @beforeNavigation.bind(@)\n        @bind 'clicked', @clicked.bind(@)\n        @bind 'contextmenu', @contextmenu.bind(@)\n        @bind 'pressed', @pressed.bind(@)\n\n        return\n\n    getSelectedHotspot: (e, callback) ->\n        return if not @hotspots?\n        \n        hotspots = e.verso.overlayEls.map (overlayEl) =>\n            @hotspots[overlayEl.getAttribute('data-id')]\n\n        if hotspots.length is 1\n            callback hotspots[0]\n        else if hotspots.length > 1\n            hotspots = hotspots\n                .filter (hotspot) -> hotspot.type is 'offer'\n                .map (hotspot) ->\n                    id: hotspot.id\n                    title: hotspot.offer.heading\n                    subtitle: hotspot.offer.pricing.currency + '' + hotspot.offer.pricing.price\n\n            @hotspotPicker = new SGN.PagedPublicationKit.HotspotPicker\n                header: SGN.translations.t 'paged_publication.hotspot_picker.header'\n                x: e.verso.x\n                y: e.verso.y\n                hotspots: hotspots\n\n            @hotspotPicker.bind 'selected', (e) =>\n                callback @hotspots[e.id]\n\n                @hotspotPicker.destroy()\n\n                return\n\n            @hotspotPicker.bind 'destroyed', =>\n                @hotspotPicker = null\n\n                @el.focus()\n\n                return\n\n            @el.appendChild @hotspotPicker.el\n            @hotspotPicker.render().el.focus()\n        \n        return\n\n    processHotspotQueue: ->\n        return if not @hotspots?\n\n        @hotspotQueue = @hotspotQueue.filter (hotspotRequest) =>\n            hotspots = {}\n            versoPageSpread = SGN.util.find @_core.getVerso().pageSpreads, (pageSpread) ->\n                pageSpread.getId() is hotspotRequest.id\n\n            for id, hotspot of @hotspots\n                continue if hotspots[id]?\n\n                for page in hotspotRequest.pages\n                    if hotspot.locations[page.pageNumber]?\n                        hotspots[id] =\n                            type: hotspot.type\n                            id: hotspot.id\n                            locations: hotspot.locations\n                        \n                        break\n\n            @_hotspots.trigger 'hotspotsReceived',\n                pageSpread: @_core.pageSpreads.get hotspotRequest.id\n                versoPageSpread: versoPageSpread\n                ratio: @options.hotspotRatio\n                pages: hotspotRequest.pages\n                hotspots: hotspots\n\n            false\n\n        return\n\n    hotspotsRequested: (e) ->\n        @hotspotQueue.push e\n        @processHotspotQueue()\n\n        return\n    \n    applyHotspots: (hotspots = {}) ->\n        @hotspots = hotspots\n\n        @processHotspotQueue()\n\n        return\n    \n    beforeNavigation: ->\n        @hotspotPicker.destroy() if @hotspotPicker?\n\n        return\n    \n    clicked: (e) ->\n        @getSelectedHotspot e, (hotspot) =>\n            @trigger 'hotspotClicked', hotspot\n\n            return\n            \n        return\n    \n    contextmenu: (e) ->\n        @getSelectedHotspot e, (hotspot) =>\n            @trigger 'hotspotContextmenu', hotspot\n\n            return\n        \n        return\n    \n    pressed: (e) ->\n        @getSelectedHotspot e, (hotspot) =>\n            @trigger 'hotspotPressed', hotspot\n\n            return\n            \n        return\n\nMicroEvent.mixin Viewer\n\nmodule.exports = Viewer\n","MicroEvent = require 'microevent'\nGator = require 'gator'\nMustache = require 'mustache'\ntemplate = require './templates/hotspot-picker'\nkeyCodes = require '../../key-codes'\n\nclass PagedPublicationHotspotPicker\n    constructor: (@options = {}) ->\n        @el = document.createElement 'div'\n        @resizeListener = @resize.bind @\n\n        return\n\n    render: ->\n        width = @options.width ? 100\n        header = @options.header\n        template = @options.template if @options.template?\n        trigger = @trigger.bind @\n        view =\n            header: header\n            hotspots: @options.hotspots\n            top: @options.y\n            left: @options.x\n\n        @el.className = 'sgn-pp__hotspot-picker'\n        @el.setAttribute 'tabindex', -1\n        @el.innerHTML = Mustache.render template, view\n\n        popoverEl = @el.querySelector '.sgn__popover'\n        width = popoverEl.offsetWidth\n        height = popoverEl.offsetHeight\n        parentWidth = @el.parentNode.offsetWidth\n        parentHeight = @el.parentNode.offsetHeight\n        boundingRect = @el.parentNode.getBoundingClientRect()\n\n        view.top -= boundingRect.top\n        view.left -= boundingRect.left\n\n        if view.top + height > parentHeight\n            popoverEl.style.top = parentHeight - height + 'px'\n        else\n            popoverEl.style.top = view.top + 'px'\n\n        if view.left + width > parentWidth\n            popoverEl.style.left = parentWidth - width + 'px'\n        else\n            popoverEl.style.left = view.left + 'px'\n\n        @el.addEventListener 'keyup', @keyUp.bind(@)\n\n        Gator(@el).on 'click', '[data-id]', ->\n            trigger 'selected', id: @getAttribute('data-id')\n\n            return\n\n        Gator(@el).on 'click', '[data-close]', @destroy.bind(@)\n\n        window.addEventListener 'resize', @resizeListener, false\n\n        @\n\n    destroy: ->\n        if @el.parentNode?\n            @el.parentNode.removeChild @el\n\n            @trigger 'destroyed'\n\n        return\n\n    keyUp: (e) ->\n        @destroy() if e.keyCode is keyCodes.ESC\n        \n        return\n\n    resize: ->\n        window.removeEventListener 'resize', @resizeListener\n\n        @destroy()\n\n        return\n\nMicroEvent.mixin PagedPublicationHotspotPicker\n\nmodule.exports = PagedPublicationHotspotPicker\n","MicroEvent = require 'microevent'\nSGN = require '../../core'\n\nmodule.exports = class Bootstrapper\n    constructor: (@options = {}) ->\n        return\n\n    createViewer: (data) ->\n        new SGN.PagedPublicationKit.Viewer @options.el,\n            id: @options.id\n            ownedBy: data.details.dealer_id\n            color: '#' + data.details.branding.pageflip.color\n            hotspotRatio: data.details.dimensions.height\n            keyboard: true\n            pageId: @options.pageId\n            eventTracker: @options.eventTracker\n            pages: @transformPages data.pages\n\n    transformPages: (pages) ->\n        pages.map (page, i) ->\n            pageNumber = i + 1\n\n            id: 'page' + pageNumber\n            label: pageNumber + ''\n            pageNumber: pageNumber\n            images:\n                medium: page.view\n                large: page.zoom\n\n    applyHotspots: (viewer, hotspots) ->\n        obj = {}\n\n        hotspots.forEach (hotspot) -> obj[hotspot.id] = hotspot\n        \n        viewer.applyHotspots obj\n\n        return\n    \n    fetch: (callback) ->\n        SGN.util.async.parallel [@fetchDetails.bind(@), @fetchPages.bind(@)], (result) ->\n            data =\n                details: result[0][1]\n                pages: result[1][1]\n\n            if data.details? and data.pages?\n                callback null, data\n            else\n                callback new Error()\n\n            return\n        \n        return\n\n    fetchDetails: (callback) ->\n        SGN.CoreKit.request\n            url: \"/v2/catalogs/#{@options.id}\"\n        , callback\n\n        return\n\n    fetchPages: (callback) ->\n        SGN.CoreKit.request\n            url: \"/v2/catalogs/#{@options.id}/pages\"\n        , callback\n\n        return\n\n    fetchHotspots: (callback) ->\n        SGN.CoreKit.request\n            url: \"/v2/catalogs/#{@options.id}/hotspots\"\n        , callback\n\n        return","/**\n * Copyright 2014 Craig Campbell\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * GATOR.JS\n * Simple Event Delegation\n *\n * @version 1.2.4\n *\n * Compatible with IE 9+, FF 3.6+, Safari 5+, Chrome\n *\n * Include legacy.js for compatibility with older browsers\n *\n *             .-._   _ _ _ _ _ _ _ _\n *  .-''-.__.-'00  '-' ' ' ' ' ' ' ' '-.\n * '.___ '    .   .--_'-' '-' '-' _'-' '._\n *  V: V 'vv-'   '_   '.       .'  _..' '.'.\n *    '=.____.=_.--'   :_.__.__:_   '.   : :\n *            (((____.-'        '-.  /   : :\n *                              (((-'\\ .' /\n *                            _____..'  .'\n *                           '-._____.-'\n */\n(function() {\n    var _matcher,\n        _level = 0,\n        _id = 0,\n        _handlers = {},\n        _gatorInstances = {};\n\n    function _addEvent(gator, type, callback) {\n\n        // blur and focus do not bubble up but if you use event capturing\n        // then you will get them\n        var useCapture = type == 'blur' || type == 'focus';\n        gator.element.addEventListener(type, callback, useCapture);\n    }\n\n    function _cancel(e) {\n        e.preventDefault();\n        e.stopPropagation();\n    }\n\n    /**\n     * returns function to use for determining if an element\n     * matches a query selector\n     *\n     * @returns {Function}\n     */\n    function _getMatcher(element) {\n        if (_matcher) {\n            return _matcher;\n        }\n\n        if (element.matches) {\n            _matcher = element.matches;\n            return _matcher;\n        }\n\n        if (element.webkitMatchesSelector) {\n            _matcher = element.webkitMatchesSelector;\n            return _matcher;\n        }\n\n        if (element.mozMatchesSelector) {\n            _matcher = element.mozMatchesSelector;\n            return _matcher;\n        }\n\n        if (element.msMatchesSelector) {\n            _matcher = element.msMatchesSelector;\n            return _matcher;\n        }\n\n        if (element.oMatchesSelector) {\n            _matcher = element.oMatchesSelector;\n            return _matcher;\n        }\n\n        // if it doesn't match a native browser method\n        // fall back to the gator function\n        _matcher = Gator.matchesSelector;\n        return _matcher;\n    }\n\n    /**\n     * determines if the specified element matches a given selector\n     *\n     * @param {Node} element - the element to compare against the selector\n     * @param {string} selector\n     * @param {Node} boundElement - the element the listener was attached to\n     * @returns {void|Node}\n     */\n    function _matchesSelector(element, selector, boundElement) {\n\n        // no selector means this event was bound directly to this element\n        if (selector == '_root') {\n            return boundElement;\n        }\n\n        // if we have moved up to the element you bound the event to\n        // then we have come too far\n        if (element === boundElement) {\n            return;\n        }\n\n        // if this is a match then we are done!\n        if (_getMatcher(element).call(element, selector)) {\n            return element;\n        }\n\n        // if this element did not match but has a parent we should try\n        // going up the tree to see if any of the parent elements match\n        // for example if you are looking for a click on an <a> tag but there\n        // is a <span> inside of the a tag that it is the target,\n        // it should still work\n        if (element.parentNode) {\n            _level++;\n            return _matchesSelector(element.parentNode, selector, boundElement);\n        }\n    }\n\n    function _addHandler(gator, event, selector, callback) {\n        if (!_handlers[gator.id]) {\n            _handlers[gator.id] = {};\n        }\n\n        if (!_handlers[gator.id][event]) {\n            _handlers[gator.id][event] = {};\n        }\n\n        if (!_handlers[gator.id][event][selector]) {\n            _handlers[gator.id][event][selector] = [];\n        }\n\n        _handlers[gator.id][event][selector].push(callback);\n    }\n\n    function _removeHandler(gator, event, selector, callback) {\n\n        // if there are no events tied to this element at all\n        // then don't do anything\n        if (!_handlers[gator.id]) {\n            return;\n        }\n\n        // if there is no event type specified then remove all events\n        // example: Gator(element).off()\n        if (!event) {\n            for (var type in _handlers[gator.id]) {\n                if (_handlers[gator.id].hasOwnProperty(type)) {\n                    _handlers[gator.id][type] = {};\n                }\n            }\n            return;\n        }\n\n        // if no callback or selector is specified remove all events of this type\n        // example: Gator(element).off('click')\n        if (!callback && !selector) {\n            _handlers[gator.id][event] = {};\n            return;\n        }\n\n        // if a selector is specified but no callback remove all events\n        // for this selector\n        // example: Gator(element).off('click', '.sub-element')\n        if (!callback) {\n            delete _handlers[gator.id][event][selector];\n            return;\n        }\n\n        // if we have specified an event type, selector, and callback then we\n        // need to make sure there are callbacks tied to this selector to\n        // begin with.  if there aren't then we can stop here\n        if (!_handlers[gator.id][event][selector]) {\n            return;\n        }\n\n        // if there are then loop through all the callbacks and if we find\n        // one that matches remove it from the array\n        for (var i = 0; i < _handlers[gator.id][event][selector].length; i++) {\n            if (_handlers[gator.id][event][selector][i] === callback) {\n                _handlers[gator.id][event][selector].splice(i, 1);\n                break;\n            }\n        }\n    }\n\n    function _handleEvent(id, e, type) {\n        if (!_handlers[id][type]) {\n            return;\n        }\n\n        var target = e.target || e.srcElement,\n            selector,\n            match,\n            matches = {},\n            i = 0,\n            j = 0;\n\n        // find all events that match\n        _level = 0;\n        for (selector in _handlers[id][type]) {\n            if (_handlers[id][type].hasOwnProperty(selector)) {\n                match = _matchesSelector(target, selector, _gatorInstances[id].element);\n\n                if (match && Gator.matchesEvent(type, _gatorInstances[id].element, match, selector == '_root', e)) {\n                    _level++;\n                    _handlers[id][type][selector].match = match;\n                    matches[_level] = _handlers[id][type][selector];\n                }\n            }\n        }\n\n        // stopPropagation() fails to set cancelBubble to true in Webkit\n        // @see http://code.google.com/p/chromium/issues/detail?id=162270\n        e.stopPropagation = function() {\n            e.cancelBubble = true;\n        };\n\n        for (i = 0; i <= _level; i++) {\n            if (matches[i]) {\n                for (j = 0; j < matches[i].length; j++) {\n                    if (matches[i][j].call(matches[i].match, e) === false) {\n                        Gator.cancel(e);\n                        return;\n                    }\n\n                    if (e.cancelBubble) {\n                        return;\n                    }\n                }\n            }\n        }\n    }\n\n    /**\n     * binds the specified events to the element\n     *\n     * @param {string|Array} events\n     * @param {string} selector\n     * @param {Function} callback\n     * @param {boolean=} remove\n     * @returns {Object}\n     */\n    function _bind(events, selector, callback, remove) {\n\n        // fail silently if you pass null or undefined as an alement\n        // in the Gator constructor\n        if (!this.element) {\n            return;\n        }\n\n        if (!(events instanceof Array)) {\n            events = [events];\n        }\n\n        if (!callback && typeof(selector) == 'function') {\n            callback = selector;\n            selector = '_root';\n        }\n\n        var id = this.id,\n            i;\n\n        function _getGlobalCallback(type) {\n            return function(e) {\n                _handleEvent(id, e, type);\n            };\n        }\n\n        for (i = 0; i < events.length; i++) {\n            if (remove) {\n                _removeHandler(this, events[i], selector, callback);\n                continue;\n            }\n\n            if (!_handlers[id] || !_handlers[id][events[i]]) {\n                Gator.addEvent(this, events[i], _getGlobalCallback(events[i]));\n            }\n\n            _addHandler(this, events[i], selector, callback);\n        }\n\n        return this;\n    }\n\n    /**\n     * Gator object constructor\n     *\n     * @param {Node} element\n     */\n    function Gator(element, id) {\n\n        // called as function\n        if (!(this instanceof Gator)) {\n            // only keep one Gator instance per node to make sure that\n            // we don't create a ton of new objects if you want to delegate\n            // multiple events from the same node\n            //\n            // for example: Gator(document).on(...\n            for (var key in _gatorInstances) {\n                if (_gatorInstances[key].element === element) {\n                    return _gatorInstances[key];\n                }\n            }\n\n            _id++;\n            _gatorInstances[_id] = new Gator(element, _id);\n\n            return _gatorInstances[_id];\n        }\n\n        this.element = element;\n        this.id = id;\n    }\n\n    /**\n     * adds an event\n     *\n     * @param {string|Array} events\n     * @param {string} selector\n     * @param {Function} callback\n     * @returns {Object}\n     */\n    Gator.prototype.on = function(events, selector, callback) {\n        return _bind.call(this, events, selector, callback);\n    };\n\n    /**\n     * removes an event\n     *\n     * @param {string|Array} events\n     * @param {string} selector\n     * @param {Function} callback\n     * @returns {Object}\n     */\n    Gator.prototype.off = function(events, selector, callback) {\n        return _bind.call(this, events, selector, callback, true);\n    };\n\n    Gator.matchesSelector = function() {};\n    Gator.cancel = _cancel;\n    Gator.addEvent = _addEvent;\n    Gator.matchesEvent = function() {\n        return true;\n    };\n\n    if (typeof module !== 'undefined' && module.exports) {\n        module.exports = Gator;\n    }\n\n    window.Gator = Gator;\n}) ();\n","module.exports = \"\"\"\n<div class=\"sgn-pp-hotspot-picker__background\" data-close></div>\n<div class=\"sgn__popover\">\n    {{#header}}\n        <div class=\"sgn-popover__header\">{{header}}</div>\n    {{/header}}\n    <div class=\"sgn-popover__content\">\n        <ul>\n            {{#hotspots}}\n                <li data-id=\"{{id}}\">\n                    <p>{{title}}</p>\n                    <p>{{subtitle}}</p>\n                </li>\n            {{/hotspots}}\n        </ul>\n    </div>\n</div>\n\"\"\"\n","Incito = require 'incito-browser'\n\nclass Viewer\n    constructor: (el, @options = {}) ->\n        @els =\n            root: el\n            incito: el.querySelector '.incito'\n        @incito = new Incito @els.incito,\n            incito: @options.incito\n\n        return\n    \n    start: ->\n        @els.root.setAttribute 'data-started', ''\n        @els.root.setAttribute 'tabindex', '-1'\n        @els.root.focus()\n\n        @incito.start()\n\n        @\n    \n    destroy: ->\n        return\n\nmodule.exports = Viewer","module.exports =\n    Viewer: require './viewer'\n\n    HotspotPicker: require './hotspot-picker'\n\n    Bootstrapper: require './bootstrapper'\n","(function(f){if(typeof exports===\"object\"&&typeof module!==\"undefined\"){module.exports=f()}else if(typeof define===\"function\"&&define.amd){define([],f)}else{var g;if(typeof window!==\"undefined\"){g=window}else if(typeof global!==\"undefined\"){g=global}else if(typeof self!==\"undefined\"){g=self}else{g=this}g.Incito = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(_dereq_,module,exports){\n'use strict';\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar AbsoluteLayout, FlexLayout, FragView, ImageView, Incito, LinearLayout, TextView, VideoEmbedView, View, lozad, vent;\n\n_dereq_('intersection-observer');\n\nlozad = _dereq_('lozad');\n\nvent = _dereq_('./vent');\n\nView = _dereq_('./views/view');\n\nFragView = _dereq_('./views/frag');\n\nImageView = _dereq_('./views/image');\n\nTextView = _dereq_('./views/text');\n\nVideoEmbedView = _dereq_('./views/video-embed');\n\nLinearLayout = _dereq_('./views/linear-layout');\n\nAbsoluteLayout = _dereq_('./views/absolute-layout');\n\nFlexLayout = _dereq_('./views/flex-layout');\n\nIncito = function () {\n  var Incito = function () {\n    function Incito(el1) {\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n      _classCallCheck(this, Incito);\n\n      this.el = el1;\n      this.options = options;\n      return;\n    }\n\n    _createClass(Incito, [{\n      key: 'start',\n      value: function start() {\n        var frag, incito;\n        incito = this.options.incito || {};\n        frag = document.createDocumentFragment();\n        this.loadFonts(incito.font_assets);\n        this.applyTheme(incito.theme);\n        this.render(frag, incito.root_view);\n        if (incito.locale != null) {\n          this.el.setAttribute('lang', incito.locale);\n        }\n        if (incito.debug === true) {\n          this.el.setAttribute('data-debug', true);\n        }\n        this.el.appendChild(frag);\n        this.lazyload = lozad('.incito--lazyload', {\n          rootMargin: '500px 0px'\n        });\n        this.lazyload.observe();\n        return this;\n      }\n    }, {\n      key: 'render',\n      value: function render(el) {\n        var _this = this;\n\n        var view = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n        var match, viewEl, viewName;\n        match = null;\n        viewName = view.view_name;\n        if (!viewName || viewName === 'View') {\n          match = View;\n        } else if (viewName === 'FragView') {\n          match = FragView;\n        } else if (viewName === 'ImageView') {\n          match = ImageView;\n        } else if (viewName === 'TextView') {\n          match = TextView;\n        } else if (viewName === 'VideoEmbedView') {\n          match = VideoEmbedView;\n        } else if (viewName === 'LinearLayout') {\n          match = LinearLayout;\n        } else if (viewName === 'AbsoluteLayout') {\n          match = AbsoluteLayout;\n        } else if (viewName === 'FlexLayout') {\n          match = FlexLayout;\n        }\n        if (match != null) {\n          viewEl = new match(view).render().el;\n          if (Array.isArray(view.child_views)) {\n            view.child_views.forEach(function (childView) {\n              var childEl;\n              childEl = _this.render(viewEl, childView);\n              if (childEl != null) {\n                viewEl.appendChild(childEl);\n              }\n            });\n          }\n          el.appendChild(viewEl);\n          return viewEl;\n        }\n      }\n    }, {\n      key: 'applyTheme',\n      value: function applyTheme() {\n        var theme = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n        if (theme.font_family != null) {\n          this.el.style.fontFamily = theme.font_family.join(', ');\n        }\n        if (theme.line_spacing_multiplier != null) {\n          this.el.style.lineHeight = theme.line_spacing_multiplier;\n        }\n      }\n    }, {\n      key: 'loadFonts',\n      value: function loadFonts() {\n        var fontAssets = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n        var font, key, ref, ref1, styleEl, text, urls, value;\n        if ('FontFace' in window) {\n          for (key in fontAssets) {\n            value = fontAssets[key];\n            urls = value.src.map(function (src) {\n              return 'url(' + src[1] + ')';\n            }).join(', ');\n            font = new FontFace(key, urls, {\n              style: (ref = value.style) != null ? ref : 'normal',\n              weight: (ref1 = value.weight) != null ? ref1 : 'normal'\n            });\n            document.fonts.add(font);\n            font.load();\n          }\n        } else {\n          styleEl = document.createElement('style');\n          for (key in fontAssets) {\n            value = fontAssets[key];\n            urls = value.src.map(function (src) {\n              return 'url(\\'' + src[1] + '\\') format(\\'' + src[0] + '\\')';\n            }).join(', ');\n            text = '@font-face {\\n    font-family: \\'' + key + '\\';\\n    src: ' + urls + ';\\n}';\n            styleEl.appendChild(document.createTextNode(text));\n          }\n          document.head.appendChild(styleEl);\n        }\n      }\n    }]);\n\n    return Incito;\n  }();\n\n  ;\n\n  Incito.vent = vent;\n\n  return Incito;\n}.call(undefined);\n\nmodule.exports = Incito;\n\n},{\"./vent\":3,\"./views/absolute-layout\":4,\"./views/flex-layout\":5,\"./views/frag\":6,\"./views/image\":7,\"./views/linear-layout\":8,\"./views/text\":9,\"./views/video-embed\":10,\"./views/view\":11,\"intersection-observer\":12,\"lozad\":13}],2:[function(_dereq_,module,exports){\n'use strict';\n\nvar utils;\n\nutils = {\n  escapeHTML: function escapeHTML() {\n    var unsafe = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n\n    return unsafe.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;').replace(/\"/g, '&quot;').replace(/'/g, '&#039;');\n  },\n  formatUnit: function formatUnit(unit) {\n    if (typeof unit === 'number') {\n      return unit + 'px';\n    } else if (typeof unit === 'string') {\n      return unit.replace('dp', 'px');\n    } else {\n      return 0;\n    }\n  }\n};\n\nmodule.exports = utils;\n\n},{}],3:[function(_dereq_,module,exports){\n'use strict';\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar MicroEvent, Vent;\n\nMicroEvent = _dereq_('microevent');\n\nVent = function Vent() {\n  _classCallCheck(this, Vent);\n};\n\nMicroEvent.mixin(Vent);\n\nmodule.exports = new Vent();\n\n},{\"microevent\":14}],4:[function(_dereq_,module,exports){\n'use strict';\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar AbsoluteLayout, View;\n\nView = _dereq_('./view');\n\nmodule.exports = AbsoluteLayout = function () {\n  var AbsoluteLayout = function (_View) {\n    _inherits(AbsoluteLayout, _View);\n\n    function AbsoluteLayout() {\n      _classCallCheck(this, AbsoluteLayout);\n\n      return _possibleConstructorReturn(this, (AbsoluteLayout.__proto__ || Object.getPrototypeOf(AbsoluteLayout)).apply(this, arguments));\n    }\n\n    _createClass(AbsoluteLayout, [{\n      key: 'render',\n      value: function render() {\n        return this;\n      }\n    }]);\n\n    return AbsoluteLayout;\n  }(View);\n\n  ;\n\n  AbsoluteLayout.prototype.className = 'incito__absolute-layout-view';\n\n  return AbsoluteLayout;\n}.call(undefined);\n\n},{\"./view\":11}],5:[function(_dereq_,module,exports){\n'use strict';\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar FlexLayout, View;\n\nView = _dereq_('./view');\n\nmodule.exports = FlexLayout = function () {\n  var FlexLayout = function (_View) {\n    _inherits(FlexLayout, _View);\n\n    function FlexLayout() {\n      _classCallCheck(this, FlexLayout);\n\n      return _possibleConstructorReturn(this, (FlexLayout.__proto__ || Object.getPrototypeOf(FlexLayout)).apply(this, arguments));\n    }\n\n    _createClass(FlexLayout, [{\n      key: 'render',\n      value: function render() {\n        if (this.attrs.layout_flex_align_items != null) {\n          this.el.style.alignItems = this.attrs.layout_flex_align_items;\n        }\n        if (this.attrs.layout_flex_align_content != null) {\n          this.el.style.alignContent = this.attrs.layout_flex_align_content;\n        }\n        if (this.attrs.layout_flex_justify_content != null) {\n          this.el.style.justifyContent = this.attrs.layout_flex_justify_content;\n        }\n        if (this.attrs.layout_flex_direction != null) {\n          this.el.style.flexDirection = this.attrs.layout_flex_direction;\n        }\n        return this;\n      }\n    }]);\n\n    return FlexLayout;\n  }(View);\n\n  ;\n\n  FlexLayout.prototype.className = 'incito__flex-layout-view';\n\n  return FlexLayout;\n}.call(undefined);\n\n},{\"./view\":11}],6:[function(_dereq_,module,exports){\n\"use strict\";\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar FragView;\n\nmodule.exports = FragView = function () {\n  function FragView() {\n    _classCallCheck(this, FragView);\n  }\n\n  _createClass(FragView, [{\n    key: \"render\",\n    value: function render() {\n      this.el = document.createDocumentFragment();\n      return this;\n    }\n  }]);\n\n  return FragView;\n}();\n\n},{}],7:[function(_dereq_,module,exports){\n'use strict';\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar Image, View;\n\nView = _dereq_('./view');\n\nmodule.exports = Image = function () {\n  var Image = function (_View) {\n    _inherits(Image, _View);\n\n    function Image() {\n      _classCallCheck(this, Image);\n\n      return _possibleConstructorReturn(this, (Image.__proto__ || Object.getPrototypeOf(Image)).apply(this, arguments));\n    }\n\n    _createClass(Image, [{\n      key: 'render',\n      value: function render() {\n        this.el.setAttribute('src', 'data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7');\n        if (typeof this.attrs.src === 'string') {\n          this.el.setAttribute('data-src', this.attrs.src);\n        }\n        if (typeof this.attrs.label === 'string') {\n          this.el.setAttribute('alt', this.attrs.label);\n        }\n        return this;\n      }\n    }]);\n\n    return Image;\n  }(View);\n\n  ;\n\n  Image.prototype.tagName = 'img';\n\n  Image.prototype.className = 'incito__image-view incito--lazyload';\n\n  return Image;\n}.call(undefined);\n\n},{\"./view\":11}],8:[function(_dereq_,module,exports){\n'use strict';\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar LinearLayout, View;\n\nView = _dereq_('./view');\n\nmodule.exports = LinearLayout = function () {\n  var LinearLayout = function (_View) {\n    _inherits(LinearLayout, _View);\n\n    function LinearLayout() {\n      _classCallCheck(this, LinearLayout);\n\n      return _possibleConstructorReturn(this, (LinearLayout.__proto__ || Object.getPrototypeOf(LinearLayout)).apply(this, arguments));\n    }\n\n    _createClass(LinearLayout, [{\n      key: 'render',\n      value: function render() {\n        return this;\n      }\n    }]);\n\n    return LinearLayout;\n  }(View);\n\n  ;\n\n  LinearLayout.prototype.className = 'incito__linear-layout-view';\n\n  return LinearLayout;\n}.call(undefined);\n\n},{\"./view\":11}],9:[function(_dereq_,module,exports){\n'use strict';\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar TextView,\n    View,\n    utils,\n    indexOf = [].indexOf;\n\nView = _dereq_('./view');\n\nutils = _dereq_('../utils');\n\nmodule.exports = TextView = function () {\n  var TextView = function (_View) {\n    _inherits(TextView, _View);\n\n    function TextView() {\n      _classCallCheck(this, TextView);\n\n      return _possibleConstructorReturn(this, (TextView.__proto__ || Object.getPrototypeOf(TextView)).apply(this, arguments));\n    }\n\n    _createClass(TextView, [{\n      key: 'render',\n      value: function render() {\n        var parsedText, ref, text, textStyles;\n        textStyles = (this.attrs.text_style || '').split('|');\n        parsedText = this.parseSpans(this.attrs.text, this.attrs.spans);\n        text = parsedText.map(function (item) {\n          var escapedText, tagName;\n          escapedText = utils.escapeHTML(item.text);\n          if (item.span != null) {\n            tagName = item.span.type === 'superscript' ? 'sup' : 'span';\n            return '<' + tagName + '>' + escapedText + ('</' + tagName + '>');\n          } else {\n            return escapedText;\n          }\n        });\n        if (this.attrs.text_prevent_widow) {\n          this.el.innerHTML = text.join('').replace(/\\&nbsp;([^\\s]+)$/, ' $1').replace(/\\s([^\\s]+)\\s*$/, '&nbsp;$1');\n        } else {\n          this.el.innerHTML = text.join('');\n        }\n        // Font family.\n        if (Array.isArray(this.attrs.font_family) && this.attrs.font_family.length > 0) {\n          this.el.style.fontFamily = this.attrs.font_family.join(', ');\n        }\n        // Text size.\n        if (this.attrs.text_size != null) {\n          this.el.style.fontSize = this.attrs.text_size + 'px';\n        }\n\n        // Line height.\n        if (this.attrs.line_spacing_multiplier != null) {\n          this.el.style.lineHeight = this.attrs.line_spacing_multiplier;\n        }\n\n        // Text color.\n        if (this.attrs.text_color != null) {\n          this.el.style.color = this.attrs.text_color;\n        }\n\n        // Text styles.\n        if (indexOf.call(textStyles, 'bold') >= 0) {\n          this.el.style.fontWeight = 'bold';\n        }\n        if (indexOf.call(textStyles, 'italic') >= 0) {\n          this.el.style.fontStyle = 'italic';\n        }\n\n        // Text alignment.\n        if (this.attrs.text_alignment === 'left') {\n          this.el.style.textAlign = 'left';\n        } else if (this.attrs.text_alignment === 'center') {\n          this.el.style.textAlign = 'center';\n        } else if (this.attrs.text_alignment === 'right') {\n          this.el.style.textAlign = 'right';\n        }\n\n        // Font stretch.\n        if ((ref = this.attrs.font_stretch) === 'condensed' || ref === 'normal' || ref === 'expanded') {\n          this.el.style.fontStretch = this.attrs.font_stretch;\n        }\n\n        // Single line.\n        if (this.attrs.single_line === true) {\n          this.el.setAttribute('data-single-line', true);\n        }\n        return this;\n      }\n    }, {\n      key: 'parseSpans',\n      value: function parseSpans(text) {\n        var spans = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n\n        var result;\n        result = [];\n        if (spans.length === 0) {\n          result.push({\n            text: text\n          });\n        } else if (spans[0].start > 0) {\n          result.push({\n            text: text.slice(0, spans[0].start)\n          });\n        }\n        spans.forEach(function (span, i) {\n          var endIndex, startIndex;\n          startIndex = span.start;\n          endIndex = span.end;\n          result.push({\n            text: text.slice(startIndex, endIndex),\n            span: span\n          });\n          if (i === spans.length - 1) {\n            if (endIndex < text.length) {\n              result.push({\n                text: text.slice(endIndex, text.length)\n              });\n            }\n          } else if (endIndex < spans[i + 1].start) {\n            result.push({\n              text: text.slice(endIndex, spans[i + 1].start)\n            });\n          }\n        });\n        return result;\n      }\n    }]);\n\n    return TextView;\n  }(View);\n\n  ;\n\n  TextView.prototype.tagName = 'p';\n\n  TextView.prototype.className = 'incito__text-view';\n\n  return TextView;\n}.call(undefined);\n\n},{\"../utils\":2,\"./view\":11}],10:[function(_dereq_,module,exports){\n'use strict';\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar FlexLayout,\n    View,\n    allowedHostnames,\n    indexOf = [].indexOf;\n\nView = _dereq_('./view');\n\nallowedHostnames = ['www.youtube.com', 'www.vimeo.com'];\n\nmodule.exports = FlexLayout = function () {\n  var FlexLayout = function (_View) {\n    _inherits(FlexLayout, _View);\n\n    function FlexLayout() {\n      _classCallCheck(this, FlexLayout);\n\n      return _possibleConstructorReturn(this, (FlexLayout.__proto__ || Object.getPrototypeOf(FlexLayout)).apply(this, arguments));\n    }\n\n    _createClass(FlexLayout, [{\n      key: 'render',\n      value: function render() {\n        var height, iframeEl, linkEl, ratio, ref, width;\n        linkEl = document.createElement('a');\n        iframeEl = document.createElement('iframe');\n        width = this.attrs.video_width || 100;\n        height = this.attrs.video_height || 100;\n        ratio = height / width * 100;\n        if (this.attrs.src != null) {\n          linkEl.setAttribute('href', this.attrs.src);\n          if (ref = linkEl.hostname, indexOf.call(allowedHostnames, ref) >= 0) {\n            iframeEl.setAttribute('src', this.attrs.src);\n            iframeEl.setAttribute('allowfullscreen', '');\n            this.el.style.paddingTop = ratio + '%';\n            this.el.appendChild(iframeEl);\n          }\n        }\n        return this;\n      }\n    }]);\n\n    return FlexLayout;\n  }(View);\n\n  ;\n\n  FlexLayout.prototype.className = 'incito__video-embed-view';\n\n  return FlexLayout;\n}.call(undefined);\n\n},{\"./view\":11}],11:[function(_dereq_,module,exports){\n'use strict';\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar View,\n    utils,\n    vent,\n    indexOf = [].indexOf;\n\nutils = _dereq_('../utils');\n\nvent = _dereq_('../vent');\n\nmodule.exports = View = function () {\n  var View = function () {\n    function View() {\n      var attrs = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      _classCallCheck(this, View);\n\n      this.attrs = attrs;\n      this.el = this.createElement();\n      this.setAttributes();\n      this.initialize();\n    }\n\n    _createClass(View, [{\n      key: 'initialize',\n      value: function initialize() {}\n    }, {\n      key: 'render',\n      value: function render() {\n        return this;\n      }\n    }, {\n      key: 'createElement',\n      value: function createElement() {\n        var el;\n        el = document.createElement(this.tagName);\n        el.className = 'incito__view';\n        if (this.className != null) {\n          el.className += ' ' + this.className;\n        }\n        return el;\n      }\n    }, {\n      key: 'setAttributes',\n      value: function setAttributes() {\n        var _this = this;\n\n        var dropShadowBlurRadius, dropShadowColor, dropShadowLeft, dropShadowTop, dropShadowValues, ref, ref1, ref2, ref3, ref4, ref5, strokeStyles, transforms;\n        // Identifier.\n        if (typeof this.attrs.id === 'string') {\n          this.el.setAttribute('data-id', this.attrs.id);\n        }\n\n        // Role.\n        if (typeof this.attrs.role === 'string') {\n          this.el.setAttribute('role', this.attrs.role);\n        }\n\n        // Accessibility label.\n        if (typeof this.attrs.accessibility_label === 'string') {\n          this.el.setAttribute('aria-label', this.attrs.accessibility_label);\n          this.el.setAttribute('title', this.attrs.accessibility_label);\n        }\n        // Gravity.\n        if (typeof this.attrs.gravity === 'string') {\n          this.el.setAttribute('data-gravity', this.attrs.gravity);\n        }\n\n        // Link or callback.\n        if (typeof this.attrs.link === 'string') {\n          this.el.setAttribute('data-link', this.attrs.link);\n          this.el.onclick = function (e) {\n            e.stopPropagation();\n            window.open(_this.attrs.link, '_blank');\n          };\n        } else if (typeof this.attrs.on_click === 'string') {\n          this.el.setAttribute('data-callback', this.attrs.on_click);\n          this.el.onclick = function (e) {\n            e.stopPropagation();\n            vent.trigger(_this.attrs.on_click, _this.attrs);\n          };\n        }\n        // Width.\n        if (this.attrs.layout_width === 'match_parent') {\n          this.el.style.display = 'block';\n        } else if (this.attrs.layout_width === 'wrap_content') {\n          this.el.style.display = 'inline-block';\n        } else if (this.attrs.layout_width != null) {\n          this.el.style.width = utils.formatUnit(this.attrs.layout_width);\n        }\n        // Height.\n        if (this.attrs.layout_height === 'match_parent') {\n          this.el.style.height = '100%';\n        } else if (this.attrs.layout_height === 'wrap_content') {\n          this.el.style.height = 'auto';\n        } else if (this.attrs.layout_height != null) {\n          this.el.style.height = utils.formatUnit(this.attrs.layout_height);\n        }\n        // Min width.\n        if (this.attrs.min_width != null) {\n          this.el.style.minWidth = utils.formatUnit(this.attrs.min_width);\n        }\n\n        // Max width.\n        if (this.attrs.max_width != null) {\n          this.el.style.maxWidth = utils.formatUnit(this.attrs.max_width);\n        }\n        // Min height.\n        if (this.attrs.min_height != null) {\n          this.el.style.minHeight = utils.formatUnit(this.attrs.min_height);\n        }\n        // Max height.\n        if (this.attrs.max_height != null) {\n          this.el.style.maxHeight = utils.formatUnit(this.attrs.max_height);\n        }\n\n        // Position in relation to parent.\n        if (this.attrs.layout_top != null) {\n          this.el.style.top = utils.formatUnit(this.attrs.layout_top);\n        }\n        if (this.attrs.layout_left != null) {\n          this.el.style.left = utils.formatUnit(this.attrs.layout_left);\n        }\n        if (this.attrs.layout_right != null) {\n          this.el.style.right = utils.formatUnit(this.attrs.layout_right);\n        }\n        if (this.attrs.layout_bottom != null) {\n          this.el.style.bottom = utils.formatUnit(this.attrs.layout_bottom);\n        }\n\n        // Background.\n        if (this.attrs.background_color != null) {\n          this.el.style.backgroundColor = this.attrs.background_color;\n        }\n        if (this.attrs.background_image != null) {\n          this.el.setAttribute('data-background-image', this.attrs.background_image);\n          this.el.className += ' incito--lazyload';\n        }\n        if ((ref = this.attrs.background_tile_mode) === 'repeat_x' || ref === 'repeat_y' || ref === 'repeat') {\n          this.el.style.backgroundRepeat = this.attrs.background_tile_mode.replace('_', '-');\n        }\n        if (this.attrs.background_image_position != null) {\n          this.el.style.backgroundPosition = this.attrs.background_image_position.replace('_', ' ');\n        }\n        if (this.attrs.background_image_scale_type === 'center_crop') {\n          this.el.style.backgroundSize = 'cover';\n        } else if (this.attrs.background_image_scale_type === 'center_inside') {\n          this.el.style.backgroundSize = 'contain';\n        }\n\n        // Drop shadow.\n        if (this.attrs.drop_shadow != null) {\n          dropShadowLeft = this.attrs.drop_shadow.left;\n          dropShadowTop = this.attrs.drop_shadow.top;\n          dropShadowBlurRadius = this.attrs.drop_shadow.blur_radius;\n          dropShadowColor = this.attrs.drop_shadow.color || 'transparent';\n          dropShadowValues = [utils.formatUnit(dropShadowLeft), utils.formatUnit(dropShadowTop), utils.formatUnit(dropShadowBlurRadius), dropShadowColor].join(' ');\n          this.el.style.filter = 'drop-shadow(' + dropShadowValues + ')';\n        }\n        // Margin.\n        if (this.attrs.layout_margin != null) {\n          this.el.style.margin = utils.formatUnit(this.attrs.layout_margin);\n        } else {\n          if (this.attrs.layout_margin_top != null) {\n            this.el.style.marginTop = utils.formatUnit(this.attrs.layout_margin_top);\n          }\n          if (this.attrs.layout_margin_left != null) {\n            this.el.style.marginLeft = utils.formatUnit(this.attrs.layout_margin_left);\n          }\n          if (this.attrs.layout_margin_right != null) {\n            this.el.style.marginRight = utils.formatUnit(this.attrs.layout_margin_right);\n          }\n          if (this.attrs.layout_margin_bottom != null) {\n            this.el.style.marginBottom = utils.formatUnit(this.attrs.layout_margin_bottom);\n          }\n        }\n        // Padding.\n        if (this.attrs.padding != null) {\n          this.el.style.padding = utils.formatUnit(this.attrs.padding);\n        } else {\n          if (this.attrs.padding_top != null) {\n            this.el.style.paddingTop = utils.formatUnit(this.attrs.padding_top);\n          }\n          if (this.attrs.padding_left != null) {\n            this.el.style.paddingLeft = utils.formatUnit(this.attrs.padding_left);\n          }\n          if (this.attrs.padding_right != null) {\n            this.el.style.paddingRight = utils.formatUnit(this.attrs.padding_right);\n          }\n          if (this.attrs.padding_bottom != null) {\n            this.el.style.paddingBottom = utils.formatUnit(this.attrs.padding_bottom);\n          }\n        }\n\n        // Corner radius.\n        if (this.attrs.corner_radius != null) {\n          this.el.style.borderRadius = utils.formatUnit(this.attrs.corner_radius);\n        } else {\n          if (this.attrs.corner_top_left_radius != null) {\n            this.el.style.borderTopLeftRadius = utils.formatUnit(this.attrs.corner_top_left_radius);\n          }\n          if (this.attrs.corner_top_right_radius != null) {\n            this.el.style.borderTopRightRadius = utils.formatUnit(this.attrs.corner_top_right_radius);\n          }\n          if (this.attrs.corner_bottom_left_radius != null) {\n            this.el.style.borderBottomLeftRadius = utils.formatUnit(this.attrs.corner_bottom_left_radius);\n          }\n          if (this.attrs.corner_bottom_right_radius != null) {\n            this.el.style.borderBottomRightRadius = utils.formatUnit(this.attrs.corner_bottom_right_radius);\n          }\n        }\n\n        // Clip children.\n        if (this.attrs.clip_children === false) {\n          this.el.style.overflow = 'visible';\n        }\n\n        // Stroke.\n        strokeStyles = ['solid', 'dotted', 'dashed'];\n        if (this.attrs.stroke_width != null) {\n          this.el.style.borderWidth = utils.formatUnit(this.attrs.stroke_width);\n        }\n        if (this.attrs.stroke_color != null) {\n          this.el.style.borderColor = this.attrs.stroke_color;\n        }\n        if (ref1 = this.attrs.stroke_style, indexOf.call(strokeStyles, ref1) >= 0) {\n          this.el.style.borderStyle = this.attrs.stroke_style;\n        }\n        if (this.attrs.stroke_top_width != null) {\n          this.el.style.borderTopWidth = utils.formatUnit(this.attrs.stroke_top_width);\n        }\n        if (this.attrs.stroke_top_color != null) {\n          this.el.style.borderTopColor = this.attrs.stroke_top_color;\n        }\n        if (ref2 = this.attrs.stroke_top_style, indexOf.call(strokeStyles, ref2) >= 0) {\n          this.el.style.borderTopStyle = this.attrs.stroke_top_style;\n        }\n        if (this.attrs.stroke_left_width != null) {\n          this.el.style.borderLeftWidth = utils.formatUnit(this.attrs.stroke_left_width);\n        }\n        if (this.attrs.stroke_left_color != null) {\n          this.el.style.borderLeftColor = this.attrs.stroke_left_color;\n        }\n        if (ref3 = this.attrs.stroke_left_style, indexOf.call(strokeStyles, ref3) >= 0) {\n          this.el.style.borderLeftStyle = this.attrs.stroke_left_style;\n        }\n        if (this.attrs.stroke_right_width != null) {\n          this.el.style.borderRightWidth = utils.formatUnit(this.attrs.stroke_right_width);\n        }\n        if (this.attrs.stroke_right_color != null) {\n          this.el.style.borderRightColor = this.attrs.stroke_right_color;\n        }\n        if (ref4 = this.attrs.stroke_right_style, indexOf.call(strokeStyles, ref4) >= 0) {\n          this.el.style.borderRightStyle = this.attrs.stroke_right_style;\n        }\n        if (this.attrs.stroke_bottom_width != null) {\n          this.el.style.borderBottomWidth = utils.formatUnit(this.attrs.stroke_bottom_width);\n        }\n        if (this.attrs.stroke_bottom_color != null) {\n          this.el.style.borderBottomColor = this.attrs.stroke_bottom_color;\n        }\n        if (ref5 = this.attrs.stroke_bottom_style, indexOf.call(strokeStyles, ref5) >= 0) {\n          this.el.style.borderBottomStyle = this.attrs.stroke_bottom_style;\n        }\n        // Flex layout.\n        if (typeof this.attrs.layout_flex_shrink === 'number') {\n          this.el.style.flexShrink = this.attrs.layout_flex_shrink;\n        }\n        if (typeof this.attrs.layout_flex_grow === 'number') {\n          this.el.style.flexGrow = this.attrs.layout_flex_grow;\n        }\n        if (this.attrs.layout_flex_basis != null) {\n          this.el.style.flexBasis = this.attrs.layout_flex_basis;\n        }\n\n        // Transforms.\n        transforms = this.getTransforms();\n        if (transforms.length > 0) {\n          this.el.style.transform = transforms.join(' ');\n        }\n\n        // Transform origin.\n        if (Array.isArray(this.attrs.transform_origin) && this.attrs.transform_origin.length === 2) {\n          this.el.style.transformOrigin = [utils.formatUnit(this.attrs.transform_origin[0]), utils.formatUnit(this.attrs.transform_origin[1])].join(' ');\n        }\n      }\n    }, {\n      key: 'getTransforms',\n      value: function getTransforms() {\n        var transforms, translateX, translateY;\n        transforms = [];\n        translateX = utils.formatUnit(this.attrs.transform_translate_x);\n        translateY = utils.formatUnit(this.attrs.transform_translate_y);\n        if (translateX !== 0 && translateY !== 0) {\n          transforms.push('translate3d(' + translateX + ', ' + translateY + ', 0)');\n        }\n        if (typeof this.attrs.transform_rotate === 'number' && this.attrs.transform_scale !== 1) {\n          transforms.push('rotate3d(0, 0, 1, ' + this.attrs.transform_rotate + 'deg)');\n        }\n        if (typeof this.attrs.transform_scale === 'number' && this.attrs.transform_scale !== 1) {\n          transforms.push('scale3d(' + this.attrs.transform_scale + ', ' + this.attrs.transform_scale + ', 1)');\n        }\n        return transforms;\n      }\n    }]);\n\n    return View;\n  }();\n\n  ;\n\n  View.prototype.tagName = 'div';\n\n  View.prototype.className = null;\n\n  return View;\n}.call(undefined);\n\n},{\"../utils\":2,\"../vent\":3}],12:[function(_dereq_,module,exports){\n/**\n * Copyright 2016 Google Inc. All Rights Reserved.\n *\n * Licensed under the W3C SOFTWARE AND DOCUMENT NOTICE AND LICENSE.\n *\n *  https://www.w3.org/Consortium/Legal/2015/copyright-software-and-document\n *\n */\n\n(function(window, document) {\n'use strict';\n\n\n// Exits early if all IntersectionObserver and IntersectionObserverEntry\n// features are natively supported.\nif ('IntersectionObserver' in window &&\n    'IntersectionObserverEntry' in window &&\n    'intersectionRatio' in window.IntersectionObserverEntry.prototype) {\n\n  // Minimal polyfill for Edge 15's lack of `isIntersecting`\n  // See: https://github.com/w3c/IntersectionObserver/issues/211\n  if (!('isIntersecting' in window.IntersectionObserverEntry.prototype)) {\n    Object.defineProperty(window.IntersectionObserverEntry.prototype,\n      'isIntersecting', {\n      get: function () {\n        return this.intersectionRatio > 0;\n      }\n    });\n  }\n  return;\n}\n\n\n/**\n * An IntersectionObserver registry. This registry exists to hold a strong\n * reference to IntersectionObserver instances currently observering a target\n * element. Without this registry, instances without another reference may be\n * garbage collected.\n */\nvar registry = [];\n\n\n/**\n * Creates the global IntersectionObserverEntry constructor.\n * https://w3c.github.io/IntersectionObserver/#intersection-observer-entry\n * @param {Object} entry A dictionary of instance properties.\n * @constructor\n */\nfunction IntersectionObserverEntry(entry) {\n  this.time = entry.time;\n  this.target = entry.target;\n  this.rootBounds = entry.rootBounds;\n  this.boundingClientRect = entry.boundingClientRect;\n  this.intersectionRect = entry.intersectionRect || getEmptyRect();\n  this.isIntersecting = !!entry.intersectionRect;\n\n  // Calculates the intersection ratio.\n  var targetRect = this.boundingClientRect;\n  var targetArea = targetRect.width * targetRect.height;\n  var intersectionRect = this.intersectionRect;\n  var intersectionArea = intersectionRect.width * intersectionRect.height;\n\n  // Sets intersection ratio.\n  if (targetArea) {\n    this.intersectionRatio = intersectionArea / targetArea;\n  } else {\n    // If area is zero and is intersecting, sets to 1, otherwise to 0\n    this.intersectionRatio = this.isIntersecting ? 1 : 0;\n  }\n}\n\n\n/**\n * Creates the global IntersectionObserver constructor.\n * https://w3c.github.io/IntersectionObserver/#intersection-observer-interface\n * @param {Function} callback The function to be invoked after intersection\n *     changes have queued. The function is not invoked if the queue has\n *     been emptied by calling the `takeRecords` method.\n * @param {Object=} opt_options Optional configuration options.\n * @constructor\n */\nfunction IntersectionObserver(callback, opt_options) {\n\n  var options = opt_options || {};\n\n  if (typeof callback != 'function') {\n    throw new Error('callback must be a function');\n  }\n\n  if (options.root && options.root.nodeType != 1) {\n    throw new Error('root must be an Element');\n  }\n\n  // Binds and throttles `this._checkForIntersections`.\n  this._checkForIntersections = throttle(\n      this._checkForIntersections.bind(this), this.THROTTLE_TIMEOUT);\n\n  // Private properties.\n  this._callback = callback;\n  this._observationTargets = [];\n  this._queuedEntries = [];\n  this._rootMarginValues = this._parseRootMargin(options.rootMargin);\n\n  // Public properties.\n  this.thresholds = this._initThresholds(options.threshold);\n  this.root = options.root || null;\n  this.rootMargin = this._rootMarginValues.map(function(margin) {\n    return margin.value + margin.unit;\n  }).join(' ');\n}\n\n\n/**\n * The minimum interval within which the document will be checked for\n * intersection changes.\n */\nIntersectionObserver.prototype.THROTTLE_TIMEOUT = 100;\n\n\n/**\n * The frequency in which the polyfill polls for intersection changes.\n * this can be updated on a per instance basis and must be set prior to\n * calling `observe` on the first target.\n */\nIntersectionObserver.prototype.POLL_INTERVAL = null;\n\n/**\n * Use a mutation observer on the root element\n * to detect intersection changes.\n */\nIntersectionObserver.prototype.USE_MUTATION_OBSERVER = true;\n\n\n/**\n * Starts observing a target element for intersection changes based on\n * the thresholds values.\n * @param {Element} target The DOM element to observe.\n */\nIntersectionObserver.prototype.observe = function(target) {\n  var isTargetAlreadyObserved = this._observationTargets.some(function(item) {\n    return item.element == target;\n  });\n\n  if (isTargetAlreadyObserved) {\n    return;\n  }\n\n  if (!(target && target.nodeType == 1)) {\n    throw new Error('target must be an Element');\n  }\n\n  this._registerInstance();\n  this._observationTargets.push({element: target, entry: null});\n  this._monitorIntersections();\n  this._checkForIntersections();\n};\n\n\n/**\n * Stops observing a target element for intersection changes.\n * @param {Element} target The DOM element to observe.\n */\nIntersectionObserver.prototype.unobserve = function(target) {\n  this._observationTargets =\n      this._observationTargets.filter(function(item) {\n\n    return item.element != target;\n  });\n  if (!this._observationTargets.length) {\n    this._unmonitorIntersections();\n    this._unregisterInstance();\n  }\n};\n\n\n/**\n * Stops observing all target elements for intersection changes.\n */\nIntersectionObserver.prototype.disconnect = function() {\n  this._observationTargets = [];\n  this._unmonitorIntersections();\n  this._unregisterInstance();\n};\n\n\n/**\n * Returns any queue entries that have not yet been reported to the\n * callback and clears the queue. This can be used in conjunction with the\n * callback to obtain the absolute most up-to-date intersection information.\n * @return {Array} The currently queued entries.\n */\nIntersectionObserver.prototype.takeRecords = function() {\n  var records = this._queuedEntries.slice();\n  this._queuedEntries = [];\n  return records;\n};\n\n\n/**\n * Accepts the threshold value from the user configuration object and\n * returns a sorted array of unique threshold values. If a value is not\n * between 0 and 1 and error is thrown.\n * @private\n * @param {Array|number=} opt_threshold An optional threshold value or\n *     a list of threshold values, defaulting to [0].\n * @return {Array} A sorted list of unique and valid threshold values.\n */\nIntersectionObserver.prototype._initThresholds = function(opt_threshold) {\n  var threshold = opt_threshold || [0];\n  if (!Array.isArray(threshold)) threshold = [threshold];\n\n  return threshold.sort().filter(function(t, i, a) {\n    if (typeof t != 'number' || isNaN(t) || t < 0 || t > 1) {\n      throw new Error('threshold must be a number between 0 and 1 inclusively');\n    }\n    return t !== a[i - 1];\n  });\n};\n\n\n/**\n * Accepts the rootMargin value from the user configuration object\n * and returns an array of the four margin values as an object containing\n * the value and unit properties. If any of the values are not properly\n * formatted or use a unit other than px or %, and error is thrown.\n * @private\n * @param {string=} opt_rootMargin An optional rootMargin value,\n *     defaulting to '0px'.\n * @return {Array<Object>} An array of margin objects with the keys\n *     value and unit.\n */\nIntersectionObserver.prototype._parseRootMargin = function(opt_rootMargin) {\n  var marginString = opt_rootMargin || '0px';\n  var margins = marginString.split(/\\s+/).map(function(margin) {\n    var parts = /^(-?\\d*\\.?\\d+)(px|%)$/.exec(margin);\n    if (!parts) {\n      throw new Error('rootMargin must be specified in pixels or percent');\n    }\n    return {value: parseFloat(parts[1]), unit: parts[2]};\n  });\n\n  // Handles shorthand.\n  margins[1] = margins[1] || margins[0];\n  margins[2] = margins[2] || margins[0];\n  margins[3] = margins[3] || margins[1];\n\n  return margins;\n};\n\n\n/**\n * Starts polling for intersection changes if the polling is not already\n * happening, and if the page's visibilty state is visible.\n * @private\n */\nIntersectionObserver.prototype._monitorIntersections = function() {\n  if (!this._monitoringIntersections) {\n    this._monitoringIntersections = true;\n\n    // If a poll interval is set, use polling instead of listening to\n    // resize and scroll events or DOM mutations.\n    if (this.POLL_INTERVAL) {\n      this._monitoringInterval = setInterval(\n          this._checkForIntersections, this.POLL_INTERVAL);\n    }\n    else {\n      addEvent(window, 'resize', this._checkForIntersections, true);\n      addEvent(document, 'scroll', this._checkForIntersections, true);\n\n      if (this.USE_MUTATION_OBSERVER && 'MutationObserver' in window) {\n        this._domObserver = new MutationObserver(this._checkForIntersections);\n        this._domObserver.observe(document, {\n          attributes: true,\n          childList: true,\n          characterData: true,\n          subtree: true\n        });\n      }\n    }\n  }\n};\n\n\n/**\n * Stops polling for intersection changes.\n * @private\n */\nIntersectionObserver.prototype._unmonitorIntersections = function() {\n  if (this._monitoringIntersections) {\n    this._monitoringIntersections = false;\n\n    clearInterval(this._monitoringInterval);\n    this._monitoringInterval = null;\n\n    removeEvent(window, 'resize', this._checkForIntersections, true);\n    removeEvent(document, 'scroll', this._checkForIntersections, true);\n\n    if (this._domObserver) {\n      this._domObserver.disconnect();\n      this._domObserver = null;\n    }\n  }\n};\n\n\n/**\n * Scans each observation target for intersection changes and adds them\n * to the internal entries queue. If new entries are found, it\n * schedules the callback to be invoked.\n * @private\n */\nIntersectionObserver.prototype._checkForIntersections = function() {\n  var rootIsInDom = this._rootIsInDom();\n  var rootRect = rootIsInDom ? this._getRootRect() : getEmptyRect();\n\n  this._observationTargets.forEach(function(item) {\n    var target = item.element;\n    var targetRect = getBoundingClientRect(target);\n    var rootContainsTarget = this._rootContainsTarget(target);\n    var oldEntry = item.entry;\n    var intersectionRect = rootIsInDom && rootContainsTarget &&\n        this._computeTargetAndRootIntersection(target, rootRect);\n\n    var newEntry = item.entry = new IntersectionObserverEntry({\n      time: now(),\n      target: target,\n      boundingClientRect: targetRect,\n      rootBounds: rootRect,\n      intersectionRect: intersectionRect\n    });\n\n    if (!oldEntry) {\n      this._queuedEntries.push(newEntry);\n    } else if (rootIsInDom && rootContainsTarget) {\n      // If the new entry intersection ratio has crossed any of the\n      // thresholds, add a new entry.\n      if (this._hasCrossedThreshold(oldEntry, newEntry)) {\n        this._queuedEntries.push(newEntry);\n      }\n    } else {\n      // If the root is not in the DOM or target is not contained within\n      // root but the previous entry for this target had an intersection,\n      // add a new record indicating removal.\n      if (oldEntry && oldEntry.isIntersecting) {\n        this._queuedEntries.push(newEntry);\n      }\n    }\n  }, this);\n\n  if (this._queuedEntries.length) {\n    this._callback(this.takeRecords(), this);\n  }\n};\n\n\n/**\n * Accepts a target and root rect computes the intersection between then\n * following the algorithm in the spec.\n * TODO(philipwalton): at this time clip-path is not considered.\n * https://w3c.github.io/IntersectionObserver/#calculate-intersection-rect-algo\n * @param {Element} target The target DOM element\n * @param {Object} rootRect The bounding rect of the root after being\n *     expanded by the rootMargin value.\n * @return {?Object} The final intersection rect object or undefined if no\n *     intersection is found.\n * @private\n */\nIntersectionObserver.prototype._computeTargetAndRootIntersection =\n    function(target, rootRect) {\n\n  // If the element isn't displayed, an intersection can't happen.\n  if (window.getComputedStyle(target).display == 'none') return;\n\n  var targetRect = getBoundingClientRect(target);\n  var intersectionRect = targetRect;\n  var parent = getParentNode(target);\n  var atRoot = false;\n\n  while (!atRoot) {\n    var parentRect = null;\n    var parentComputedStyle = parent.nodeType == 1 ?\n        window.getComputedStyle(parent) : {};\n\n    // If the parent isn't displayed, an intersection can't happen.\n    if (parentComputedStyle.display == 'none') return;\n\n    if (parent == this.root || parent == document) {\n      atRoot = true;\n      parentRect = rootRect;\n    } else {\n      // If the element has a non-visible overflow, and it's not the <body>\n      // or <html> element, update the intersection rect.\n      // Note: <body> and <html> cannot be clipped to a rect that's not also\n      // the document rect, so no need to compute a new intersection.\n      if (parent != document.body &&\n          parent != document.documentElement &&\n          parentComputedStyle.overflow != 'visible') {\n        parentRect = getBoundingClientRect(parent);\n      }\n    }\n\n    // If either of the above conditionals set a new parentRect,\n    // calculate new intersection data.\n    if (parentRect) {\n      intersectionRect = computeRectIntersection(parentRect, intersectionRect);\n\n      if (!intersectionRect) break;\n    }\n    parent = getParentNode(parent);\n  }\n  return intersectionRect;\n};\n\n\n/**\n * Returns the root rect after being expanded by the rootMargin value.\n * @return {Object} The expanded root rect.\n * @private\n */\nIntersectionObserver.prototype._getRootRect = function() {\n  var rootRect;\n  if (this.root) {\n    rootRect = getBoundingClientRect(this.root);\n  } else {\n    // Use <html>/<body> instead of window since scroll bars affect size.\n    var html = document.documentElement;\n    var body = document.body;\n    rootRect = {\n      top: 0,\n      left: 0,\n      right: html.clientWidth || body.clientWidth,\n      width: html.clientWidth || body.clientWidth,\n      bottom: html.clientHeight || body.clientHeight,\n      height: html.clientHeight || body.clientHeight\n    };\n  }\n  return this._expandRectByRootMargin(rootRect);\n};\n\n\n/**\n * Accepts a rect and expands it by the rootMargin value.\n * @param {Object} rect The rect object to expand.\n * @return {Object} The expanded rect.\n * @private\n */\nIntersectionObserver.prototype._expandRectByRootMargin = function(rect) {\n  var margins = this._rootMarginValues.map(function(margin, i) {\n    return margin.unit == 'px' ? margin.value :\n        margin.value * (i % 2 ? rect.width : rect.height) / 100;\n  });\n  var newRect = {\n    top: rect.top - margins[0],\n    right: rect.right + margins[1],\n    bottom: rect.bottom + margins[2],\n    left: rect.left - margins[3]\n  };\n  newRect.width = newRect.right - newRect.left;\n  newRect.height = newRect.bottom - newRect.top;\n\n  return newRect;\n};\n\n\n/**\n * Accepts an old and new entry and returns true if at least one of the\n * threshold values has been crossed.\n * @param {?IntersectionObserverEntry} oldEntry The previous entry for a\n *    particular target element or null if no previous entry exists.\n * @param {IntersectionObserverEntry} newEntry The current entry for a\n *    particular target element.\n * @return {boolean} Returns true if a any threshold has been crossed.\n * @private\n */\nIntersectionObserver.prototype._hasCrossedThreshold =\n    function(oldEntry, newEntry) {\n\n  // To make comparing easier, an entry that has a ratio of 0\n  // but does not actually intersect is given a value of -1\n  var oldRatio = oldEntry && oldEntry.isIntersecting ?\n      oldEntry.intersectionRatio || 0 : -1;\n  var newRatio = newEntry.isIntersecting ?\n      newEntry.intersectionRatio || 0 : -1;\n\n  // Ignore unchanged ratios\n  if (oldRatio === newRatio) return;\n\n  for (var i = 0; i < this.thresholds.length; i++) {\n    var threshold = this.thresholds[i];\n\n    // Return true if an entry matches a threshold or if the new ratio\n    // and the old ratio are on the opposite sides of a threshold.\n    if (threshold == oldRatio || threshold == newRatio ||\n        threshold < oldRatio !== threshold < newRatio) {\n      return true;\n    }\n  }\n};\n\n\n/**\n * Returns whether or not the root element is an element and is in the DOM.\n * @return {boolean} True if the root element is an element and is in the DOM.\n * @private\n */\nIntersectionObserver.prototype._rootIsInDom = function() {\n  return !this.root || containsDeep(document, this.root);\n};\n\n\n/**\n * Returns whether or not the target element is a child of root.\n * @param {Element} target The target element to check.\n * @return {boolean} True if the target element is a child of root.\n * @private\n */\nIntersectionObserver.prototype._rootContainsTarget = function(target) {\n  return containsDeep(this.root || document, target);\n};\n\n\n/**\n * Adds the instance to the global IntersectionObserver registry if it isn't\n * already present.\n * @private\n */\nIntersectionObserver.prototype._registerInstance = function() {\n  if (registry.indexOf(this) < 0) {\n    registry.push(this);\n  }\n};\n\n\n/**\n * Removes the instance from the global IntersectionObserver registry.\n * @private\n */\nIntersectionObserver.prototype._unregisterInstance = function() {\n  var index = registry.indexOf(this);\n  if (index != -1) registry.splice(index, 1);\n};\n\n\n/**\n * Returns the result of the performance.now() method or null in browsers\n * that don't support the API.\n * @return {number} The elapsed time since the page was requested.\n */\nfunction now() {\n  return window.performance && performance.now && performance.now();\n}\n\n\n/**\n * Throttles a function and delays its executiong, so it's only called at most\n * once within a given time period.\n * @param {Function} fn The function to throttle.\n * @param {number} timeout The amount of time that must pass before the\n *     function can be called again.\n * @return {Function} The throttled function.\n */\nfunction throttle(fn, timeout) {\n  var timer = null;\n  return function () {\n    if (!timer) {\n      timer = setTimeout(function() {\n        fn();\n        timer = null;\n      }, timeout);\n    }\n  };\n}\n\n\n/**\n * Adds an event handler to a DOM node ensuring cross-browser compatibility.\n * @param {Node} node The DOM node to add the event handler to.\n * @param {string} event The event name.\n * @param {Function} fn The event handler to add.\n * @param {boolean} opt_useCapture Optionally adds the even to the capture\n *     phase. Note: this only works in modern browsers.\n */\nfunction addEvent(node, event, fn, opt_useCapture) {\n  if (typeof node.addEventListener == 'function') {\n    node.addEventListener(event, fn, opt_useCapture || false);\n  }\n  else if (typeof node.attachEvent == 'function') {\n    node.attachEvent('on' + event, fn);\n  }\n}\n\n\n/**\n * Removes a previously added event handler from a DOM node.\n * @param {Node} node The DOM node to remove the event handler from.\n * @param {string} event The event name.\n * @param {Function} fn The event handler to remove.\n * @param {boolean} opt_useCapture If the event handler was added with this\n *     flag set to true, it should be set to true here in order to remove it.\n */\nfunction removeEvent(node, event, fn, opt_useCapture) {\n  if (typeof node.removeEventListener == 'function') {\n    node.removeEventListener(event, fn, opt_useCapture || false);\n  }\n  else if (typeof node.detatchEvent == 'function') {\n    node.detatchEvent('on' + event, fn);\n  }\n}\n\n\n/**\n * Returns the intersection between two rect objects.\n * @param {Object} rect1 The first rect.\n * @param {Object} rect2 The second rect.\n * @return {?Object} The intersection rect or undefined if no intersection\n *     is found.\n */\nfunction computeRectIntersection(rect1, rect2) {\n  var top = Math.max(rect1.top, rect2.top);\n  var bottom = Math.min(rect1.bottom, rect2.bottom);\n  var left = Math.max(rect1.left, rect2.left);\n  var right = Math.min(rect1.right, rect2.right);\n  var width = right - left;\n  var height = bottom - top;\n\n  return (width >= 0 && height >= 0) && {\n    top: top,\n    bottom: bottom,\n    left: left,\n    right: right,\n    width: width,\n    height: height\n  };\n}\n\n\n/**\n * Shims the native getBoundingClientRect for compatibility with older IE.\n * @param {Element} el The element whose bounding rect to get.\n * @return {Object} The (possibly shimmed) rect of the element.\n */\nfunction getBoundingClientRect(el) {\n  var rect;\n\n  try {\n    rect = el.getBoundingClientRect();\n  } catch (err) {\n    // Ignore Windows 7 IE11 \"Unspecified error\"\n    // https://github.com/w3c/IntersectionObserver/pull/205\n  }\n\n  if (!rect) return getEmptyRect();\n\n  // Older IE\n  if (!(rect.width && rect.height)) {\n    rect = {\n      top: rect.top,\n      right: rect.right,\n      bottom: rect.bottom,\n      left: rect.left,\n      width: rect.right - rect.left,\n      height: rect.bottom - rect.top\n    };\n  }\n  return rect;\n}\n\n\n/**\n * Returns an empty rect object. An empty rect is returned when an element\n * is not in the DOM.\n * @return {Object} The empty rect.\n */\nfunction getEmptyRect() {\n  return {\n    top: 0,\n    bottom: 0,\n    left: 0,\n    right: 0,\n    width: 0,\n    height: 0\n  };\n}\n\n/**\n * Checks to see if a parent element contains a child elemnt (including inside\n * shadow DOM).\n * @param {Node} parent The parent element.\n * @param {Node} child The child element.\n * @return {boolean} True if the parent node contains the child node.\n */\nfunction containsDeep(parent, child) {\n  var node = child;\n  while (node) {\n    if (node == parent) return true;\n\n    node = getParentNode(node);\n  }\n  return false;\n}\n\n\n/**\n * Gets the parent node of an element or its host element if the parent node\n * is a shadow root.\n * @param {Node} node The node whose parent to get.\n * @return {Node|null} The parent node or null if no parent exists.\n */\nfunction getParentNode(node) {\n  var parent = node.parentNode;\n\n  if (parent && parent.nodeType == 11 && parent.host) {\n    // If the parent is a shadow root, return the host element.\n    return parent.host;\n  }\n  return parent;\n}\n\n\n// Exposes the constructors globally.\nwindow.IntersectionObserver = IntersectionObserver;\nwindow.IntersectionObserverEntry = IntersectionObserverEntry;\n\n}(window, document));\n\n},{}],13:[function(_dereq_,module,exports){\n/*! lozad.js - v1.2.0 - 2018-01-23\n* https://github.com/ApoorvSaxena/lozad.js\n* Copyright (c) 2018 Apoorv Saxena; Licensed MIT */\n\n\n(function (global, factory) {\n\ttypeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n\ttypeof define === 'function' && define.amd ? define(factory) :\n\t(global.lozad = factory());\n}(this, (function () { 'use strict';\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\n/**\n * Detect IE browser\n * @const {boolean}\n * @private\n */\nvar isIE = document.documentMode;\n\nvar defaultConfig = {\n  rootMargin: '0px',\n  threshold: 0,\n  load: function load(element) {\n    if (element.nodeName.toLowerCase() === 'picture') {\n      var img = document.createElement('img');\n      if (isIE && element.getAttribute('data-iesrc')) {\n        img.src = element.getAttribute('data-iesrc');\n      }\n      element.appendChild(img);\n    }\n    if (element.getAttribute('data-src')) {\n      element.src = element.getAttribute('data-src');\n    }\n    if (element.getAttribute('data-srcset')) {\n      element.srcset = element.getAttribute('data-srcset');\n    }\n    if (element.getAttribute('data-background-image')) {\n      element.style.backgroundImage = 'url(' + element.getAttribute('data-background-image') + ')';\n    }\n  }\n};\n\nfunction markAsLoaded(element) {\n  element.setAttribute('data-loaded', true);\n}\n\nvar isLoaded = function isLoaded(element) {\n  return element.getAttribute('data-loaded') === 'true';\n};\n\nvar onIntersection = function onIntersection(load) {\n  return function (entries, observer) {\n    entries.forEach(function (entry) {\n      if (entry.intersectionRatio > 0) {\n        observer.unobserve(entry.target);\n\n        if (!isLoaded(entry.target)) {\n          load(entry.target);\n          markAsLoaded(entry.target);\n        }\n      }\n    });\n  };\n};\n\nvar getElements = function getElements(selector) {\n  if (selector instanceof Element) {\n    return [selector];\n  }\n  if (selector instanceof NodeList) {\n    return selector;\n  }\n  return document.querySelectorAll(selector);\n};\n\nvar lozad = function () {\n  var selector = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '.lozad';\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n  var _defaultConfig$option = _extends({}, defaultConfig, options),\n      rootMargin = _defaultConfig$option.rootMargin,\n      threshold = _defaultConfig$option.threshold,\n      load = _defaultConfig$option.load;\n\n  var observer = void 0;\n\n  if (window.IntersectionObserver) {\n    observer = new IntersectionObserver(onIntersection(load), {\n      rootMargin: rootMargin,\n      threshold: threshold\n    });\n  }\n\n  return {\n    observe: function observe() {\n      var elements = getElements(selector);\n\n      for (var i = 0; i < elements.length; i++) {\n        if (isLoaded(elements[i])) {\n          continue;\n        }\n        if (observer) {\n          observer.observe(elements[i]);\n          continue;\n        }\n        load(elements[i]);\n        markAsLoaded(elements[i]);\n      }\n    },\n    triggerLoad: function triggerLoad(element) {\n      if (isLoaded(element)) {\n        return;\n      }\n\n      load(element);\n      markAsLoaded(element);\n    }\n  };\n};\n\nreturn lozad;\n\n})));\n\n},{}],14:[function(_dereq_,module,exports){\n/**\n * MicroEvent - to make any js object an event emitter (server or browser)\n * \n * - pure javascript - server compatible, browser compatible\n * - dont rely on the browser doms\n * - super simple - you get it immediatly, no mistery, no magic involved\n *\n * - create a MicroEventDebug with goodies to debug\n *   - make it safer to use\n*/\n\nvar MicroEvent\t= function(){}\nMicroEvent.prototype\t= {\n\tbind\t: function(event, fct){\n\t\tthis._events = this._events || {};\n\t\tthis._events[event] = this._events[event]\t|| [];\n\t\tthis._events[event].push(fct);\n\t},\n\tunbind\t: function(event, fct){\n\t\tthis._events = this._events || {};\n\t\tif( event in this._events === false  )\treturn;\n\t\tthis._events[event].splice(this._events[event].indexOf(fct), 1);\n\t},\n\ttrigger\t: function(event /* , args... */){\n\t\tthis._events = this._events || {};\n\t\tif( event in this._events === false  )\treturn;\n\t\tfor(var i = 0; i < this._events[event].length; i++){\n\t\t\tthis._events[event][i].apply(this, Array.prototype.slice.call(arguments, 1))\n\t\t}\n\t}\n};\n\n/**\n * mixin will delegate all MicroEvent.js function in the destination object\n *\n * - require('MicroEvent').mixin(Foobar) will make Foobar able to use MicroEvent\n *\n * @param {Object} the object which will support MicroEvent\n*/\nMicroEvent.mixin\t= function(destObject){\n\tvar props\t= ['bind', 'unbind', 'trigger'];\n\tfor(var i = 0; i < props.length; i ++){\n\t\tdestObject.prototype[props[i]]\t= MicroEvent.prototype[props[i]];\n\t}\n}\n\n// export in common js\nif( typeof module !== \"undefined\" && ('exports' in module)){\n\tmodule.exports\t= MicroEvent\n}\n\n},{}]},{},[1])(1)\n});\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJsaWIvY29mZmVlc2NyaXB0L2luY2l0by5jb2ZmZWUiLCJsaWIvY29mZmVlc2NyaXB0L3V0aWxzLmNvZmZlZSIsImxpYi9jb2ZmZWVzY3JpcHQvdmVudC5jb2ZmZWUiLCJsaWIvY29mZmVlc2NyaXB0L3ZpZXdzL2Fic29sdXRlLWxheW91dC5jb2ZmZWUiLCJsaWIvY29mZmVlc2NyaXB0L3ZpZXdzL2ZsZXgtbGF5b3V0LmNvZmZlZSIsImxpYi9jb2ZmZWVzY3JpcHQvdmlld3MvZnJhZy5jb2ZmZWUiLCJsaWIvY29mZmVlc2NyaXB0L3ZpZXdzL2ltYWdlLmNvZmZlZSIsImxpYi9jb2ZmZWVzY3JpcHQvdmlld3MvbGluZWFyLWxheW91dC5jb2ZmZWUiLCJsaWIvY29mZmVlc2NyaXB0L3ZpZXdzL3RleHQuY29mZmVlIiwibGliL2NvZmZlZXNjcmlwdC92aWV3cy92aWRlby1lbWJlZC5jb2ZmZWUiLCJsaWIvY29mZmVlc2NyaXB0L3ZpZXdzL3ZpZXcuY29mZmVlIiwibm9kZV9tb2R1bGVzL2ludGVyc2VjdGlvbi1vYnNlcnZlci9pbnRlcnNlY3Rpb24tb2JzZXJ2ZXIuanMiLCJub2RlX21vZHVsZXMvbG96YWQvZGlzdC9sb3phZC5qcyIsIm5vZGVfbW9kdWxlcy9taWNyb2V2ZW50L21pY3JvZXZlbnQuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7Ozs7QUNBQSxJQUFBLGdCQUFBLFlBQUEsVUFBQSxXQUFBLFFBQUEsY0FBQSxVQUFBLGdCQUFBLE1BQUEsT0FBQTs7QUFBQSxRQUFBLEFBQVE7O0FBRVIsUUFBUSxRQUFBLEFBQVE7O0FBQ2hCLE9BQU8sUUFBQSxBQUFROztBQUNmLE9BQU8sUUFBQSxBQUFROztBQUNmLFdBQVcsUUFBQSxBQUFROztBQUNuQixZQUFZLFFBQUEsQUFBUTs7QUFDcEIsV0FBVyxRQUFBLEFBQVE7O0FBQ25CLGlCQUFpQixRQUFBLEFBQVE7O0FBQ3pC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QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3B0QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUM1SEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtpZighdSYmYSlyZXR1cm4gYShvLCEwKTtpZihpKXJldHVybiBpKG8sITApO3ZhciBmPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIrbytcIidcIik7dGhyb3cgZi5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGZ9dmFyIGw9bltvXT17ZXhwb3J0czp7fX07dFtvXVswXS5jYWxsKGwuZXhwb3J0cyxmdW5jdGlvbihlKXt2YXIgbj10W29dWzFdW2VdO3JldHVybiBzKG4/bjplKX0sbCxsLmV4cG9ydHMsZSx0LG4scil9cmV0dXJuIG5bb10uZXhwb3J0c312YXIgaT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2Zvcih2YXIgbz0wO288ci5sZW5ndGg7bysrKXMocltvXSk7cmV0dXJuIHN9KSIsInJlcXVpcmUgJ2ludGVyc2VjdGlvbi1vYnNlcnZlcidcblxubG96YWQgPSByZXF1aXJlICdsb3phZCdcbnZlbnQgPSByZXF1aXJlICcuL3ZlbnQnXG5WaWV3ID0gcmVxdWlyZSAnLi92aWV3cy92aWV3J1xuRnJhZ1ZpZXcgPSByZXF1aXJlICcuL3ZpZXdzL2ZyYWcnXG5JbWFnZVZpZXcgPSByZXF1aXJlICcuL3ZpZXdzL2ltYWdlJ1xuVGV4dFZpZXcgPSByZXF1aXJlICcuL3ZpZXdzL3RleHQnXG5WaWRlb0VtYmVkVmlldyA9IHJlcXVpcmUgJy4vdmlld3MvdmlkZW8tZW1iZWQnXG5MaW5lYXJMYXlvdXQgPSByZXF1aXJlICcuL3ZpZXdzL2xpbmVhci1sYXlvdXQnXG5BYnNvbHV0ZUxheW91dCA9IHJlcXVpcmUgJy4vdmlld3MvYWJzb2x1dGUtbGF5b3V0J1xuRmxleExheW91dCA9IHJlcXVpcmUgJy4vdmlld3MvZmxleC1sYXlvdXQnXG5cbmNsYXNzIEluY2l0b1xuICAgIEB2ZW50OiB2ZW50XG5cbiAgICBjb25zdHJ1Y3RvcjogKEBlbCwgQG9wdGlvbnMgPSB7fSkgLT5cbiAgICAgICAgcmV0dXJuXG4gICAgXG4gICAgc3RhcnQ6IC0+XG4gICAgICAgIGluY2l0byA9IEBvcHRpb25zLmluY2l0byBvciB7fVxuICAgICAgICBmcmFnID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpXG5cbiAgICAgICAgQGxvYWRGb250cyBpbmNpdG8uZm9udF9hc3NldHNcbiAgICAgICAgQGFwcGx5VGhlbWUgaW5jaXRvLnRoZW1lXG4gICAgICAgIEByZW5kZXIgZnJhZywgaW5jaXRvLnJvb3Rfdmlld1xuICAgICAgICBcbiAgICAgICAgQGVsLnNldEF0dHJpYnV0ZSAnbGFuZycsIGluY2l0by5sb2NhbGUgaWYgaW5jaXRvLmxvY2FsZT9cbiAgICAgICAgQGVsLnNldEF0dHJpYnV0ZSAnZGF0YS1kZWJ1ZycsIHRydWUgaWYgaW5jaXRvLmRlYnVnIGlzIHRydWVcbiAgICAgICAgQGVsLmFwcGVuZENoaWxkIGZyYWdcblxuICAgICAgICBAbGF6eWxvYWQgPSBsb3phZCAnLmluY2l0by0tbGF6eWxvYWQnLFxuICAgICAgICAgICAgcm9vdE1hcmdpbjogJzUwMHB4IDBweCdcbiAgICAgICAgQGxhenlsb2FkLm9ic2VydmUoKVxuICAgICAgICBcbiAgICAgICAgQFxuXG4gICAgcmVuZGVyOiAoZWwsIHZpZXcgPSB7fSkgLT5cbiAgICAgICAgbWF0Y2ggPSBudWxsXG4gICAgICAgIHZpZXdOYW1lID0gdmlldy52aWV3X25hbWVcblxuICAgICAgICBpZiAhdmlld05hbWUgb3Igdmlld05hbWUgaXMgJ1ZpZXcnXG4gICAgICAgICAgICBtYXRjaCA9IFZpZXdcbiAgICAgICAgZWxzZSBpZiB2aWV3TmFtZSBpcyAnRnJhZ1ZpZXcnXG4gICAgICAgICAgICBtYXRjaCA9IEZyYWdWaWV3XG4gICAgICAgIGVsc2UgaWYgdmlld05hbWUgaXMgJ0ltYWdlVmlldydcbiAgICAgICAgICAgIG1hdGNoID0gSW1hZ2VWaWV3XG4gICAgICAgIGVsc2UgaWYgdmlld05hbWUgaXMgJ1RleHRWaWV3J1xuICAgICAgICAgICAgbWF0Y2ggPSBUZXh0Vmlld1xuICAgICAgICBlbHNlIGlmIHZpZXdOYW1lIGlzICdWaWRlb0VtYmVkVmlldydcbiAgICAgICAgICAgIG1hdGNoID0gVmlkZW9FbWJlZFZpZXdcbiAgICAgICAgZWxzZSBpZiB2aWV3TmFtZSBpcyAnTGluZWFyTGF5b3V0J1xuICAgICAgICAgICAgbWF0Y2ggPSBMaW5lYXJMYXlvdXRcbiAgICAgICAgZWxzZSBpZiB2aWV3TmFtZSBpcyAnQWJzb2x1dGVMYXlvdXQnXG4gICAgICAgICAgICBtYXRjaCA9IEFic29sdXRlTGF5b3V0XG4gICAgICAgIGVsc2UgaWYgdmlld05hbWUgaXMgJ0ZsZXhMYXlvdXQnXG4gICAgICAgICAgICBtYXRjaCA9IEZsZXhMYXlvdXRcbiAgICAgICAgXG4gICAgICAgIGlmIG1hdGNoP1xuICAgICAgICAgICAgdmlld0VsID0gbmV3IG1hdGNoKHZpZXcpLnJlbmRlcigpLmVsXG5cbiAgICAgICAgICAgIGlmIEFycmF5LmlzQXJyYXkodmlldy5jaGlsZF92aWV3cylcbiAgICAgICAgICAgICAgICB2aWV3LmNoaWxkX3ZpZXdzLmZvckVhY2ggKGNoaWxkVmlldykgPT5cbiAgICAgICAgICAgICAgICAgICAgY2hpbGRFbCA9IEByZW5kZXIodmlld0VsLCBjaGlsZFZpZXcpXG5cbiAgICAgICAgICAgICAgICAgICAgdmlld0VsLmFwcGVuZENoaWxkIGNoaWxkRWwgaWYgY2hpbGRFbD9cblxuICAgICAgICAgICAgICAgICAgICByZXR1cm5cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgZWwuYXBwZW5kQ2hpbGQgdmlld0VsXG4gICAgICAgIFxuICAgICAgICAgICAgdmlld0VsXG4gICAgXG4gICAgYXBwbHlUaGVtZTogKHRoZW1lID0ge30pIC0+XG4gICAgICAgIGlmIHRoZW1lLmZvbnRfZmFtaWx5P1xuICAgICAgICAgICAgQGVsLnN0eWxlLmZvbnRGYW1pbHkgPSB0aGVtZS5mb250X2ZhbWlseS5qb2luKCcsICcpXG4gICAgICAgIFxuICAgICAgICBpZiB0aGVtZS5saW5lX3NwYWNpbmdfbXVsdGlwbGllcj9cbiAgICAgICAgICAgIEBlbC5zdHlsZS5saW5lSGVpZ2h0ID0gdGhlbWUubGluZV9zcGFjaW5nX211bHRpcGxpZXJcbiAgICAgICAgXG4gICAgICAgIHJldHVyblxuXG4gICAgbG9hZEZvbnRzOiAoZm9udEFzc2V0cyA9IHt9KSAtPlxuICAgICAgICBpZiAnRm9udEZhY2UnIG9mIHdpbmRvd1xuICAgICAgICAgICAgZm9yIGtleSwgdmFsdWUgb2YgZm9udEFzc2V0c1xuICAgICAgICAgICAgICAgIHVybHMgPSB2YWx1ZS5zcmMubWFwKChzcmMpIC0+IFwidXJsKCN7c3JjWzFdfSlcIikuam9pbiAnLCAnXG4gICAgICAgICAgICAgICAgZm9udCA9IG5ldyBGb250RmFjZSBrZXksIHVybHMsXG4gICAgICAgICAgICAgICAgICAgIHN0eWxlOiB2YWx1ZS5zdHlsZSA/ICdub3JtYWwnXG4gICAgICAgICAgICAgICAgICAgIHdlaWdodDogdmFsdWUud2VpZ2h0ID8gJ25vcm1hbCdcblxuICAgICAgICAgICAgICAgIGRvY3VtZW50LmZvbnRzLmFkZCBmb250XG5cbiAgICAgICAgICAgICAgICBmb250LmxvYWQoKVxuICAgICAgICBlbHNlXG4gICAgICAgICAgICBzdHlsZUVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCAnc3R5bGUnXG5cbiAgICAgICAgICAgIGZvciBrZXksIHZhbHVlIG9mIGZvbnRBc3NldHNcbiAgICAgICAgICAgICAgICB1cmxzID0gdmFsdWUuc3JjLm1hcCgoc3JjKSAtPiBcInVybCgnI3tzcmNbMV19JykgZm9ybWF0KCcje3NyY1swXX0nKVwiKS5qb2luICcsICdcbiAgICAgICAgICAgICAgICB0ZXh0ID0gXCJcIlwiXG4gICAgICAgICAgICAgICAgICAgIEBmb250LWZhY2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9udC1mYW1pbHk6ICcje2tleX0nO1xuICAgICAgICAgICAgICAgICAgICAgICAgc3JjOiAje3VybHN9O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgXCJcIlwiXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgc3R5bGVFbC5hcHBlbmRDaGlsZCBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSh0ZXh0KVxuXG4gICAgICAgICAgICBkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkIHN0eWxlRWxcbiAgICAgICAgXG4gICAgICAgIHJldHVyblxuXG5tb2R1bGUuZXhwb3J0cyA9IEluY2l0byIsInV0aWxzID1cbiAgICBlc2NhcGVIVE1MOiAodW5zYWZlID0gJycpIC0+XG4gICAgICAgIHVuc2FmZVxuICAgICAgICAgICAgLnJlcGxhY2UoLyYvZywgJyZhbXA7JylcbiAgICAgICAgICAgIC5yZXBsYWNlKC88L2csICcmbHQ7JylcbiAgICAgICAgICAgIC5yZXBsYWNlKC8+L2csICcmZ3Q7JylcbiAgICAgICAgICAgIC5yZXBsYWNlKC9cIi9nLCAnJnF1b3Q7JylcbiAgICAgICAgICAgIC5yZXBsYWNlIC8nL2csICcmIzAzOTsnXG5cbiAgICBmb3JtYXRVbml0OiAodW5pdCkgLT5cbiAgICAgICAgaWYgdHlwZW9mIHVuaXQgaXMgJ251bWJlcidcbiAgICAgICAgICAgIHJldHVybiBcIiN7dW5pdH1weFwiXG4gICAgICAgIGVsc2UgaWYgdHlwZW9mIHVuaXQgaXMgJ3N0cmluZydcbiAgICAgICAgICAgIHJldHVybiB1bml0LnJlcGxhY2UgJ2RwJywgJ3B4J1xuICAgICAgICBlbHNlXG4gICAgICAgICAgICByZXR1cm4gMFxuXG5tb2R1bGUuZXhwb3J0cyA9IHV0aWxzIiwiTWljcm9FdmVudCA9IHJlcXVpcmUgJ21pY3JvZXZlbnQnXG5cbmNsYXNzIFZlbnRcblxuTWljcm9FdmVudC5taXhpbiBWZW50XG5cbm1vZHVsZS5leHBvcnRzID0gbmV3IFZlbnQoKSIsIlZpZXcgPSByZXF1aXJlICcuL3ZpZXcnXG5cbm1vZHVsZS5leHBvcnRzID0gY2xhc3MgQWJzb2x1dGVMYXlvdXQgZXh0ZW5kcyBWaWV3XG4gICAgY2xhc3NOYW1lOiAnaW5jaXRvX19hYnNvbHV0ZS1sYXlvdXQtdmlldydcblxuICAgIHJlbmRlcjogLT5cbiAgICAgICAgQCIsIlZpZXcgPSByZXF1aXJlICcuL3ZpZXcnXG5cbm1vZHVsZS5leHBvcnRzID0gY2xhc3MgRmxleExheW91dCBleHRlbmRzIFZpZXdcbiAgICBjbGFzc05hbWU6ICdpbmNpdG9fX2ZsZXgtbGF5b3V0LXZpZXcnXG5cbiAgICByZW5kZXI6IC0+XG4gICAgICAgIGlmIEBhdHRycy5sYXlvdXRfZmxleF9hbGlnbl9pdGVtcz9cbiAgICAgICAgICAgIEBlbC5zdHlsZS5hbGlnbkl0ZW1zID0gQGF0dHJzLmxheW91dF9mbGV4X2FsaWduX2l0ZW1zXG5cbiAgICAgICAgaWYgQGF0dHJzLmxheW91dF9mbGV4X2FsaWduX2NvbnRlbnQ/XG4gICAgICAgICAgICBAZWwuc3R5bGUuYWxpZ25Db250ZW50ID0gQGF0dHJzLmxheW91dF9mbGV4X2FsaWduX2NvbnRlbnRcblxuICAgICAgICBpZiBAYXR0cnMubGF5b3V0X2ZsZXhfanVzdGlmeV9jb250ZW50P1xuICAgICAgICAgICAgQGVsLnN0eWxlLmp1c3RpZnlDb250ZW50ID0gQGF0dHJzLmxheW91dF9mbGV4X2p1c3RpZnlfY29udGVudFxuXG4gICAgICAgIGlmIEBhdHRycy5sYXlvdXRfZmxleF9kaXJlY3Rpb24/XG4gICAgICAgICAgICBAZWwuc3R5bGUuZmxleERpcmVjdGlvbiA9IEBhdHRycy5sYXlvdXRfZmxleF9kaXJlY3Rpb25cblxuICAgICAgICBAIiwibW9kdWxlLmV4cG9ydHMgPSBjbGFzcyBGcmFnVmlld1xuICAgIHJlbmRlcjogLT5cbiAgICAgICAgQGVsID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpXG5cbiAgICAgICAgQCIsIlZpZXcgPSByZXF1aXJlICcuL3ZpZXcnXG5cbm1vZHVsZS5leHBvcnRzID0gY2xhc3MgSW1hZ2UgZXh0ZW5kcyBWaWV3XG4gICAgdGFnTmFtZTogJ2ltZydcblxuICAgIGNsYXNzTmFtZTogJ2luY2l0b19faW1hZ2UtdmlldyBpbmNpdG8tLWxhenlsb2FkJ1xuICAgIFxuICAgIHJlbmRlcjogLT5cbiAgICAgICAgQGVsLnNldEF0dHJpYnV0ZSAnc3JjJywgJ2RhdGE6aW1hZ2UvZ2lmO2Jhc2U2NCxSMGxHT0RsaEFRQUJBSUFBQUFBQUFQLy8veUg1QkFFQUFBQUFMQUFBQUFBQkFBRUFBQUlCUkFBNydcbiAgICAgICAgXG4gICAgICAgIGlmIHR5cGVvZiBAYXR0cnMuc3JjIGlzICdzdHJpbmcnXG4gICAgICAgICAgICBAZWwuc2V0QXR0cmlidXRlICdkYXRhLXNyYycsIEBhdHRycy5zcmNcbiAgICAgICAgXG4gICAgICAgIGlmIHR5cGVvZiBAYXR0cnMubGFiZWwgaXMgJ3N0cmluZydcbiAgICAgICAgICAgIEBlbC5zZXRBdHRyaWJ1dGUgJ2FsdCcsIEBhdHRycy5sYWJlbFxuXG4gICAgICAgIEAiLCJWaWV3ID0gcmVxdWlyZSAnLi92aWV3J1xuXG5tb2R1bGUuZXhwb3J0cyA9IGNsYXNzIExpbmVhckxheW91dCBleHRlbmRzIFZpZXdcbiAgICBjbGFzc05hbWU6ICdpbmNpdG9fX2xpbmVhci1sYXlvdXQtdmlldydcblxuICAgIHJlbmRlcjogLT5cbiAgICAgICAgQCIsIlZpZXcgPSByZXF1aXJlICcuL3ZpZXcnXG51dGlscyA9IHJlcXVpcmUgJy4uL3V0aWxzJ1xuXG5tb2R1bGUuZXhwb3J0cyA9IGNsYXNzIFRleHRWaWV3IGV4dGVuZHMgVmlld1xuICAgIHRhZ05hbWU6ICdwJ1xuXG4gICAgY2xhc3NOYW1lOiAnaW5jaXRvX190ZXh0LXZpZXcnXG5cbiAgICByZW5kZXI6IC0+XG4gICAgICAgIHRleHRTdHlsZXMgPSAoQGF0dHJzLnRleHRfc3R5bGUgfHwgJycpLnNwbGl0ICd8J1xuICAgICAgICBwYXJzZWRUZXh0ID0gQHBhcnNlU3BhbnMgQGF0dHJzLnRleHQsIEBhdHRycy5zcGFuc1xuICAgICAgICB0ZXh0ID0gcGFyc2VkVGV4dC5tYXAgKGl0ZW0pIC0+XG4gICAgICAgICAgICBlc2NhcGVkVGV4dCA9IHV0aWxzLmVzY2FwZUhUTUwgaXRlbS50ZXh0XG5cbiAgICAgICAgICAgIGlmIGl0ZW0uc3Bhbj9cbiAgICAgICAgICAgICAgICB0YWdOYW1lID0gaWYgaXRlbS5zcGFuLnR5cGUgaXMgJ3N1cGVyc2NyaXB0JyB0aGVuICdzdXAnIGVsc2UgJ3NwYW4nXG5cbiAgICAgICAgICAgICAgICBcIjwje3RhZ05hbWV9PlwiICsgZXNjYXBlZFRleHQgKyBcIjwvI3t0YWdOYW1lfT5cIlxuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIGVzY2FwZWRUZXh0XG5cbiAgICAgICAgaWYgQGF0dHJzLnRleHRfcHJldmVudF93aWRvd1xuICAgICAgICAgICAgQGVsLmlubmVySFRNTCA9IHRleHQuam9pbignJykucmVwbGFjZSgvXFwmbmJzcDsoW15cXHNdKykkLywnICQxJykucmVwbGFjZSgvXFxzKFteXFxzXSspXFxzKiQvLCcmbmJzcDskMScpXG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIEBlbC5pbm5lckhUTUwgPSB0ZXh0LmpvaW4gJydcblxuICAgICAgICAjIEZvbnQgZmFtaWx5LlxuICAgICAgICBpZiBBcnJheS5pc0FycmF5KEBhdHRycy5mb250X2ZhbWlseSkgYW5kIEBhdHRycy5mb250X2ZhbWlseS5sZW5ndGggPiAwXG4gICAgICAgICAgICBAZWwuc3R5bGUuZm9udEZhbWlseSA9IEBhdHRycy5mb250X2ZhbWlseS5qb2luKCcsICcpXG5cbiAgICAgICAgIyBUZXh0IHNpemUuXG4gICAgICAgIGlmIEBhdHRycy50ZXh0X3NpemU/XG4gICAgICAgICAgICBAZWwuc3R5bGUuZm9udFNpemUgPSBcIiN7QGF0dHJzLnRleHRfc2l6ZX1weFwiXG4gICAgICAgIFxuICAgICAgICAjIExpbmUgaGVpZ2h0LlxuICAgICAgICBpZiBAYXR0cnMubGluZV9zcGFjaW5nX211bHRpcGxpZXI/XG4gICAgICAgICAgICBAZWwuc3R5bGUubGluZUhlaWdodCA9IEBhdHRycy5saW5lX3NwYWNpbmdfbXVsdGlwbGllclxuICAgICAgICBcbiAgICAgICAgIyBUZXh0IGNvbG9yLlxuICAgICAgICBpZiBAYXR0cnMudGV4dF9jb2xvcj9cbiAgICAgICAgICAgIEBlbC5zdHlsZS5jb2xvciA9IEBhdHRycy50ZXh0X2NvbG9yXG4gICAgICAgIFxuICAgICAgICAjIFRleHQgc3R5bGVzLlxuICAgICAgICBpZiAnYm9sZCcgaW4gdGV4dFN0eWxlc1xuICAgICAgICAgICAgQGVsLnN0eWxlLmZvbnRXZWlnaHQgPSAnYm9sZCdcbiAgICAgICAgaWYgJ2l0YWxpYycgaW4gdGV4dFN0eWxlc1xuICAgICAgICAgICAgQGVsLnN0eWxlLmZvbnRTdHlsZSA9ICdpdGFsaWMnXG4gICAgICAgIFxuICAgICAgICAjIFRleHQgYWxpZ25tZW50LlxuICAgICAgICBpZiBAYXR0cnMudGV4dF9hbGlnbm1lbnQgaXMgJ2xlZnQnXG4gICAgICAgICAgICBAZWwuc3R5bGUudGV4dEFsaWduID0gJ2xlZnQnXG4gICAgICAgIGVsc2UgaWYgQGF0dHJzLnRleHRfYWxpZ25tZW50IGlzICdjZW50ZXInXG4gICAgICAgICAgICBAZWwuc3R5bGUudGV4dEFsaWduID0gJ2NlbnRlcidcbiAgICAgICAgZWxzZSBpZiBAYXR0cnMudGV4dF9hbGlnbm1lbnQgaXMgJ3JpZ2h0J1xuICAgICAgICAgICAgQGVsLnN0eWxlLnRleHRBbGlnbiA9ICdyaWdodCdcbiAgICAgICAgXG4gICAgICAgICMgRm9udCBzdHJldGNoLlxuICAgICAgICBpZiBAYXR0cnMuZm9udF9zdHJldGNoIGluIFsnY29uZGVuc2VkJywgJ25vcm1hbCcsICdleHBhbmRlZCddXG4gICAgICAgICAgICBAZWwuc3R5bGUuZm9udFN0cmV0Y2ggPSBAYXR0cnMuZm9udF9zdHJldGNoXG4gICAgICAgIFxuICAgICAgICAjIFNpbmdsZSBsaW5lLlxuICAgICAgICBpZiBAYXR0cnMuc2luZ2xlX2xpbmUgaXMgdHJ1ZVxuICAgICAgICAgICAgQGVsLnNldEF0dHJpYnV0ZSAnZGF0YS1zaW5nbGUtbGluZScsIHRydWVcblxuICAgICAgICBAXG4gICAgXG4gICAgcGFyc2VTcGFuczogKHRleHQsIHNwYW5zID0gW10pIC0+XG4gICAgICAgIHJlc3VsdCA9IFtdXG5cbiAgICAgICAgaWYgc3BhbnMubGVuZ3RoIGlzIDBcbiAgICAgICAgICAgIHJlc3VsdC5wdXNoXG4gICAgICAgICAgICAgICAgdGV4dDogdGV4dFxuICAgICAgICBlbHNlIGlmIHNwYW5zWzBdLnN0YXJ0ID4gMFxuICAgICAgICAgICAgcmVzdWx0LnB1c2hcbiAgICAgICAgICAgICAgICB0ZXh0OiB0ZXh0LnNsaWNlKDAsIHNwYW5zWzBdLnN0YXJ0KVxuXG4gICAgICAgIHNwYW5zLmZvckVhY2ggKHNwYW4sIGkpIC0+XG4gICAgICAgICAgICBzdGFydEluZGV4ID0gc3Bhbi5zdGFydFxuICAgICAgICAgICAgZW5kSW5kZXggPSBzcGFuLmVuZFxuXG4gICAgICAgICAgICByZXN1bHQucHVzaFxuICAgICAgICAgICAgICAgIHRleHQ6IHRleHQuc2xpY2Uoc3RhcnRJbmRleCwgZW5kSW5kZXgpXG4gICAgICAgICAgICAgICAgc3Bhbjogc3BhblxuXG4gICAgICAgICAgICBpZiBpIGlzIHNwYW5zLmxlbmd0aCAtIDFcbiAgICAgICAgICAgICAgICBpZiBlbmRJbmRleCA8IHRleHQubGVuZ3RoXG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdC5wdXNoXG4gICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiB0ZXh0LnNsaWNlKGVuZEluZGV4LCB0ZXh0Lmxlbmd0aClcbiAgICAgICAgICAgIGVsc2UgaWYgZW5kSW5kZXggPCBzcGFuc1tpICsgMV0uc3RhcnRcbiAgICAgICAgICAgICAgICByZXN1bHQucHVzaFxuICAgICAgICAgICAgICAgICAgICB0ZXh0OiB0ZXh0LnNsaWNlKGVuZEluZGV4LCBzcGFuc1tpICsgMV0uc3RhcnQpXG5cbiAgICAgICAgICAgIHJldHVyblxuXG4gICAgICAgIHJlc3VsdCIsIlZpZXcgPSByZXF1aXJlICcuL3ZpZXcnXG5hbGxvd2VkSG9zdG5hbWVzID0gWyd3d3cueW91dHViZS5jb20nLCAnd3d3LnZpbWVvLmNvbSddXG5cbm1vZHVsZS5leHBvcnRzID0gY2xhc3MgRmxleExheW91dCBleHRlbmRzIFZpZXdcbiAgICBjbGFzc05hbWU6ICdpbmNpdG9fX3ZpZGVvLWVtYmVkLXZpZXcnXG5cbiAgICByZW5kZXI6IC0+XG4gICAgICAgIGxpbmtFbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQgJ2EnXG4gICAgICAgIGlmcmFtZUVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCAnaWZyYW1lJ1xuICAgICAgICB3aWR0aCA9IEBhdHRycy52aWRlb193aWR0aCBvciAxMDBcbiAgICAgICAgaGVpZ2h0ID0gQGF0dHJzLnZpZGVvX2hlaWdodCBvciAxMDBcbiAgICAgICAgcmF0aW8gPSAoaGVpZ2h0IC8gd2lkdGgpICogMTAwXG5cbiAgICAgICAgaWYgQGF0dHJzLnNyYz9cbiAgICAgICAgICAgIGxpbmtFbC5zZXRBdHRyaWJ1dGUgJ2hyZWYnLCBAYXR0cnMuc3JjXG5cbiAgICAgICAgICAgIGlmIGxpbmtFbC5ob3N0bmFtZSBpbiBhbGxvd2VkSG9zdG5hbWVzXG4gICAgICAgICAgICAgICAgaWZyYW1lRWwuc2V0QXR0cmlidXRlICdzcmMnLCBAYXR0cnMuc3JjXG4gICAgICAgICAgICAgICAgaWZyYW1lRWwuc2V0QXR0cmlidXRlICdhbGxvd2Z1bGxzY3JlZW4nLCAnJ1xuXG4gICAgICAgICAgICAgICAgQGVsLnN0eWxlLnBhZGRpbmdUb3AgPSByYXRpbyArICclJ1xuICAgICAgICAgICAgICAgIEBlbC5hcHBlbmRDaGlsZCBpZnJhbWVFbFxuXG4gICAgICAgIEAiLCJ1dGlscyA9IHJlcXVpcmUgJy4uL3V0aWxzJ1xudmVudCA9IHJlcXVpcmUgJy4uL3ZlbnQnXG5cbm1vZHVsZS5leHBvcnRzID0gY2xhc3MgVmlld1xuICAgIHRhZ05hbWU6ICdkaXYnXG5cbiAgICBjbGFzc05hbWU6IG51bGxcbiAgICBcbiAgICBjb25zdHJ1Y3RvcjogKEBhdHRycyA9IHt9KSAtPlxuICAgICAgICBAZWwgPSBAY3JlYXRlRWxlbWVudCgpXG5cbiAgICAgICAgQHNldEF0dHJpYnV0ZXMoKVxuICAgICAgICBAaW5pdGlhbGl6ZSgpXG4gICAgXG4gICAgaW5pdGlhbGl6ZTogLT5cbiAgICAgICAgcmV0dXJuXG4gICAgXG4gICAgcmVuZGVyOiAtPlxuICAgICAgICBAXG5cbiAgICBjcmVhdGVFbGVtZW50OiAtPlxuICAgICAgICBlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQgQHRhZ05hbWVcblxuICAgICAgICBlbC5jbGFzc05hbWUgPSAnaW5jaXRvX192aWV3J1xuICAgICAgICBlbC5jbGFzc05hbWUgKz0gJyAnICsgQGNsYXNzTmFtZSBpZiBAY2xhc3NOYW1lP1xuXG4gICAgICAgIGVsXG4gICAgXG4gICAgc2V0QXR0cmlidXRlczogLT5cbiAgICAgICAgIyBJZGVudGlmaWVyLlxuICAgICAgICBpZiB0eXBlb2YgQGF0dHJzLmlkIGlzICdzdHJpbmcnXG4gICAgICAgICAgICBAZWwuc2V0QXR0cmlidXRlICdkYXRhLWlkJywgQGF0dHJzLmlkXG4gICAgICAgIFxuICAgICAgICAjIFJvbGUuXG4gICAgICAgIGlmIHR5cGVvZiBAYXR0cnMucm9sZSBpcyAnc3RyaW5nJ1xuICAgICAgICAgICAgQGVsLnNldEF0dHJpYnV0ZSAncm9sZScsIEBhdHRycy5yb2xlXG4gICAgICAgIFxuICAgICAgICAjIEFjY2Vzc2liaWxpdHkgbGFiZWwuXG4gICAgICAgIGlmIHR5cGVvZiBAYXR0cnMuYWNjZXNzaWJpbGl0eV9sYWJlbCBpcyAnc3RyaW5nJ1xuICAgICAgICAgICAgQGVsLnNldEF0dHJpYnV0ZSAnYXJpYS1sYWJlbCcsIEBhdHRycy5hY2Nlc3NpYmlsaXR5X2xhYmVsXG4gICAgICAgICAgICBAZWwuc2V0QXR0cmlidXRlICd0aXRsZScsIEBhdHRycy5hY2Nlc3NpYmlsaXR5X2xhYmVsXG5cbiAgICAgICAgIyBHcmF2aXR5LlxuICAgICAgICBpZiB0eXBlb2YgQGF0dHJzLmdyYXZpdHkgaXMgJ3N0cmluZydcbiAgICAgICAgICAgIEBlbC5zZXRBdHRyaWJ1dGUgJ2RhdGEtZ3Jhdml0eScsIEBhdHRycy5ncmF2aXR5XG4gICAgICAgIFxuICAgICAgICAjIExpbmsgb3IgY2FsbGJhY2suXG4gICAgICAgIGlmIHR5cGVvZiBAYXR0cnMubGluayBpcyAnc3RyaW5nJ1xuICAgICAgICAgICAgQGVsLnNldEF0dHJpYnV0ZSAnZGF0YS1saW5rJywgQGF0dHJzLmxpbmtcbiAgICAgICAgICAgIEBlbC5vbmNsaWNrID0gKGUpID0+XG4gICAgICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKVxuXG4gICAgICAgICAgICAgICAgd2luZG93Lm9wZW4gQGF0dHJzLmxpbmssICdfYmxhbmsnXG5cbiAgICAgICAgICAgICAgICByZXR1cm5cbiAgICAgICAgZWxzZSBpZiB0eXBlb2YgQGF0dHJzLm9uX2NsaWNrIGlzICdzdHJpbmcnXG4gICAgICAgICAgICBAZWwuc2V0QXR0cmlidXRlICdkYXRhLWNhbGxiYWNrJywgQGF0dHJzLm9uX2NsaWNrXG4gICAgICAgICAgICBAZWwub25jbGljayA9IChlKSA9PlxuICAgICAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKClcblxuICAgICAgICAgICAgICAgIHZlbnQudHJpZ2dlciBAYXR0cnMub25fY2xpY2ssIEBhdHRyc1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuXG5cbiAgICAgICAgIyBXaWR0aC5cbiAgICAgICAgaWYgQGF0dHJzLmxheW91dF93aWR0aCBpcyAnbWF0Y2hfcGFyZW50J1xuICAgICAgICAgICAgQGVsLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snXG4gICAgICAgIGVsc2UgaWYgQGF0dHJzLmxheW91dF93aWR0aCBpcyAnd3JhcF9jb250ZW50J1xuICAgICAgICAgICAgQGVsLnN0eWxlLmRpc3BsYXkgPSAnaW5saW5lLWJsb2NrJ1xuICAgICAgICBlbHNlIGlmIEBhdHRycy5sYXlvdXRfd2lkdGg/XG4gICAgICAgICAgICBAZWwuc3R5bGUud2lkdGggPSB1dGlscy5mb3JtYXRVbml0IEBhdHRycy5sYXlvdXRfd2lkdGhcblxuICAgICAgICAjIEhlaWdodC5cbiAgICAgICAgaWYgQGF0dHJzLmxheW91dF9oZWlnaHQgaXMgJ21hdGNoX3BhcmVudCdcbiAgICAgICAgICAgIEBlbC5zdHlsZS5oZWlnaHQgPSAnMTAwJSdcbiAgICAgICAgZWxzZSBpZiBAYXR0cnMubGF5b3V0X2hlaWdodCBpcyAnd3JhcF9jb250ZW50J1xuICAgICAgICAgICAgQGVsLnN0eWxlLmhlaWdodCA9ICdhdXRvJ1xuICAgICAgICBlbHNlIGlmIEBhdHRycy5sYXlvdXRfaGVpZ2h0P1xuICAgICAgICAgICAgQGVsLnN0eWxlLmhlaWdodCA9IHV0aWxzLmZvcm1hdFVuaXQgQGF0dHJzLmxheW91dF9oZWlnaHRcblxuICAgICAgICAjIE1pbiB3aWR0aC5cbiAgICAgICAgaWYgQGF0dHJzLm1pbl93aWR0aD9cbiAgICAgICAgICAgIEBlbC5zdHlsZS5taW5XaWR0aCA9IHV0aWxzLmZvcm1hdFVuaXQgQGF0dHJzLm1pbl93aWR0aFxuICAgICAgICBcbiAgICAgICAgIyBNYXggd2lkdGguXG4gICAgICAgIGlmIEBhdHRycy5tYXhfd2lkdGg/XG4gICAgICAgICAgICBAZWwuc3R5bGUubWF4V2lkdGggPSB1dGlscy5mb3JtYXRVbml0IEBhdHRycy5tYXhfd2lkdGhcblxuICAgICAgICAjIE1pbiBoZWlnaHQuXG4gICAgICAgIGlmIEBhdHRycy5taW5faGVpZ2h0P1xuICAgICAgICAgICAgQGVsLnN0eWxlLm1pbkhlaWdodCA9IHV0aWxzLmZvcm1hdFVuaXQgQGF0dHJzLm1pbl9oZWlnaHRcblxuICAgICAgICAjIE1heCBoZWlnaHQuXG4gICAgICAgIGlmIEBhdHRycy5tYXhfaGVpZ2h0P1xuICAgICAgICAgICAgQGVsLnN0eWxlLm1heEhlaWdodCA9IHV0aWxzLmZvcm1hdFVuaXQgQGF0dHJzLm1heF9oZWlnaHRcbiAgICAgICAgXG4gICAgICAgICMgUG9zaXRpb24gaW4gcmVsYXRpb24gdG8gcGFyZW50LlxuICAgICAgICBpZiBAYXR0cnMubGF5b3V0X3RvcD9cbiAgICAgICAgICAgIEBlbC5zdHlsZS50b3AgPSB1dGlscy5mb3JtYXRVbml0IEBhdHRycy5sYXlvdXRfdG9wXG4gICAgICAgIGlmIEBhdHRycy5sYXlvdXRfbGVmdD9cbiAgICAgICAgICAgIEBlbC5zdHlsZS5sZWZ0ID0gdXRpbHMuZm9ybWF0VW5pdCBAYXR0cnMubGF5b3V0X2xlZnRcbiAgICAgICAgaWYgQGF0dHJzLmxheW91dF9yaWdodD9cbiAgICAgICAgICAgIEBlbC5zdHlsZS5yaWdodCA9IHV0aWxzLmZvcm1hdFVuaXQgQGF0dHJzLmxheW91dF9yaWdodFxuICAgICAgICBpZiBAYXR0cnMubGF5b3V0X2JvdHRvbT9cbiAgICAgICAgICAgIEBlbC5zdHlsZS5ib3R0b20gPSB1dGlscy5mb3JtYXRVbml0IEBhdHRycy5sYXlvdXRfYm90dG9tXG4gICAgICAgIFxuICAgICAgICAjIEJhY2tncm91bmQuXG4gICAgICAgIGlmIEBhdHRycy5iYWNrZ3JvdW5kX2NvbG9yP1xuICAgICAgICAgICAgQGVsLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IEBhdHRycy5iYWNrZ3JvdW5kX2NvbG9yXG4gICAgICAgIGlmIEBhdHRycy5iYWNrZ3JvdW5kX2ltYWdlP1xuICAgICAgICAgICAgQGVsLnNldEF0dHJpYnV0ZSAnZGF0YS1iYWNrZ3JvdW5kLWltYWdlJywgQGF0dHJzLmJhY2tncm91bmRfaW1hZ2VcbiAgICAgICAgICAgIEBlbC5jbGFzc05hbWUgKz0gJyBpbmNpdG8tLWxhenlsb2FkJ1xuICAgICAgICBpZiBAYXR0cnMuYmFja2dyb3VuZF90aWxlX21vZGUgaW4gWydyZXBlYXRfeCcsICdyZXBlYXRfeScsICdyZXBlYXQnXVxuICAgICAgICAgICAgQGVsLnN0eWxlLmJhY2tncm91bmRSZXBlYXQgPSBAYXR0cnMuYmFja2dyb3VuZF90aWxlX21vZGUucmVwbGFjZSAnXycsICctJ1xuICAgICAgICBpZiBAYXR0cnMuYmFja2dyb3VuZF9pbWFnZV9wb3NpdGlvbj9cbiAgICAgICAgICAgIEBlbC5zdHlsZS5iYWNrZ3JvdW5kUG9zaXRpb24gPSBAYXR0cnMuYmFja2dyb3VuZF9pbWFnZV9wb3NpdGlvbi5yZXBsYWNlICdfJywgJyAnXG4gICAgICAgIGlmIEBhdHRycy5iYWNrZ3JvdW5kX2ltYWdlX3NjYWxlX3R5cGUgaXMgJ2NlbnRlcl9jcm9wJ1xuICAgICAgICAgICAgQGVsLnN0eWxlLmJhY2tncm91bmRTaXplID0gJ2NvdmVyJ1xuICAgICAgICBlbHNlIGlmIEBhdHRycy5iYWNrZ3JvdW5kX2ltYWdlX3NjYWxlX3R5cGUgaXMgJ2NlbnRlcl9pbnNpZGUnXG4gICAgICAgICAgICBAZWwuc3R5bGUuYmFja2dyb3VuZFNpemUgPSAnY29udGFpbidcbiAgICAgICAgXG4gICAgICAgICMgRHJvcCBzaGFkb3cuXG4gICAgICAgIGlmIEBhdHRycy5kcm9wX3NoYWRvdz9cbiAgICAgICAgICAgIGRyb3BTaGFkb3dMZWZ0ID0gQGF0dHJzLmRyb3Bfc2hhZG93LmxlZnRcbiAgICAgICAgICAgIGRyb3BTaGFkb3dUb3AgPSBAYXR0cnMuZHJvcF9zaGFkb3cudG9wXG4gICAgICAgICAgICBkcm9wU2hhZG93Qmx1clJhZGl1cyA9IEBhdHRycy5kcm9wX3NoYWRvdy5ibHVyX3JhZGl1c1xuICAgICAgICAgICAgZHJvcFNoYWRvd0NvbG9yID0gQGF0dHJzLmRyb3Bfc2hhZG93LmNvbG9yIG9yICd0cmFuc3BhcmVudCdcbiAgICAgICAgICAgIGRyb3BTaGFkb3dWYWx1ZXMgPSBbXG4gICAgICAgICAgICAgICAgdXRpbHMuZm9ybWF0VW5pdChkcm9wU2hhZG93TGVmdCksXG4gICAgICAgICAgICAgICAgdXRpbHMuZm9ybWF0VW5pdChkcm9wU2hhZG93VG9wKSxcbiAgICAgICAgICAgICAgICB1dGlscy5mb3JtYXRVbml0KGRyb3BTaGFkb3dCbHVyUmFkaXVzKSxcbiAgICAgICAgICAgICAgICBkcm9wU2hhZG93Q29sb3JcbiAgICAgICAgICAgIF0uam9pbignICcpXG5cbiAgICAgICAgICAgIEBlbC5zdHlsZS5maWx0ZXIgPSBcImRyb3Atc2hhZG93KCN7ZHJvcFNoYWRvd1ZhbHVlc30pXCJcblxuICAgICAgICAjIE1hcmdpbi5cbiAgICAgICAgaWYgQGF0dHJzLmxheW91dF9tYXJnaW4/XG4gICAgICAgICAgICBAZWwuc3R5bGUubWFyZ2luID0gdXRpbHMuZm9ybWF0VW5pdCBAYXR0cnMubGF5b3V0X21hcmdpblxuICAgICAgICBlbHNlXG4gICAgICAgICAgICBpZiBAYXR0cnMubGF5b3V0X21hcmdpbl90b3A/XG4gICAgICAgICAgICAgICAgQGVsLnN0eWxlLm1hcmdpblRvcCA9IHV0aWxzLmZvcm1hdFVuaXQgQGF0dHJzLmxheW91dF9tYXJnaW5fdG9wXG4gICAgICAgICAgICBpZiBAYXR0cnMubGF5b3V0X21hcmdpbl9sZWZ0P1xuICAgICAgICAgICAgICAgIEBlbC5zdHlsZS5tYXJnaW5MZWZ0ID0gdXRpbHMuZm9ybWF0VW5pdCBAYXR0cnMubGF5b3V0X21hcmdpbl9sZWZ0XG4gICAgICAgICAgICBpZiBAYXR0cnMubGF5b3V0X21hcmdpbl9yaWdodD9cbiAgICAgICAgICAgICAgICBAZWwuc3R5bGUubWFyZ2luUmlnaHQgPSB1dGlscy5mb3JtYXRVbml0IEBhdHRycy5sYXlvdXRfbWFyZ2luX3JpZ2h0XG4gICAgICAgICAgICBpZiBAYXR0cnMubGF5b3V0X21hcmdpbl9ib3R0b20/XG4gICAgICAgICAgICAgICAgQGVsLnN0eWxlLm1hcmdpbkJvdHRvbSA9IHV0aWxzLmZvcm1hdFVuaXQgQGF0dHJzLmxheW91dF9tYXJnaW5fYm90dG9tXG5cbiAgICAgICAgIyBQYWRkaW5nLlxuICAgICAgICBpZiBAYXR0cnMucGFkZGluZz9cbiAgICAgICAgICAgIEBlbC5zdHlsZS5wYWRkaW5nID0gdXRpbHMuZm9ybWF0VW5pdCBAYXR0cnMucGFkZGluZ1xuICAgICAgICBlbHNlXG4gICAgICAgICAgICBpZiBAYXR0cnMucGFkZGluZ190b3A/XG4gICAgICAgICAgICAgICAgQGVsLnN0eWxlLnBhZGRpbmdUb3AgPSB1dGlscy5mb3JtYXRVbml0IEBhdHRycy5wYWRkaW5nX3RvcFxuICAgICAgICAgICAgaWYgQGF0dHJzLnBhZGRpbmdfbGVmdD9cbiAgICAgICAgICAgICAgICBAZWwuc3R5bGUucGFkZGluZ0xlZnQgPSB1dGlscy5mb3JtYXRVbml0IEBhdHRycy5wYWRkaW5nX2xlZnRcbiAgICAgICAgICAgIGlmIEBhdHRycy5wYWRkaW5nX3JpZ2h0P1xuICAgICAgICAgICAgICAgIEBlbC5zdHlsZS5wYWRkaW5nUmlnaHQgPSB1dGlscy5mb3JtYXRVbml0IEBhdHRycy5wYWRkaW5nX3JpZ2h0XG4gICAgICAgICAgICBpZiBAYXR0cnMucGFkZGluZ19ib3R0b20/XG4gICAgICAgICAgICAgICAgQGVsLnN0eWxlLnBhZGRpbmdCb3R0b20gPSB1dGlscy5mb3JtYXRVbml0IEBhdHRycy5wYWRkaW5nX2JvdHRvbVxuICAgICAgICBcbiAgICAgICAgIyBDb3JuZXIgcmFkaXVzLlxuICAgICAgICBpZiBAYXR0cnMuY29ybmVyX3JhZGl1cz9cbiAgICAgICAgICAgIEBlbC5zdHlsZS5ib3JkZXJSYWRpdXMgPSB1dGlscy5mb3JtYXRVbml0IEBhdHRycy5jb3JuZXJfcmFkaXVzXG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIGlmIEBhdHRycy5jb3JuZXJfdG9wX2xlZnRfcmFkaXVzP1xuICAgICAgICAgICAgICAgIEBlbC5zdHlsZS5ib3JkZXJUb3BMZWZ0UmFkaXVzID0gdXRpbHMuZm9ybWF0VW5pdCBAYXR0cnMuY29ybmVyX3RvcF9sZWZ0X3JhZGl1c1xuICAgICAgICAgICAgaWYgQGF0dHJzLmNvcm5lcl90b3BfcmlnaHRfcmFkaXVzP1xuICAgICAgICAgICAgICAgIEBlbC5zdHlsZS5ib3JkZXJUb3BSaWdodFJhZGl1cyA9IHV0aWxzLmZvcm1hdFVuaXQgQGF0dHJzLmNvcm5lcl90b3BfcmlnaHRfcmFkaXVzXG4gICAgICAgICAgICBpZiBAYXR0cnMuY29ybmVyX2JvdHRvbV9sZWZ0X3JhZGl1cz9cbiAgICAgICAgICAgICAgICBAZWwuc3R5bGUuYm9yZGVyQm90dG9tTGVmdFJhZGl1cyA9IHV0aWxzLmZvcm1hdFVuaXQgQGF0dHJzLmNvcm5lcl9ib3R0b21fbGVmdF9yYWRpdXNcbiAgICAgICAgICAgIGlmIEBhdHRycy5jb3JuZXJfYm90dG9tX3JpZ2h0X3JhZGl1cz9cbiAgICAgICAgICAgICAgICBAZWwuc3R5bGUuYm9yZGVyQm90dG9tUmlnaHRSYWRpdXMgPSB1dGlscy5mb3JtYXRVbml0IEBhdHRycy5jb3JuZXJfYm90dG9tX3JpZ2h0X3JhZGl1c1xuICAgICAgICBcbiAgICAgICAgIyBDbGlwIGNoaWxkcmVuLlxuICAgICAgICBpZiBAYXR0cnMuY2xpcF9jaGlsZHJlbiBpcyBmYWxzZVxuICAgICAgICAgICAgQGVsLnN0eWxlLm92ZXJmbG93ID0gJ3Zpc2libGUnXG4gICAgICAgIFxuICAgICAgICAjIFN0cm9rZS5cbiAgICAgICAgc3Ryb2tlU3R5bGVzID0gWydzb2xpZCcsICdkb3R0ZWQnLCAnZGFzaGVkJ11cblxuICAgICAgICBpZiBAYXR0cnMuc3Ryb2tlX3dpZHRoP1xuICAgICAgICAgICAgQGVsLnN0eWxlLmJvcmRlcldpZHRoID0gdXRpbHMuZm9ybWF0VW5pdCBAYXR0cnMuc3Ryb2tlX3dpZHRoXG4gICAgICAgIGlmIEBhdHRycy5zdHJva2VfY29sb3I/XG4gICAgICAgICAgICBAZWwuc3R5bGUuYm9yZGVyQ29sb3IgPSBAYXR0cnMuc3Ryb2tlX2NvbG9yXG4gICAgICAgIGlmIEBhdHRycy5zdHJva2Vfc3R5bGUgaW4gc3Ryb2tlU3R5bGVzXG4gICAgICAgICAgICBAZWwuc3R5bGUuYm9yZGVyU3R5bGUgPSBAYXR0cnMuc3Ryb2tlX3N0eWxlXG5cbiAgICAgICAgaWYgQGF0dHJzLnN0cm9rZV90b3Bfd2lkdGg/XG4gICAgICAgICAgICBAZWwuc3R5bGUuYm9yZGVyVG9wV2lkdGggPSB1dGlscy5mb3JtYXRVbml0IEBhdHRycy5zdHJva2VfdG9wX3dpZHRoXG4gICAgICAgIGlmIEBhdHRycy5zdHJva2VfdG9wX2NvbG9yP1xuICAgICAgICAgICAgQGVsLnN0eWxlLmJvcmRlclRvcENvbG9yID0gQGF0dHJzLnN0cm9rZV90b3BfY29sb3JcbiAgICAgICAgaWYgQGF0dHJzLnN0cm9rZV90b3Bfc3R5bGUgaW4gc3Ryb2tlU3R5bGVzXG4gICAgICAgICAgICBAZWwuc3R5bGUuYm9yZGVyVG9wU3R5bGUgPSBAYXR0cnMuc3Ryb2tlX3RvcF9zdHlsZVxuXG4gICAgICAgIGlmIEBhdHRycy5zdHJva2VfbGVmdF93aWR0aD9cbiAgICAgICAgICAgIEBlbC5zdHlsZS5ib3JkZXJMZWZ0V2lkdGggPSB1dGlscy5mb3JtYXRVbml0IEBhdHRycy5zdHJva2VfbGVmdF93aWR0aFxuICAgICAgICBpZiBAYXR0cnMuc3Ryb2tlX2xlZnRfY29sb3I/XG4gICAgICAgICAgICBAZWwuc3R5bGUuYm9yZGVyTGVmdENvbG9yID0gQGF0dHJzLnN0cm9rZV9sZWZ0X2NvbG9yXG4gICAgICAgIGlmIEBhdHRycy5zdHJva2VfbGVmdF9zdHlsZSBpbiBzdHJva2VTdHlsZXNcbiAgICAgICAgICAgIEBlbC5zdHlsZS5ib3JkZXJMZWZ0U3R5bGUgPSBAYXR0cnMuc3Ryb2tlX2xlZnRfc3R5bGVcblxuICAgICAgICBpZiBAYXR0cnMuc3Ryb2tlX3JpZ2h0X3dpZHRoP1xuICAgICAgICAgICAgQGVsLnN0eWxlLmJvcmRlclJpZ2h0V2lkdGggPSB1dGlscy5mb3JtYXRVbml0IEBhdHRycy5zdHJva2VfcmlnaHRfd2lkdGhcbiAgICAgICAgaWYgQGF0dHJzLnN0cm9rZV9yaWdodF9jb2xvcj9cbiAgICAgICAgICAgIEBlbC5zdHlsZS5ib3JkZXJSaWdodENvbG9yID0gQGF0dHJzLnN0cm9rZV9yaWdodF9jb2xvclxuICAgICAgICBpZiBAYXR0cnMuc3Ryb2tlX3JpZ2h0X3N0eWxlIGluIHN0cm9rZVN0eWxlc1xuICAgICAgICAgICAgQGVsLnN0eWxlLmJvcmRlclJpZ2h0U3R5bGUgPSBAYXR0cnMuc3Ryb2tlX3JpZ2h0X3N0eWxlXG5cbiAgICAgICAgaWYgQGF0dHJzLnN0cm9rZV9ib3R0b21fd2lkdGg/XG4gICAgICAgICAgICBAZWwuc3R5bGUuYm9yZGVyQm90dG9tV2lkdGggPSB1dGlscy5mb3JtYXRVbml0IEBhdHRycy5zdHJva2VfYm90dG9tX3dpZHRoXG4gICAgICAgIGlmIEBhdHRycy5zdHJva2VfYm90dG9tX2NvbG9yP1xuICAgICAgICAgICAgQGVsLnN0eWxlLmJvcmRlckJvdHRvbUNvbG9yID0gQGF0dHJzLnN0cm9rZV9ib3R0b21fY29sb3JcbiAgICAgICAgaWYgQGF0dHJzLnN0cm9rZV9ib3R0b21fc3R5bGUgaW4gc3Ryb2tlU3R5bGVzXG4gICAgICAgICAgICBAZWwuc3R5bGUuYm9yZGVyQm90dG9tU3R5bGUgPSBAYXR0cnMuc3Ryb2tlX2JvdHRvbV9zdHlsZVxuXG4gICAgICAgICMgRmxleCBsYXlvdXQuXG4gICAgICAgIGlmIHR5cGVvZiBAYXR0cnMubGF5b3V0X2ZsZXhfc2hyaW5rIGlzICdudW1iZXInXG4gICAgICAgICAgICBAZWwuc3R5bGUuZmxleFNocmluayA9IEBhdHRycy5sYXlvdXRfZmxleF9zaHJpbmtcbiAgICAgICAgaWYgdHlwZW9mIEBhdHRycy5sYXlvdXRfZmxleF9ncm93IGlzICdudW1iZXInXG4gICAgICAgICAgICBAZWwuc3R5bGUuZmxleEdyb3cgPSBAYXR0cnMubGF5b3V0X2ZsZXhfZ3Jvd1xuICAgICAgICBpZiBAYXR0cnMubGF5b3V0X2ZsZXhfYmFzaXM/XG4gICAgICAgICAgICBAZWwuc3R5bGUuZmxleEJhc2lzID0gQGF0dHJzLmxheW91dF9mbGV4X2Jhc2lzXG4gICAgICAgIFxuICAgICAgICAjIFRyYW5zZm9ybXMuXG4gICAgICAgIHRyYW5zZm9ybXMgPSBAZ2V0VHJhbnNmb3JtcygpXG4gICAgICAgIGlmIHRyYW5zZm9ybXMubGVuZ3RoID4gMFxuICAgICAgICAgICAgQGVsLnN0eWxlLnRyYW5zZm9ybSA9IHRyYW5zZm9ybXMuam9pbiAnICdcbiAgICAgICAgXG4gICAgICAgICMgVHJhbnNmb3JtIG9yaWdpbi5cbiAgICAgICAgaWYgQXJyYXkuaXNBcnJheShAYXR0cnMudHJhbnNmb3JtX29yaWdpbikgYW5kIEBhdHRycy50cmFuc2Zvcm1fb3JpZ2luLmxlbmd0aCBpcyAyXG4gICAgICAgICAgICBAZWwuc3R5bGUudHJhbnNmb3JtT3JpZ2luID0gW1xuICAgICAgICAgICAgICAgIHV0aWxzLmZvcm1hdFVuaXQoQGF0dHJzLnRyYW5zZm9ybV9vcmlnaW5bMF0pLFxuICAgICAgICAgICAgICAgIHV0aWxzLmZvcm1hdFVuaXQoQGF0dHJzLnRyYW5zZm9ybV9vcmlnaW5bMV0pXG4gICAgICAgICAgICBdLmpvaW4gJyAnXG5cbiAgICAgICAgcmV0dXJuXG4gICAgXG4gICAgZ2V0VHJhbnNmb3JtczogLT5cbiAgICAgICAgdHJhbnNmb3JtcyA9IFtdXG4gICAgICAgIHRyYW5zbGF0ZVggPSB1dGlscy5mb3JtYXRVbml0IEBhdHRycy50cmFuc2Zvcm1fdHJhbnNsYXRlX3hcbiAgICAgICAgdHJhbnNsYXRlWSA9IHV0aWxzLmZvcm1hdFVuaXQgQGF0dHJzLnRyYW5zZm9ybV90cmFuc2xhdGVfeVxuXG4gICAgICAgIGlmIHRyYW5zbGF0ZVggaXNudCAwIGFuZCB0cmFuc2xhdGVZIGlzbnQgMFxuICAgICAgICAgICAgdHJhbnNmb3Jtcy5wdXNoIFwidHJhbnNsYXRlM2QoI3t0cmFuc2xhdGVYfSwgI3t0cmFuc2xhdGVZfSwgMClcIlxuXG4gICAgICAgIGlmIHR5cGVvZiBAYXR0cnMudHJhbnNmb3JtX3JvdGF0ZSBpcyAnbnVtYmVyJyBhbmQgQGF0dHJzLnRyYW5zZm9ybV9zY2FsZSBpc250IDFcbiAgICAgICAgICAgIHRyYW5zZm9ybXMucHVzaCBcInJvdGF0ZTNkKDAsIDAsIDEsICN7QGF0dHJzLnRyYW5zZm9ybV9yb3RhdGV9ZGVnKVwiXG5cbiAgICAgICAgaWYgdHlwZW9mIEBhdHRycy50cmFuc2Zvcm1fc2NhbGUgaXMgJ251bWJlcicgYW5kIEBhdHRycy50cmFuc2Zvcm1fc2NhbGUgaXNudCAxXG4gICAgICAgICAgICB0cmFuc2Zvcm1zLnB1c2ggXCJzY2FsZTNkKCN7QGF0dHJzLnRyYW5zZm9ybV9zY2FsZX0sICN7QGF0dHJzLnRyYW5zZm9ybV9zY2FsZX0sIDEpXCJcbiAgICAgICAgXG4gICAgICAgIHRyYW5zZm9ybXMiLCIvKipcbiAqIENvcHlyaWdodCAyMDE2IEdvb2dsZSBJbmMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIFczQyBTT0ZUV0FSRSBBTkQgRE9DVU1FTlQgTk9USUNFIEFORCBMSUNFTlNFLlxuICpcbiAqICBodHRwczovL3d3dy53My5vcmcvQ29uc29ydGl1bS9MZWdhbC8yMDE1L2NvcHlyaWdodC1zb2Z0d2FyZS1hbmQtZG9jdW1lbnRcbiAqXG4gKi9cblxuKGZ1bmN0aW9uKHdpbmRvdywgZG9jdW1lbnQpIHtcbid1c2Ugc3RyaWN0JztcblxuXG4vLyBFeGl0cyBlYXJseSBpZiBhbGwgSW50ZXJzZWN0aW9uT2JzZXJ2ZXIgYW5kIEludGVyc2VjdGlvbk9ic2VydmVyRW50cnlcbi8vIGZlYXR1cmVzIGFyZSBuYXRpdmVseSBzdXBwb3J0ZWQuXG5pZiAoJ0ludGVyc2VjdGlvbk9ic2VydmVyJyBpbiB3aW5kb3cgJiZcbiAgICAnSW50ZXJzZWN0aW9uT2JzZXJ2ZXJFbnRyeScgaW4gd2luZG93ICYmXG4gICAgJ2ludGVyc2VjdGlvblJhdGlvJyBpbiB3aW5kb3cuSW50ZXJzZWN0aW9uT2JzZXJ2ZXJFbnRyeS5wcm90b3R5cGUpIHtcblxuICAvLyBNaW5pbWFsIHBvbHlmaWxsIGZvciBFZGdlIDE1J3MgbGFjayBvZiBgaXNJbnRlcnNlY3RpbmdgXG4gIC8vIFNlZTogaHR0cHM6Ly9naXRodWIuY29tL3czYy9JbnRlcnNlY3Rpb25PYnNlcnZlci9pc3N1ZXMvMjExXG4gIGlmICghKCdpc0ludGVyc2VjdGluZycgaW4gd2luZG93LkludGVyc2VjdGlvbk9ic2VydmVyRW50cnkucHJvdG90eXBlKSkge1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh3aW5kb3cuSW50ZXJzZWN0aW9uT2JzZXJ2ZXJFbnRyeS5wcm90b3R5cGUsXG4gICAgICAnaXNJbnRlcnNlY3RpbmcnLCB7XG4gICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaW50ZXJzZWN0aW9uUmF0aW8gPiAwO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG4gIHJldHVybjtcbn1cblxuXG4vKipcbiAqIEFuIEludGVyc2VjdGlvbk9ic2VydmVyIHJlZ2lzdHJ5LiBUaGlzIHJlZ2lzdHJ5IGV4aXN0cyB0byBob2xkIGEgc3Ryb25nXG4gKiByZWZlcmVuY2UgdG8gSW50ZXJzZWN0aW9uT2JzZXJ2ZXIgaW5zdGFuY2VzIGN1cnJlbnRseSBvYnNlcnZlcmluZyBhIHRhcmdldFxuICogZWxlbWVudC4gV2l0aG91dCB0aGlzIHJlZ2lzdHJ5LCBpbnN0YW5jZXMgd2l0aG91dCBhbm90aGVyIHJlZmVyZW5jZSBtYXkgYmVcbiAqIGdhcmJhZ2UgY29sbGVjdGVkLlxuICovXG52YXIgcmVnaXN0cnkgPSBbXTtcblxuXG4vKipcbiAqIENyZWF0ZXMgdGhlIGdsb2JhbCBJbnRlcnNlY3Rpb25PYnNlcnZlckVudHJ5IGNvbnN0cnVjdG9yLlxuICogaHR0cHM6Ly93M2MuZ2l0aHViLmlvL0ludGVyc2VjdGlvbk9ic2VydmVyLyNpbnRlcnNlY3Rpb24tb2JzZXJ2ZXItZW50cnlcbiAqIEBwYXJhbSB7T2JqZWN0fSBlbnRyeSBBIGRpY3Rpb25hcnkgb2YgaW5zdGFuY2UgcHJvcGVydGllcy5cbiAqIEBjb25zdHJ1Y3RvclxuICovXG5mdW5jdGlvbiBJbnRlcnNlY3Rpb25PYnNlcnZlckVudHJ5KGVudHJ5KSB7XG4gIHRoaXMudGltZSA9IGVudHJ5LnRpbWU7XG4gIHRoaXMudGFyZ2V0ID0gZW50cnkudGFyZ2V0O1xuICB0aGlzLnJvb3RCb3VuZHMgPSBlbnRyeS5yb290Qm91bmRzO1xuICB0aGlzLmJvdW5kaW5nQ2xpZW50UmVjdCA9IGVudHJ5LmJvdW5kaW5nQ2xpZW50UmVjdDtcbiAgdGhpcy5pbnRlcnNlY3Rpb25SZWN0ID0gZW50cnkuaW50ZXJzZWN0aW9uUmVjdCB8fCBnZXRFbXB0eVJlY3QoKTtcbiAgdGhpcy5pc0ludGVyc2VjdGluZyA9ICEhZW50cnkuaW50ZXJzZWN0aW9uUmVjdDtcblxuICAvLyBDYWxjdWxhdGVzIHRoZSBpbnRlcnNlY3Rpb24gcmF0aW8uXG4gIHZhciB0YXJnZXRSZWN0ID0gdGhpcy5ib3VuZGluZ0NsaWVudFJlY3Q7XG4gIHZhciB0YXJnZXRBcmVhID0gdGFyZ2V0UmVjdC53aWR0aCAqIHRhcmdldFJlY3QuaGVpZ2h0O1xuICB2YXIgaW50ZXJzZWN0aW9uUmVjdCA9IHRoaXMuaW50ZXJzZWN0aW9uUmVjdDtcbiAgdmFyIGludGVyc2VjdGlvbkFyZWEgPSBpbnRlcnNlY3Rpb25SZWN0LndpZHRoICogaW50ZXJzZWN0aW9uUmVjdC5oZWlnaHQ7XG5cbiAgLy8gU2V0cyBpbnRlcnNlY3Rpb24gcmF0aW8uXG4gIGlmICh0YXJnZXRBcmVhKSB7XG4gICAgdGhpcy5pbnRlcnNlY3Rpb25SYXRpbyA9IGludGVyc2VjdGlvbkFyZWEgLyB0YXJnZXRBcmVhO1xuICB9IGVsc2Uge1xuICAgIC8vIElmIGFyZWEgaXMgemVybyBhbmQgaXMgaW50ZXJzZWN0aW5nLCBzZXRzIHRvIDEsIG90aGVyd2lzZSB0byAwXG4gICAgdGhpcy5pbnRlcnNlY3Rpb25SYXRpbyA9IHRoaXMuaXNJbnRlcnNlY3RpbmcgPyAxIDogMDtcbiAgfVxufVxuXG5cbi8qKlxuICogQ3JlYXRlcyB0aGUgZ2xvYmFsIEludGVyc2VjdGlvbk9ic2VydmVyIGNvbnN0cnVjdG9yLlxuICogaHR0cHM6Ly93M2MuZ2l0aHViLmlvL0ludGVyc2VjdGlvbk9ic2VydmVyLyNpbnRlcnNlY3Rpb24tb2JzZXJ2ZXItaW50ZXJmYWNlXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFjayBUaGUgZnVuY3Rpb24gdG8gYmUgaW52b2tlZCBhZnRlciBpbnRlcnNlY3Rpb25cbiAqICAgICBjaGFuZ2VzIGhhdmUgcXVldWVkLiBUaGUgZnVuY3Rpb24gaXMgbm90IGludm9rZWQgaWYgdGhlIHF1ZXVlIGhhc1xuICogICAgIGJlZW4gZW1wdGllZCBieSBjYWxsaW5nIHRoZSBgdGFrZVJlY29yZHNgIG1ldGhvZC5cbiAqIEBwYXJhbSB7T2JqZWN0PX0gb3B0X29wdGlvbnMgT3B0aW9uYWwgY29uZmlndXJhdGlvbiBvcHRpb25zLlxuICogQGNvbnN0cnVjdG9yXG4gKi9cbmZ1bmN0aW9uIEludGVyc2VjdGlvbk9ic2VydmVyKGNhbGxiYWNrLCBvcHRfb3B0aW9ucykge1xuXG4gIHZhciBvcHRpb25zID0gb3B0X29wdGlvbnMgfHwge307XG5cbiAgaWYgKHR5cGVvZiBjYWxsYmFjayAhPSAnZnVuY3Rpb24nKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdjYWxsYmFjayBtdXN0IGJlIGEgZnVuY3Rpb24nKTtcbiAgfVxuXG4gIGlmIChvcHRpb25zLnJvb3QgJiYgb3B0aW9ucy5yb290Lm5vZGVUeXBlICE9IDEpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3Jvb3QgbXVzdCBiZSBhbiBFbGVtZW50Jyk7XG4gIH1cblxuICAvLyBCaW5kcyBhbmQgdGhyb3R0bGVzIGB0aGlzLl9jaGVja0ZvckludGVyc2VjdGlvbnNgLlxuICB0aGlzLl9jaGVja0ZvckludGVyc2VjdGlvbnMgPSB0aHJvdHRsZShcbiAgICAgIHRoaXMuX2NoZWNrRm9ySW50ZXJzZWN0aW9ucy5iaW5kKHRoaXMpLCB0aGlzLlRIUk9UVExFX1RJTUVPVVQpO1xuXG4gIC8vIFByaXZhdGUgcHJvcGVydGllcy5cbiAgdGhpcy5fY2FsbGJhY2sgPSBjYWxsYmFjaztcbiAgdGhpcy5fb2JzZXJ2YXRpb25UYXJnZXRzID0gW107XG4gIHRoaXMuX3F1ZXVlZEVudHJpZXMgPSBbXTtcbiAgdGhpcy5fcm9vdE1hcmdpblZhbHVlcyA9IHRoaXMuX3BhcnNlUm9vdE1hcmdpbihvcHRpb25zLnJvb3RNYXJnaW4pO1xuXG4gIC8vIFB1YmxpYyBwcm9wZXJ0aWVzLlxuICB0aGlzLnRocmVzaG9sZHMgPSB0aGlzLl9pbml0VGhyZXNob2xkcyhvcHRpb25zLnRocmVzaG9sZCk7XG4gIHRoaXMucm9vdCA9IG9wdGlvbnMucm9vdCB8fCBudWxsO1xuICB0aGlzLnJvb3RNYXJnaW4gPSB0aGlzLl9yb290TWFyZ2luVmFsdWVzLm1hcChmdW5jdGlvbihtYXJnaW4pIHtcbiAgICByZXR1cm4gbWFyZ2luLnZhbHVlICsgbWFyZ2luLnVuaXQ7XG4gIH0pLmpvaW4oJyAnKTtcbn1cblxuXG4vKipcbiAqIFRoZSBtaW5pbXVtIGludGVydmFsIHdpdGhpbiB3aGljaCB0aGUgZG9jdW1lbnQgd2lsbCBiZSBjaGVja2VkIGZvclxuICogaW50ZXJzZWN0aW9uIGNoYW5nZXMuXG4gKi9cbkludGVyc2VjdGlvbk9ic2VydmVyLnByb3RvdHlwZS5USFJPVFRMRV9USU1FT1VUID0gMTAwO1xuXG5cbi8qKlxuICogVGhlIGZyZXF1ZW5jeSBpbiB3aGljaCB0aGUgcG9seWZpbGwgcG9sbHMgZm9yIGludGVyc2VjdGlvbiBjaGFuZ2VzLlxuICogdGhpcyBjYW4gYmUgdXBkYXRlZCBvbiBhIHBlciBpbnN0YW5jZSBiYXNpcyBhbmQgbXVzdCBiZSBzZXQgcHJpb3IgdG9cbiAqIGNhbGxpbmcgYG9ic2VydmVgIG9uIHRoZSBmaXJzdCB0YXJnZXQuXG4gKi9cbkludGVyc2VjdGlvbk9ic2VydmVyLnByb3RvdHlwZS5QT0xMX0lOVEVSVkFMID0gbnVsbDtcblxuLyoqXG4gKiBVc2UgYSBtdXRhdGlvbiBvYnNlcnZlciBvbiB0aGUgcm9vdCBlbGVtZW50XG4gKiB0byBkZXRlY3QgaW50ZXJzZWN0aW9uIGNoYW5nZXMuXG4gKi9cbkludGVyc2VjdGlvbk9ic2VydmVyLnByb3RvdHlwZS5VU0VfTVVUQVRJT05fT0JTRVJWRVIgPSB0cnVlO1xuXG5cbi8qKlxuICogU3RhcnRzIG9ic2VydmluZyBhIHRhcmdldCBlbGVtZW50IGZvciBpbnRlcnNlY3Rpb24gY2hhbmdlcyBiYXNlZCBvblxuICogdGhlIHRocmVzaG9sZHMgdmFsdWVzLlxuICogQHBhcmFtIHtFbGVtZW50fSB0YXJnZXQgVGhlIERPTSBlbGVtZW50IHRvIG9ic2VydmUuXG4gKi9cbkludGVyc2VjdGlvbk9ic2VydmVyLnByb3RvdHlwZS5vYnNlcnZlID0gZnVuY3Rpb24odGFyZ2V0KSB7XG4gIHZhciBpc1RhcmdldEFscmVhZHlPYnNlcnZlZCA9IHRoaXMuX29ic2VydmF0aW9uVGFyZ2V0cy5zb21lKGZ1bmN0aW9uKGl0ZW0pIHtcbiAgICByZXR1cm4gaXRlbS5lbGVtZW50ID09IHRhcmdldDtcbiAgfSk7XG5cbiAgaWYgKGlzVGFyZ2V0QWxyZWFkeU9ic2VydmVkKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgaWYgKCEodGFyZ2V0ICYmIHRhcmdldC5ub2RlVHlwZSA9PSAxKSkge1xuICAgIHRocm93IG5ldyBFcnJvcigndGFyZ2V0IG11c3QgYmUgYW4gRWxlbWVudCcpO1xuICB9XG5cbiAgdGhpcy5fcmVnaXN0ZXJJbnN0YW5jZSgpO1xuICB0aGlzLl9vYnNlcnZhdGlvblRhcmdldHMucHVzaCh7ZWxlbWVudDogdGFyZ2V0LCBlbnRyeTogbnVsbH0pO1xuICB0aGlzLl9tb25pdG9ySW50ZXJzZWN0aW9ucygpO1xuICB0aGlzLl9jaGVja0ZvckludGVyc2VjdGlvbnMoKTtcbn07XG5cblxuLyoqXG4gKiBTdG9wcyBvYnNlcnZpbmcgYSB0YXJnZXQgZWxlbWVudCBmb3IgaW50ZXJzZWN0aW9uIGNoYW5nZXMuXG4gKiBAcGFyYW0ge0VsZW1lbnR9IHRhcmdldCBUaGUgRE9NIGVsZW1lbnQgdG8gb2JzZXJ2ZS5cbiAqL1xuSW50ZXJzZWN0aW9uT2JzZXJ2ZXIucHJvdG90eXBlLnVub2JzZXJ2ZSA9IGZ1bmN0aW9uKHRhcmdldCkge1xuICB0aGlzLl9vYnNlcnZhdGlvblRhcmdldHMgPVxuICAgICAgdGhpcy5fb2JzZXJ2YXRpb25UYXJnZXRzLmZpbHRlcihmdW5jdGlvbihpdGVtKSB7XG5cbiAgICByZXR1cm4gaXRlbS5lbGVtZW50ICE9IHRhcmdldDtcbiAgfSk7XG4gIGlmICghdGhpcy5fb2JzZXJ2YXRpb25UYXJnZXRzLmxlbmd0aCkge1xuICAgIHRoaXMuX3VubW9uaXRvckludGVyc2VjdGlvbnMoKTtcbiAgICB0aGlzLl91bnJlZ2lzdGVySW5zdGFuY2UoKTtcbiAgfVxufTtcblxuXG4vKipcbiAqIFN0b3BzIG9ic2VydmluZyBhbGwgdGFyZ2V0IGVsZW1lbnRzIGZvciBpbnRlcnNlY3Rpb24gY2hhbmdlcy5cbiAqL1xuSW50ZXJzZWN0aW9uT2JzZXJ2ZXIucHJvdG90eXBlLmRpc2Nvbm5lY3QgPSBmdW5jdGlvbigpIHtcbiAgdGhpcy5fb2JzZXJ2YXRpb25UYXJnZXRzID0gW107XG4gIHRoaXMuX3VubW9uaXRvckludGVyc2VjdGlvbnMoKTtcbiAgdGhpcy5fdW5yZWdpc3Rlckluc3RhbmNlKCk7XG59O1xuXG5cbi8qKlxuICogUmV0dXJucyBhbnkgcXVldWUgZW50cmllcyB0aGF0IGhhdmUgbm90IHlldCBiZWVuIHJlcG9ydGVkIHRvIHRoZVxuICogY2FsbGJhY2sgYW5kIGNsZWFycyB0aGUgcXVldWUuIFRoaXMgY2FuIGJlIHVzZWQgaW4gY29uanVuY3Rpb24gd2l0aCB0aGVcbiAqIGNhbGxiYWNrIHRvIG9idGFpbiB0aGUgYWJzb2x1dGUgbW9zdCB1cC10by1kYXRlIGludGVyc2VjdGlvbiBpbmZvcm1hdGlvbi5cbiAqIEByZXR1cm4ge0FycmF5fSBUaGUgY3VycmVudGx5IHF1ZXVlZCBlbnRyaWVzLlxuICovXG5JbnRlcnNlY3Rpb25PYnNlcnZlci5wcm90b3R5cGUudGFrZVJlY29yZHMgPSBmdW5jdGlvbigpIHtcbiAgdmFyIHJlY29yZHMgPSB0aGlzLl9xdWV1ZWRFbnRyaWVzLnNsaWNlKCk7XG4gIHRoaXMuX3F1ZXVlZEVudHJpZXMgPSBbXTtcbiAgcmV0dXJuIHJlY29yZHM7XG59O1xuXG5cbi8qKlxuICogQWNjZXB0cyB0aGUgdGhyZXNob2xkIHZhbHVlIGZyb20gdGhlIHVzZXIgY29uZmlndXJhdGlvbiBvYmplY3QgYW5kXG4gKiByZXR1cm5zIGEgc29ydGVkIGFycmF5IG9mIHVuaXF1ZSB0aHJlc2hvbGQgdmFsdWVzLiBJZiBhIHZhbHVlIGlzIG5vdFxuICogYmV0d2VlbiAwIGFuZCAxIGFuZCBlcnJvciBpcyB0aHJvd24uXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtBcnJheXxudW1iZXI9fSBvcHRfdGhyZXNob2xkIEFuIG9wdGlvbmFsIHRocmVzaG9sZCB2YWx1ZSBvclxuICogICAgIGEgbGlzdCBvZiB0aHJlc2hvbGQgdmFsdWVzLCBkZWZhdWx0aW5nIHRvIFswXS5cbiAqIEByZXR1cm4ge0FycmF5fSBBIHNvcnRlZCBsaXN0IG9mIHVuaXF1ZSBhbmQgdmFsaWQgdGhyZXNob2xkIHZhbHVlcy5cbiAqL1xuSW50ZXJzZWN0aW9uT2JzZXJ2ZXIucHJvdG90eXBlLl9pbml0VGhyZXNob2xkcyA9IGZ1bmN0aW9uKG9wdF90aHJlc2hvbGQpIHtcbiAgdmFyIHRocmVzaG9sZCA9IG9wdF90aHJlc2hvbGQgfHwgWzBdO1xuICBpZiAoIUFycmF5LmlzQXJyYXkodGhyZXNob2xkKSkgdGhyZXNob2xkID0gW3RocmVzaG9sZF07XG5cbiAgcmV0dXJuIHRocmVzaG9sZC5zb3J0KCkuZmlsdGVyKGZ1bmN0aW9uKHQsIGksIGEpIHtcbiAgICBpZiAodHlwZW9mIHQgIT0gJ251bWJlcicgfHwgaXNOYU4odCkgfHwgdCA8IDAgfHwgdCA+IDEpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcigndGhyZXNob2xkIG11c3QgYmUgYSBudW1iZXIgYmV0d2VlbiAwIGFuZCAxIGluY2x1c2l2ZWx5Jyk7XG4gICAgfVxuICAgIHJldHVybiB0ICE9PSBhW2kgLSAxXTtcbiAgfSk7XG59O1xuXG5cbi8qKlxuICogQWNjZXB0cyB0aGUgcm9vdE1hcmdpbiB2YWx1ZSBmcm9tIHRoZSB1c2VyIGNvbmZpZ3VyYXRpb24gb2JqZWN0XG4gKiBhbmQgcmV0dXJucyBhbiBhcnJheSBvZiB0aGUgZm91ciBtYXJnaW4gdmFsdWVzIGFzIGFuIG9iamVjdCBjb250YWluaW5nXG4gKiB0aGUgdmFsdWUgYW5kIHVuaXQgcHJvcGVydGllcy4gSWYgYW55IG9mIHRoZSB2YWx1ZXMgYXJlIG5vdCBwcm9wZXJseVxuICogZm9ybWF0dGVkIG9yIHVzZSBhIHVuaXQgb3RoZXIgdGhhbiBweCBvciAlLCBhbmQgZXJyb3IgaXMgdGhyb3duLlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7c3RyaW5nPX0gb3B0X3Jvb3RNYXJnaW4gQW4gb3B0aW9uYWwgcm9vdE1hcmdpbiB2YWx1ZSxcbiAqICAgICBkZWZhdWx0aW5nIHRvICcwcHgnLlxuICogQHJldHVybiB7QXJyYXk8T2JqZWN0Pn0gQW4gYXJyYXkgb2YgbWFyZ2luIG9iamVjdHMgd2l0aCB0aGUga2V5c1xuICogICAgIHZhbHVlIGFuZCB1bml0LlxuICovXG5JbnRlcnNlY3Rpb25PYnNlcnZlci5wcm90b3R5cGUuX3BhcnNlUm9vdE1hcmdpbiA9IGZ1bmN0aW9uKG9wdF9yb290TWFyZ2luKSB7XG4gIHZhciBtYXJnaW5TdHJpbmcgPSBvcHRfcm9vdE1hcmdpbiB8fCAnMHB4JztcbiAgdmFyIG1hcmdpbnMgPSBtYXJnaW5TdHJpbmcuc3BsaXQoL1xccysvKS5tYXAoZnVuY3Rpb24obWFyZ2luKSB7XG4gICAgdmFyIHBhcnRzID0gL14oLT9cXGQqXFwuP1xcZCspKHB4fCUpJC8uZXhlYyhtYXJnaW4pO1xuICAgIGlmICghcGFydHMpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcigncm9vdE1hcmdpbiBtdXN0IGJlIHNwZWNpZmllZCBpbiBwaXhlbHMgb3IgcGVyY2VudCcpO1xuICAgIH1cbiAgICByZXR1cm4ge3ZhbHVlOiBwYXJzZUZsb2F0KHBhcnRzWzFdKSwgdW5pdDogcGFydHNbMl19O1xuICB9KTtcblxuICAvLyBIYW5kbGVzIHNob3J0aGFuZC5cbiAgbWFyZ2luc1sxXSA9IG1hcmdpbnNbMV0gfHwgbWFyZ2luc1swXTtcbiAgbWFyZ2luc1syXSA9IG1hcmdpbnNbMl0gfHwgbWFyZ2luc1swXTtcbiAgbWFyZ2luc1szXSA9IG1hcmdpbnNbM10gfHwgbWFyZ2luc1sxXTtcblxuICByZXR1cm4gbWFyZ2lucztcbn07XG5cblxuLyoqXG4gKiBTdGFydHMgcG9sbGluZyBmb3IgaW50ZXJzZWN0aW9uIGNoYW5nZXMgaWYgdGhlIHBvbGxpbmcgaXMgbm90IGFscmVhZHlcbiAqIGhhcHBlbmluZywgYW5kIGlmIHRoZSBwYWdlJ3MgdmlzaWJpbHR5IHN0YXRlIGlzIHZpc2libGUuXG4gKiBAcHJpdmF0ZVxuICovXG5JbnRlcnNlY3Rpb25PYnNlcnZlci5wcm90b3R5cGUuX21vbml0b3JJbnRlcnNlY3Rpb25zID0gZnVuY3Rpb24oKSB7XG4gIGlmICghdGhpcy5fbW9uaXRvcmluZ0ludGVyc2VjdGlvbnMpIHtcbiAgICB0aGlzLl9tb25pdG9yaW5nSW50ZXJzZWN0aW9ucyA9IHRydWU7XG5cbiAgICAvLyBJZiBhIHBvbGwgaW50ZXJ2YWwgaXMgc2V0LCB1c2UgcG9sbGluZyBpbnN0ZWFkIG9mIGxpc3RlbmluZyB0b1xuICAgIC8vIHJlc2l6ZSBhbmQgc2Nyb2xsIGV2ZW50cyBvciBET00gbXV0YXRpb25zLlxuICAgIGlmICh0aGlzLlBPTExfSU5URVJWQUwpIHtcbiAgICAgIHRoaXMuX21vbml0b3JpbmdJbnRlcnZhbCA9IHNldEludGVydmFsKFxuICAgICAgICAgIHRoaXMuX2NoZWNrRm9ySW50ZXJzZWN0aW9ucywgdGhpcy5QT0xMX0lOVEVSVkFMKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICBhZGRFdmVudCh3aW5kb3csICdyZXNpemUnLCB0aGlzLl9jaGVja0ZvckludGVyc2VjdGlvbnMsIHRydWUpO1xuICAgICAgYWRkRXZlbnQoZG9jdW1lbnQsICdzY3JvbGwnLCB0aGlzLl9jaGVja0ZvckludGVyc2VjdGlvbnMsIHRydWUpO1xuXG4gICAgICBpZiAodGhpcy5VU0VfTVVUQVRJT05fT0JTRVJWRVIgJiYgJ011dGF0aW9uT2JzZXJ2ZXInIGluIHdpbmRvdykge1xuICAgICAgICB0aGlzLl9kb21PYnNlcnZlciA9IG5ldyBNdXRhdGlvbk9ic2VydmVyKHRoaXMuX2NoZWNrRm9ySW50ZXJzZWN0aW9ucyk7XG4gICAgICAgIHRoaXMuX2RvbU9ic2VydmVyLm9ic2VydmUoZG9jdW1lbnQsIHtcbiAgICAgICAgICBhdHRyaWJ1dGVzOiB0cnVlLFxuICAgICAgICAgIGNoaWxkTGlzdDogdHJ1ZSxcbiAgICAgICAgICBjaGFyYWN0ZXJEYXRhOiB0cnVlLFxuICAgICAgICAgIHN1YnRyZWU6IHRydWVcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuICB9XG59O1xuXG5cbi8qKlxuICogU3RvcHMgcG9sbGluZyBmb3IgaW50ZXJzZWN0aW9uIGNoYW5nZXMuXG4gKiBAcHJpdmF0ZVxuICovXG5JbnRlcnNlY3Rpb25PYnNlcnZlci5wcm90b3R5cGUuX3VubW9uaXRvckludGVyc2VjdGlvbnMgPSBmdW5jdGlvbigpIHtcbiAgaWYgKHRoaXMuX21vbml0b3JpbmdJbnRlcnNlY3Rpb25zKSB7XG4gICAgdGhpcy5fbW9uaXRvcmluZ0ludGVyc2VjdGlvbnMgPSBmYWxzZTtcblxuICAgIGNsZWFySW50ZXJ2YWwodGhpcy5fbW9uaXRvcmluZ0ludGVydmFsKTtcbiAgICB0aGlzLl9tb25pdG9yaW5nSW50ZXJ2YWwgPSBudWxsO1xuXG4gICAgcmVtb3ZlRXZlbnQod2luZG93LCAncmVzaXplJywgdGhpcy5fY2hlY2tGb3JJbnRlcnNlY3Rpb25zLCB0cnVlKTtcbiAgICByZW1vdmVFdmVudChkb2N1bWVudCwgJ3Njcm9sbCcsIHRoaXMuX2NoZWNrRm9ySW50ZXJzZWN0aW9ucywgdHJ1ZSk7XG5cbiAgICBpZiAodGhpcy5fZG9tT2JzZXJ2ZXIpIHtcbiAgICAgIHRoaXMuX2RvbU9ic2VydmVyLmRpc2Nvbm5lY3QoKTtcbiAgICAgIHRoaXMuX2RvbU9ic2VydmVyID0gbnVsbDtcbiAgICB9XG4gIH1cbn07XG5cblxuLyoqXG4gKiBTY2FucyBlYWNoIG9ic2VydmF0aW9uIHRhcmdldCBmb3IgaW50ZXJzZWN0aW9uIGNoYW5nZXMgYW5kIGFkZHMgdGhlbVxuICogdG8gdGhlIGludGVybmFsIGVudHJpZXMgcXVldWUuIElmIG5ldyBlbnRyaWVzIGFyZSBmb3VuZCwgaXRcbiAqIHNjaGVkdWxlcyB0aGUgY2FsbGJhY2sgdG8gYmUgaW52b2tlZC5cbiAqIEBwcml2YXRlXG4gKi9cbkludGVyc2VjdGlvbk9ic2VydmVyLnByb3RvdHlwZS5fY2hlY2tGb3JJbnRlcnNlY3Rpb25zID0gZnVuY3Rpb24oKSB7XG4gIHZhciByb290SXNJbkRvbSA9IHRoaXMuX3Jvb3RJc0luRG9tKCk7XG4gIHZhciByb290UmVjdCA9IHJvb3RJc0luRG9tID8gdGhpcy5fZ2V0Um9vdFJlY3QoKSA6IGdldEVtcHR5UmVjdCgpO1xuXG4gIHRoaXMuX29ic2VydmF0aW9uVGFyZ2V0cy5mb3JFYWNoKGZ1bmN0aW9uKGl0ZW0pIHtcbiAgICB2YXIgdGFyZ2V0ID0gaXRlbS5lbGVtZW50O1xuICAgIHZhciB0YXJnZXRSZWN0ID0gZ2V0Qm91bmRpbmdDbGllbnRSZWN0KHRhcmdldCk7XG4gICAgdmFyIHJvb3RDb250YWluc1RhcmdldCA9IHRoaXMuX3Jvb3RDb250YWluc1RhcmdldCh0YXJnZXQpO1xuICAgIHZhciBvbGRFbnRyeSA9IGl0ZW0uZW50cnk7XG4gICAgdmFyIGludGVyc2VjdGlvblJlY3QgPSByb290SXNJbkRvbSAmJiByb290Q29udGFpbnNUYXJnZXQgJiZcbiAgICAgICAgdGhpcy5fY29tcHV0ZVRhcmdldEFuZFJvb3RJbnRlcnNlY3Rpb24odGFyZ2V0LCByb290UmVjdCk7XG5cbiAgICB2YXIgbmV3RW50cnkgPSBpdGVtLmVudHJ5ID0gbmV3IEludGVyc2VjdGlvbk9ic2VydmVyRW50cnkoe1xuICAgICAgdGltZTogbm93KCksXG4gICAgICB0YXJnZXQ6IHRhcmdldCxcbiAgICAgIGJvdW5kaW5nQ2xpZW50UmVjdDogdGFyZ2V0UmVjdCxcbiAgICAgIHJvb3RCb3VuZHM6IHJvb3RSZWN0LFxuICAgICAgaW50ZXJzZWN0aW9uUmVjdDogaW50ZXJzZWN0aW9uUmVjdFxuICAgIH0pO1xuXG4gICAgaWYgKCFvbGRFbnRyeSkge1xuICAgICAgdGhpcy5fcXVldWVkRW50cmllcy5wdXNoKG5ld0VudHJ5KTtcbiAgICB9IGVsc2UgaWYgKHJvb3RJc0luRG9tICYmIHJvb3RDb250YWluc1RhcmdldCkge1xuICAgICAgLy8gSWYgdGhlIG5ldyBlbnRyeSBpbnRlcnNlY3Rpb24gcmF0aW8gaGFzIGNyb3NzZWQgYW55IG9mIHRoZVxuICAgICAgLy8gdGhyZXNob2xkcywgYWRkIGEgbmV3IGVudHJ5LlxuICAgICAgaWYgKHRoaXMuX2hhc0Nyb3NzZWRUaHJlc2hvbGQob2xkRW50cnksIG5ld0VudHJ5KSkge1xuICAgICAgICB0aGlzLl9xdWV1ZWRFbnRyaWVzLnB1c2gobmV3RW50cnkpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAvLyBJZiB0aGUgcm9vdCBpcyBub3QgaW4gdGhlIERPTSBvciB0YXJnZXQgaXMgbm90IGNvbnRhaW5lZCB3aXRoaW5cbiAgICAgIC8vIHJvb3QgYnV0IHRoZSBwcmV2aW91cyBlbnRyeSBmb3IgdGhpcyB0YXJnZXQgaGFkIGFuIGludGVyc2VjdGlvbixcbiAgICAgIC8vIGFkZCBhIG5ldyByZWNvcmQgaW5kaWNhdGluZyByZW1vdmFsLlxuICAgICAgaWYgKG9sZEVudHJ5ICYmIG9sZEVudHJ5LmlzSW50ZXJzZWN0aW5nKSB7XG4gICAgICAgIHRoaXMuX3F1ZXVlZEVudHJpZXMucHVzaChuZXdFbnRyeSk7XG4gICAgICB9XG4gICAgfVxuICB9LCB0aGlzKTtcblxuICBpZiAodGhpcy5fcXVldWVkRW50cmllcy5sZW5ndGgpIHtcbiAgICB0aGlzLl9jYWxsYmFjayh0aGlzLnRha2VSZWNvcmRzKCksIHRoaXMpO1xuICB9XG59O1xuXG5cbi8qKlxuICogQWNjZXB0cyBhIHRhcmdldCBhbmQgcm9vdCByZWN0IGNvbXB1dGVzIHRoZSBpbnRlcnNlY3Rpb24gYmV0d2VlbiB0aGVuXG4gKiBmb2xsb3dpbmcgdGhlIGFsZ29yaXRobSBpbiB0aGUgc3BlYy5cbiAqIFRPRE8ocGhpbGlwd2FsdG9uKTogYXQgdGhpcyB0aW1lIGNsaXAtcGF0aCBpcyBub3QgY29uc2lkZXJlZC5cbiAqIGh0dHBzOi8vdzNjLmdpdGh1Yi5pby9JbnRlcnNlY3Rpb25PYnNlcnZlci8jY2FsY3VsYXRlLWludGVyc2VjdGlvbi1yZWN0LWFsZ29cbiAqIEBwYXJhbSB7RWxlbWVudH0gdGFyZ2V0IFRoZSB0YXJnZXQgRE9NIGVsZW1lbnRcbiAqIEBwYXJhbSB7T2JqZWN0fSByb290UmVjdCBUaGUgYm91bmRpbmcgcmVjdCBvZiB0aGUgcm9vdCBhZnRlciBiZWluZ1xuICogICAgIGV4cGFuZGVkIGJ5IHRoZSByb290TWFyZ2luIHZhbHVlLlxuICogQHJldHVybiB7P09iamVjdH0gVGhlIGZpbmFsIGludGVyc2VjdGlvbiByZWN0IG9iamVjdCBvciB1bmRlZmluZWQgaWYgbm9cbiAqICAgICBpbnRlcnNlY3Rpb24gaXMgZm91bmQuXG4gKiBAcHJpdmF0ZVxuICovXG5JbnRlcnNlY3Rpb25PYnNlcnZlci5wcm90b3R5cGUuX2NvbXB1dGVUYXJnZXRBbmRSb290SW50ZXJzZWN0aW9uID1cbiAgICBmdW5jdGlvbih0YXJnZXQsIHJvb3RSZWN0KSB7XG5cbiAgLy8gSWYgdGhlIGVsZW1lbnQgaXNuJ3QgZGlzcGxheWVkLCBhbiBpbnRlcnNlY3Rpb24gY2FuJ3QgaGFwcGVuLlxuICBpZiAod2luZG93LmdldENvbXB1dGVkU3R5bGUodGFyZ2V0KS5kaXNwbGF5ID09ICdub25lJykgcmV0dXJuO1xuXG4gIHZhciB0YXJnZXRSZWN0ID0gZ2V0Qm91bmRpbmdDbGllbnRSZWN0KHRhcmdldCk7XG4gIHZhciBpbnRlcnNlY3Rpb25SZWN0ID0gdGFyZ2V0UmVjdDtcbiAgdmFyIHBhcmVudCA9IGdldFBhcmVudE5vZGUodGFyZ2V0KTtcbiAgdmFyIGF0Um9vdCA9IGZhbHNlO1xuXG4gIHdoaWxlICghYXRSb290KSB7XG4gICAgdmFyIHBhcmVudFJlY3QgPSBudWxsO1xuICAgIHZhciBwYXJlbnRDb21wdXRlZFN0eWxlID0gcGFyZW50Lm5vZGVUeXBlID09IDEgP1xuICAgICAgICB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShwYXJlbnQpIDoge307XG5cbiAgICAvLyBJZiB0aGUgcGFyZW50IGlzbid0IGRpc3BsYXllZCwgYW4gaW50ZXJzZWN0aW9uIGNhbid0IGhhcHBlbi5cbiAgICBpZiAocGFyZW50Q29tcHV0ZWRTdHlsZS5kaXNwbGF5ID09ICdub25lJykgcmV0dXJuO1xuXG4gICAgaWYgKHBhcmVudCA9PSB0aGlzLnJvb3QgfHwgcGFyZW50ID09IGRvY3VtZW50KSB7XG4gICAgICBhdFJvb3QgPSB0cnVlO1xuICAgICAgcGFyZW50UmVjdCA9IHJvb3RSZWN0O1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBJZiB0aGUgZWxlbWVudCBoYXMgYSBub24tdmlzaWJsZSBvdmVyZmxvdywgYW5kIGl0J3Mgbm90IHRoZSA8Ym9keT5cbiAgICAgIC8vIG9yIDxodG1sPiBlbGVtZW50LCB1cGRhdGUgdGhlIGludGVyc2VjdGlvbiByZWN0LlxuICAgICAgLy8gTm90ZTogPGJvZHk+IGFuZCA8aHRtbD4gY2Fubm90IGJlIGNsaXBwZWQgdG8gYSByZWN0IHRoYXQncyBub3QgYWxzb1xuICAgICAgLy8gdGhlIGRvY3VtZW50IHJlY3QsIHNvIG5vIG5lZWQgdG8gY29tcHV0ZSBhIG5ldyBpbnRlcnNlY3Rpb24uXG4gICAgICBpZiAocGFyZW50ICE9IGRvY3VtZW50LmJvZHkgJiZcbiAgICAgICAgICBwYXJlbnQgIT0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50ICYmXG4gICAgICAgICAgcGFyZW50Q29tcHV0ZWRTdHlsZS5vdmVyZmxvdyAhPSAndmlzaWJsZScpIHtcbiAgICAgICAgcGFyZW50UmVjdCA9IGdldEJvdW5kaW5nQ2xpZW50UmVjdChwYXJlbnQpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIElmIGVpdGhlciBvZiB0aGUgYWJvdmUgY29uZGl0aW9uYWxzIHNldCBhIG5ldyBwYXJlbnRSZWN0LFxuICAgIC8vIGNhbGN1bGF0ZSBuZXcgaW50ZXJzZWN0aW9uIGRhdGEuXG4gICAgaWYgKHBhcmVudFJlY3QpIHtcbiAgICAgIGludGVyc2VjdGlvblJlY3QgPSBjb21wdXRlUmVjdEludGVyc2VjdGlvbihwYXJlbnRSZWN0LCBpbnRlcnNlY3Rpb25SZWN0KTtcblxuICAgICAgaWYgKCFpbnRlcnNlY3Rpb25SZWN0KSBicmVhaztcbiAgICB9XG4gICAgcGFyZW50ID0gZ2V0UGFyZW50Tm9kZShwYXJlbnQpO1xuICB9XG4gIHJldHVybiBpbnRlcnNlY3Rpb25SZWN0O1xufTtcblxuXG4vKipcbiAqIFJldHVybnMgdGhlIHJvb3QgcmVjdCBhZnRlciBiZWluZyBleHBhbmRlZCBieSB0aGUgcm9vdE1hcmdpbiB2YWx1ZS5cbiAqIEByZXR1cm4ge09iamVjdH0gVGhlIGV4cGFuZGVkIHJvb3QgcmVjdC5cbiAqIEBwcml2YXRlXG4gKi9cbkludGVyc2VjdGlvbk9ic2VydmVyLnByb3RvdHlwZS5fZ2V0Um9vdFJlY3QgPSBmdW5jdGlvbigpIHtcbiAgdmFyIHJvb3RSZWN0O1xuICBpZiAodGhpcy5yb290KSB7XG4gICAgcm9vdFJlY3QgPSBnZXRCb3VuZGluZ0NsaWVudFJlY3QodGhpcy5yb290KTtcbiAgfSBlbHNlIHtcbiAgICAvLyBVc2UgPGh0bWw+Lzxib2R5PiBpbnN0ZWFkIG9mIHdpbmRvdyBzaW5jZSBzY3JvbGwgYmFycyBhZmZlY3Qgc2l6ZS5cbiAgICB2YXIgaHRtbCA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudDtcbiAgICB2YXIgYm9keSA9IGRvY3VtZW50LmJvZHk7XG4gICAgcm9vdFJlY3QgPSB7XG4gICAgICB0b3A6IDAsXG4gICAgICBsZWZ0OiAwLFxuICAgICAgcmlnaHQ6IGh0bWwuY2xpZW50V2lkdGggfHwgYm9keS5jbGllbnRXaWR0aCxcbiAgICAgIHdpZHRoOiBodG1sLmNsaWVudFdpZHRoIHx8IGJvZHkuY2xpZW50V2lkdGgsXG4gICAgICBib3R0b206IGh0bWwuY2xpZW50SGVpZ2h0IHx8IGJvZHkuY2xpZW50SGVpZ2h0LFxuICAgICAgaGVpZ2h0OiBodG1sLmNsaWVudEhlaWdodCB8fCBib2R5LmNsaWVudEhlaWdodFxuICAgIH07XG4gIH1cbiAgcmV0dXJuIHRoaXMuX2V4cGFuZFJlY3RCeVJvb3RNYXJnaW4ocm9vdFJlY3QpO1xufTtcblxuXG4vKipcbiAqIEFjY2VwdHMgYSByZWN0IGFuZCBleHBhbmRzIGl0IGJ5IHRoZSByb290TWFyZ2luIHZhbHVlLlxuICogQHBhcmFtIHtPYmplY3R9IHJlY3QgVGhlIHJlY3Qgb2JqZWN0IHRvIGV4cGFuZC5cbiAqIEByZXR1cm4ge09iamVjdH0gVGhlIGV4cGFuZGVkIHJlY3QuXG4gKiBAcHJpdmF0ZVxuICovXG5JbnRlcnNlY3Rpb25PYnNlcnZlci5wcm90b3R5cGUuX2V4cGFuZFJlY3RCeVJvb3RNYXJnaW4gPSBmdW5jdGlvbihyZWN0KSB7XG4gIHZhciBtYXJnaW5zID0gdGhpcy5fcm9vdE1hcmdpblZhbHVlcy5tYXAoZnVuY3Rpb24obWFyZ2luLCBpKSB7XG4gICAgcmV0dXJuIG1hcmdpbi51bml0ID09ICdweCcgPyBtYXJnaW4udmFsdWUgOlxuICAgICAgICBtYXJnaW4udmFsdWUgKiAoaSAlIDIgPyByZWN0LndpZHRoIDogcmVjdC5oZWlnaHQpIC8gMTAwO1xuICB9KTtcbiAgdmFyIG5ld1JlY3QgPSB7XG4gICAgdG9wOiByZWN0LnRvcCAtIG1hcmdpbnNbMF0sXG4gICAgcmlnaHQ6IHJlY3QucmlnaHQgKyBtYXJnaW5zWzFdLFxuICAgIGJvdHRvbTogcmVjdC5ib3R0b20gKyBtYXJnaW5zWzJdLFxuICAgIGxlZnQ6IHJlY3QubGVmdCAtIG1hcmdpbnNbM11cbiAgfTtcbiAgbmV3UmVjdC53aWR0aCA9IG5ld1JlY3QucmlnaHQgLSBuZXdSZWN0LmxlZnQ7XG4gIG5ld1JlY3QuaGVpZ2h0ID0gbmV3UmVjdC5ib3R0b20gLSBuZXdSZWN0LnRvcDtcblxuICByZXR1cm4gbmV3UmVjdDtcbn07XG5cblxuLyoqXG4gKiBBY2NlcHRzIGFuIG9sZCBhbmQgbmV3IGVudHJ5IGFuZCByZXR1cm5zIHRydWUgaWYgYXQgbGVhc3Qgb25lIG9mIHRoZVxuICogdGhyZXNob2xkIHZhbHVlcyBoYXMgYmVlbiBjcm9zc2VkLlxuICogQHBhcmFtIHs/SW50ZXJzZWN0aW9uT2JzZXJ2ZXJFbnRyeX0gb2xkRW50cnkgVGhlIHByZXZpb3VzIGVudHJ5IGZvciBhXG4gKiAgICBwYXJ0aWN1bGFyIHRhcmdldCBlbGVtZW50IG9yIG51bGwgaWYgbm8gcHJldmlvdXMgZW50cnkgZXhpc3RzLlxuICogQHBhcmFtIHtJbnRlcnNlY3Rpb25PYnNlcnZlckVudHJ5fSBuZXdFbnRyeSBUaGUgY3VycmVudCBlbnRyeSBmb3IgYVxuICogICAgcGFydGljdWxhciB0YXJnZXQgZWxlbWVudC5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFJldHVybnMgdHJ1ZSBpZiBhIGFueSB0aHJlc2hvbGQgaGFzIGJlZW4gY3Jvc3NlZC5cbiAqIEBwcml2YXRlXG4gKi9cbkludGVyc2VjdGlvbk9ic2VydmVyLnByb3RvdHlwZS5faGFzQ3Jvc3NlZFRocmVzaG9sZCA9XG4gICAgZnVuY3Rpb24ob2xkRW50cnksIG5ld0VudHJ5KSB7XG5cbiAgLy8gVG8gbWFrZSBjb21wYXJpbmcgZWFzaWVyLCBhbiBlbnRyeSB0aGF0IGhhcyBhIHJhdGlvIG9mIDBcbiAgLy8gYnV0IGRvZXMgbm90IGFjdHVhbGx5IGludGVyc2VjdCBpcyBnaXZlbiBhIHZhbHVlIG9mIC0xXG4gIHZhciBvbGRSYXRpbyA9IG9sZEVudHJ5ICYmIG9sZEVudHJ5LmlzSW50ZXJzZWN0aW5nID9cbiAgICAgIG9sZEVudHJ5LmludGVyc2VjdGlvblJhdGlvIHx8IDAgOiAtMTtcbiAgdmFyIG5ld1JhdGlvID0gbmV3RW50cnkuaXNJbnRlcnNlY3RpbmcgP1xuICAgICAgbmV3RW50cnkuaW50ZXJzZWN0aW9uUmF0aW8gfHwgMCA6IC0xO1xuXG4gIC8vIElnbm9yZSB1bmNoYW5nZWQgcmF0aW9zXG4gIGlmIChvbGRSYXRpbyA9PT0gbmV3UmF0aW8pIHJldHVybjtcblxuICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMudGhyZXNob2xkcy5sZW5ndGg7IGkrKykge1xuICAgIHZhciB0aHJlc2hvbGQgPSB0aGlzLnRocmVzaG9sZHNbaV07XG5cbiAgICAvLyBSZXR1cm4gdHJ1ZSBpZiBhbiBlbnRyeSBtYXRjaGVzIGEgdGhyZXNob2xkIG9yIGlmIHRoZSBuZXcgcmF0aW9cbiAgICAvLyBhbmQgdGhlIG9sZCByYXRpbyBhcmUgb24gdGhlIG9wcG9zaXRlIHNpZGVzIG9mIGEgdGhyZXNob2xkLlxuICAgIGlmICh0aHJlc2hvbGQgPT0gb2xkUmF0aW8gfHwgdGhyZXNob2xkID09IG5ld1JhdGlvIHx8XG4gICAgICAgIHRocmVzaG9sZCA8IG9sZFJhdGlvICE9PSB0aHJlc2hvbGQgPCBuZXdSYXRpbykge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICB9XG59O1xuXG5cbi8qKlxuICogUmV0dXJucyB3aGV0aGVyIG9yIG5vdCB0aGUgcm9vdCBlbGVtZW50IGlzIGFuIGVsZW1lbnQgYW5kIGlzIGluIHRoZSBET00uXG4gKiBAcmV0dXJuIHtib29sZWFufSBUcnVlIGlmIHRoZSByb290IGVsZW1lbnQgaXMgYW4gZWxlbWVudCBhbmQgaXMgaW4gdGhlIERPTS5cbiAqIEBwcml2YXRlXG4gKi9cbkludGVyc2VjdGlvbk9ic2VydmVyLnByb3RvdHlwZS5fcm9vdElzSW5Eb20gPSBmdW5jdGlvbigpIHtcbiAgcmV0dXJuICF0aGlzLnJvb3QgfHwgY29udGFpbnNEZWVwKGRvY3VtZW50LCB0aGlzLnJvb3QpO1xufTtcblxuXG4vKipcbiAqIFJldHVybnMgd2hldGhlciBvciBub3QgdGhlIHRhcmdldCBlbGVtZW50IGlzIGEgY2hpbGQgb2Ygcm9vdC5cbiAqIEBwYXJhbSB7RWxlbWVudH0gdGFyZ2V0IFRoZSB0YXJnZXQgZWxlbWVudCB0byBjaGVjay5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRydWUgaWYgdGhlIHRhcmdldCBlbGVtZW50IGlzIGEgY2hpbGQgb2Ygcm9vdC5cbiAqIEBwcml2YXRlXG4gKi9cbkludGVyc2VjdGlvbk9ic2VydmVyLnByb3RvdHlwZS5fcm9vdENvbnRhaW5zVGFyZ2V0ID0gZnVuY3Rpb24odGFyZ2V0KSB7XG4gIHJldHVybiBjb250YWluc0RlZXAodGhpcy5yb290IHx8IGRvY3VtZW50LCB0YXJnZXQpO1xufTtcblxuXG4vKipcbiAqIEFkZHMgdGhlIGluc3RhbmNlIHRvIHRoZSBnbG9iYWwgSW50ZXJzZWN0aW9uT2JzZXJ2ZXIgcmVnaXN0cnkgaWYgaXQgaXNuJ3RcbiAqIGFscmVhZHkgcHJlc2VudC5cbiAqIEBwcml2YXRlXG4gKi9cbkludGVyc2VjdGlvbk9ic2VydmVyLnByb3RvdHlwZS5fcmVnaXN0ZXJJbnN0YW5jZSA9IGZ1bmN0aW9uKCkge1xuICBpZiAocmVnaXN0cnkuaW5kZXhPZih0aGlzKSA8IDApIHtcbiAgICByZWdpc3RyeS5wdXNoKHRoaXMpO1xuICB9XG59O1xuXG5cbi8qKlxuICogUmVtb3ZlcyB0aGUgaW5zdGFuY2UgZnJvbSB0aGUgZ2xvYmFsIEludGVyc2VjdGlvbk9ic2VydmVyIHJlZ2lzdHJ5LlxuICogQHByaXZhdGVcbiAqL1xuSW50ZXJzZWN0aW9uT2JzZXJ2ZXIucHJvdG90eXBlLl91bnJlZ2lzdGVySW5zdGFuY2UgPSBmdW5jdGlvbigpIHtcbiAgdmFyIGluZGV4ID0gcmVnaXN0cnkuaW5kZXhPZih0aGlzKTtcbiAgaWYgKGluZGV4ICE9IC0xKSByZWdpc3RyeS5zcGxpY2UoaW5kZXgsIDEpO1xufTtcblxuXG4vKipcbiAqIFJldHVybnMgdGhlIHJlc3VsdCBvZiB0aGUgcGVyZm9ybWFuY2Uubm93KCkgbWV0aG9kIG9yIG51bGwgaW4gYnJvd3NlcnNcbiAqIHRoYXQgZG9uJ3Qgc3VwcG9ydCB0aGUgQVBJLlxuICogQHJldHVybiB7bnVtYmVyfSBUaGUgZWxhcHNlZCB0aW1lIHNpbmNlIHRoZSBwYWdlIHdhcyByZXF1ZXN0ZWQuXG4gKi9cbmZ1bmN0aW9uIG5vdygpIHtcbiAgcmV0dXJuIHdpbmRvdy5wZXJmb3JtYW5jZSAmJiBwZXJmb3JtYW5jZS5ub3cgJiYgcGVyZm9ybWFuY2Uubm93KCk7XG59XG5cblxuLyoqXG4gKiBUaHJvdHRsZXMgYSBmdW5jdGlvbiBhbmQgZGVsYXlzIGl0cyBleGVjdXRpb25nLCBzbyBpdCdzIG9ubHkgY2FsbGVkIGF0IG1vc3RcbiAqIG9uY2Ugd2l0aGluIGEgZ2l2ZW4gdGltZSBwZXJpb2QuXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmbiBUaGUgZnVuY3Rpb24gdG8gdGhyb3R0bGUuXG4gKiBAcGFyYW0ge251bWJlcn0gdGltZW91dCBUaGUgYW1vdW50IG9mIHRpbWUgdGhhdCBtdXN0IHBhc3MgYmVmb3JlIHRoZVxuICogICAgIGZ1bmN0aW9uIGNhbiBiZSBjYWxsZWQgYWdhaW4uXG4gKiBAcmV0dXJuIHtGdW5jdGlvbn0gVGhlIHRocm90dGxlZCBmdW5jdGlvbi5cbiAqL1xuZnVuY3Rpb24gdGhyb3R0bGUoZm4sIHRpbWVvdXQpIHtcbiAgdmFyIHRpbWVyID0gbnVsbDtcbiAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoIXRpbWVyKSB7XG4gICAgICB0aW1lciA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgIGZuKCk7XG4gICAgICAgIHRpbWVyID0gbnVsbDtcbiAgICAgIH0sIHRpbWVvdXQpO1xuICAgIH1cbiAgfTtcbn1cblxuXG4vKipcbiAqIEFkZHMgYW4gZXZlbnQgaGFuZGxlciB0byBhIERPTSBub2RlIGVuc3VyaW5nIGNyb3NzLWJyb3dzZXIgY29tcGF0aWJpbGl0eS5cbiAqIEBwYXJhbSB7Tm9kZX0gbm9kZSBUaGUgRE9NIG5vZGUgdG8gYWRkIHRoZSBldmVudCBoYW5kbGVyIHRvLlxuICogQHBhcmFtIHtzdHJpbmd9IGV2ZW50IFRoZSBldmVudCBuYW1lLlxuICogQHBhcmFtIHtGdW5jdGlvbn0gZm4gVGhlIGV2ZW50IGhhbmRsZXIgdG8gYWRkLlxuICogQHBhcmFtIHtib29sZWFufSBvcHRfdXNlQ2FwdHVyZSBPcHRpb25hbGx5IGFkZHMgdGhlIGV2ZW4gdG8gdGhlIGNhcHR1cmVcbiAqICAgICBwaGFzZS4gTm90ZTogdGhpcyBvbmx5IHdvcmtzIGluIG1vZGVybiBicm93c2Vycy5cbiAqL1xuZnVuY3Rpb24gYWRkRXZlbnQobm9kZSwgZXZlbnQsIGZuLCBvcHRfdXNlQ2FwdHVyZSkge1xuICBpZiAodHlwZW9mIG5vZGUuYWRkRXZlbnRMaXN0ZW5lciA9PSAnZnVuY3Rpb24nKSB7XG4gICAgbm9kZS5hZGRFdmVudExpc3RlbmVyKGV2ZW50LCBmbiwgb3B0X3VzZUNhcHR1cmUgfHwgZmFsc2UpO1xuICB9XG4gIGVsc2UgaWYgKHR5cGVvZiBub2RlLmF0dGFjaEV2ZW50ID09ICdmdW5jdGlvbicpIHtcbiAgICBub2RlLmF0dGFjaEV2ZW50KCdvbicgKyBldmVudCwgZm4pO1xuICB9XG59XG5cblxuLyoqXG4gKiBSZW1vdmVzIGEgcHJldmlvdXNseSBhZGRlZCBldmVudCBoYW5kbGVyIGZyb20gYSBET00gbm9kZS5cbiAqIEBwYXJhbSB7Tm9kZX0gbm9kZSBUaGUgRE9NIG5vZGUgdG8gcmVtb3ZlIHRoZSBldmVudCBoYW5kbGVyIGZyb20uXG4gKiBAcGFyYW0ge3N0cmluZ30gZXZlbnQgVGhlIGV2ZW50IG5hbWUuXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmbiBUaGUgZXZlbnQgaGFuZGxlciB0byByZW1vdmUuXG4gKiBAcGFyYW0ge2Jvb2xlYW59IG9wdF91c2VDYXB0dXJlIElmIHRoZSBldmVudCBoYW5kbGVyIHdhcyBhZGRlZCB3aXRoIHRoaXNcbiAqICAgICBmbGFnIHNldCB0byB0cnVlLCBpdCBzaG91bGQgYmUgc2V0IHRvIHRydWUgaGVyZSBpbiBvcmRlciB0byByZW1vdmUgaXQuXG4gKi9cbmZ1bmN0aW9uIHJlbW92ZUV2ZW50KG5vZGUsIGV2ZW50LCBmbiwgb3B0X3VzZUNhcHR1cmUpIHtcbiAgaWYgKHR5cGVvZiBub2RlLnJlbW92ZUV2ZW50TGlzdGVuZXIgPT0gJ2Z1bmN0aW9uJykge1xuICAgIG5vZGUucmVtb3ZlRXZlbnRMaXN0ZW5lcihldmVudCwgZm4sIG9wdF91c2VDYXB0dXJlIHx8IGZhbHNlKTtcbiAgfVxuICBlbHNlIGlmICh0eXBlb2Ygbm9kZS5kZXRhdGNoRXZlbnQgPT0gJ2Z1bmN0aW9uJykge1xuICAgIG5vZGUuZGV0YXRjaEV2ZW50KCdvbicgKyBldmVudCwgZm4pO1xuICB9XG59XG5cblxuLyoqXG4gKiBSZXR1cm5zIHRoZSBpbnRlcnNlY3Rpb24gYmV0d2VlbiB0d28gcmVjdCBvYmplY3RzLlxuICogQHBhcmFtIHtPYmplY3R9IHJlY3QxIFRoZSBmaXJzdCByZWN0LlxuICogQHBhcmFtIHtPYmplY3R9IHJlY3QyIFRoZSBzZWNvbmQgcmVjdC5cbiAqIEByZXR1cm4gez9PYmplY3R9IFRoZSBpbnRlcnNlY3Rpb24gcmVjdCBvciB1bmRlZmluZWQgaWYgbm8gaW50ZXJzZWN0aW9uXG4gKiAgICAgaXMgZm91bmQuXG4gKi9cbmZ1bmN0aW9uIGNvbXB1dGVSZWN0SW50ZXJzZWN0aW9uKHJlY3QxLCByZWN0Mikge1xuICB2YXIgdG9wID0gTWF0aC5tYXgocmVjdDEudG9wLCByZWN0Mi50b3ApO1xuICB2YXIgYm90dG9tID0gTWF0aC5taW4ocmVjdDEuYm90dG9tLCByZWN0Mi5ib3R0b20pO1xuICB2YXIgbGVmdCA9IE1hdGgubWF4KHJlY3QxLmxlZnQsIHJlY3QyLmxlZnQpO1xuICB2YXIgcmlnaHQgPSBNYXRoLm1pbihyZWN0MS5yaWdodCwgcmVjdDIucmlnaHQpO1xuICB2YXIgd2lkdGggPSByaWdodCAtIGxlZnQ7XG4gIHZhciBoZWlnaHQgPSBib3R0b20gLSB0b3A7XG5cbiAgcmV0dXJuICh3aWR0aCA+PSAwICYmIGhlaWdodCA+PSAwKSAmJiB7XG4gICAgdG9wOiB0b3AsXG4gICAgYm90dG9tOiBib3R0b20sXG4gICAgbGVmdDogbGVmdCxcbiAgICByaWdodDogcmlnaHQsXG4gICAgd2lkdGg6IHdpZHRoLFxuICAgIGhlaWdodDogaGVpZ2h0XG4gIH07XG59XG5cblxuLyoqXG4gKiBTaGltcyB0aGUgbmF0aXZlIGdldEJvdW5kaW5nQ2xpZW50UmVjdCBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG9sZGVyIElFLlxuICogQHBhcmFtIHtFbGVtZW50fSBlbCBUaGUgZWxlbWVudCB3aG9zZSBib3VuZGluZyByZWN0IHRvIGdldC5cbiAqIEByZXR1cm4ge09iamVjdH0gVGhlIChwb3NzaWJseSBzaGltbWVkKSByZWN0IG9mIHRoZSBlbGVtZW50LlxuICovXG5mdW5jdGlvbiBnZXRCb3VuZGluZ0NsaWVudFJlY3QoZWwpIHtcbiAgdmFyIHJlY3Q7XG5cbiAgdHJ5IHtcbiAgICByZWN0ID0gZWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gIH0gY2F0Y2ggKGVycikge1xuICAgIC8vIElnbm9yZSBXaW5kb3dzIDcgSUUxMSBcIlVuc3BlY2lmaWVkIGVycm9yXCJcbiAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vdzNjL0ludGVyc2VjdGlvbk9ic2VydmVyL3B1bGwvMjA1XG4gIH1cblxuICBpZiAoIXJlY3QpIHJldHVybiBnZXRFbXB0eVJlY3QoKTtcblxuICAvLyBPbGRlciBJRVxuICBpZiAoIShyZWN0LndpZHRoICYmIHJlY3QuaGVpZ2h0KSkge1xuICAgIHJlY3QgPSB7XG4gICAgICB0b3A6IHJlY3QudG9wLFxuICAgICAgcmlnaHQ6IHJlY3QucmlnaHQsXG4gICAgICBib3R0b206IHJlY3QuYm90dG9tLFxuICAgICAgbGVmdDogcmVjdC5sZWZ0LFxuICAgICAgd2lkdGg6IHJlY3QucmlnaHQgLSByZWN0LmxlZnQsXG4gICAgICBoZWlnaHQ6IHJlY3QuYm90dG9tIC0gcmVjdC50b3BcbiAgICB9O1xuICB9XG4gIHJldHVybiByZWN0O1xufVxuXG5cbi8qKlxuICogUmV0dXJucyBhbiBlbXB0eSByZWN0IG9iamVjdC4gQW4gZW1wdHkgcmVjdCBpcyByZXR1cm5lZCB3aGVuIGFuIGVsZW1lbnRcbiAqIGlzIG5vdCBpbiB0aGUgRE9NLlxuICogQHJldHVybiB7T2JqZWN0fSBUaGUgZW1wdHkgcmVjdC5cbiAqL1xuZnVuY3Rpb24gZ2V0RW1wdHlSZWN0KCkge1xuICByZXR1cm4ge1xuICAgIHRvcDogMCxcbiAgICBib3R0b206IDAsXG4gICAgbGVmdDogMCxcbiAgICByaWdodDogMCxcbiAgICB3aWR0aDogMCxcbiAgICBoZWlnaHQ6IDBcbiAgfTtcbn1cblxuLyoqXG4gKiBDaGVja3MgdG8gc2VlIGlmIGEgcGFyZW50IGVsZW1lbnQgY29udGFpbnMgYSBjaGlsZCBlbGVtbnQgKGluY2x1ZGluZyBpbnNpZGVcbiAqIHNoYWRvdyBET00pLlxuICogQHBhcmFtIHtOb2RlfSBwYXJlbnQgVGhlIHBhcmVudCBlbGVtZW50LlxuICogQHBhcmFtIHtOb2RlfSBjaGlsZCBUaGUgY2hpbGQgZWxlbWVudC5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRydWUgaWYgdGhlIHBhcmVudCBub2RlIGNvbnRhaW5zIHRoZSBjaGlsZCBub2RlLlxuICovXG5mdW5jdGlvbiBjb250YWluc0RlZXAocGFyZW50LCBjaGlsZCkge1xuICB2YXIgbm9kZSA9IGNoaWxkO1xuICB3aGlsZSAobm9kZSkge1xuICAgIGlmIChub2RlID09IHBhcmVudCkgcmV0dXJuIHRydWU7XG5cbiAgICBub2RlID0gZ2V0UGFyZW50Tm9kZShub2RlKTtcbiAgfVxuICByZXR1cm4gZmFsc2U7XG59XG5cblxuLyoqXG4gKiBHZXRzIHRoZSBwYXJlbnQgbm9kZSBvZiBhbiBlbGVtZW50IG9yIGl0cyBob3N0IGVsZW1lbnQgaWYgdGhlIHBhcmVudCBub2RlXG4gKiBpcyBhIHNoYWRvdyByb290LlxuICogQHBhcmFtIHtOb2RlfSBub2RlIFRoZSBub2RlIHdob3NlIHBhcmVudCB0byBnZXQuXG4gKiBAcmV0dXJuIHtOb2RlfG51bGx9IFRoZSBwYXJlbnQgbm9kZSBvciBudWxsIGlmIG5vIHBhcmVudCBleGlzdHMuXG4gKi9cbmZ1bmN0aW9uIGdldFBhcmVudE5vZGUobm9kZSkge1xuICB2YXIgcGFyZW50ID0gbm9kZS5wYXJlbnROb2RlO1xuXG4gIGlmIChwYXJlbnQgJiYgcGFyZW50Lm5vZGVUeXBlID09IDExICYmIHBhcmVudC5ob3N0KSB7XG4gICAgLy8gSWYgdGhlIHBhcmVudCBpcyBhIHNoYWRvdyByb290LCByZXR1cm4gdGhlIGhvc3QgZWxlbWVudC5cbiAgICByZXR1cm4gcGFyZW50Lmhvc3Q7XG4gIH1cbiAgcmV0dXJuIHBhcmVudDtcbn1cblxuXG4vLyBFeHBvc2VzIHRoZSBjb25zdHJ1Y3RvcnMgZ2xvYmFsbHkuXG53aW5kb3cuSW50ZXJzZWN0aW9uT2JzZXJ2ZXIgPSBJbnRlcnNlY3Rpb25PYnNlcnZlcjtcbndpbmRvdy5JbnRlcnNlY3Rpb25PYnNlcnZlckVudHJ5ID0gSW50ZXJzZWN0aW9uT2JzZXJ2ZXJFbnRyeTtcblxufSh3aW5kb3csIGRvY3VtZW50KSk7XG4iLCIvKiEgbG96YWQuanMgLSB2MS4yLjAgLSAyMDE4LTAxLTIzXG4qIGh0dHBzOi8vZ2l0aHViLmNvbS9BcG9vcnZTYXhlbmEvbG96YWQuanNcbiogQ29weXJpZ2h0IChjKSAyMDE4IEFwb29ydiBTYXhlbmE7IExpY2Vuc2VkIE1JVCAqL1xuXG5cbihmdW5jdGlvbiAoZ2xvYmFsLCBmYWN0b3J5KSB7XG5cdHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgbW9kdWxlICE9PSAndW5kZWZpbmVkJyA/IG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSgpIDpcblx0dHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kID8gZGVmaW5lKGZhY3RvcnkpIDpcblx0KGdsb2JhbC5sb3phZCA9IGZhY3RvcnkoKSk7XG59KHRoaXMsIChmdW5jdGlvbiAoKSB7ICd1c2Ugc3RyaWN0JztcblxudmFyIF9leHRlbmRzID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbiAodGFyZ2V0KSB7IGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7IHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV07IGZvciAodmFyIGtleSBpbiBzb3VyY2UpIHsgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzb3VyY2UsIGtleSkpIHsgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTsgfSB9IH0gcmV0dXJuIHRhcmdldDsgfTtcblxuLyoqXG4gKiBEZXRlY3QgSUUgYnJvd3NlclxuICogQGNvbnN0IHtib29sZWFufVxuICogQHByaXZhdGVcbiAqL1xudmFyIGlzSUUgPSBkb2N1bWVudC5kb2N1bWVudE1vZGU7XG5cbnZhciBkZWZhdWx0Q29uZmlnID0ge1xuICByb290TWFyZ2luOiAnMHB4JyxcbiAgdGhyZXNob2xkOiAwLFxuICBsb2FkOiBmdW5jdGlvbiBsb2FkKGVsZW1lbnQpIHtcbiAgICBpZiAoZWxlbWVudC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpID09PSAncGljdHVyZScpIHtcbiAgICAgIHZhciBpbWcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKTtcbiAgICAgIGlmIChpc0lFICYmIGVsZW1lbnQuZ2V0QXR0cmlidXRlKCdkYXRhLWllc3JjJykpIHtcbiAgICAgICAgaW1nLnNyYyA9IGVsZW1lbnQuZ2V0QXR0cmlidXRlKCdkYXRhLWllc3JjJyk7XG4gICAgICB9XG4gICAgICBlbGVtZW50LmFwcGVuZENoaWxkKGltZyk7XG4gICAgfVxuICAgIGlmIChlbGVtZW50LmdldEF0dHJpYnV0ZSgnZGF0YS1zcmMnKSkge1xuICAgICAgZWxlbWVudC5zcmMgPSBlbGVtZW50LmdldEF0dHJpYnV0ZSgnZGF0YS1zcmMnKTtcbiAgICB9XG4gICAgaWYgKGVsZW1lbnQuZ2V0QXR0cmlidXRlKCdkYXRhLXNyY3NldCcpKSB7XG4gICAgICBlbGVtZW50LnNyY3NldCA9IGVsZW1lbnQuZ2V0QXR0cmlidXRlKCdkYXRhLXNyY3NldCcpO1xuICAgIH1cbiAgICBpZiAoZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2RhdGEtYmFja2dyb3VuZC1pbWFnZScpKSB7XG4gICAgICBlbGVtZW50LnN0eWxlLmJhY2tncm91bmRJbWFnZSA9ICd1cmwoJyArIGVsZW1lbnQuZ2V0QXR0cmlidXRlKCdkYXRhLWJhY2tncm91bmQtaW1hZ2UnKSArICcpJztcbiAgICB9XG4gIH1cbn07XG5cbmZ1bmN0aW9uIG1hcmtBc0xvYWRlZChlbGVtZW50KSB7XG4gIGVsZW1lbnQuc2V0QXR0cmlidXRlKCdkYXRhLWxvYWRlZCcsIHRydWUpO1xufVxuXG52YXIgaXNMb2FkZWQgPSBmdW5jdGlvbiBpc0xvYWRlZChlbGVtZW50KSB7XG4gIHJldHVybiBlbGVtZW50LmdldEF0dHJpYnV0ZSgnZGF0YS1sb2FkZWQnKSA9PT0gJ3RydWUnO1xufTtcblxudmFyIG9uSW50ZXJzZWN0aW9uID0gZnVuY3Rpb24gb25JbnRlcnNlY3Rpb24obG9hZCkge1xuICByZXR1cm4gZnVuY3Rpb24gKGVudHJpZXMsIG9ic2VydmVyKSB7XG4gICAgZW50cmllcy5mb3JFYWNoKGZ1bmN0aW9uIChlbnRyeSkge1xuICAgICAgaWYgKGVudHJ5LmludGVyc2VjdGlvblJhdGlvID4gMCkge1xuICAgICAgICBvYnNlcnZlci51bm9ic2VydmUoZW50cnkudGFyZ2V0KTtcblxuICAgICAgICBpZiAoIWlzTG9hZGVkKGVudHJ5LnRhcmdldCkpIHtcbiAgICAgICAgICBsb2FkKGVudHJ5LnRhcmdldCk7XG4gICAgICAgICAgbWFya0FzTG9hZGVkKGVudHJ5LnRhcmdldCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcbiAgfTtcbn07XG5cbnZhciBnZXRFbGVtZW50cyA9IGZ1bmN0aW9uIGdldEVsZW1lbnRzKHNlbGVjdG9yKSB7XG4gIGlmIChzZWxlY3RvciBpbnN0YW5jZW9mIEVsZW1lbnQpIHtcbiAgICByZXR1cm4gW3NlbGVjdG9yXTtcbiAgfVxuICBpZiAoc2VsZWN0b3IgaW5zdGFuY2VvZiBOb2RlTGlzdCkge1xuICAgIHJldHVybiBzZWxlY3RvcjtcbiAgfVxuICByZXR1cm4gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChzZWxlY3Rvcik7XG59O1xuXG52YXIgbG96YWQgPSBmdW5jdGlvbiAoKSB7XG4gIHZhciBzZWxlY3RvciA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDogJy5sb3phZCc7XG4gIHZhciBvcHRpb25zID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiB7fTtcblxuICB2YXIgX2RlZmF1bHRDb25maWckb3B0aW9uID0gX2V4dGVuZHMoe30sIGRlZmF1bHRDb25maWcsIG9wdGlvbnMpLFxuICAgICAgcm9vdE1hcmdpbiA9IF9kZWZhdWx0Q29uZmlnJG9wdGlvbi5yb290TWFyZ2luLFxuICAgICAgdGhyZXNob2xkID0gX2RlZmF1bHRDb25maWckb3B0aW9uLnRocmVzaG9sZCxcbiAgICAgIGxvYWQgPSBfZGVmYXVsdENvbmZpZyRvcHRpb24ubG9hZDtcblxuICB2YXIgb2JzZXJ2ZXIgPSB2b2lkIDA7XG5cbiAgaWYgKHdpbmRvdy5JbnRlcnNlY3Rpb25PYnNlcnZlcikge1xuICAgIG9ic2VydmVyID0gbmV3IEludGVyc2VjdGlvbk9ic2VydmVyKG9uSW50ZXJzZWN0aW9uKGxvYWQpLCB7XG4gICAgICByb290TWFyZ2luOiByb290TWFyZ2luLFxuICAgICAgdGhyZXNob2xkOiB0aHJlc2hvbGRcbiAgICB9KTtcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgb2JzZXJ2ZTogZnVuY3Rpb24gb2JzZXJ2ZSgpIHtcbiAgICAgIHZhciBlbGVtZW50cyA9IGdldEVsZW1lbnRzKHNlbGVjdG9yKTtcblxuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBlbGVtZW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgICBpZiAoaXNMb2FkZWQoZWxlbWVudHNbaV0pKSB7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG9ic2VydmVyKSB7XG4gICAgICAgICAgb2JzZXJ2ZXIub2JzZXJ2ZShlbGVtZW50c1tpXSk7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgbG9hZChlbGVtZW50c1tpXSk7XG4gICAgICAgIG1hcmtBc0xvYWRlZChlbGVtZW50c1tpXSk7XG4gICAgICB9XG4gICAgfSxcbiAgICB0cmlnZ2VyTG9hZDogZnVuY3Rpb24gdHJpZ2dlckxvYWQoZWxlbWVudCkge1xuICAgICAgaWYgKGlzTG9hZGVkKGVsZW1lbnQpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgbG9hZChlbGVtZW50KTtcbiAgICAgIG1hcmtBc0xvYWRlZChlbGVtZW50KTtcbiAgICB9XG4gIH07XG59O1xuXG5yZXR1cm4gbG96YWQ7XG5cbn0pKSk7XG4iLCIvKipcbiAqIE1pY3JvRXZlbnQgLSB0byBtYWtlIGFueSBqcyBvYmplY3QgYW4gZXZlbnQgZW1pdHRlciAoc2VydmVyIG9yIGJyb3dzZXIpXG4gKiBcbiAqIC0gcHVyZSBqYXZhc2NyaXB0IC0gc2VydmVyIGNvbXBhdGlibGUsIGJyb3dzZXIgY29tcGF0aWJsZVxuICogLSBkb250IHJlbHkgb24gdGhlIGJyb3dzZXIgZG9tc1xuICogLSBzdXBlciBzaW1wbGUgLSB5b3UgZ2V0IGl0IGltbWVkaWF0bHksIG5vIG1pc3RlcnksIG5vIG1hZ2ljIGludm9sdmVkXG4gKlxuICogLSBjcmVhdGUgYSBNaWNyb0V2ZW50RGVidWcgd2l0aCBnb29kaWVzIHRvIGRlYnVnXG4gKiAgIC0gbWFrZSBpdCBzYWZlciB0byB1c2VcbiovXG5cbnZhciBNaWNyb0V2ZW50XHQ9IGZ1bmN0aW9uKCl7fVxuTWljcm9FdmVudC5wcm90b3R5cGVcdD0ge1xuXHRiaW5kXHQ6IGZ1bmN0aW9uKGV2ZW50LCBmY3Qpe1xuXHRcdHRoaXMuX2V2ZW50cyA9IHRoaXMuX2V2ZW50cyB8fCB7fTtcblx0XHR0aGlzLl9ldmVudHNbZXZlbnRdID0gdGhpcy5fZXZlbnRzW2V2ZW50XVx0fHwgW107XG5cdFx0dGhpcy5fZXZlbnRzW2V2ZW50XS5wdXNoKGZjdCk7XG5cdH0sXG5cdHVuYmluZFx0OiBmdW5jdGlvbihldmVudCwgZmN0KXtcblx0XHR0aGlzLl9ldmVudHMgPSB0aGlzLl9ldmVudHMgfHwge307XG5cdFx0aWYoIGV2ZW50IGluIHRoaXMuX2V2ZW50cyA9PT0gZmFsc2UgIClcdHJldHVybjtcblx0XHR0aGlzLl9ldmVudHNbZXZlbnRdLnNwbGljZSh0aGlzLl9ldmVudHNbZXZlbnRdLmluZGV4T2YoZmN0KSwgMSk7XG5cdH0sXG5cdHRyaWdnZXJcdDogZnVuY3Rpb24oZXZlbnQgLyogLCBhcmdzLi4uICovKXtcblx0XHR0aGlzLl9ldmVudHMgPSB0aGlzLl9ldmVudHMgfHwge307XG5cdFx0aWYoIGV2ZW50IGluIHRoaXMuX2V2ZW50cyA9PT0gZmFsc2UgIClcdHJldHVybjtcblx0XHRmb3IodmFyIGkgPSAwOyBpIDwgdGhpcy5fZXZlbnRzW2V2ZW50XS5sZW5ndGg7IGkrKyl7XG5cdFx0XHR0aGlzLl9ldmVudHNbZXZlbnRdW2ldLmFwcGx5KHRoaXMsIEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMSkpXG5cdFx0fVxuXHR9XG59O1xuXG4vKipcbiAqIG1peGluIHdpbGwgZGVsZWdhdGUgYWxsIE1pY3JvRXZlbnQuanMgZnVuY3Rpb24gaW4gdGhlIGRlc3RpbmF0aW9uIG9iamVjdFxuICpcbiAqIC0gcmVxdWlyZSgnTWljcm9FdmVudCcpLm1peGluKEZvb2Jhcikgd2lsbCBtYWtlIEZvb2JhciBhYmxlIHRvIHVzZSBNaWNyb0V2ZW50XG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHRoZSBvYmplY3Qgd2hpY2ggd2lsbCBzdXBwb3J0IE1pY3JvRXZlbnRcbiovXG5NaWNyb0V2ZW50Lm1peGluXHQ9IGZ1bmN0aW9uKGRlc3RPYmplY3Qpe1xuXHR2YXIgcHJvcHNcdD0gWydiaW5kJywgJ3VuYmluZCcsICd0cmlnZ2VyJ107XG5cdGZvcih2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkgKyspe1xuXHRcdGRlc3RPYmplY3QucHJvdG90eXBlW3Byb3BzW2ldXVx0PSBNaWNyb0V2ZW50LnByb3RvdHlwZVtwcm9wc1tpXV07XG5cdH1cbn1cblxuLy8gZXhwb3J0IGluIGNvbW1vbiBqc1xuaWYoIHR5cGVvZiBtb2R1bGUgIT09IFwidW5kZWZpbmVkXCIgJiYgKCdleHBvcnRzJyBpbiBtb2R1bGUpKXtcblx0bW9kdWxlLmV4cG9ydHNcdD0gTWljcm9FdmVudFxufVxuIl19\n","util = require '../../util'\nSGN = require '../../core'\nschema = require '../../../graphql/incito.graphql'\n\nmodule.exports = class Bootstrapper\n    constructor: (@options = {}) ->\n        @deviceCategory = @getDeviceCategory()\n        @pixelRatio = @getPixelRatio()\n        @pointer = @getPointer()\n        @orientation = @getOrientation()\n        @maxWidth = @getMaxWidth()\n        @versionsSupported = ['1.0.0']\n\n        return\n    \n    getDeviceCategory: ->\n        util.getDeviceCategory()\n    \n    getPixelRatio: ->\n        window.devicePixelRatio || 1\n    \n    getPointer: ->\n        util.getPointer()\n    \n    getOrientation: ->\n        orientation = util.getOrientation window.innerWidth, window.innerHeight\n        orientation = 'horizontal' if orientation is 'quadratic'\n\n        orientation\n    \n    getMaxWidth: ->\n        @options.el.offsetWidth\n\n    fetch: (callback) ->\n        SGN.GraphKit.request\n            query: schema\n            operationName: 'GetIncitoPublication'\n            variables:\n                id: @options.id\n                deviceCategory: 'DEVICE_CATEGORY_' + @deviceCategory.toUpperCase()\n                pixelRatio: @pixelRatio\n                pointer: 'POINTER_' + @pointer.toUpperCase()\n                orientation: 'ORIENTATION_' + @orientation.toUpperCase()\n                maxWidth: @maxWidth\n                versionsSupported: @versionsSupported\n        , callback\n\n        return\n    \n    createViewer: (data) ->\n        if not data.incito?\n            throw util.error new Error(), 'you need to supply valid Incito to create a viewer'\n\n        viewer = new SGN.IncitoPublicationKit.Viewer @options.el,\n            id: @options.id\n            incito: data.incito\n            eventTracker: @options.eventTracker\n\n        viewer","SGN = require './sgn'\n\n# Expose storage backends.\nSGN.storage =\n    local: require './storage/client-local'\n    cookie: require './storage/client-cookie'\n\n# Expose request handler.\nSGN.request = require './request/browser'\n\n# Expose the different kits.\nSGN.AssetsKit = require './kits/assets'\nSGN.EventsKit = require './kits/events'\nSGN.GraphKit = require './kits/graph'\nSGN.CoreKit = require './kits/core'\nSGN.PagedPublicationKit = require './kits/paged-publication'\nSGN.IncitoPublicationKit = require './kits/incito-publication'\n\n# Set the core session from the cookie store if possible.\nsession = SGN.storage.cookie.get 'session'\n\nif typeof session is 'object'\n    SGN.config.set\n        coreSessionToken: session.token\n        coreSessionClientId: session.client_id\n\nSGN.client = do ->\n    id = SGN.storage.local.get 'client-id'\n    id = id?.data\n    firstOpen = not id?\n\n    if firstOpen\n        id = SGN.util.uuid()\n        \n        SGN.storage.local.set 'client-id', id\n\n    firstOpen: firstOpen\n    id: id\n\n# Listen for changes in the config.\nSGN.config.bind 'change', (changedAttributes) ->\n    eventTracker = changedAttributes.eventTracker\n\n    if eventTracker?\n        eventTracker.trackEvent 'first-client-session-opened', {}, '1.0.0' if SGN.client.firstOpen is true\n        eventTracker.trackEvent 'client-session-opened', {}, '1.0.0'\n\n    return\n\n# Autoconfigure the SDK.\nscriptEl = document.getElementById 'sgn-sdk'\n\nif scriptEl?\n    appKey = scriptEl.getAttribute 'data-app-key'\n    trackId = scriptEl.getAttribute 'data-track-id'\n    config = {}\n\n    config.appKey = appKey if appKey?\n    config.eventTracker = new SGN.EventsKit.Tracker(trackId: trackId) if trackId?\n\n    SGN.config.set config\n\nmodule.exports = SGN\n","module.exports =\n    Viewer: require './viewer'\n\n    Bootstrapper: require './bootstrapper'\n"],"names":["Config","MicroEvent","prototype","bind","event","fct","this","_events","push","unbind","splice","indexOf","trigger","i","length","apply","Array","slice","call","arguments","mixin","destObject","props","module","require$$0","attrs","changedAttributes","key","value","config","keys","option","Mustache","pairs","global","factory","mustache","objectToString","Object","toString","isArray","object","isFunction","escapeRegExp","string","replace","hasProperty","obj","propName","regExpTest","RegExp","test","nonSpaceRe","isWhitespace","re","testRegExp","entityMap","&","<",">","\"","'","/","`","=","whiteRe","spaceRe","equalsRe","curlyRe","tagRe","Scanner","tail","pos","Context","view","parentContext","cache",".","parent","Writer","eos","scan","match","index","substring","scanUntil","search","lookup","name","hasOwnProperty","names","context","lookupHit","split","clearCache","parse","template","tags","tokens","openingTagRe","closingTagRe","closingCurlyRe","sections","spaces","hasTag","nonSpace","stripSpace","pop","compileTags","tagsToCompile","Error","start","type","chr","token","openSection","scanner","valueLength","charAt","nestedTokens","collector","numTokens","nestTokens","lastToken","squashedTokens","squashTokens","parseTemplate","render","partials","renderTokens","originalTemplate","symbol","buffer","undefined","renderSection","renderInverted","renderPartial","unescapedValue","escapedValue","rawValue","self","j","escape","version","defaultWriter","TypeError","to_html","send","result","String","s","exports","nodeName","process","util","ref","translations","cachedSetTimeout","cachedClearTimeout","defaultSetTimout","defaultClearTimeout","runTimeout","fun","setTimeout","e","clearTimeout","currentQueue","queue","draining","queueIndex","cleanUpNextTick","concat","drainQueue","timeout","len","run","marker","runClearTimeout","Item","array","noop","nextTick","args","title","browser","env","argv","versions","on","addListener","once","off","removeListener","removeAllListeners","emit","prependListener","prependOnceListener","listeners","binding","cwd","chdir","dir","umask","isBrowser","err","options","message","code","stack","time","Date","c","r","Math","random","field","url","href","window","location","exec","queryParams","map","encodeURIComponent","join","from","to","floor","ua","navigator","userAgent","deviceCategory","platform","pointer","matchMedia","matches","width","height","density","logical","screen","round","jan1","now","tmp","getFullYear","toGMTString","lastIndexOf","getTimezoneOffset","color","hex","rgb","sum","x","parseInt","str","btoa","Buffer","arr","fn","item","size","results","deferTimer","last","threshold","scope","getTime","src","callback","img","Image","onload","onerror","lat1","lng1","lat2","lng2","dist","radlat1","radlat2","radtheta","theta","PI","sin","cos","acos","asyncCalls","sharedCallback","allResults","counter","k","makeCallback","require$$1","require$$2","set","SGN","storage","localStorage","prefixKey","JSON","stringify","ca","ct","isNode","document","cookie","trim","date","days","setTime","toUTCString","clientLocalStorage","getPool","pool","formData","progressCallback","get","file","contentType","request","data","error","statusCode","body","loaded","total","addEventListener","Pulse","Tracker","dispatching","session","uuid","client","trackId","id","application","identity","interval","setInterval","dispatch","dispatchInterval","properties","toISOString","getContext","getPoolSize","poolLimit","shift","ref1","determinedAt","timestamp","latitude","longitude","altitude","accuracy","horizontal","vertical","speed","build","path","previousPath","uri","campaign","loc","os","screenDimensions","getScreenDimensions","getOS","language","getUtcOffsetSeconds","getUtcDstOffsetSeconds","physical","getView","getQueryParam","referrer","forEach","personId","events","nacks","dryRun","dispatchLimit","ship","response","resEvent","status","filter","poolEvent","_this","http","payload","XMLHttpRequest","sentAt","open","setRequestHeader","responseText","defaultOptions","destroyed","connection","connect","close","WebSocket","onopen","onOpen","onmessage","onMessage","onError","onclose","onClose","parseCookies","parsedCookies","cookies","keyValuePair","appKey","authToken","query","operationName","variables","headers","Authorization","useCookies","authCookie","callbackQueue","clientCookieStorage","renewed","sha256","runs","CoreKit","ensure","appSecret","appVersion","clientId","geo","locale","qs","ref2","geolocation","sign","r_locale","api_av","client_id","r_lat","r_lng","r_radius","radius","r_sensor","sensor","method","ref3","responseToken","saveToken","globals","convertHex","bytesToHex","bytes","orig","arrBytesToHex","hexToBytes","convertString","bytesToString","fromCharCode","stringToBytes","charCodeAt","UTF8","decodeURIComponent","unescape","_imports","K","isPrime","n","sqrtN","sqrt","factor","getFractionalBits","nPrime","pow","bytesToWords","words","b","wordsToBytes","W","processBlock","H","M","offset","a","d","f","g","h","gamma0x","gamma0","gamma1x","gamma1","maj","sigma0","t1","constructor","m","l","digestbytes","asBytes","asString","x2","PagedPublicationPageSpread","PageSpread","PagedPublicationPageSpreads","PageSpreads","PagedPublicationCore","Verso","saveCookie","ttl","saveClientId","complete","queueCount","create","renew","t","o","u","require","1","_dereq_","_createClass","defineProperties","target","descriptor","enumerable","configurable","writable","defineProperty","Constructor","protoProps","staticProps","Animation","el","instance","_classCallCheck","duration","easing","ref4","scale","transform","_transitionEnd","y","style","removeEventListener","transition","2","visibility","positioned","active","pageIds","left","maxZoomScale","getMaxZoomScale","getEl","getAttribute","classList","contains","querySelectorAll","getBoundingClientRect","boundingClientRect","offsetLeft","offsetLeftDelta","offsetTop","offsetTopDelta","pageEl","pageRect","rect","top","right","bottom","getPageEls","display","getLeft","setAttribute","3","Hammer","el1","ref5","options1","swipeVelocity","swipeThreshold","navigationDuration","navigationPanDuration","zoomDuration","doubleTapDelay","position","pinching","panning","startTransform","tap","count","delay","scrollerEl","querySelector","pageSpreadEls","pageSpreads","traversePageSpreads","buildPageIds","animation","hammer","Manager","touchAction","enable","inputClass","getHammerInputClass","add","Pan","direction","DIRECTION_ALL","Tap","Pinch","Press","onPanStart","onPanMove","onPanEnd","onSingletap","onPinchStart","onPinchMove","onPinchEnd","onPress","onContextmenu","pageId","getPageSpreadPositionFromPageId","navigateTo","resizeListener","onResize","touchStartListener","onTouchStart","touchEndListener","onTouchEnd","destroy","getPosition","getPageSpreadCount","activePageSpread","carousel","currentPageSpread","currentPosition","velocity","getPageSpreadFromPosition","getCarouselFromPageSpread","abs","isScrollable","deactivate","activate","visible","pageSpread","setVisibility","getLeftTransformFromPageSpread","setPosition","newPosition","animate","getActivePageSpread","gone","previousPosition","getWidth","pageSpreadSubject","els","contentRect","info","len1","overlayEl","overlayEls","pageEls","contentX","contentY","pageX","pageY","isInsideContentX","isInsideContentY","isInsideContent","getContentRect","getOverlayEls","isCoordinateInsideElement","max","idx","pageSpreadContentRect","pageSpreadRect","getRect","coordinate","min","carouselOffset","carouselScaledOffset","curScale","pageSpreadBounds","getPageSpreadBounds","bounds","clipCoordinate","TouchInput","edgeThreshold","DIRECTION_LEFT","DIRECTION_RIGHT","center","offsetWidth","deltaX","deltaY","offsetHeight","overallVelocityX","offsetDirection","next","prev","isZoomable","zoomTo","_this2","getCoordinateInfo","preventDefault","clientX","clientY","coordinateInfo","zoomEvent","zoomedIn","_this3","./animation","./page_spread","hammerjs","microevent","4","exportName","assign","VENDOR_PREFIXES","TEST_ELEMENT","createElement","TYPE_FUNCTION","setTimeoutContext","bindFn","invokeArrayArg","arg","each","iterator","deprecate","deprecationMessage","log","console","warn","output","source","nextKey","extend","dest","merge","inherit","child","base","childP","baseP","_super","boolOrFn","val","ifUndefined","val1","val2","addEventListeners","types","handler","splitStr","removeEventListeners","hasParent","node","parentNode","inStr","find","inArray","findByKey","toArray","uniqueArray","sort","values","prefixed","property","prefix","prop","camelProp","toUpperCase","_uniqueId","getWindowForElement","element","doc","ownerDocument","defaultView","parentWindow","SUPPORT_TOUCH","SUPPORT_POINTER_EVENTS","SUPPORT_ONLY_TOUCH","COMPUTE_INTERVAL","INPUT_START","INPUT_MOVE","INPUT_END","INPUT_CANCEL","DIRECTION_NONE","DIRECTION_UP","DIRECTION_DOWN","DIRECTION_HORIZONTAL","DIRECTION_VERTICAL","PROPS_XY","PROPS_CLIENT_XY","Input","manager","inputTarget","domHandler","ev","init","inputHandler","eventType","input","pointersLen","pointers","changedPointersLen","changedPointers","isFirst","isFinal","pointersLength","firstInput","simpleCloneInputData","firstMultiple","offsetCenter","getCenter","timeStamp","deltaTime","angle","getAngle","distance","getDistance","offsetDelta","prevDelta","prevInput","computeDeltaXY","getDirection","end","overallVelocity","getVelocity","overallVelocityY","rotation","getRotation","maxPointers","velocityX","velocityY","lastInterval","v","computeIntervalInputData","srcEvent","computeInputData","recognize","p1","p2","atan2","evEl","evTarget","evWin","MOUSE_INPUT_MAP","mousedown","mousemove","mouseup","MOUSE_ELEMENT_EVENTS","MOUSE_WINDOW_EVENTS","MouseInput","pressed","button","which","pointerType","POINTER_INPUT_MAP","pointerdown","pointermove","pointerup","pointercancel","pointerout","IE10_POINTER_TYPE_ENUM","5","POINTER_ELEMENT_EVENTS","POINTER_WINDOW_EVENTS","PointerEventInput","store","pointerEvents","MSPointerEvent","PointerEvent","removePointer","eventTypeNormalized","toLowerCase","isTouch","storeIndex","pointerId","SINGLE_TOUCH_INPUT_MAP","touchstart","touchmove","touchend","touchcancel","SINGLE_TOUCH_TARGET_EVENTS","SINGLE_TOUCH_WINDOW_EVENTS","SingleTouchInput","started","touches","all","changed","changedTouches","TOUCH_INPUT_MAP","TOUCH_TARGET_EVENTS","targetIds","allTouches","identifier","targetTouches","changedTargetTouches","touch","DEDUP_TIMEOUT","DEDUP_DISTANCE","TouchMouseInput","mouse","primaryTouch","lastTouches","setLastTouch","eventData","lastTouch","lts","inputEvent","inputData","isMouse","sourceCapabilities","firesTouchEvents","dx","dy","PREFIXED_TOUCH_ACTION","NATIVE_TOUCH_ACTION","TOUCH_ACTION_AUTO","TOUCH_ACTION_MANIPULATION","TOUCH_ACTION_NONE","TOUCH_ACTION_PAN_X","TOUCH_ACTION_PAN_Y","TOUCH_ACTION_MAP","touchMap","cssSupports","CSS","supports","getTouchActionProps","TouchAction","compute","actions","update","recognizers","recognizer","getTouchAction","hasPanX","hasPanY","cleanTouchActions","preventDefaults","prevented","hasNone","isTapPointer","isTapMovement","isTapTouchTime","preventSrc","STATE_POSSIBLE","STATE_BEGAN","STATE_CHANGED","STATE_ENDED","STATE_RECOGNIZED","STATE_CANCELLED","Recognizer","defaults","state","simultaneous","requireFail","stateStr","directionStr","getRecognizerByNameIfManager","otherRecognizer","AttrRecognizer","PanRecognizer","pX","pY","PinchRecognizer","PressRecognizer","_timer","_input","RotateRecognizer","SwipeRecognizer","TapRecognizer","pTime","pCenter","preset","handlers","oldCssProps","toggleCssProps","recognizeWith","requireFailure","cssProps","dropRecognizeWith","dropRequireFailure","hasRequireFailures","canRecognizeWith","additionalEvent","tryEmit","canEmit","inputDataClone","reset","attrTest","optionPointers","isRecognized","isValid","directionTest","hasMoved","inOut","validPointers","validMovement","validTime","taps","posThreshold","validTouchTime","failTimeout","validInterval","validMultiTap","tapCount","VERSION","domEvents","userSelect","touchSelect","touchCallout","contentZooming","userDrag","tapHighlightColor","stop","force","stopped","curRecognizer","existing","remove","gestureEvent","createEvent","initEvent","gesture","dispatchEvent","triggerDomEvent","STATE_FAILED","Swipe","Rotate","freeGlobal","contentsRendered","hotspotsRendered","renderEl","pages","getPages","page","className","getId","imageLoads","pageCount","image","loaderEl","images","medium","appendChild","innerHTML","label","loadImage","isComplete","backgroundImage","versoPageSpread","large","removeAttribute","collection","ids","frag","createDocumentFragment","firstPage","lastPage","midstPageSpreads","pageMode","chunk","midstPages","require$$4","makeOptions","getOption","getPageMode","pageLoaded","pagesLoaded","setColor","insertBefore","getFrag","verso","createVerso","getVerso","visibilityChangeListener","visibilityChange","throttle","resize","unloadListener","unload","root","focus","pageSpreadEl","backgroundColor","removeChild","opts","getColorBrightness","overridePageSpreadContentRect","beforeNavigation","afterNavigation","attemptedNavigation","clicked","doubleClicked","contextmenu","panStart","panEnd","zoomedOut","actualHeight","actualWidth","clientRect","imageRatio","pageHeight","pageWidth","pageLabels","getVisibility","renderContents","clearContents","newSpreadEl","pageSpreadCount","progress","progressLabel","theVerso","formatProgressLabel","renderPageSpreads","resetIdleTimer","startIdleTimer","findPage","zoomIn","zoomOut","idleTimeout","getPageIds","refresh","getType","eventName","hidden","switchPageMode","PagedPublicationHotspots","currentPageSpreadId","pageSpreadsLoaded","hotspotsReceived","resized","boundingRect","hotspot","hotspotEl","hotspotEls","ratio","renderHotspot","maxX","maxY","minX","minY","pageNumber","pageNumbers","locations","coords","pageSpreadId","setCache","renderHotspots","requestHotspots","getCache","PagedPublicationControls","keyCodes","keyDownListener","keyDown","keyboard","prevControl","prevClicked","nextControl","nextClicked","closeClicked","showProgress","progressBar","textContent","keyCode","ARROW_LEFT","ARROW_RIGHT","SPACE","NUMBER_ONE","PagedPublicationEventTracking","Controls","Core","EventTracking","Hotspots","Viewer","appeared","disappeared","pageSpreadDisappeared","trackEvent","pageSpreadAppeared","trackPageClicked","trackPageHotspotsClicked","trackPageDoubleClicked","trackPageLongPressed","trackPageSpreadZoomedIn","trackPageSpreadZoomedOut","trackPageSpreadAppeared","trackPageSpreadDisappeared","require$$3","_core","pageSpreadWidth","pageSpreadMaxZoomScale","idleDelay","resizeDelay","_hotspots","_controls","_eventTracking","viewSession","hotspots","hotspotQueue","hotspotPicker","_setupEventListeners","trackOpened","navigateToIndex","first","eventTracker","ownedBy","_trackEvent","hotspotsRequested","offer","heading","pricing","currency","price","PagedPublicationKit","HotspotPicker","hotspotRequest","hotspotRatio","processHotspotQueue","getSelectedHotspot","Gator","PagedPublicationHotspotPicker","_matcher","_level","_id","_handlers","_gatorInstances","_matchesSelector","selector","boundElement","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector","matchesSelector","_getMatcher","_addHandler","gator","_removeHandler","_bind","addEvent","_getGlobalCallback","srcElement","matchesEvent","stopPropagation","cancelBubble","cancel","_handleEvent","useCapture","header","parentHeight","parentWidth","popoverEl","keyUp","ESC","Incito","details","dealer_id","branding","pageflip","dimensions","transformPages","zoom","viewer","applyHotspots","async","parallel","fetchDetails","fetchPages","AbsoluteLayout","FlexLayout","FragView","ImageView","LinearLayout","TextView","VideoEmbedView","View","lozad","vent","incito","loadFonts","font_assets","applyTheme","theme","root_view","debug","lazyload","rootMargin","observe","viewEl","viewName","view_name","child_views","childView","childEl","font_family","fontFamily","line_spacing_multiplier","lineHeight","font","styleEl","text","urls","fontAssets","FontFace","weight","fonts","load","createTextNode","head","./vent","./views/absolute-layout","./views/flex-layout","./views/frag","./views/image","./views/linear-layout","./views/text","./views/video-embed","./views/view","intersection-observer","utils","escapeHTML","unsafe","formatUnit","unit","Vent","_View","ReferenceError","_possibleConstructorReturn","__proto__","getPrototypeOf","subClass","superClass","setPrototypeOf","_inherits","./view","layout_flex_align_items","alignItems","layout_flex_align_content","alignContent","layout_flex_justify_content","justifyContent","layout_flex_direction","flexDirection","6","7","tagName","8","9","parsedText","textStyles","text_style","parseSpans","spans","escapedText","span","text_prevent_widow","text_size","fontSize","text_color","fontWeight","fontStyle","text_alignment","textAlign","font_stretch","fontStretch","single_line","endIndex","startIndex","../utils","10","allowedHostnames","iframeEl","linkEl","video_width","video_height","hostname","paddingTop","11","setAttributes","initialize","dropShadowBlurRadius","dropShadowColor","dropShadowLeft","dropShadowTop","dropShadowValues","strokeStyles","transforms","role","accessibility_label","gravity","link","onclick","on_click","layout_width","layout_height","min_width","minWidth","max_width","maxWidth","min_height","minHeight","max_height","maxHeight","layout_top","layout_left","layout_right","layout_bottom","background_color","background_image","background_tile_mode","backgroundRepeat","background_image_position","backgroundPosition","background_image_scale_type","backgroundSize","drop_shadow","blur_radius","layout_margin","margin","layout_margin_top","marginTop","layout_margin_left","marginLeft","layout_margin_right","marginRight","layout_margin_bottom","marginBottom","padding","padding_top","padding_left","paddingLeft","padding_right","paddingRight","padding_bottom","paddingBottom","corner_radius","borderRadius","corner_top_left_radius","borderTopLeftRadius","corner_top_right_radius","borderTopRightRadius","corner_bottom_left_radius","borderBottomLeftRadius","corner_bottom_right_radius","borderBottomRightRadius","clip_children","overflow","stroke_width","borderWidth","stroke_color","borderColor","stroke_style","borderStyle","stroke_top_width","borderTopWidth","stroke_top_color","borderTopColor","stroke_top_style","borderTopStyle","stroke_left_width","borderLeftWidth","stroke_left_color","borderLeftColor","stroke_left_style","borderLeftStyle","stroke_right_width","borderRightWidth","stroke_right_color","borderRightColor","stroke_right_style","borderRightStyle","stroke_bottom_width","borderBottomWidth","stroke_bottom_color","borderBottomColor","stroke_bottom_style","borderBottomStyle","layout_flex_shrink","flexShrink","layout_flex_grow","flexGrow","layout_flex_basis","flexBasis","getTransforms","transform_origin","transformOrigin","translateX","translateY","transform_translate_x","transform_translate_y","transform_rotate","transform_scale","../vent","12","IntersectionObserverEntry","intersectionRatio","registry","IntersectionObserver","THROTTLE_TIMEOUT","POLL_INTERVAL","USE_MUTATION_OBSERVER","isTargetAlreadyObserved","_observationTargets","some","nodeType","_registerInstance","entry","_monitorIntersections","_checkForIntersections","unobserve","_unmonitorIntersections","_unregisterInstance","disconnect","takeRecords","records","_queuedEntries","_initThresholds","opt_threshold","isNaN","_parseRootMargin","opt_rootMargin","marginString","margins","parts","parseFloat","_monitoringIntersections","_monitoringInterval","_domObserver","MutationObserver","attributes","childList","characterData","subtree","clearInterval","removeEvent","rootIsInDom","_rootIsInDom","rootRect","_getRootRect","targetRect","rootContainsTarget","_rootContainsTarget","oldEntry","intersectionRect","_computeTargetAndRootIntersection","newEntry","performance","rootBounds","_hasCrossedThreshold","isIntersecting","_callback","getComputedStyle","rect1","rect2","getParentNode","atRoot","parentRect","parentComputedStyle","documentElement","html","clientWidth","clientHeight","_expandRectByRootMargin","_rootMarginValues","newRect","oldRatio","newRatio","thresholds","containsDeep","targetArea","intersectionArea","opt_options","timer","opt_useCapture","attachEvent","detatchEvent","host","13","_extends","isIE","documentMode","defaultConfig","srcset","markAsLoaded","isLoaded","_defaultConfig$option","observer","entries","onIntersection","elements","Element","NodeList","getElements","triggerLoad","14","schema","scriptEl","firstOpen","getDeviceCategory","pixelRatio","getPixelRatio","getPointer","orientation","getOrientation","getMaxWidth","versionsSupported","devicePixelRatio","innerWidth","innerHeight","GraphKit","IncitoPublicationKit","formatQueryParams","withCredentials","json","getAllResponseHeaders","reduce","acc","current","lengthComputable","FormData","append","AssetsKit","EventsKit","require$$5","require$$6","require$$7","require$$8","require$$9","local","getElementById"],"mappings":"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"}